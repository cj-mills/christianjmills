<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Christian Mills</title>
<link>https://christianjmills.com/blog.html</link>
<atom:link href="https://christianjmills.com/blog.xml" rel="self" type="application/rss+xml"/>
<description>This is Christian Mills&#39; personal Blog.</description>
<image>
<url>https://christianjmills.com/images/logo.png</url>
<title>Christian Mills</title>
<link>https://christianjmills.com/blog.html</link>
<height>144</height>
<width>144</width>
</image>
<generator>quarto-1.4.555</generator>
<lastBuildDate>Tue, 27 Aug 2024 07:00:00 GMT</lastBuildDate>
<item>
  <title>The Kill Chain Book Notes</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/the-kill-chain-book-notes/</link>
  <description><![CDATA[ 




<ul>
<li>Introduction<br>
</li>
<li>Chapter 1: What Happened to Yoda’s Revolution?<br>
</li>
<li>Chapter 2: Little Green Men and Assassin’s Mace<br>
</li>
<li>Chapter 3: A Tale of Two Cities<br>
</li>
<li>Chapter 4: Information Revolution 2.0<br>
</li>
<li>Chapter 5. Something Worse Than Change<br>
</li>
<li>Chapter 6: A Different Kind of Arms Race<br>
</li>
<li>Chapter 7: Human Command, Machine Control<br>
</li>
<li>Chapter 8: A Military Internet of Things<br>
</li>
<li>Chapter 9: Move, Shoot, Communicate<br>
</li>
<li>Chapter 10: Defense Without Dominance<br>
</li>
<li>Chapter 11: Bureaucracy Does Its Thing<br>
</li>
<li>Chapter 12: How the Future Can Win<br>
</li>
<li>Conclusion: A Failure of Imagination</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Book LInks:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="https://www.hachettebookgroup.com/titles/christian-brose/the-kill-chain/9780316533362/">Publisher Page</a></li>
<li><a href="https://www.linkedin.com/in/christian-brose-50b026ab/">Author’s LinkedIn Page</a></li>
</ul>
</div>
</div>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<section id="playing-a-losing-game" class="level3">
<h3 class="anchored" data-anchor-id="playing-a-losing-game">Playing a Losing Game</h3>
<ul>
<li><p>This book argues that the U.S. military is on a path to lose a future war against China, and that this trajectory must be changed.</p></li>
<li><p>The author, Christian Brose, draws on his extensive experience as a national security and military advisor, most notably serving as staff director for Senator John McCain on the Senate Armed Services Committee.</p></li>
<li><p>This role provided Brose with access to classified information, top defense officials, and insights into the concerning reality of the U.S. military’s eroding advantage over China.</p></li>
</ul>
<section id="a-stark-warning-ignored" class="level4">
<h4 class="anchored" data-anchor-id="a-stark-warning-ignored">A Stark Warning Ignored</h4>
<ul>
<li>In 2017, Brose witnessed Senator McCain’s attempt to warn his Senate colleagues about the U.S. military’s vulnerabilities against China.
<ul>
<li>McCain, troubled by the military’s lagging technological advancement, organized a classified briefing for all 100 senators.</li>
<li>The briefing, based on concerning war game simulations, revealed a bleak outlook: the U.S. consistently lost in simulated conflicts with China.</li>
<li>Despite the gravity of the situation, only a dozen senators attended.</li>
</ul></li>
</ul>
</section>
<section id="a-grim-assessment-of-u.s.-capabilities" class="level4">
<h4 class="anchored" data-anchor-id="a-grim-assessment-of-u.s.-capabilities">A Grim Assessment of U.S. Capabilities</h4>
<ul>
<li><strong>David Ochmanek</strong>, a former Pentagon official, has conducted extensive war game simulations for the Department of Defense, revealing a disturbing pattern:
<ul>
<li><strong>War Game Outcomes:</strong> The U.S. military consistently loses against China and Russia in these simulations, suffering heavy casualties and equipment losses while failing to achieve objectives.</li>
<li><strong>A Shocking Reality:</strong> This finding contradicts the prevailing assumption of U.S. military dominance, leaving many within the defense establishment in disbelief.</li>
</ul></li>
<li><strong>A Consistent Pattern of Defeat:</strong> War game simulations over the past decade consistently show the U.S. losing against China.
<ul>
<li><strong>A Well-Kept Secret:</strong> This information remains largely unknown to the American public and even many members of Congress, despite being acknowledged within the Department of Defense.</li>
</ul></li>
</ul>
</section>
<section id="a-conversation-with-senator-mccain-imagining-a-war-with-china" class="level4">
<h4 class="anchored" data-anchor-id="a-conversation-with-senator-mccain-imagining-a-war-with-china">A Conversation with Senator McCain: Imagining a War with China</h4>
<ul>
<li>Following the poorly attended Senate briefing, Brose and Senator McCain engaged in a sobering thought experiment: imagining a potential war with China.
<ul>
<li>They agreed that the U.S. would not instigate a conflict, but acknowledged potential triggers such as:
<ul>
<li>A maritime incident escalating into conflict.</li>
<li>A Chinese attack on a U.S. ally prompting American intervention.</li>
</ul></li>
<li>They envisioned a scenario where the U.S. would face significant challenges in mobilizing and deploying forces.</li>
</ul></li>
</ul>
</section>
<section id="a-potential-war-with-china-key-vulnerabilities-and-challenges" class="level4">
<h4 class="anchored" data-anchor-id="a-potential-war-with-china-key-vulnerabilities-and-challenges">A Potential War With China: Key Vulnerabilities and Challenges</h4>
<ul>
<li><strong>Geographical Disadvantages and Logistical Nightmares:</strong>
<ul>
<li>Much of the U.S. military’s necessary equipment and personnel would be positioned thousands of miles away from the conflict zone.</li>
<li>Mobilization efforts would be hampered by cyberattacks and attacks on vulnerable supply lines, including cargo ships and aircraft.</li>
</ul></li>
<li><strong>Space and Cyber Warfare Dominance by China:</strong>
<ul>
<li>China would leverage its capabilities to target U.S. satellites, disrupting critical intelligence, communication, and GPS systems.</li>
<li>Command and control networks would be crippled by electronic, cyber, and missile attacks, leaving U.S. forces in disarray.</li>
</ul></li>
<li><strong>Vulnerability of Forward Bases and Critical Infrastructure:</strong>
<ul>
<li>U.S. bases in Japan and Guam would be overwhelmed by barrages of Chinese ballistic and cruise missiles.</li>
<li>China’s hypersonic weapons, capable of maneuvering at high speeds, would render existing U.S. defenses useless.</li>
<li>Runways, operation centers, and fuel depots would be targeted, crippling U.S. operations and forcing evacuations.</li>
</ul></li>
<li><strong>Limitations of Air and Sea Power:</strong>
<ul>
<li>Older, non-stealthy fighter jets (F-15s, F-16s, F-18s) would be ineffective against China’s advanced air defenses.</li>
<li>Limited numbers of stealthy fighter jets (F-22s, F-35s) would be hampered by their short range and dependence on vulnerable aerial refueling tankers.</li>
<li>U.S. aircraft carriers would be forced to operate far from Chinese shores to avoid anti-ship missiles, limiting their effectiveness and making them vulnerable to attack.</li>
<li>China’s “carrier killer” missiles (DF-21 and DF-26) would pose a significant threat, potentially sinking carriers and causing massive casualties.</li>
</ul></li>
<li><strong>Challenges for the Marine Corps and Amphibious Operations:</strong>
<ul>
<li>The Marine Corps’ amphibious assault capabilities, designed for beach landings, would be largely ineffective against heavily defended Chinese territory.</li>
<li>The need to operate within range of Chinese missiles would severely restrict their ability to conduct traditional amphibious operations.</li>
</ul></li>
<li><strong>Logistical Constraints and Depletion of Critical Assets:</strong>
<ul>
<li>Key U.S. assets (submarines, long-range bombers, ground-launched missiles) would need to be relocated to the Pacific, taking crucial time.</li>
<li>Years of underinvestment and acquisition delays would result in a shortage of these assets and a rapid depletion of essential weapons.</li>
</ul></li>
</ul>
</section>
<section id="a-sobering-realization-facing-the-consequences" class="level4">
<h4 class="anchored" data-anchor-id="a-sobering-realization-facing-the-consequences">A Sobering Realization: Facing the Consequences</h4>
<ul>
<li><p><strong>Devastation and Defeat:</strong> Brose and McCain contemplated the potential human and material costs of such a war, including thousands of American casualties, sunken ships, destroyed bases, and a swift defeat.</p></li>
<li><p><strong>Unthinkable Choices:</strong> The potential for such a rapid and devastating loss would present a U.S. president with limited options, potentially including surrender or a futile fight.</p></li>
<li><p><strong>China’s Strategic Advantage:</strong> This outcome would fulfill China’s strategic objective of achieving victory without engaging in protracted warfare, as outlined in Sun Tzu’s “The Art of War.”</p></li>
</ul>
</section>
<section id="a-legacy-of-neglect-failing-to-address-the-challenge" class="level4">
<h4 class="anchored" data-anchor-id="a-legacy-of-neglect-failing-to-address-the-challenge">A Legacy of Neglect: Failing to Address the Challenge</h4>
<ul>
<li>McCain expressed frustration and disappointment that despite past warnings and efforts to address military weaknesses, the U.S. found itself in a precarious position.
<ul>
<li>The 1980s revelation of a “hollow force” sparked outrage and action, yet the current crisis, despite being more dire, had not elicited a similar response.</li>
<li>McCain lamented the lack of awareness and urgency among both the public and elected officials, fearing future generations would judge them harshly for their inaction.</li>
</ul></li>
</ul>
</section>
</section>
<section id="the-illusion-of-american-military-supremacy-mistaking-inputs-for-outcomes" class="level3">
<h3 class="anchored" data-anchor-id="the-illusion-of-american-military-supremacy-mistaking-inputs-for-outcomes">The Illusion of American Military Supremacy: Mistaking Inputs for Outcomes</h3>
<ul>
<li>Despite spending more on defense than any other country, the U.S. military faces an existential crisis, challenging the prevailing notion of its invincibility.
<ul>
<li>This discrepancy between spending and effectiveness highlights a fundamental flaw in how the U.S. approaches national defense.</li>
</ul></li>
<li><strong>The Problem with Platforms:</strong>
<ul>
<li>The U.S. military’s traditional focus on platforms (e.g., ships, planes, tanks) as the primary measure of strength is misguided.</li>
<li>Platforms are seen as tangible symbols of military might, influencing budgets, capabilities, and even institutional identity.</li>
</ul></li>
<li><strong>The Importance of the Kill Chain:</strong>
<ul>
<li><strong>Defining the Kill Chain:</strong>
<ul>
<li>The kill chain is the essential process by which militaries achieve their objectives, involving three key steps:
<ul>
<li><strong>Understanding:</strong> Gathering information about the battlespace and the enemy.</li>
<li><strong>Deciding:</strong> Analyzing information and making strategic and tactical decisions.</li>
<li><strong>Acting:</strong> Executing decisions to achieve desired effects, which may or may not involve lethal force.</li>
</ul></li>
</ul></li>
<li><strong>Closing and Breaking the Kill Chain:</strong>
<ul>
<li><strong>Closing the Kill Chain:</strong> Successfully completing the understand-decide-act cycle to achieve a military objective.</li>
<li><strong>Breaking the Kill Chain:</strong> Disrupting an adversary’s ability to complete the kill chain, neutralizing their effectiveness.</li>
</ul></li>
<li><strong>A Universal Concept:</strong>
<ul>
<li>The kill chain is not unique to the military; it mirrors processes used in business, sports, and everyday life.</li>
<li>This framework highlights that while the military operates in a unique and high-stakes environment, its core functions are relatable and understandable.</li>
</ul></li>
</ul></li>
<li><strong>The Information Revolution and Its Unfulfilled Promise:</strong>
<ul>
<li>The information revolution of the 1980s promised to revolutionize warfare by enabling networked warfare and the disaggregation of the kill chain across multiple platforms.</li>
<li>However, the U.S. defense establishment failed to fully embrace this transformation, clinging to its platform-centric approach.</li>
</ul></li>
<li><strong>The Failure to Adapt:</strong>
<ul>
<li>Despite advancements in information technology, the U.S. military’s kill chain remains slow, inflexible, and reliant on outdated systems.</li>
<li>Military platforms often lack interoperability, hindering their ability to share information and function as a cohesive network.</li>
</ul></li>
<li><strong>The Legacy of Failed Modernization:</strong>
<ul>
<li>Previous attempts to modernize the military often focused on developing better versions of existing platforms using unproven technologies, resulting in costly procurement failures.</li>
<li>The U.S. military’s current predicament is partly a result of learning the wrong lessons from these failures, leading to risk aversion and a reluctance to embrace truly transformative change.</li>
</ul></li>
</ul>
</section>
<section id="the-china-challenge-a-new-era-of-competition" class="level3">
<h3 class="anchored" data-anchor-id="the-china-challenge-a-new-era-of-competition">The China Challenge: A New Era of Competition</h3>
<ul>
<li><strong>A Rapidly Evolving Threat:</strong>
<ul>
<li>The information revolution is accelerating, driven by commercial technology companies, and these advancements have significant military applications.</li>
<li>China, capitalizing on these emerging technologies, poses a rapidly growing and evolving threat to U.S. military dominance.</li>
</ul></li>
<li><strong>China’s Strategic Approach:</strong>
<ul>
<li>China has meticulously studied the U.S. military, identifying its weaknesses and developing strategies to exploit them.</li>
<li>Instead of directly confronting U.S. strengths, China aims to deny the U.S. military the ability to project power and fight in its preferred manner.</li>
</ul></li>
<li><strong>Asymmetric Warfare and Technological Leapfrogging:</strong>
<ul>
<li>China has invested heavily in advanced weapons designed to disrupt U.S. battle networks, destroy expensive platforms, and break the kill chain.</li>
<li>This approach prioritizes achieving a decisive advantage through technological superiority and asymmetric capabilities.</li>
</ul></li>
<li><strong>The Rise of China: Economic and Military Power:</strong>
<ul>
<li>China’s economic growth fuels its military ambitions, potentially enabling it to match or surpass U.S. military spending within a decade.</li>
<li>This shift in the balance of power poses an unprecedented challenge, demanding a fundamental reassessment of U.S. defense strategy.</li>
</ul></li>
<li><strong>China’s Grand Strategy:</strong>
<ul>
<li>China’s ambitions extend beyond regional dominance to becoming the world’s leading power, supplanting the United States.</li>
<li>This strategy entails undermining U.S. influence globally, eroding its alliances, and promoting China’s model of authoritarianism.</li>
</ul></li>
<li><strong>Exploiting Emerging Technologies:</strong>
<ul>
<li>China recognizes the transformative potential of emerging technologies and is investing heavily in artificial intelligence, biotechnology, robotics, and other fields.</li>
<li>These technologies are not only being used to enhance its military but also to strengthen its authoritarian control domestically.</li>
</ul></li>
<li><strong>A Looming Crisis for the U.S. Military:</strong>
<ul>
<li>The U.S. military’s current trajectory puts it at a severe disadvantage against China’s asymmetric capabilities.</li>
<li>Continuing to invest in the same platforms and approaches will only exacerbate this vulnerability, playing into China’s hands.</li>
</ul></li>
</ul>
</section>
<section id="the-need-for-transformation-reimagining-american-military-power" class="level3">
<h3 class="anchored" data-anchor-id="the-need-for-transformation-reimagining-american-military-power">The Need for Transformation: Reimagining American Military Power</h3>
<ul>
<li><strong>Recognizing the Urgency:</strong>
<ul>
<li>The U.S. defense establishment must acknowledge the severity of the situation and the need for radical change.</li>
<li>Complacency and clinging to outdated paradigms will result in catastrophic consequences for U.S. security and global standing.</li>
</ul></li>
<li><strong>Shifting from Inputs to Outcomes:</strong>
<ul>
<li>The focus should shift from simply acquiring platforms to building a more effective kill chain.</li>
<li>This requires prioritizing technologies and capabilities that enhance the U.S. military’s ability to understand, decide, and act faster and more effectively than its competitors.</li>
</ul></li>
<li><strong>From Platforms to Networks:</strong>
<ul>
<li>Instead of relying on small numbers of expensive and vulnerable platforms, the U.S. military must adopt a more networked and distributed approach.</li>
<li>This entails investing in:
<ul>
<li><strong>Interoperable Systems:</strong> Enabling seamless communication and data sharing between platforms.</li>
<li><strong>Resilient Networks:</strong> Developing robust networks that can withstand attacks and disruptions.</li>
<li><strong>Artificial Intelligence:</strong> Leveraging AI for faster and more effective decision-making.</li>
</ul></li>
</ul></li>
<li><strong>From Offensive to Defensive:</strong>
<ul>
<li>The U.S. military must prioritize defensive capabilities that deter Chinese aggression and protect critical assets.</li>
<li>This includes:
<ul>
<li>Strengthening base defenses against missile attacks.</li>
<li>Developing more effective counter-space and cyber capabilities.</li>
<li>Investing in technologies that make U.S. platforms less vulnerable to detection and attack.</li>
</ul></li>
</ul></li>
<li><strong>Embracing Autonomy and Unmanned Systems:</strong>
<ul>
<li>The U.S. military should accelerate the development and deployment of autonomous and unmanned systems.</li>
<li>This shift would:
<ul>
<li>Reduce reliance on vulnerable manned platforms.</li>
<li>Increase the speed and tempo of operations.</li>
<li>Enable the U.S. military to operate more effectively in contested environments.</li>
</ul></li>
</ul></li>
<li><strong>Rethinking Force Structure:</strong>
<ul>
<li>The U.S. military must move away from its traditional force structure of large, heavily manned platforms.</li>
<li>Instead, it should prioritize:
<ul>
<li>Smaller, more agile, and expendable platforms.</li>
<li>A greater emphasis on unmanned and autonomous systems.</li>
<li>A force that is designed for distributed and networked warfare.</li>
</ul></li>
</ul></li>
<li><strong>Overcoming Institutional Inertia:</strong>
<ul>
<li>The biggest obstacle to transformation is not a lack of resources or technology but a lack of imagination and institutional inertia.</li>
<li>Overcoming this will require:
<ul>
<li>Strong leadership willing to challenge the status quo.</li>
<li>A cultural shift that embraces innovation and change.</li>
<li>A willingness to take risks and accept that failure is part of the innovation process.</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="conclusion-a-call-to-action" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-a-call-to-action">Conclusion: A Call to Action</h3>
<ul>
<li><strong>The Stakes:</strong>
<ul>
<li>The future of American security and global leadership hangs in the balance.</li>
<li>Failure to adapt to the changing character of warfare will have dire consequences for the U.S. and its allies.</li>
</ul></li>
<li><strong>The Path Forward:</strong>
<ul>
<li>The U.S. must embrace bold and transformative change to maintain its military edge.</li>
<li>This requires a fundamental rethinking of defense strategy, force structure, and acquisition processes.</li>
</ul></li>
<li><strong>The Role of Informed Citizenry:</strong>
<ul>
<li>An informed and engaged citizenry is essential for driving the necessary changes in U.S. national defense.</li>
<li>This book aims to educate the public about the challenges and opportunities presented by emerging technologies and the future of warfare, encouraging a national conversation about the best way to defend America in the 21st century.</li>
</ul></li>
</ul>
</section>
</section>
<section id="chapter-1-what-happened-to-yodas-revolution" class="level2">
<h2 class="anchored" data-anchor-id="chapter-1-what-happened-to-yodas-revolution">Chapter 1: What Happened to Yoda’s Revolution?</h2>
<section id="the-dawn-of-a-new-era-and-the-seeds-of-complacency-1991-2001" class="level3">
<h3 class="anchored" data-anchor-id="the-dawn-of-a-new-era-and-the-seeds-of-complacency-1991-2001">The Dawn of a New Era and the Seeds of Complacency (1991-2001)</h3>
<section id="a-visionarys-warning-andrew-marshall-and-the-future-of-war" class="level4">
<h4 class="anchored" data-anchor-id="a-visionarys-warning-andrew-marshall-and-the-future-of-war">A Visionary’s Warning: Andrew Marshall and the Future of War</h4>
<ul>
<li>In 1991, amidst the backdrop of the Cold War’s end, Andrew Marshall, director of the Office of Net Assessment (ONA), initiated a project to assess the future of warfare.
<ul>
<li><strong>Andrew Marshall</strong>, often referred to as “Yoda,” held this influential position for 42 years, reporting directly to the Secretary of Defense.</li>
<li>The ONA’s primary mission was to evaluate the United States’ strategic standing against its competitors, mainly the Soviet Union.</li>
</ul></li>
<li>Marshall, aided by Army Colonel Andrew Krepenevich, aimed to analyze the impact of emerging technologies and the Soviet Union’s collapse on international security and the U.S.’s role.</li>
<li>This project became particularly relevant after the U.S. waged war against Iraq in response to the invasion of Kuwait, a conflict heavily shaped by Cold War strategies and military structures.</li>
</ul>
</section>
<section id="the-gulf-war-illusion-a-misleading-victory" class="level4">
<h4 class="anchored" data-anchor-id="the-gulf-war-illusion-a-misleading-victory">The Gulf War Illusion: A Misleading Victory</h4>
<ul>
<li>The Gulf War (1991) unfolded as a demonstration of American military might, leaving a lasting impression on a young generation.
<ul>
<li>The conflict showcased technological advancements like stealth bombers, smart bombs, and superior air and ground power.</li>
<li>The U.S. achieved a swift victory with minimal casualties (129 combat deaths).</li>
</ul></li>
<li>Despite the perceived success, Marshall’s 1992 report to the Secretary of Defense offered a different perspective.
<ul>
<li>He highlighted the influence of classified Soviet military writings that predicted a “<strong>military technical revolution</strong>.”
<ul>
<li>This revolution, termed the “<strong>reconnaissance strike complex,</strong>” proposed that advanced sensors and surveillance technologies, coupled with precision weaponry, would create the fastest, most effective kill chain in history.</li>
</ul></li>
<li>While the Soviets saw the Gulf War as a testament to this concept, Marshall argued that the U.S. hadn’t even come close to achieving its full potential in this area.</li>
</ul></li>
<li>A 1993 Pentagon study supported Marshall’s assessment.
<ul>
<li>The study revealed that the U.S. battle network remained largely unchanged since the Vietnam era.</li>
<li>It struggled to engage moving targets and relied heavily on “dumb bombs” instead of “smart” ones.</li>
</ul></li>
<li>Admiral William Owens, future Vice Chairman of the Joint Chiefs of Staff, later stated that the Gulf War was primarily won through “massed brute force,” akin to historical campaigns.</li>
</ul>
</section>
<section id="a-revolution-in-military-affairs-the-need-for-transformation" class="level4">
<h4 class="anchored" data-anchor-id="a-revolution-in-military-affairs-the-need-for-transformation">A Revolution in Military Affairs: The Need for Transformation</h4>
<ul>
<li><p>Marshall envisioned a <strong>revolution in military affairs (RMA),</strong> driven by information technologies.</p>
<ul>
<li>He cited historical examples of RMAs, such as the introduction of machine guns, steam-powered ships, and airplanes, emphasizing that technological advancements alone were insufficient.</li>
<li>Successful RMAs required developing new operational strategies and reforming existing military institutions for new strategic goals.</li>
</ul></li>
<li><p>Marshall warned that the U.S. was in the early stages of such a revolution, one that could last for decades.</p>
<ul>
<li>This RMA would center around information technologies that enhance understanding, decision-making, and action in war.</li>
<li>It would necessitate a shift in the concept of military power, potentially rendering traditional platforms like tanks, manned aircraft, and large ships less effective.</li>
<li>Marshall cautioned that failure to adapt to this RMA would leave the U.S. vulnerable to adversaries who successfully harnessed its potential.</li>
</ul></li>
<li><p>Marshall’s analysts coined the term “<strong>anti-access and area denial capabilities</strong>” to describe how powerful adversaries could leverage this RMA to counter the U.S.’s platform-centric approach.</p></li>
<li><p>Despite its prescience, Marshall’s report failed to instigate significant change.</p>
<ul>
<li>The U.S., after the Soviet Union’s collapse, found itself in a unipolar world, with no immediate peer competitors.</li>
<li>This led to a sense of complacency, with leaders prioritizing a “peace dividend” by downsizing the military and focusing on peacekeeping and humanitarian missions.</li>
<li>The prevailing assumption was that future conflicts would resemble the Gulf War, fought against technologically inferior adversaries, allowing the U.S. to dictate the terms of engagement.</li>
</ul></li>
</ul>
</section>
<section id="the-allure-of-technology-and-the-lack-of-urgency" class="level4">
<h4 class="anchored" data-anchor-id="the-allure-of-technology-and-the-lack-of-urgency">The Allure of Technology and the Lack of Urgency</h4>
<ul>
<li>Despite the lack of substantial change, the concept of RMA gained traction in Washington during the 1990s, driven by the fascination with the burgeoning information age.
<ul>
<li>“Revolution” and “transformation” became buzzwords, leading to numerous initiatives aimed at reimagining the U.S. military.
<ul>
<li>These initiatives included projects like “Army After Next,” “Network-Centric Warfare,” “Joint Vision 2010,” and “Lifting the Fog of War.”</li>
</ul></li>
<li>The 1997 Quadrennial Defense Review, the Pentagon’s key strategy document, explicitly prioritized exploiting the RMA.</li>
</ul></li>
<li>However, despite the rhetoric and investments in defense technology, the U.S.’s way of fighting remained largely unchanged.
<ul>
<li>The interventions in Bosnia (1995) and Kosovo (1999) further reinforced this complacency.
<ul>
<li>These conflicts, won with minimal U.S. casualties (four non-combat deaths), were attributed more to adversary weakness than any significant U.S. transformation.</li>
</ul></li>
</ul></li>
<li>Admiral Owens, after retiring, criticized the military’s “residual overconfidence” and its tendency to draw the wrong lessons from the Gulf War.
<ul>
<li>He warned that without genuine adaptation, the U.S. risked a decline in military strength and capabilities in the coming decades as Cold War-era equipment became obsolete.</li>
</ul></li>
</ul>
</section>
<section id="the-20xx-war-games-a-glimpse-into-a-challenging-future" class="level4">
<h4 class="anchored" data-anchor-id="the-20xx-war-games-a-glimpse-into-a-challenging-future">The 20XX War Games: A Glimpse into a Challenging Future</h4>
<ul>
<li><p>As the 21st century began, Marshall, recognizing the lack of progress, initiated the “<strong>Future Warfare 20XX war game series</strong>.”</p>
<ul>
<li>These war games aimed to simulate future conflicts in a world where the RMA had reached maturity, pitting the U.S. against a hypothetical “large peer competitor” – implicitly China.</li>
</ul></li>
<li><p>The war games were led by Robert Martinage and Michael Vickers, both future senior Pentagon officials.</p></li>
<li><p>Their 2001 report presented a stark assessment:</p>
<ul>
<li>China, by 2025-2030, would possess advanced technologies comparable to the U.S., enabling it to target U.S. assets globally, including the homeland.</li>
<li>The U.S.’s reliance on traditional platforms and its vulnerability to attacks on its communication and logistics networks would render its traditional way of fighting ineffective.</li>
<li>The report stressed the need to fully embrace the RMA, building technologically advanced, networked forces, especially unmanned systems, to counter these threats.</li>
<li>The report warned of an “unforgiving future battlefield” where “if you can be seen, you can be killed.”</li>
</ul></li>
</ul>
<hr>
</section>
</section>
<section id="a-missed-opportunity-the-rumsfeld-era-and-the-war-on-terror-2001-2009" class="level3">
<h3 class="anchored" data-anchor-id="a-missed-opportunity-the-rumsfeld-era-and-the-war-on-terror-2001-2009">A Missed Opportunity: The Rumsfeld Era and the War on Terror (2001-2009)</h3>
<section id="a-false-dawn-the-promise-of-transformation-and-the-reality-of-911" class="level4">
<h4 class="anchored" data-anchor-id="a-false-dawn-the-promise-of-transformation-and-the-reality-of-911">A False Dawn: The Promise of Transformation and the Reality of 9/11</h4>
<ul>
<li>The arrival of Donald Rumsfeld as Secretary of Defense in 2001 initially signaled potential progress.
<ul>
<li>Rumsfeld openly advocated for the RMA and created the Office of Force Transformation to oversee the development of new military technologies and doctrines.</li>
<li>He also signed a new defense strategy that prioritized addressing the operational challenges highlighted in Marshall’s 20XX war games, shifting focus toward emerging great powers like China.</li>
</ul></li>
<li>However, the 9/11 terrorist attacks drastically altered the strategic landscape, leading to a significant shift in priorities.
<ul>
<li>While Rumsfeld still emphasized transformation, the focus shifted towards waging a global war on terror.</li>
</ul></li>
<li>The War on Terror did yield some genuine military innovations, primarily within the Joint Special Operations Command (JSOC).
<ul>
<li>JSOC developed new technologies and tactics for counterterrorism missions, achieving remarkable speed and effectiveness in dismantling terrorist networks.</li>
<li>This innovation, along with the adoption of a counterinsurgency strategy in 2007, played a crucial role in weakening al-Qaeda in Iraq.</li>
</ul></li>
<li>However, the War on Terror ultimately sidetracked the U.S. from addressing the long-term challenge posed by China.
<ul>
<li>While the Bush administration claimed that both priorities could be managed simultaneously, the focus on counterterrorism, particularly the protracted conflict in Iraq, consumed the majority of resources and attention.</li>
</ul></li>
</ul>
</section>
<section id="the-persistence-of-complacency-reliving-past-glories" class="level4">
<h4 class="anchored" data-anchor-id="the-persistence-of-complacency-reliving-past-glories">The Persistence of Complacency: Reliving Past Glories</h4>
<ul>
<li>Despite claims of transformation, the initial victories in Afghanistan and Iraq were, in essence, repetitions of past successes, achieved against significantly weaker opponents.
<ul>
<li>The U.S. retained its ability to dictate the terms of engagement, operate from secure sanctuaries, and leverage its technological superiority.</li>
</ul></li>
<li>The core issue remained unchanged: the lack of urgency to embrace genuine transformation.
<ul>
<li>The perceived ease of these victories reinforced the belief in the U.S.’s military dominance and the validity of its traditional approaches to warfare.</li>
<li>Even as the Iraq War deteriorated into a strategic quagmire, the defense establishment largely dismissed it as an anomaly, clinging to outdated assumptions.</li>
</ul></li>
<li>The U.S. continued to invest heavily in traditional military platforms, planning for future conflicts that mirrored those of the past – fought against technologically inferior adversaries on uncontested battlefields.</li>
</ul>
</section>
<section id="the-real-cost-of-war-neglecting-the-future" class="level4">
<h4 class="anchored" data-anchor-id="the-real-cost-of-war-neglecting-the-future">The Real Cost of War: Neglecting the Future</h4>
<ul>
<li><p>A prevailing narrative within the defense establishment argues that the U.S. military’s lack of preparedness for future challenges stems from the overwhelming demands of the War on Terror, which consumed its budget and bandwidth.</p>
<ul>
<li>While the constant operational tempo undoubtedly took a toll, this narrative only tells part of the story.</li>
</ul></li>
<li><p>The root cause lies in a failure of imagination and a misallocation of resources.</p>
<ul>
<li>The U.S. clung to the idea that a persistent global military presence, rather than investing in and showcasing innovative capabilities, would deter adversaries.</li>
<li>This strategy, however, led to the overextension and exhaustion of the military, with limited strategic gains.</li>
</ul></li>
<li><p>Instead of prioritizing the development of faster, more adaptable kill chains through real-world experimentation, the U.S. poured vast sums into attempting to transform existing platforms, often with little success.</p></li>
<li><p>Billions were wasted on numerous modernization programs that were ultimately canceled without yielding any usable capabilities.</p>
<ul>
<li>Examples include the Army’s Future Combat System ($18.1 billion), the Marine Corps’ Expeditionary Fighting Vehicle ($3.3 billion), and a host of other projects across all services.</li>
</ul></li>
<li><p>Even those programs that weren’t canceled often faced significant delays, cost overruns, and ultimately failed to deliver the promised “transformational” capabilities.</p>
<ul>
<li>This includes high-profile programs like the F-35 Joint Strike Fighter, the Ford-class aircraft carrier, the KC-46 refueling tanker, and the Littoral Combat Ship, as well as numerous lesser-known systems.</li>
<li>Many of these systems were rushed into development before the underlying technologies were mature, leading to persistent problems and escalating costs.</li>
</ul></li>
</ul>
</section>
<section id="a-tower-of-babel-the-failure-of-interoperability" class="level4">
<h4 class="anchored" data-anchor-id="a-tower-of-babel-the-failure-of-interoperability">A Tower of Babel: The Failure of Interoperability</h4>
<ul>
<li>One of the most glaring failures was the lack of interoperability between different military systems, despite the emphasis on information sharing and joint operations.
<ul>
<li>Systems were often designed with incompatible communication and data-sharing protocols, hindering their ability to function as a cohesive network.</li>
</ul></li>
<li>A prime example is the inability of the F-22 and F-35A fighter jets, both Air Force programs built by the same company, to directly share basic targeting data.
<ul>
<li>This lack of seamless integration forced reliance on outdated communication methods, such as voice transmissions.</li>
</ul></li>
<li>This issue of interoperability plagued all branches of the military, stemming from a system that incentivized closed, proprietary technologies, benefiting defense contractors while hindering the development of truly integrated kill chains.</li>
</ul>
</section>
<section id="stifled-innovation-the-price-of-protecting-the-past" class="level4">
<h4 class="anchored" data-anchor-id="stifled-innovation-the-price-of-protecting-the-past">Stifled Innovation: The Price of Protecting the Past</h4>
<ul>
<li><p>While some genuinely revolutionary technologies were explored, they often faced resistance and were ultimately sidelined or abandoned.</p>
<ul>
<li>The Defense Advanced Research Projects Agency (DARPA) made progress in areas like artificial intelligence, but these projects rarely transitioned into operational capabilities.</li>
<li>Other initiatives, such as the development of semi-autonomous long-range anti-ship missiles and unmanned combat air vehicles, struggled for funding and were eventually discontinued.</li>
</ul></li>
<li><p>The Navy’s X-47, the first unmanned aerial vehicle capable of launching from and landing on an aircraft carrier, demonstrated remarkable technological prowess but was canceled despite its success.</p></li>
<li><p>This resistance to innovation stemmed from the prioritization of traditional platforms, particularly manned aircraft, which were seen as central to the identity and budget justifications of the military services.</p>
<ul>
<li>The focus on incremental improvements to these legacy systems, rather than embracing disruptive technologies, hindered the development of truly transformational capabilities.</li>
</ul></li>
</ul>
</section>
<section id="the-wrong-priorities-building-for-the-last-war" class="level4">
<h4 class="anchored" data-anchor-id="the-wrong-priorities-building-for-the-last-war">The Wrong Priorities: Building for the Last War</h4>
<ul>
<li><p>The Pentagon and Congress essentially got military modernization backward, prioritizing incremental upgrades to existing platforms (tanks, manned aircraft, large satellites, and ships) over the development of integrated battle networks.</p>
<ul>
<li>This approach ignored Marshall’s warnings that these legacy systems would become increasingly vulnerable in a future characterized by advanced reconnaissance strike complexes.</li>
</ul></li>
<li><p>The result was a collection of disparate sensors and weapons systems, lacking seamless interoperability and requiring significant time and effort to function cohesively.</p></li>
<li><p>This outcome was not an accident but rather a consequence of a system that valued platforms over networks and incentivized the preservation of existing structures.</p></li>
</ul>
</section>
<section id="the-iraq-war-a-death-knell-for-transformation" class="level4">
<h4 class="anchored" data-anchor-id="the-iraq-war-a-death-knell-for-transformation">The Iraq War: A Death Knell for Transformation</h4>
<ul>
<li><p>The Iraq War ultimately dealt a fatal blow to the concept of RMA, but not in the way Rumsfeld initially envisioned.</p>
<ul>
<li>As the conflict dragged on, revealing critical equipment shortages (body armor, blast-resistant vehicles, and unmanned surveillance aircraft) and mounting casualties, the idea of technological transformation became associated with a failure to adequately equip and support troops in the present.</li>
</ul></li>
<li><p>This fueled a backlash against “revolution,” shifting the focus back to conventional warfare and traditional platforms.</p>
<ul>
<li>By 2008, Secretary of Defense Robert Gates criticized what he termed “next-war-itis,” arguing against prioritizing future needs over current demands.</li>
</ul></li>
<li><p>In reality, the more pervasive affliction was “last-war-itis” – an overreliance on past successes and a reluctance to adapt to a changing strategic environment.</p></li>
<li><p>The U.S., instead of embracing transformation, doubled down on its existing playbook, prioritizing legacy systems and preparing for conflicts that resembled those it had already fought.</p></li>
</ul>
<hr>
</section>
</section>
<section id="the-obama-years-a-decade-of-drift-and-denial-2009-2017" class="level3">
<h3 class="anchored" data-anchor-id="the-obama-years-a-decade-of-drift-and-denial-2009-2017">The Obama Years: A Decade of Drift and Denial (2009-2017)</h3>
<section id="continuing-the-cycle-more-missions-fewer-resources" class="level4">
<h4 class="anchored" data-anchor-id="continuing-the-cycle-more-missions-fewer-resources">Continuing the Cycle: More Missions, Fewer Resources</h4>
<ul>
<li><p>Despite inheriting two wars and a global financial crisis, the Obama administration largely continued the trend of prioritizing present demands over future preparedness.</p>
<ul>
<li>While President Obama campaigned on ending the wars in Iraq and Afghanistan, his tenure saw a continuation of these conflicts and the expansion of military operations into Libya, Yemen, Syria, and elsewhere.</li>
</ul></li>
<li><p>Although Obama called for a “pivot to Asia” to counter China’s rise, and his administration initiated the “Air-Sea Battle” concept to address China’s growing military capabilities in the western Pacific, these efforts were undermined by budgetary constraints.</p></li>
<li><p>The 2011 Budget Control Act, enacted to reduce federal spending, mandated $1 trillion in defense cuts over a decade, triggering a scramble for resources within the defense establishment.</p>
<ul>
<li>This resulted in a prioritization of short-term needs and legacy programs over long-term modernization and innovation.</li>
<li>The military continued to receive more missions but not the resources to effectively execute them or prepare for future challenges.</li>
</ul></li>
</ul>
</section>
<section id="the-tyranny-of-the-present-shackled-to-outdated-systems" class="level4">
<h4 class="anchored" data-anchor-id="the-tyranny-of-the-present-shackled-to-outdated-systems">The Tyranny of the Present: Shackled to Outdated Systems</h4>
<ul>
<li>This constant focus on “current operations” resulted in a military increasingly ill-suited for the evolving character of warfare.
<ul>
<li>The U.S.’s rigid, manually intensive, and slow-to-adapt kill chains struggled to cope with dynamic targets and complex, multifaceted challenges.</li>
</ul></li>
<li>The underlying technologies underpinning the U.S.’s decision-making and action cycles remained largely static, trapped in “black boxes” that were difficult to upgrade.
<ul>
<li>This reflected a dangerous assumption of perpetual dominance, neglecting the critical need for adaptability and innovation.</li>
</ul></li>
</ul>
</section>
<section id="the-ambush-of-the-future-2014-and-beyond" class="level4">
<h4 class="anchored" data-anchor-id="the-ambush-of-the-future-2014-and-beyond">The Ambush of the Future: 2014 and Beyond</h4>
<ul>
<li><p>Andrew Marshall, upon retiring in 2015 after 42 years at the helm of the ONA, witnessed his warnings about the U.S.’s unpreparedness for the future of warfare coming to pass.</p></li>
<li><p>The annexation of Crimea by Russia in February 2014 marked a turning point, signaling a new era of great power competition and the return of interstate conflict.</p></li>
<li><p>The U.S., having prioritized the present at the expense of the future, found itself vulnerable to this “ambush by the future.”</p></li>
<li><p>The very technologies and strategies that Marshall had cautioned against decades earlier – anti-access and area denial capabilities, advanced reconnaissance strike complexes, and the exploitation of information dominance – were now being employed by adversaries, rendering the U.S.’s traditional advantages less certain.</p></li>
</ul>
</section>
</section>
</section>
<section id="chapter-2-little-green-men-and-assassins-mace" class="level2">
<h2 class="anchored" data-anchor-id="chapter-2-little-green-men-and-assassins-mace">Chapter 2: Little Green Men and Assassin’s Mace</h2>
<section id="the-reemergence-of-great-power-competition" class="level3">
<h3 class="anchored" data-anchor-id="the-reemergence-of-great-power-competition">The Reemergence of Great Power Competition</h3>
<section id="russias-ambush-in-ukraine-2014" class="level4">
<h4 class="anchored" data-anchor-id="russias-ambush-in-ukraine-2014">Russia’s Ambush in Ukraine (2014)</h4>
<ul>
<li><p>On February 27, 2014, <strong>“little green men,”</strong> masked soldiers in unmarked green uniforms, began seizing control of strategic locations in Crimea, Ukraine.</p>
<ul>
<li>Speculation immediately arose that these were Russian special forces, a notion initially downplayed by U.S. officials.</li>
<li>This event caught the U.S. government off guard, despite indications of Russian military movements into Crimea.</li>
</ul></li>
<li><p>The “little green men” swiftly took control of Crimea:</p>
<ul>
<li>Seizing control of key infrastructure.</li>
<li>Blockading Ukrainian military forces.</li>
<li>Sealing off the peninsula from the rest of Ukraine.</li>
<li>Forcing the evacuation of 25,000 Ukrainian troops.</li>
</ul></li>
<li><p>On March 21, 2014, Russia annexed Crimea, marking the first violent change of an international border in Europe since World War II.</p></li>
<li><p>The “little green men” employed advanced military tactics and technology:</p>
<ul>
<li>Incited and supported Russian-speaking separatist groups.</li>
<li>Utilized sophisticated Russian military systems, including electronic warfare, communications jammers, air defenses, and long-range precision rocket artillery.
<ul>
<li>Much of this technology surpassed the capabilities of the U.S. military.</li>
</ul></li>
</ul></li>
<li><p><strong>Examples of Russian military superiority as recounted by Ukrainian commanders:</strong></p>
<ul>
<li>Jamming Ukrainian drones, causing them to crash.</li>
<li>Jamming the fuses on Ukrainian warheads, rendering them inert.</li>
<li>Detecting Ukrainian communications signals and using them to target attacks.</li>
<li>Deploying unmanned spotter drones to identify and target armored vehicles.</li>
<li>Using thermobaric warheads to eliminate Ukrainian troops in bunkers and trenches.</li>
<li>Annihilating Ukrainian troop columns with cluster munitions.</li>
<li><strong>Targeted assassination:</strong> Using intercepted cell phone data to geolocate and eliminate a Ukrainian commander.</li>
</ul></li>
<li><p><strong>Russia’s Actions in Ukraine Demonstrated:</strong></p>
<ul>
<li>The emergence of a <strong>“reconnaissance strike complex,”</strong> a network of sensors and shooters enabling rapid and lethal targeting.</li>
<li>A new form of warfare that the U.S. military was ill-prepared to counter.</li>
</ul></li>
</ul>
</section>
<section id="russias-military-expansion-2014-2016" class="level4">
<h4 class="anchored" data-anchor-id="russias-military-expansion-2014-2016">Russia’s Military Expansion (2014-2016)</h4>
<ul>
<li>The same Russian military tactics and technology used in Ukraine surfaced in Syria in 2015, where U.S. forces were engaged in combat.</li>
<li><strong>U.S. forces faced a range of threats from this modernized Russian military:</strong>
<ul>
<li>Jammed communications.</li>
<li>Advanced anti-aircraft missile batteries.</li>
<li>Aggressive maneuvers by Russian warships and submarines.</li>
<li>The use of cruise missiles in close proximity to U.S. Navy ships.</li>
</ul></li>
<li>Russia’s military expansion extended to NATO’s eastern flank:
<ul>
<li>Violation of the Intermediate Nuclear Forces Treaty with the deployment of ground-launched cruise missiles capable of reaching Europe.</li>
<li>Snap military movements near NATO borders, raising concerns about potential aggression.</li>
<li>Threats of nuclear escalation to deter U.S. intervention.</li>
</ul></li>
<li><strong>Analysis of Russia’s Military Capabilities:</strong>
<ul>
<li>In 2016, RAND Corporation analysts David Shlapek and Michael Johnson predicted that Russian forces could reach the capitals of all three Baltic states within 60 hours, overwhelming NATO defenses.</li>
<li>This analysis highlighted the growing concern within the U.S. Department of Defense and Congress that the U.S. military was unprepared for a potential conflict with Russia and could potentially lose.</li>
</ul></li>
<li><strong>Factors Contributing to U.S. Military Weakness:</strong>
<ul>
<li>Withdrawal of combat power from Europe to support operations in the Middle East.</li>
<li>Costly but ineffective military modernization programs.</li>
<li>Divestment from systems and weapons that proved crucial in countering Russia’s tactics.</li>
<li>A military optimized for fighting less technologically advanced adversaries.</li>
</ul></li>
</ul>
</section>
<section id="the-roots-of-miscalculation-russia" class="level4">
<h4 class="anchored" data-anchor-id="the-roots-of-miscalculation-russia">The Roots of Miscalculation: Russia</h4>
<ul>
<li><strong>Post-Cold War Optimism:</strong>
<ul>
<li>The fall of the Soviet Union fostered hope in the West for a democratic and capitalist Russia that could become a U.S. ally.</li>
<li>This optimism led to U.S. assistance for Russia’s transition, including support for nuclear security and integration into global institutions like the G8 and World Trade Organization.</li>
</ul></li>
<li><strong>Divergent Interests:</strong>
<ul>
<li>Despite U.S. efforts, Russia prioritized restoring its great power status over partnership with the West.</li>
<li>Conflicts like Kosovo and Iraq exposed the power imbalance between the two nations.</li>
</ul></li>
<li><strong>Putin’s Rise and Resurgence:</strong>
<ul>
<li>Vladimir Putin, who became president in 1999, viewed the Soviet Union’s collapse as a geopolitical disaster.</li>
<li>He prioritized restoring Russia’s military might and geopolitical influence.</li>
</ul></li>
<li><strong>Military Modernization and Expansion:</strong>
<ul>
<li>Putin accelerated military modernization, focusing on:
<ul>
<li>Technologically advanced weapons.</li>
<li>Long-range missiles and rockets.</li>
<li>Highly capable special operations forces.</li>
<li>Advanced air defenses.</li>
<li>Electronic warfare and cyber weapons.</li>
<li>Anti-satellite capabilities.</li>
<li>Tactical nuclear weapons.</li>
</ul></li>
</ul></li>
<li><strong>The Gerasimov Doctrine:</strong>
<ul>
<li>General Valery Gerasimov, Russia’s chief of the General Staff, outlined a new approach to warfare in 2013 that blended military and non-military tactics.</li>
<li><strong>This doctrine emphasized:</strong>
<ul>
<li>Exploiting political and social fault lines.</li>
<li>Employing misinformation campaigns, political subversion, assassinations, cyberattacks, and social media manipulation.</li>
<li>Expanding the battlefield to encompass all aspects of society.</li>
</ul></li>
</ul></li>
<li><strong>Russia’s Interference in the 2016 U.S. Election:</strong>
<ul>
<li>Russia’s use of the Gerasimov Doctrine extended to interfering in the 2016 U.S. presidential election.</li>
<li>This interference aimed to undermine American democracy and sow discord.</li>
</ul></li>
</ul>
</section>
<section id="the-miscalculations-of-u.s.-policy-toward-russia" class="level4">
<h4 class="anchored" data-anchor-id="the-miscalculations-of-u.s.-policy-toward-russia">The Miscalculations of U.S. Policy Toward Russia</h4>
<ul>
<li>Successive U.S. presidents, from Clinton to Trump, entered office seeking improved relations with Russia, often misinterpreting Russia’s motives.</li>
<li>The bipartisan consensus on engaging Russia blinded U.S. policymakers to the growing threat posed by its military ambitions.</li>
<li>The U.S. focus on economic engagement with China further diverted attention from Russia’s resurgence.</li>
</ul>
</section>
</section>
<section id="chinas-island-ambush-2014" class="level3">
<h3 class="anchored" data-anchor-id="chinas-island-ambush-2014">China’s Island Ambush (2014)</h3>
<ul>
<li><p>While the U.S. was preoccupied with Russia’s actions in Ukraine, China made a strategic move in the South China Sea.</p></li>
<li><p>China ramped up its efforts to assert control over the South China Sea, a region through which $3.4 trillion in global trade (much of it vital to the U.S. economy) flows annually.</p></li>
<li><p><strong>China’s Island-Building Campaign:</strong></p>
<ul>
<li>In 2014, China deployed large dredgers to transform shallow reefs and atolls into artificial islands.</li>
<li>This construction occurred in territories claimed by other nations, directly challenging their sovereignty.</li>
</ul></li>
<li><p><strong>Militarization of Artificial Islands:</strong></p>
<ul>
<li>China began constructing military infrastructure on the artificial islands, including:
<ul>
<li>Runways.</li>
<li>Control towers.</li>
<li>Aircraft hangars.</li>
<li>Military bases.</li>
</ul></li>
</ul></li>
<li><p><strong>Deployment of Advanced Weaponry:</strong></p>
<ul>
<li>The U.S. government observed and publicly criticized China for installing:
<ul>
<li>Long-range radars.</li>
<li>Surface-to-air missile batteries.</li>
<li>Fighter aircraft.</li>
</ul></li>
</ul></li>
<li><p><strong>China’s Denial:</strong></p>
<ul>
<li>Despite clear evidence, Chinese President Xi Jinping denied the militarization of the islands.</li>
</ul></li>
</ul>
</section>
<section id="the-strategic-challenge-of-china" class="level3">
<h3 class="anchored" data-anchor-id="the-strategic-challenge-of-china">The Strategic Challenge of China</h3>
<ul>
<li>China’s actions in the South China Sea were part of a larger pattern of military modernization and expansion.</li>
<li>Unlike Russia, China possessed significantly greater economic and military potential, posing a more formidable long-term challenge to U.S. interests.</li>
</ul>
<section id="the-roots-of-miscalculation-china" class="level4">
<h4 class="anchored" data-anchor-id="the-roots-of-miscalculation-china">The Roots of Miscalculation: China</h4>
<ul>
<li><strong>Post-Cold War Partnership:</strong>
<ul>
<li>The U.S. and China shared common ground during the latter half of the Cold War, aligning to counter Soviet influence.</li>
<li>This partnership shaped a belief in Washington that China could be molded to fit U.S. interests through economic engagement.</li>
</ul></li>
<li><strong>The Gulf War Wake-Up Call (1991):</strong>
<ul>
<li>China closely studied the Gulf War, recognizing the technological superiority of the U.S. military.</li>
<li>The conflict revealed vulnerabilities in China’s own military capabilities, prompting a reassessment of its defense strategy.</li>
</ul></li>
<li><strong>China’s Military Transformation:</strong>
<ul>
<li>Following the Gulf War, China embarked on a comprehensive military modernization program.</li>
<li>This program aimed to develop <strong>“Assassin’s Mace”</strong> weapons, systems designed to exploit vulnerabilities in U.S. military capabilities.</li>
</ul></li>
<li><strong>Targeting U.S. Vulnerabilities:</strong>
<ul>
<li><strong>U.S. Military Bases:</strong> China developed medium-range and long-range ballistic missiles to target U.S. bases in Japan and Guam, intending to overwhelm their defenses.</li>
<li><strong>U.S. Strike Aircraft:</strong> China invested in early warning radars, integrated air and missile defense systems, and powerful jammers to counter U.S. air power.</li>
<li><strong>U.S. Aircraft Carriers:</strong> China developed over-the-horizon radars, reconnaissance satellites, and anti-ship ballistic missiles (like the DF-21 “carrier killer”) to target U.S. aircraft carriers.</li>
<li><strong>Command and Control Systems:</strong> China invested in advanced aircraft, electronic warfare, cyber capabilities, and anti-satellite missiles to disrupt U.S. communications, intelligence gathering, and command and control networks.</li>
</ul></li>
<li><strong>Systems Destruction Warfare:</strong>
<ul>
<li>China’s military doctrine focused on <strong>“systems destruction warfare,”</strong> aiming to cripple the U.S. military’s ability to operate by targeting its supporting infrastructure.</li>
</ul></li>
</ul>
</section>
<section id="chinas-modernization-and-expansion" class="level4">
<h4 class="anchored" data-anchor-id="chinas-modernization-and-expansion">China’s Modernization and Expansion</h4>
<ul>
<li>In addition to “Assassin’s Mace” weapons, China modernized its conventional military forces:
<ul>
<li>Building a blue-water navy with advanced warships and aircraft carriers.</li>
<li>Developing amphibious assault capabilities.</li>
<li>Fielding long-range bombers and advanced fighter jets.</li>
</ul></li>
<li><strong>Nuclear Buildup:</strong>
<ul>
<li>China expanded its nuclear arsenal:
<ul>
<li>Mastering nuclear warhead miniaturization.</li>
<li>Developing a nuclear triad (land-based missiles, submarine-launched missiles, and aircraft-delivered bombs).</li>
<li>Building increasingly sophisticated delivery systems.</li>
</ul></li>
</ul></li>
<li><strong>Technology Theft:</strong>
<ul>
<li>China engaged in widespread theft of intellectual property to accelerate its military modernization:
<ul>
<li>Acquiring nuclear weapons designs.</li>
<li>Stealing designs for advanced military technologies.</li>
<li>Exploiting joint ventures to access proprietary information from U.S. companies.</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="the-scale-of-the-china-challenge" class="level4">
<h4 class="anchored" data-anchor-id="the-scale-of-the-china-challenge">The Scale of the China Challenge</h4>
<ul>
<li>China’s military buildup posed a more significant threat than Russia’s due to its greater economic power and sustained investment.</li>
<li>While Russia’s actions in Ukraine served as a wake-up call, China’s long-term strategic ambitions presented a far greater challenge to U.S. military dominance.</li>
</ul>
</section>
<section id="missed-opportunities-and-distractions" class="level4">
<h4 class="anchored" data-anchor-id="missed-opportunities-and-distractions">Missed Opportunities and Distractions</h4>
<ul>
<li>Despite warning signs dating back to the early 1990s, the U.S. failed to adequately address the growing military challenge posed by China.</li>
<li><strong>Factors Contributing to U.S. Inattention:</strong>
<ul>
<li>The aftermath of the September 11th attacks and the wars in the Middle East consumed U.S. foreign policy attention.</li>
<li>The persistence of the belief that economic engagement would liberalize China and align its interests with the West.</li>
<li>Domestic business interests often prioritized economic ties with China over security concerns.</li>
</ul></li>
</ul>
</section>
<section id="the-reemergence-of-great-power-competition-1" class="level4">
<h4 class="anchored" data-anchor-id="the-reemergence-of-great-power-competition-1">The Reemergence of Great Power Competition</h4>
<ul>
<li>The events of 2014, with both Russia and China demonstrating their growing military assertiveness, forced a reassessment of the global security landscape.</li>
<li>The concept of great power competition reemerged as a defining feature of international relations.</li>
</ul>
</section>
<section id="the-u.s.-response" class="level4">
<h4 class="anchored" data-anchor-id="the-u.s.-response">The U.S. Response</h4>
<ul>
<li><strong>Robert Work,</strong> then-Deputy Secretary of Defense, spearheaded efforts to counter the emerging threat from China and Russia.</li>
<li>Work advocated for a <strong>“new offset strategy”</strong> focused on leveraging cutting-edge technologies, like artificial intelligence, to maintain U.S. military superiority.</li>
<li>This strategy aimed to revitalize the concept of a <strong>“revolution in military affairs”</strong> by developing information-centric battle networks.</li>
</ul>
</section>
<section id="challenges-to-u.s.-military-modernization" class="level4">
<h4 class="anchored" data-anchor-id="challenges-to-u.s.-military-modernization">Challenges to U.S. Military Modernization</h4>
<ul>
<li>Despite years of investment, the U.S. military struggled to acquire the advanced technologies needed to maintain its edge.</li>
<li>Many key technologies were being developed by commercial tech companies reluctant to work with the Department of Defense.</li>
<li>The U.S. military’s bureaucratic procurement processes hindered its ability to adapt to the rapidly evolving technological landscape.</li>
</ul>
</section>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">Conclusion</h3>
<ul>
<li>The events of 2014 exposed the U.S. military’s unpreparedness for the reemergence of great power competition.</li>
<li>The U.S. had become complacent, clinging to outdated assumptions about the global security environment.</li>
<li>Both Russia and China, each with its own motivations and capabilities, emerged as serious challengers to U.S. military dominance.</li>
<li>Addressing these challenges required a fundamental shift in U.S. strategic thinking, military modernization, and technological innovation.</li>
</ul>
</section>
</section>
<section id="chapter-3-a-tale-of-two-cities" class="level2">
<h2 class="anchored" data-anchor-id="chapter-3-a-tale-of-two-cities">Chapter 3: A Tale of Two Cities</h2>
<p>This chapter describes how America’s approach to military technology development shifted during the Cold War and its aftermath, leading to a disconnect between the military and Silicon Valley.</p>
<section id="the-rise-of-the-military-industrial-complex" class="level3">
<h3 class="anchored" data-anchor-id="the-rise-of-the-military-industrial-complex">The Rise of the Military-Industrial Complex</h3>
<ul>
<li><strong>The Military-Industrial Complex</strong>: The close relationship between the Department of Defense, private defense companies, and Congress, formed during the Cold War.
<ul>
<li>This relationship was initially characterized by a sense of urgency and a willingness to take risks to stay ahead of the Soviet Union.</li>
</ul></li>
</ul>
<section id="eisenhowers-approach-picking-winners" class="level4">
<h4 class="anchored" data-anchor-id="eisenhowers-approach-picking-winners">Eisenhower’s Approach: Picking Winners</h4>
<ul>
<li><strong>President Eisenhower’s Philosophy:</strong> Concentrate resources and empower exceptional individuals (“<strong>founders</strong>”) to develop critical military technologies.
<ul>
<li><strong>Example:</strong> General Bernard Schriever and the development of intercontinental ballistic missiles (ICBMs).
<ul>
<li>Schriever was given broad authority, ample funding, and protection from bureaucratic interference.</li>
<li>His team successfully developed ICBMs, laying the groundwork for space exploration, in just five years.</li>
</ul></li>
</ul></li>
<li><strong>Other “Founders” and their Achievements:</strong>
<ul>
<li><strong>Edward Teller:</strong> Developed the hydrogen bomb.</li>
<li><strong>Admiral Hyman Rickover:</strong> Developed miniaturized nuclear reactors for submarines.</li>
<li><strong>Kelly Johnson:</strong> Developed advanced aircraft, including the SR-71 Blackbird.</li>
</ul></li>
<li><strong>Prioritizing Speed and Results:</strong>
<ul>
<li>Efficiency and cost-effectiveness were secondary to rapid development and fielding of advanced weapons.</li>
<li>This approach was accepted as the price of staying ahead in the Cold War.</li>
</ul></li>
<li><strong>Silicon Valley’s Origins:</strong>
<ul>
<li>Defense contracts during and after World War II transformed Silicon Valley from an agricultural region into a hub of electronics and technology innovation.</li>
<li>This military funding fueled the development of technologies like mainframes, microprocessors, and the internet.</li>
<li>Early Silicon Valley embraced working on military technologies, driven by the challenges and the belief in contributing to national security.</li>
</ul></li>
</ul>
</section>
</section>
<section id="the-bureaucratization-of-innovation" class="level3">
<h3 class="anchored" data-anchor-id="the-bureaucratization-of-innovation">The Bureaucratization of Innovation</h3>
<section id="the-shift-toward-bureaucracy" class="level4">
<h4 class="anchored" data-anchor-id="the-shift-toward-bureaucracy">The Shift Toward Bureaucracy</h4>
<ul>
<li><strong>The 1960s and Onward:</strong>
<ul>
<li>The military-industrial complex became increasingly bureaucratic.</li>
<li><strong>Robert McNamara’s Influence (Secretary of Defense, 1960s):</strong>
<ul>
<li>Introduced industrial-age management practices, prioritizing efficiency.</li>
<li>Added layers of oversight, analysis, and management, slowing down innovation.</li>
</ul></li>
</ul></li>
<li><strong>Congressional Constraints:</strong>
<ul>
<li>Budget processes made it difficult to fund new or unconventional ideas.</li>
<li>Multi-year budget cycles favored predictable, established programs over rapid adaptation.</li>
</ul></li>
<li><strong>Consequences:</strong>
<ul>
<li>Military technology development became slower, more expensive, and less creative.</li>
</ul></li>
</ul>
</section>
<section id="the-growing-divide-between-washington-and-silicon-valley" class="level4">
<h4 class="anchored" data-anchor-id="the-growing-divide-between-washington-and-silicon-valley">The Growing Divide Between Washington and Silicon Valley</h4>
<ul>
<li><strong>The Vietnam War Era (Late 1960s - Early 1970s):</strong>
<ul>
<li>Silicon Valley engineers became increasingly uncomfortable working on military projects.</li>
</ul></li>
<li><strong>Circumventing the System:</strong>
<ul>
<li>By the late 1970s, defense innovators were forced to work around the rigid acquisition system to develop advanced technology quickly (e.g., stealth aircraft).</li>
</ul></li>
<li><strong>The Packard Commission (1980s):</strong>
<ul>
<li>Formed to address problems in military acquisition.</li>
<li>General Schriever’s Critique:
<ul>
<li>The system had become too slow, expensive, politicized, and bureaucratic.</li>
<li>Innovation was stifled by micromanagement and a focus on process over results.</li>
</ul></li>
</ul></li>
</ul>
</section>
</section>
<section id="the-post-cold-war-era-a-widening-chasm" class="level3">
<h3 class="anchored" data-anchor-id="the-post-cold-war-era-a-widening-chasm">The Post-Cold War Era: A Widening Chasm</h3>
<section id="loss-of-urgency-and-misguided-priorities" class="level4">
<h4 class="anchored" data-anchor-id="loss-of-urgency-and-misguided-priorities">Loss of Urgency and Misguided Priorities</h4>
<ul>
<li><strong>The End of the Soviet Threat:</strong>
<ul>
<li>Removed the primary driver of rapid military technological innovation.</li>
<li>The U.S. military was dominant, reducing pressure to stay ahead.</li>
</ul></li>
<li><strong>Defense Industry Consolidation:</strong>
<ul>
<li>William Perry, Deputy Secretary of Defense (1993), predicted consolidation in the defense industry due to declining budgets, leading to mergers and acquisitions.
<ul>
<li>The number of major defense firms shrunk drastically.</li>
</ul></li>
</ul></li>
<li><strong>Changes in Funding and Focus:</strong>
<ul>
<li>Reduced R&amp;D funding, with remaining funds often politically motivated.</li>
<li>Small, fragmented contracts that rarely led to significant programs.</li>
<li>Emphasis on spreading contracts and supporting small businesses over achieving technological breakthroughs.</li>
</ul></li>
<li><strong>Slowing Innovation Cycles and Risk Aversion:</strong>
<ul>
<li>Development cycles for new military systems stretched to decades.</li>
<li>Focus shifted from developing new technologies to maintaining existing ones.</li>
<li>This lack of opportunity for innovation drove talented engineers away from the defense sector.</li>
</ul></li>
<li><strong>The “Valley of Death”:</strong>
<ul>
<li>Many technology companies struggled to transition small projects and demos into large-scale military programs, leading to wasted potential.</li>
</ul></li>
<li><strong>Unattractive Market for Startups:</strong>
<ul>
<li>High failure rates for companies attempting to work with the government.</li>
<li>Difficulty attracting investment compared to the booming commercial tech sector.</li>
</ul></li>
<li><strong>Consequences:</strong>
<ul>
<li>A growing disconnect between the needs of the military and the capabilities of the tech industry.</li>
</ul></li>
</ul>
</section>
<section id="perverse-incentives-and-their-consequences" class="level4">
<h4 class="anchored" data-anchor-id="perverse-incentives-and-their-consequences">Perverse Incentives and Their Consequences</h4>
<ul>
<li><strong>Focus on Efficiency Over Effectiveness:</strong>
<ul>
<li>The defense acquisition system became increasingly optimized for transparency, fairness, and administrative ease at the expense of speed and innovation.</li>
</ul></li>
<li><strong>Risk Aversion and Incrementalism:</strong>
<ul>
<li>Prioritizing technologically acceptable solutions at the lowest cost over potentially revolutionary advancements.</li>
</ul></li>
<li><strong>“Programs of Record” and Inertia:</strong>
<ul>
<li>Established programs, once funded, became difficult to displace, hindering the adoption of new technologies.</li>
</ul></li>
<li><strong>Defense Industry Adaptation:</strong>
<ul>
<li>Companies adapted to the Pentagon’s bureaucratic procurement system, focusing on fulfilling specific requirements rather than driving innovation.</li>
<li>This led to cost overruns, delays, and a resistance to new technologies that threatened existing programs.</li>
</ul></li>
<li><strong>Further Consolidation:</strong>
<ul>
<li>Increased regulations and costs favored larger companies that could navigate the complex system, leading to further consolidation and reduced competition.</li>
</ul></li>
</ul>
</section>
</section>
<section id="the-information-revolution-a-missed-opportunity" class="level3">
<h3 class="anchored" data-anchor-id="the-information-revolution-a-missed-opportunity">The Information Revolution: A Missed Opportunity</h3>
<section id="the-rise-of-silicon-valley-and-commercial-tech" class="level4">
<h4 class="anchored" data-anchor-id="the-rise-of-silicon-valley-and-commercial-tech">The Rise of Silicon Valley and Commercial Tech</h4>
<ul>
<li><strong>The Commercial Tech Boom:</strong>
<ul>
<li>The internet boom and subsequent technological advancements created a massive commercial market for Silicon Valley.</li>
</ul></li>
<li><strong>Shifting Focus and Funding:</strong>
<ul>
<li>Talented engineers and investors were drawn to the faster pace, larger profits, and less bureaucratic environment of the commercial sector.</li>
<li>Silicon Valley became the epicenter of the information revolution, driven by commercial, not military, applications.</li>
</ul></li>
</ul>
</section>
<section id="the-pentagons-blind-spots" class="level4">
<h4 class="anchored" data-anchor-id="the-pentagons-blind-spots">The Pentagon’s Blind Spots</h4>
<ul>
<li><strong>Focus on Platforms Over Networks:</strong>
<ul>
<li>The defense establishment remained focused on building and buying physical platforms rather than the connections between them.</li>
</ul></li>
<li><strong>Lack of Expertise in Connectivity:</strong>
<ul>
<li>Traditional defense companies lacked expertise in software, IT, and network development, crucial aspects of the information revolution.</li>
</ul></li>
<li><strong>Continued Reliance on Familiar Players:</strong>
<ul>
<li>Despite past failures, the Pentagon continued to award large contracts to traditional defense companies for IT and network projects, leading to further wasted resources.</li>
</ul></li>
<li><strong>Consequences:</strong>
<ul>
<li>The U.S. military, despite its vast resources, fell behind in adapting to the rapid pace of the information revolution.</li>
</ul></li>
</ul>
</section>
<section id="conclusion-an-ambush-by-the-future" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-an-ambush-by-the-future">Conclusion: An Ambush by the Future</h4>
<ul>
<li>The information revolution, driven by commercial forces, happened despite the Pentagon, not because of it.</li>
<li>The U.S. military, blinded by its own bureaucracy, missed the opportunity to harness the transformative power of networked technologies.</li>
<li>This disconnect between Washington and Silicon Valley left the U.S. vulnerable to rivals like China, who were rapidly adopting and adapting these new technologies.</li>
</ul>
</section>
</section>
</section>
<section id="chapter-4-information-revolution-2.0" class="level2">
<h2 class="anchored" data-anchor-id="chapter-4-information-revolution-2.0">Chapter 4: Information Revolution 2.0</h2>
<section id="the-widening-gap-between-military-and-commercial-technology" class="level3">
<h3 class="anchored" data-anchor-id="the-widening-gap-between-military-and-commercial-technology">The Widening Gap Between Military and Commercial Technology</h3>
<section id="nvidia-and-the-power-of-edge-computing" class="level4">
<h4 class="anchored" data-anchor-id="nvidia-and-the-power-of-edge-computing">NVIDIA and the Power of Edge Computing</h4>
<ul>
<li>In 2018, executives from NVIDIA, a computing company, visited the Senate to discuss their partnership with Oak Ridge National Laboratory.</li>
<li>They had built the world’s fastest supercomputer, capable of performing 200 quadrillion operations per second using NVIDIA’s <strong>graphics processing units (GPUs)</strong>.
<ul>
<li><strong>GPUs</strong> were originally designed for video games, which demanded increasingly powerful computing capabilities.</li>
<li>NVIDIA realized that the same technology powering artificial worlds in games could also power intelligent machines in the real world, particularly in <strong>artificial intelligence (AI)</strong> and <strong>machine learning</strong>.</li>
</ul></li>
<li>NVIDIA’s GPUs are now crucial for self-driving vehicles.
<ul>
<li>Their Drive AGX Pegasus chip, the size of a textbook, can conduct 320 trillion operations per second, enabling real-time data processing and interpretation on board the vehicle – a concept known as <strong>edge computing</strong>.</li>
</ul></li>
<li>Despite the military applications of their technology, NVIDIA had no GPUs operating on fielded U.S. military systems at the time.
<ul>
<li>This highlights a significant technological gap between the U.S. military and commercial technology companies.</li>
</ul></li>
<li>The most capable computer in a U.S. military system at the time was in the F-35 Joint Strike Fighter, nicknamed the “Flying Supercomputer.”
<ul>
<li>It could perform 400 billion operations per second, significantly less than NVIDIA’s Drive AGX Pegasus.</li>
</ul></li>
</ul>
</section>
<section id="the-u.s.-military-trapped-in-the-information-ages-past" class="level4">
<h4 class="anchored" data-anchor-id="the-u.s.-military-trapped-in-the-information-ages-past">The U.S. Military: Trapped in the Information Age’s Past</h4>
<ul>
<li>The U.S. military lags behind in utilizing modern information processing techniques.
<ul>
<li>Data collected by military machines is often processed later, either after a mission or streamed back to an operations center, putting a strain on communication networks and relying heavily on human analysis.</li>
</ul></li>
<li>While the Department of Defense built the precursor to the internet, it has fallen behind in adopting and adapting to the rapid pace of the information revolution, driven largely by commercial technology companies.</li>
<li>The information revolution comprises three key elements:
<ol type="1">
<li><strong>Sensors:</strong> Collect information.</li>
<li><strong>Computers:</strong> Process and store information.</li>
<li><strong>Networks:</strong> Move information.</li>
</ol></li>
<li>Advancements in any one element accelerate progress in the other two, leading to exponential growth.</li>
</ul>
<section id="networks-a-tale-of-two-connectivities" class="level5">
<h5 class="anchored" data-anchor-id="networks-a-tale-of-two-connectivities">Networks: A Tale of Two Connectivities</h5>
<ul>
<li>Commercial telecommunications companies have rapidly advanced network speeds, moving from 3G to 4G and soon to 5G.</li>
<li>The Department of Defense, however, lags in network connectivity, often relying on outdated systems and facing interoperability challenges.</li>
</ul>
</section>
<section id="sensors-a-world-awash-in-data" class="level5">
<h5 class="anchored" data-anchor-id="sensors-a-world-awash-in-data">Sensors: A World Awash in Data</h5>
<ul>
<li>The commercial sector has developed a wide array of low-cost, high-quality sensors, enabling machines to see and hear.</li>
<li>This proliferation of sensors has led to increased situational awareness in homes and vehicles, capabilities often lacking in military systems.</li>
<li>In contrast, the Department of Defense often relies on expensive, highly specialized sensors with limited deployment.</li>
</ul>
</section>
<section id="computing-power-the-rise-of-the-cloud-and-edge" class="level5">
<h5 class="anchored" data-anchor-id="computing-power-the-rise-of-the-cloud-and-edge">Computing Power: The Rise of the Cloud and Edge</h5>
<ul>
<li>The rise of cloud computing has provided almost unlimited processing power and data storage, making these services readily available to anyone.</li>
<li>The Department of Defense has been slow to adopt cloud computing, only recently awarding a contract for an enterprise cloud in 2019.</li>
<li><strong>Edge computing</strong> allows for decentralized processing power, creating a network of smart systems that collect, process, and share information.</li>
</ul>
</section>
</section>
<section id="software-the-achilles-heel-of-military-systems" class="level4">
<h4 class="anchored" data-anchor-id="software-the-achilles-heel-of-military-systems">Software: The Achilles’ Heel of Military Systems</h4>
<ul>
<li>Silicon Valley’s approach to software development emphasizes continuous building, testing, and releasing, leading to constant updates and improvements.</li>
<li>In contrast, the Department of Defense prioritizes hardware over software, resulting in multi-year software development cycles that cannot keep pace with technological advancements.</li>
<li>This disparity results in military personnel using equipment with inferior functionality compared to what they use in their daily lives.</li>
</ul>
</section>
</section>
<section id="the-ai-revolution-silicon-valleys-dominance-and-the-pentagons-lag" class="level3">
<h3 class="anchored" data-anchor-id="the-ai-revolution-silicon-valleys-dominance-and-the-pentagons-lag">The AI Revolution: Silicon Valley’s Dominance and the Pentagon’s Lag</h3>
<section id="the-rise-of-ai-and-machine-learning" class="level4">
<h4 class="anchored" data-anchor-id="the-rise-of-ai-and-machine-learning">The Rise of AI and Machine Learning</h4>
<ul>
<li>The information revolution, with its abundance of data and computing power, fueled the rise of AI and <strong>machine learning</strong>, enabling machines to learn from data without explicit programming.</li>
<li><strong>Deep learning</strong>, using layered algorithms in a neural network, further advanced AI capabilities.
<ul>
<li>NVIDIA’s GPUs were essential for deep learning, allowing machines to process vast amounts of data quickly.</li>
</ul></li>
<li>Google’s AlphaGo and AlphaStar demonstrated the power of AI in complex games like Go and StarCraft II, surpassing human capabilities.</li>
</ul>
</section>
<section id="the-militarys-struggle-to-adapt-to-ai" class="level4">
<h4 class="anchored" data-anchor-id="the-militarys-struggle-to-adapt-to-ai">The Military’s Struggle to Adapt to AI</h4>
<ul>
<li>While AI is integrated into everyday life, its adoption in the U.S. military has been slow.</li>
<li>The Department of Defense’s traditional approach to data as a byproduct, rather than a valuable asset, hinders the development and implementation of machine learning.</li>
<li>Instead of using AI to analyze data, the Pentagon often relies on increasing manpower, leading to inefficiencies.</li>
</ul>
</section>
</section>
<section id="commercial-space-revolution-outpacing-the-government" class="level3">
<h3 class="anchored" data-anchor-id="commercial-space-revolution-outpacing-the-government">Commercial Space Revolution: Outpacing the Government</h3>
<section id="the-rise-of-low-cost-space-launch" class="level4">
<h4 class="anchored" data-anchor-id="the-rise-of-low-cost-space-launch">The Rise of Low-Cost Space Launch</h4>
<ul>
<li>The emergence of low-cost commercial space launch companies, such as SpaceX, Blue Origin, and OneWeb, has revolutionized access to space.</li>
<li>Reusable rockets have drastically reduced launch costs, leading to more frequent launches and new satellite designs.</li>
</ul>
</section>
<section id="microsatellites-democratizing-space-technology" class="level4">
<h4 class="anchored" data-anchor-id="microsatellites-democratizing-space-technology">Microsatellites: Democratizing Space Technology</h4>
<ul>
<li>The affordability of launches has led to the rise of <strong>microsatellites</strong>, smaller and cheaper satellites that can be mass-produced and replaced more frequently.</li>
<li>This allows for rapid technological advancement, as new technology is deployed more often.</li>
</ul>
</section>
<section id="spacexs-starlink-a-vision-for-global-connectivity" class="level4">
<h4 class="anchored" data-anchor-id="spacexs-starlink-a-vision-for-global-connectivity">SpaceX’s Starlink: A Vision for Global Connectivity</h4>
<ul>
<li>SpaceX’s Starlink program aims to create a constellation of thousands of microsatellites in low-Earth orbit, providing global high-speed internet access.</li>
<li>This has the potential to connect everyone and everything, regardless of location.</li>
</ul>
</section>
</section>
<section id="advanced-manufacturing-on-demand-production-and-its-military-significance" class="level3">
<h3 class="anchored" data-anchor-id="advanced-manufacturing-on-demand-production-and-its-military-significance">Advanced Manufacturing: On-Demand Production and Its Military Significance</h3>
<section id="transforming-manufacturing-with-technology" class="level4">
<h4 class="anchored" data-anchor-id="transforming-manufacturing-with-technology">Transforming Manufacturing with Technology</h4>
<ul>
<li><strong>Advanced manufacturing</strong> allows for on-demand production of complex components and finished goods at the point of need, reducing costs and lead times.</li>
</ul>
</section>
<section id="additive-manufacturing-the-power-of-3d-printing" class="level4">
<h4 class="anchored" data-anchor-id="additive-manufacturing-the-power-of-3d-printing">Additive Manufacturing: The Power of 3D Printing</h4>
<ul>
<li><strong>Additive manufacturing</strong>, also known as 3D printing, enables the creation of complex parts and products from various materials.</li>
<li>Its applications include aerospace, automotive, and other industries.</li>
</ul>
</section>
<section id="the-future-of-manufacturing-localized-and-on-demand" class="level4">
<h4 class="anchored" data-anchor-id="the-future-of-manufacturing-localized-and-on-demand">The Future of Manufacturing: Localized and On-Demand</h4>
<ul>
<li>Advanced manufacturing, particularly additive manufacturing, has the potential to revolutionize production processes, allowing for localized and on-demand manufacturing with minimal waste.</li>
</ul>
</section>
</section>
<section id="biotechnology-redefining-human-potential-and-military-applications" class="level3">
<h3 class="anchored" data-anchor-id="biotechnology-redefining-human-potential-and-military-applications">Biotechnology: Redefining Human Potential and Military Applications</h3>
<section id="the-genomic-revolution" class="level4">
<h4 class="anchored" data-anchor-id="the-genomic-revolution">The Genomic Revolution</h4>
<ul>
<li>Advancements in computing and machine learning have enabled rapid and affordable genome sequencing.</li>
<li><strong>CRISPR</strong> and other genetic engineering technologies allow for the creation of new genetic materials and life forms.</li>
</ul>
</section>
<section id="human-performance-enhancement" class="level4">
<h4 class="anchored" data-anchor-id="human-performance-enhancement">Human Performance Enhancement</h4>
<ul>
<li>Biotechnology offers the potential for enhancing human capabilities through personalized medicine and biotechnologies.</li>
<li>This raises ethical considerations for military applications.</li>
</ul>
</section>
<section id="brain-computer-interface-technology" class="level4">
<h4 class="anchored" data-anchor-id="brain-computer-interface-technology">Brain-Computer Interface Technology</h4>
<ul>
<li><strong>Brain-computer interface (BCI)</strong> technology enables direct communication between the human brain and machines.</li>
<li>Companies like Neuralink are exploring BCI applications for typing, communication, and potential symbiosis with AI.</li>
<li>BCI has potential military applications in controlling drones, prosthetics, and other systems.</li>
</ul>
</section>
</section>
<section id="quantum-information-technology-a-glimpse-into-the-future" class="level3">
<h3 class="anchored" data-anchor-id="quantum-information-technology-a-glimpse-into-the-future">Quantum Information Technology: A Glimpse into the Future</h3>
<section id="quantum-science-exploiting-the-subatomic-world" class="level4">
<h4 class="anchored" data-anchor-id="quantum-science-exploiting-the-subatomic-world">Quantum Science: Exploiting the Subatomic World</h4>
<ul>
<li><strong>Quantum science</strong> explores the unique properties of matter at the subatomic level.</li>
<li><strong>Superposition:</strong> A quantum particle can exist in multiple states simultaneously.</li>
<li><strong>Entanglement:</strong> Two entangled particles are linked, and actions on one instantaneously affect the other, regardless of distance.</li>
</ul>
</section>
<section id="applications-of-quantum-information-technology" class="level4">
<h4 class="anchored" data-anchor-id="applications-of-quantum-information-technology">Applications of Quantum Information Technology</h4>
<ul>
<li><strong>Quantum sensors:</strong> Highly sensitive sensors capable of detecting minute changes in gravity and magnetic fields.</li>
<li><strong>Quantum communications:</strong> Ultra-secure communication systems based on the principles of entanglement.</li>
<li><strong>Quantum computers:</strong> Exponentially faster computers capable of solving problems beyond the reach of classical computers.</li>
</ul>
</section>
<section id="the-military-implications-of-quantum-technology" class="level4">
<h4 class="anchored" data-anchor-id="the-military-implications-of-quantum-technology">The Military Implications of Quantum Technology</h4>
<ul>
<li>Quantum technologies have the potential to revolutionize warfare, impacting sensing, communication, and computation.</li>
</ul>
</section>
</section>
<section id="the-widening-chasm-silicon-valleys-turn-away-from-the-pentagon" class="level3">
<h3 class="anchored" data-anchor-id="the-widening-chasm-silicon-valleys-turn-away-from-the-pentagon">The Widening Chasm: Silicon Valley’s Turn Away from the Pentagon</h3>
<section id="a-clash-of-cultures-and-values" class="level4">
<h4 class="anchored" data-anchor-id="a-clash-of-cultures-and-values">A Clash of Cultures and Values</h4>
<ul>
<li>The relationship between Silicon Valley and the Department of Defense has been strained by a clash of cultures, values, and priorities.</li>
<li>Silicon Valley’s global outlook and focus on innovation sometimes conflict with the Pentagon’s hierarchical structure and risk-averse nature.</li>
</ul>
</section>
<section id="economic-and-ideological-barriers" class="level4">
<h4 class="anchored" data-anchor-id="economic-and-ideological-barriers">Economic and Ideological Barriers</h4>
<ul>
<li>Working with the Pentagon can be slow, bureaucratic, and less profitable than serving commercial markets, deterring some tech companies.</li>
<li>Post-Cold War generations in Silicon Valley may not feel the same connection to the military as previous generations.</li>
<li>Snowden’s revelations fueled distrust of government surveillance and data collection practices.</li>
</ul>
</section>
<section id="case-studies-spacex-and-palantir" class="level4">
<h4 class="anchored" data-anchor-id="case-studies-spacex-and-palantir">Case Studies: SpaceX and Palantir</h4>
<ul>
<li>Both SpaceX and Palantir, despite facing resistance and bureaucratic hurdles, successfully broke into the defense market.</li>
<li>Their experiences highlight the challenges and potential rewards of working with the Department of Defense.</li>
</ul>
</section>
<section id="the-consolidation-dilemma" class="level4">
<h4 class="anchored" data-anchor-id="the-consolidation-dilemma">The Consolidation Dilemma</h4>
<ul>
<li>Both the defense industry and the technology sector have experienced consolidation, leading to fewer, larger companies.</li>
<li>While this has made some tech companies more capable of developing advanced technologies, it has also made them more risk-averse and less inclined to work with the military.</li>
</ul>
</section>
<section id="the-consequences-of-a-divided-landscape" class="level4">
<h4 class="anchored" data-anchor-id="the-consequences-of-a-divided-landscape">The Consequences of a Divided Landscape</h4>
<ul>
<li>The divide between the commercial tech sector and the defense world has significant implications for U.S. national security.</li>
<li>The U.S. military risks falling behind its strategic competitors in accessing and adopting cutting-edge technologies.</li>
</ul>
</section>
</section>
<section id="the-urgency-of-bridging-the-gap" class="level3">
<h3 class="anchored" data-anchor-id="the-urgency-of-bridging-the-gap">The Urgency of Bridging the Gap</h3>
<section id="acknowledging-the-systemic-failure" class="level4">
<h4 class="anchored" data-anchor-id="acknowledging-the-systemic-failure">Acknowledging the Systemic Failure</h4>
<ul>
<li>The failure to effectively integrate commercial technologies into the U.S. military is a systemic issue involving the Department of Defense, Congress, and the defense industry.</li>
<li>This failure stems from risk aversion, bureaucratic processes, and a lack of understanding of emerging technologies.</li>
</ul>
</section>
<section id="rethinking-the-military-industrial-complex" class="level4">
<h4 class="anchored" data-anchor-id="rethinking-the-military-industrial-complex">Rethinking the Military-Industrial Complex</h4>
<ul>
<li>The current system, focused on cost-saving and efficiency, has stiflied innovation and slowed down technology adoption.</li>
<li>A new approach is needed, one that encourages risk-taking, embraces innovation, and fosters collaboration between the military and the commercial tech sector.</li>
</ul>
</section>
<section id="embracing-disruption-and-change" class="level4">
<h4 class="anchored" data-anchor-id="embracing-disruption-and-change">Embracing Disruption and Change</h4>
<ul>
<li>The Department of Defense must become more agile, adaptable, and open to embracing disruptive technologies.</li>
<li>This requires cultural shifts, streamlined acquisition processes, and a willingness to learn from the successes of the commercial tech sector.</li>
</ul>
</section>
<section id="the-future-of-national-security-in-a-technologically-advanced-world" class="level4">
<h4 class="anchored" data-anchor-id="the-future-of-national-security-in-a-technologically-advanced-world">The Future of National Security in a Technologically Advanced World</h4>
<ul>
<li>The United States’ ability to maintain its technological edge in the 21st century depends on its ability to bridge the gap between the defense world and the commercial technology sector.</li>
<li>Failure to do so risks jeopardizing national security and ceding technological dominance to strategic competitors.</li>
</ul>
</section>
</section>
</section>
<section id="chapter-5.-something-worse-than-change" class="level2">
<h2 class="anchored" data-anchor-id="chapter-5.-something-worse-than-change">Chapter 5. Something Worse Than Change</h2>
<section id="the-current-state-of-u.s.-national-defense" class="level3">
<h3 class="anchored" data-anchor-id="the-current-state-of-u.s.-national-defense">The Current State of U.S. National Defense</h3>
<ul>
<li>Leaders in Washington are focused on great power competition and the need for military innovation.</li>
<li>This echoes discussions from the past three decades, but the U.S. is in a weaker position now than it was after the Cold War.</li>
</ul>
<section id="reasons-for-the-decline" class="level4">
<h4 class="anchored" data-anchor-id="reasons-for-the-decline">Reasons for the Decline</h4>
<ul>
<li><strong>Overinvestment in Large Bases and Platforms:</strong> The U.S. military has heavily invested in large bases and expensive platforms that are vulnerable to advanced weaponry developed by rivals.</li>
<li><strong>Delayed Modernization Programs:</strong> Transformational procurement programs initiated in the 1990s and 2000s have experienced significant delays, leaving the U.S. military with aging systems and a lack of replacements.</li>
<li><strong>Strain on Existing Forces:</strong> Years of overseas operations have strained the U.S. military, resulting in a smaller, older force that is still recovering.</li>
<li><strong>Inadequate Technological Adaptation:</strong> The information age revolution has not significantly benefited the military, despite its transformative potential.</li>
<li><strong>Political Dysfunction:</strong> A chaotic and gridlocked political environment in Washington hinders effective decision-making.</li>
</ul>
</section>
<section id="factors-contributing-to-the-decline" class="level4">
<h4 class="anchored" data-anchor-id="factors-contributing-to-the-decline">Factors Contributing to the Decline</h4>
<ul>
<li><strong>Misallocation of Resources:</strong> Trillions of dollars have been spent on defense since 1991, but often on poorly chosen military programs and foreign policies.</li>
<li><strong>Lack of Hard Choices:</strong> Defense leaders have been reluctant to make difficult decisions about cutting military systems and missions.</li>
<li><strong>Overemphasis on Outdated Technologies:</strong> Excessive focus and funding have been directed towards old or unproven technologies based on outdated conceptions of military power.</li>
<li><strong>Unequal Burden of Counterterrorism:</strong> The demands of counterterrorism efforts following the September 11th attacks, while necessary, diverted resources and attention from other defense priorities.</li>
</ul>
</section>
</section>
<section id="the-challenge-of-military-innovation-in-peacetime" class="level3">
<h3 class="anchored" data-anchor-id="the-challenge-of-military-innovation-in-peacetime">The Challenge of Military Innovation in Peacetime</h3>
<ul>
<li>A core question for the future of warfare is whether militaries can innovate and change effectively without the pressure of active conflict.</li>
</ul>
<section id="the-role-of-war-in-driving-innovation" class="level4">
<h4 class="anchored" data-anchor-id="the-role-of-war-in-driving-innovation">The Role of War in Driving Innovation</h4>
<ul>
<li>The U.S. military’s recent innovations, such as those in special operations forces and counterinsurgency warfare, were largely driven by the demands of the wars in Iraq and Afghanistan.</li>
<li>Wartime creates a clear and present need for change and imposes consequences for failing to innovate.</li>
</ul>
</section>
<section id="obstacles-to-peacetime-innovation" class="level4">
<h4 class="anchored" data-anchor-id="obstacles-to-peacetime-innovation">Obstacles to Peacetime Innovation</h4>
<ul>
<li><strong>Lack of Real-World Feedback:</strong> Unlike civilian institutions that have markets or competition to drive improvement, militaries lack routine sources of objective feedback on their performance.</li>
<li><strong>Bureaucratic Resistance to Change:</strong> Military bureaucracies are inherently resistant to change due to their hierarchical structures, risk aversion, and emphasis on tradition.</li>
<li><strong>“Psychology of Military Incompetence”:</strong> Norman Dixon’s concept highlights the dangers of clinging to outdated traditions, misusing technology, ignoring critical information, and underestimating adversaries.</li>
</ul>
</section>
</section>
<section id="historical-examples-of-successful-peacetime-innovation" class="level3">
<h3 class="anchored" data-anchor-id="historical-examples-of-successful-peacetime-innovation">Historical Examples of Successful Peacetime Innovation</h3>
<ul>
<li><strong>U.S. Navy’s Adoption of Aircraft Carriers (1920s-1930s):</strong>
<ul>
<li>Admiral William Moffat, recognizing the potential of aircraft carriers, led a movement within the Navy to challenge the dominance of battleships.</li>
<li>Moffat used analysis, war games, and at-sea experimentation to develop new operational concepts and tactics for carrier warfare.</li>
<li>He championed technological advancements in aircraft and carrier design and advocated for the promotion of aviators within the Navy’s ranks.</li>
<li>Moffat’s efforts were supported by civilian leaders like President Herbert Hoover and Congressman Carl Vinson.</li>
</ul></li>
<li><strong>Development of the Assault Breaker Initiative (Cold War):</strong>
<ul>
<li>The initiative aimed to develop a new way to counter a potential Soviet invasion of Europe without relying on tactical nuclear weapons.</li>
<li>Led by Secretary of Defense Harold Brown, the initiative resulted in the creation of a new kill chain that included intelligence-gathering aircraft, communication relays, stealth aircraft, and long-range precision-guided munitions.</li>
<li>While never used in combat, Assault Breaker significantly concerned Soviet military planners and helped deter conflict.</li>
</ul></li>
</ul>
<section id="key-factors-for-successful-peacetime-innovation" class="level4">
<h4 class="anchored" data-anchor-id="key-factors-for-successful-peacetime-innovation">Key Factors for Successful Peacetime Innovation</h4>
<ul>
<li><strong>Clear Threat Definition:</strong> Identifying specific operational problems that need to be solved through new capabilities and ways of fighting.</li>
<li><strong>Extraordinary Leadership:</strong>
<ul>
<li><strong>Civilian leadership</strong> to provide direction, resources, and political support.</li>
<li><strong>Military mavericks</strong> within the armed forces to champion change and challenge the status quo.</li>
</ul></li>
<li><strong>Focus on Operational and Organizational Transformation:</strong> Prioritizing how technology is used to build new capabilities, operational concepts, and organizational structures, rather than simply acquiring new technology for its own sake.</li>
<li><strong>Constant Real-World Experimentation:</strong> Providing opportunities for military operators to experiment with new technologies, learn from failures, and refine concepts based on real-world feedback.</li>
</ul>
</section>
</section>
<section id="the-erosion-of-u.s.-military-dominance" class="level3">
<h3 class="anchored" data-anchor-id="the-erosion-of-u.s.-military-dominance">The Erosion of U.S. Military Dominance</h3>
<ul>
<li>The U.S. defense establishment has struggled in recent decades due to a lack of meaningful experimentation, bureaucratic processes, and an overemphasis on abstract requirements over practical testing.</li>
</ul>
<section id="the-rise-of-china-as-a-peer-competitor" class="level4">
<h4 class="anchored" data-anchor-id="the-rise-of-china-as-a-peer-competitor">The Rise of China as a Peer Competitor</h4>
<ul>
<li>The rise of China poses an unprecedented challenge to U.S. military dominance, representing a major shift in the global balance of power.</li>
<li>Unlike the Soviet Union, China is on track to surpass the U.S. in comprehensive national power.</li>
</ul>
</section>
<section id="the-nature-of-the-chinese-communist-party" class="level4">
<h4 class="anchored" data-anchor-id="the-nature-of-the-chinese-communist-party">The Nature of the Chinese Communist Party</h4>
<ul>
<li>China’s ambitions are amplified by its unique history and ideology as the “Middle Kingdom” and its desire to reclaim its perceived rightful place in the world order.</li>
<li>The Chinese Communist Party under Xi Jinping has embraced communist orthodoxy, consolidated power, and demonstrated hostility towards liberal values and institutions.</li>
</ul>
</section>
<section id="chinas-technological-ambitions-and-military-expansion" class="level4">
<h4 class="anchored" data-anchor-id="chinas-technological-ambitions-and-military-expansion">China’s Technological Ambitions and Military Expansion</h4>
<ul>
<li>China is aggressively pursuing technological dominance in areas like 5G, artificial intelligence, and biotechnology, driven by a national strategy to become a global leader in innovation.</li>
<li>The Chinese government is engaged in a systematic campaign to acquire advanced technologies through any means necessary, including intellectual property theft, espionage, and coercion.</li>
<li>China is rapidly expanding its military capabilities, including its navy, and investing in advanced weapons systems designed to challenge U.S. military dominance in the Asia-Pacific region.</li>
</ul>
</section>
<section id="implications-for-the-future-of-warfare" class="level4">
<h4 class="anchored" data-anchor-id="implications-for-the-future-of-warfare">Implications for the Future of Warfare</h4>
<ul>
<li>The proliferation of precision-guided weapons has shifted the advantage from offense to defense, making it increasingly difficult for the U.S. to project power against a peer competitor like China.</li>
<li>The potential erosion of deterrence and the rise of Chinese military dominance in the Asia-Pacific region pose a significant threat to U.S. interests and global stability.</li>
</ul>
</section>
</section>
<section id="the-need-for-change-confronting-the-something-worse" class="level3">
<h3 class="anchored" data-anchor-id="the-need-for-change-confronting-the-something-worse">The Need for Change: Confronting the “Something Worse”</h3>
<ul>
<li>The “something worse than change” is the prospect of losing the ability to deter war with China and the potential consequences of a future conflict.</li>
<li>This requires the U.S. to:
<ul>
<li>Recognize the urgency of the challenge and abandon complacency.</li>
<li>Reimagine the kill chain and adapt to a future of warfare characterized by rapid technological advancements and a more contested environment.</li>
<li>Recommit to innovation, experimentation, and the development of new operational concepts.</li>
<li>Mobilize all elements of national power—economic, diplomatic, and military—to compete effectively with China.</li>
</ul></li>
<li>The stakes of this competition are high, with the potential to shape the future of the international order and determine the kind of world in which Americans will live.</li>
</ul>
</section>
</section>
<section id="chapter-6-a-different-kind-of-arms-race" class="level2">
<h2 class="anchored" data-anchor-id="chapter-6-a-different-kind-of-arms-race">Chapter 6: A Different Kind of Arms Race</h2>
<section id="a-new-global-arms-race-beyond-conventional-weapons" class="level3">
<h3 class="anchored" data-anchor-id="a-new-global-arms-race-beyond-conventional-weapons">A New Global Arms Race: Beyond Conventional Weapons</h3>
<ul>
<li>Representatives from over 80 countries have been discussing a ban on <strong>lethal autonomous weapons</strong> since 2014.
<ul>
<li><strong>Lethal autonomous weapons:</strong> Defined by the Department of Defense as machines activated to select and engage targets without human intervention.</li>
</ul></li>
<li>These weapons, often called “<strong>killer robots</strong>” by opponents, raise ethical concerns about removing humans from the kill chain.
<ul>
<li><strong>Kill chain:</strong> The process of identifying, targeting, and engaging an enemy.</li>
</ul></li>
<li>While China supports banning the <em>use</em> of these weapons, it has not committed to halting their <em>development</em>.
<ul>
<li>China’s definition of lethal autonomous weapons is narrow and does not encompass the full range of systems it’s developing.</li>
</ul></li>
<li>This discrepancy highlights a broader trend of rapidly developing military technologies, sparking fears of a global arms race encompassing:
<ul>
<li>Cyber weapons</li>
<li>AI</li>
<li>Hypersonic technology</li>
<li>5G networks</li>
<li>Quantum computing</li>
<li>Gene editing</li>
<li>Space capabilities</li>
</ul></li>
<li>China’s role in this arms race is particularly concerning due to:
<ul>
<li>Significant economic and military power</li>
<li>Less transparent intentions compared to other nations</li>
<li>A potential ambition to reshape the world order in favor of its illiberal values, including authoritarianism, crony capitalism, and surveillance states.</li>
<li>The perception of the United States as an obstacle to its ambitions.</li>
</ul></li>
<li>This competition for technological dominance is fueled by:
<ul>
<li>Mistrust between major powers</li>
<li>Fear of losing military advantage</li>
</ul></li>
</ul>
</section>
<section id="a-race-unlike-any-other-from-arms-to-cognition" class="level3">
<h3 class="anchored" data-anchor-id="a-race-unlike-any-other-from-arms-to-cognition">A Race Unlike Any Other: From Arms to Cognition</h3>
<ul>
<li>This technological competition differs from traditional arms races in several ways:
<ul>
<li><strong>Scope:</strong> It extends beyond traditional weapons to encompass <strong>enabling technologies</strong> that have broad civilian and military applications.
<ul>
<li><strong>Enabling technologies:</strong> Technologies such as AI, quantum information systems, biotechnologies, and new space technologies that will transform how societies and militaries function.</li>
</ul></li>
<li><strong>Impact:</strong> It will reshape every stage of the kill chain, influencing not just military action but also understanding and decision-making.</li>
<li><strong>Focus:</strong> The primary emphasis will be on accelerating one’s ability to close the kill chain while disrupting adversaries’ capacity to do the same.</li>
<li><strong>Nature:</strong> This competition will be less about amassing weapons and more about achieving cognitive superiority, essentially a race for information dominance.</li>
</ul></li>
</ul>
</section>
<section id="the-hypersonic-challenge-speed-and-unpredictability" class="level3">
<h3 class="anchored" data-anchor-id="the-hypersonic-challenge-speed-and-unpredictability">The Hypersonic Challenge: Speed and Unpredictability</h3>
<ul>
<li><strong>Hypersonic weapons:</strong> Missiles or air vehicles capable of flying at speeds exceeding Mach 5 (3,800 mph), making them both fast and unpredictable.
<ul>
<li>Unlike ballistic missiles, which are fast but predictable, or cruise missiles, which are slower but unpredictable, hypersonic weapons combine speed and maneuverability.</li>
</ul></li>
<li>This combination makes them difficult to track and intercept, posing a significant challenge to existing defense systems.</li>
<li>China has taken an early lead in hypersonic weapon development, investing heavily in research and testing.</li>
<li>While the U.S. is playing catch-up, developing and deploying hypersonic weapons is costly and time-consuming.</li>
<li>Despite these limitations, both countries are pursuing hypersonic weapons due to their strategic importance in maintaining conventional deterrence.</li>
</ul>
</section>
<section id="directed-energy-weapons-a-new-era-of-warfare" class="level3">
<h3 class="anchored" data-anchor-id="directed-energy-weapons-a-new-era-of-warfare">Directed Energy Weapons: A New Era of Warfare</h3>
<ul>
<li><strong>Directed energy weapons:</strong> Weapons that use concentrated energy, such as lasers or microwaves, to disable or destroy targets.</li>
<li>Recent advancements in laser technology have brought directed energy weapons closer to operational viability.</li>
<li>Advantages:
<ul>
<li>Higher rate of fire</li>
<li>Faster engagement</li>
<li>Lower cost per shot</li>
<li>No ammunition resupply required</li>
</ul></li>
<li>Limitations:
<ul>
<li>High power requirements currently limit their deployment to platforms with substantial power sources.</li>
<li>Counters, such as mirrors and heat shields, are being developed.</li>
</ul></li>
<li>While primarily defensive now, directed energy weapons have the potential to revolutionize warfare in the future.</li>
</ul>
</section>
<section id="the-cyber-arms-race-exploiting-digital-vulnerabilities" class="level3">
<h3 class="anchored" data-anchor-id="the-cyber-arms-race-exploiting-digital-vulnerabilities">The Cyber Arms Race: Exploiting Digital Vulnerabilities</h3>
<ul>
<li>The cyber domain has become a key battleground in modern warfare.</li>
<li>Cyberattacks can disable critical military infrastructure and compromise sensitive information.</li>
<li>The interconnected nature of modern military systems, such as the F-35 fighter jet with its millions of lines of code, increases their vulnerability to cyberattacks.</li>
<li>The use of AI in cyberwarfare raises concerns about data poisoning, where adversaries manipulate training data to compromise AI systems, leading to unintended and potentially disastrous consequences.</li>
</ul>
</section>
<section id="enabling-technologies-reshaping-the-kill-chain" class="level3">
<h3 class="anchored" data-anchor-id="enabling-technologies-reshaping-the-kill-chain">Enabling Technologies: Reshaping the Kill Chain</h3>
<ul>
<li><strong>Quantum information systems:</strong> Technologies that leverage quantum mechanics to enhance sensing, computing, and communication.
<ul>
<li><strong>Quantum sensors:</strong> Offer improved battlefield awareness and unprecedented intelligence-gathering capabilities.</li>
<li><strong>Quantum computers:</strong> Hold the potential to process vast amounts of data generated by intelligentized militaries and crack traditional encryption methods.</li>
<li><strong>Quantum-resistant encryption:</strong> Critical for securing information in a future where quantum computers could render current encryption obsolete.</li>
</ul></li>
<li><strong>Biotechnology:</strong>
<ul>
<li>Will enhance understanding of human genetics and enable the development of customized treatments and technologies for augmenting human capabilities.</li>
<li>Raises concerns about potential misuse, particularly in the context of China’s less restrictive ethical boundaries.</li>
</ul></li>
<li><strong>New space capabilities:</strong>
<ul>
<li>The proliferation of satellites, especially small satellites, will enhance communication, intelligence gathering, and targeting.</li>
<li>Development of space-based infrastructure, including power generation, mining, and manufacturing, will be crucial for securing a space-faring future.</li>
<li>The strategic importance of space will likely lead to an extension of military competition beyond Earth.</li>
</ul></li>
<li><strong>Artificial intelligence and machine learning:</strong>
<ul>
<li>Will significantly enhance human understanding in warfare, particularly by processing and analyzing vast amounts of data from various sources.</li>
<li>AI-powered systems can identify patterns, objects, and trends that humans might miss, enabling better and faster decision-making.</li>
<li>Intelligent machines, capable of acting autonomously within human-defined parameters, will revolutionize military operations.</li>
</ul></li>
</ul>
</section>
<section id="challenges-and-risks-of-the-ai-arms-race" class="level3">
<h3 class="anchored" data-anchor-id="challenges-and-risks-of-the-ai-arms-race">Challenges and Risks of the AI Arms Race</h3>
<ul>
<li>The rapid pace of AI development raises concerns about:
<ul>
<li>Premature deployment of insufficiently tested and potentially unreliable systems.</li>
<li>Accidental escalation and unintended consequences.</li>
<li>Ethical implications of increasingly autonomous weapons systems.</li>
</ul></li>
</ul>
</section>
<section id="the-uncomfortable-truth-and-the-need-for-urgency" class="level3">
<h3 class="anchored" data-anchor-id="the-uncomfortable-truth-and-the-need-for-urgency">The Uncomfortable Truth and the Need for Urgency</h3>
<ul>
<li>Arms control agreements, while valuable for establishing norms, may not be effective in preventing the weaponization of emerging technologies.</li>
<li>The United States faces the likelihood of not achieving outright victory in this race, with parity being a more realistic and desirable outcome.</li>
<li>It is crucial for the U.S. to recognize the gravity of this competition and demonstrate a greater sense of urgency in order to avoid falling behind China.</li>
<li>The potential consequences of losing this race are significant, with China aiming to leverage these technologies to become the world’s leading power.</li>
</ul>
</section>
<section id="conclusion-a-different-kind-of-race-a-critical-choice" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-a-different-kind-of-race-a-critical-choice">Conclusion: A Different Kind of Race, a Critical Choice</h3>
<ul>
<li>The race for technological superiority in the 21st century presents unprecedented challenges and risks.</li>
<li>It is not just a competition for military hardware, but a race for cognitive dominance and the ability to control the narrative in an increasingly information-driven world.</li>
<li>The United States faces a critical choice: rise to the challenge with the necessary urgency and commitment, or risk ceding the future to a rival power with a vastly different vision for the world.</li>
</ul>
</section>
</section>
<section id="chapter-7-human-command-machine-control" class="level2">
<h2 class="anchored" data-anchor-id="chapter-7-human-command-machine-control">Chapter 7: Human Command, Machine Control</h2>
<section id="the-ethical-dilemma-of-intelligent-machines-in-war" class="level3">
<h3 class="anchored" data-anchor-id="the-ethical-dilemma-of-intelligent-machines-in-war">The Ethical Dilemma of Intelligent Machines in War</h3>
<ul>
<li>The author recounts a poignant encounter with a Syrian mother who lost all five of her children in a barrel bomb attack, an experience that deeply affected both him and the late Senator John McCain.
<ul>
<li>This encounter underscores the profound human cost of war and serves as a stark reminder of the ethical considerations surrounding the use of force.</li>
</ul></li>
<li>The author grapples with the question of whether, as a potential civilian caught in a conflict, the knowledge of whether the weapon systems targeting him were operated by humans or machines would matter.
<ul>
<li>This question highlights a fundamental debate about the ethics of war in the age of intelligent machines:
<ul>
<li><strong>Is the morality of an action determined by the nature of the actor, or by the consequences of the action itself?</strong></li>
</ul></li>
</ul></li>
<li>The author argues that the current debate about intelligent machines in war often misses the mark by focusing on the wrong questions.
<ul>
<li>He suggests that instead of fixating on the means of warfare (e.g., “killer robots”), we should prioritize the ends (i.e., the ethical use of force) and the principles of human accountability that should govern them.</li>
</ul></li>
</ul>
</section>
<section id="the-importance-of-command-and-control" class="level3">
<h3 class="anchored" data-anchor-id="the-importance-of-command-and-control">The Importance of Command and Control</h3>
<ul>
<li>The author criticizes the term “human-machine teaming” often used to describe the relationship between humans and intelligent machines in a military context.
<ul>
<li>He argues that this term implies a false equivalence between human operators and machines.</li>
</ul></li>
<li>Instead, the author advocates for the concept of <strong>“human command and machine control,”</strong> emphasizing the hierarchical nature of the relationship where humans retain ultimate authority and responsibility.
<ul>
<li>This concept aligns with the long-standing military principles of command and control, ensuring that human judgment and ethics remain central to the use of force.</li>
</ul></li>
<li>The author acknowledges the concerns surrounding the potential for machines to act unethically.
<ul>
<li>However, he argues that humans have always exhibited a capacity for cruelty and that focusing solely on the perceived inhumanity of machines ignores the historical reality of human fallibility in war.</li>
</ul></li>
<li>The author emphasizes that the current debate should center around <strong>narrow artificial intelligence</strong> (AI), which is limited to performing specific tasks, rather than <strong>artificial general intelligence (AGI)</strong> or <strong>superintelligence</strong>, which remain speculative concepts.
<ul>
<li>He underscores that narrow AI, despite its capabilities, operates within the boundaries defined by its human creators.</li>
</ul></li>
</ul>
</section>
<section id="trust-accountability-and-the-limits-of-autonomy" class="level3">
<h3 class="anchored" data-anchor-id="trust-accountability-and-the-limits-of-autonomy">Trust, Accountability, and the Limits of Autonomy</h3>
<ul>
<li><p><strong>Autonomy</strong> in the context of machines, the author clarifies, does not imply independent decision-making but rather the delegation of tasks within predefined parameters set by humans.</p>
<ul>
<li>This concept mirrors the existing military practice of granting autonomy to human subordinates, albeit with clear rules of engagement and accountability mechanisms.</li>
</ul></li>
<li><p>The author proposes a framework for building trust in intelligent machines, drawing parallels to the trust established between human commanders and their subordinates. This framework rests on three pillars:</p>
<ol type="1">
<li><p><strong>Training:</strong> Rigorous training of machines to perform designated tasks effectively and ethically.</p></li>
<li><p><strong>Testing:</strong> Repeated testing to ensure the machine’s reliability, predictability, and adherence to established parameters.</p></li>
<li><p><strong>Trust:</strong> Trust is earned through consistent demonstration of competence and reliability in training and testing, leading to greater confidence in the machine’s ability to perform as intended.</p></li>
</ol></li>
<li><p>The author underscores that accountability remains paramount. Just as commanders are responsible for the actions of their human subordinates, they would bear the responsibility for the actions of the machines under their command.</p>
<ul>
<li>This accountability extends to the entire chain of command, including those involved in training, testing, and deploying the intelligent machines.</li>
</ul></li>
</ul>
</section>
<section id="differentiating-roles-leveraging-human-judgment" class="level3">
<h3 class="anchored" data-anchor-id="differentiating-roles-leveraging-human-judgment">Differentiating Roles: Leveraging Human Judgment</h3>
<ul>
<li>The author argues that one of the potential benefits of increased reliance on intelligent machines is the opportunity to free human operators from mundane and repetitive tasks, allowing them to focus on more complex and ethically demanding aspects of warfare.
<ul>
<li>This shift could lead to a more ethical use of force by allowing humans to leverage their unique capacity for judgment, empathy, and moral reasoning.</li>
</ul></li>
<li>The author acknowledges that current intelligent machines might outperform humans in certain tasks, particularly those requiring speed, accuracy, and consistency in data analysis and pattern recognition.
<ul>
<li>However, he stresses that machines should not be seen as replacements for human judgment in all instances.</li>
</ul></li>
<li>The author contends that while machines can enhance human decision-making by providing valuable insights and recommendations, the ultimate responsibility for decisions, especially those involving the use of lethal force, must remain with human commanders.
<ul>
<li>This approach ensures that human values and ethical considerations remain at the forefront of warfare.</li>
</ul></li>
</ul>
</section>
<section id="legal-and-ethical-considerations" class="level3">
<h3 class="anchored" data-anchor-id="legal-and-ethical-considerations">Legal and Ethical Considerations</h3>
<ul>
<li><p>The author argues that contrary to popular narratives, lethal autonomous weapons systems are not inherently illegal. He outlines the established legal criteria for determining the legality of a weapon:</p>
<ol type="1">
<li><p><strong>Discrimination:</strong> The weapon should be capable of distinguishing between combatants and civilians.</p></li>
<li><p><strong>Proportionality:</strong> The use of the weapon should be proportionate to the military objective, minimizing unnecessary civilian harm.</p></li>
<li><p><strong>Controllability:</strong> The effects of the weapon should be controllable, preventing unintended and widespread harm.</p></li>
</ol></li>
<li><p>The author emphasizes that the legality of a weapon hinges on its inherent design and intended effects, not on the autonomy of the actor deploying it.</p>
<ul>
<li>He suggests that focusing solely on the “autonomy” of a weapon system misses the critical point that even autonomous weapons operate within the parameters defined by their human creators.</li>
</ul></li>
<li><p>The author acknowledges the potential for errors and unintended consequences, even with highly intelligent machines.</p>
<ul>
<li>He argues that transparency, rigorous testing, and clearly defined rules of engagement are crucial for mitigating risks and ensuring accountability.</li>
</ul></li>
</ul>
</section>
<section id="the-importance-of-transparency-and-international-cooperation" class="level3">
<h3 class="anchored" data-anchor-id="the-importance-of-transparency-and-international-cooperation">The Importance of Transparency and International Cooperation</h3>
<ul>
<li>The author criticizes the secrecy surrounding the U.S. drone program, arguing that it created a perception of wrongdoing and hampered public understanding of the ethical considerations involved.
<ul>
<li>He advocates for a more transparent approach to the development and deployment of intelligent machines in warfare.</li>
</ul></li>
<li>The author suggests that the U.S. should lead by example, demonstrating its commitment to ethical development and use of intelligent machines.
<ul>
<li>He proposes inviting international scrutiny and collaboration to establish norms and standards for the responsible use of these technologies.</li>
</ul></li>
<li>The author acknowledges the challenges of international cooperation, particularly with rivals like China and Russia.
<ul>
<li>However, he argues that open dialogue and transparency are essential for building trust and establishing a framework for responsible development and use of intelligent machines in warfare.</li>
</ul></li>
</ul>
</section>
<section id="conclusion-a-reluctant-yes-with-caveats" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-a-reluctant-yes-with-caveats">Conclusion: A Reluctant Yes, With Caveats</h3>
<ul>
<li>The author concludes by advocating for the development of lethal autonomous weapons systems, but with significant caveats.
<ul>
<li>He argues that the U.S. cannot afford to cede this technological advantage to rivals who may not share its ethical commitments.</li>
</ul></li>
<li>The author draws a parallel to the development of nuclear weapons, suggesting that lethal autonomous weapons should be viewed as a deterrent, intended to prevent their use by adversaries.
<ul>
<li>He emphasizes that the ultimate goal should be to deter conflict and prevent the use of these weapons altogether.</li>
</ul></li>
<li>The author stresses the importance of transparency, rigorous testing, and clear accountability mechanisms to ensure that these weapons are developed and used ethically and responsibly.
<ul>
<li>He calls for a national conversation about these technologies, urging Americans to engage in this critical debate and shape the future of warfare.</li>
</ul></li>
</ul>
</section>
</section>
<section id="chapter-8-a-military-internet-of-things" class="level2">
<h2 class="anchored" data-anchor-id="chapter-8-a-military-internet-of-things">Chapter 8: A Military Internet of Things</h2>
<section id="the-need-for-a-new-approach-to-military-technology" class="level3">
<h3 class="anchored" data-anchor-id="the-need-for-a-new-approach-to-military-technology">The Need for a New Approach to Military Technology</h3>
<ul>
<li>In 2014, Senator John McCain, then Chairman of the Senate Armed Services Committee, directed the author to focus on investing in the future of warfare.</li>
<li>This directive stemmed from the realization that the U.S. military had been investing heavily in outdated technologies and needed to adapt to rapidly evolving threats.</li>
<li>The Department of Defense was slow to adapt, often prioritizing traditional weapons systems over emerging technologies.</li>
<li>This lack of foresight necessitated a proactive search for promising technological advancements outside of the traditional defense industry.</li>
</ul>
</section>
<section id="early-examples-of-autonomous-systems" class="level3">
<h3 class="anchored" data-anchor-id="early-examples-of-autonomous-systems">Early Examples of Autonomous Systems</h3>
<ul>
<li><strong>XQ-58A Valkyrie (formerly Low-Cost Attritable Aircraft Technology Program):</strong> An experimental unmanned aircraft developed by the Air Force Research Laboratory.
<ul>
<li><strong>Goals:</strong>
<ul>
<li>Develop a highly capable, unmanned combat aircraft with increased autonomy.</li>
<li>Create a more cost-effective alternative to expensive fighter jets.</li>
</ul></li>
<li><strong>Features:</strong>
<ul>
<li><strong>Attritable:</strong> Designed to be affordable enough to be considered expendable in combat.</li>
<li>Long flight range (twice that of cutting-edge fighter jets).</li>
<li>High subsonic speed.</li>
<li>Missile-like launch and parachute recovery system, eliminating the need for vulnerable runways.</li>
<li>Cost: Several million dollars per unit (fully equipped), allowing for the purchase of roughly a dozen or two Valkyries for the price of one F-35A.</li>
</ul></li>
</ul></li>
<li><strong>Orca (formerly Extra Large Unmanned Undersea Vehicle or XLUUV):</strong> An experimental autonomous submarine developed by the Navy.
<ul>
<li><strong>Features:</strong>
<ul>
<li>51 feet long with a potential length of 85 feet with a payload module.</li>
<li>Range of 6,500 nautical miles.</li>
<li>Payload module allows for the deployment of various payloads.</li>
</ul></li>
<li><strong>Cost:</strong>
<ul>
<li>Approximately $55 million per unit (without payloads and sensors).</li>
<li>Still significantly cheaper than the Navy’s Virginia-class submarine, which costs $3.2 billion per unit.</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="the-potential-of-intelligent-machines-in-future-warfare" class="level3">
<h3 class="anchored" data-anchor-id="the-potential-of-intelligent-machines-in-future-warfare">The Potential of Intelligent Machines in Future Warfare</h3>
<ul>
<li>The author argues that the true significance of systems like the Valkyrie and Orca lies in their potential to be integrated into a larger network of intelligent machines.</li>
<li>This network, envisioned as a “military Internet of Things,” would be characterized by:
<ul>
<li><strong>Rapid development and modernization:</strong> Leveraging commercial technologies and focusing on software rather than hardware would allow for faster innovation cycles.</li>
<li><strong>Affordability:</strong> Lower production costs would enable the deployment of larger numbers of autonomous systems.</li>
<li><strong>Flexibility and scalability:</strong> The network could be easily adapted and expanded to meet evolving threats.</li>
</ul></li>
<li>The key to unlocking the full potential of these systems lies in the integration of:
<ul>
<li><strong>Artificial intelligence (AI):</strong> Enabling machines to learn, adapt, and make decisions without direct human intervention.</li>
<li><strong>Vehicle autonomy:</strong> Allowing systems to operate independently and collaboratively with minimal human supervision.</li>
</ul></li>
<li>This shift would move away from the current model of heavily manned and expensive military platforms towards a more distributed and scalable force structure.</li>
</ul>
</section>
<section id="current-limitations-of-u.s.-military-networks-and-the-need-for-change" class="level3">
<h3 class="anchored" data-anchor-id="current-limitations-of-u.s.-military-networks-and-the-need-for-change">Current Limitations of U.S. Military Networks and the Need for Change</h3>
<ul>
<li>The author argues that the U.S. military’s current battle networks, designed around human operators, suffer from significant limitations:
<ul>
<li><strong>Information silos:</strong> Systems often struggle to share information seamlessly, leading to delays and inefficiencies in decision-making.</li>
<li><strong>Linear and rigid structures:</strong> Current networks often operate in predetermined ways, making them inflexible and vulnerable to disruption.</li>
<li><strong>High manpower requirements:</strong> Operating and maintaining complex systems require significant human resources.</li>
<li><strong>Slow decision-making:</strong> The human-centric nature of current systems slows down the speed at which information is processed and acted upon.</li>
</ul></li>
<li>These limitations are contrasted with the advancements in the commercial technology sector, particularly in developing the Internet of Things (IoT).</li>
<li>The IoT demonstrates the power of networked systems to share information seamlessly, enabling rapid decision-making and automated processes.</li>
</ul>
</section>
<section id="the-vision-of-a-military-internet-of-things" class="level3">
<h3 class="anchored" data-anchor-id="the-vision-of-a-military-internet-of-things">The Vision of a Military Internet of Things</h3>
<ul>
<li><strong>Core Principles:</strong>
<ul>
<li><strong>Shift from platforms to networks:</strong> Prioritizing the interconnection and interoperability of systems over individual platform capabilities.</li>
<li><strong>Human command, machine control:</strong> Humans set objectives and make strategic decisions, while machines execute tasks and manage the complexities of the network.</li>
<li><strong>Distributed intelligence:</strong> Intelligence is embedded throughout the network, enabling rapid information sharing and decision-making.</li>
<li><strong>Scalability and affordability:</strong> The network is designed to grow exponentially and incorporate affordable, attritable systems.</li>
</ul></li>
<li><strong>Advantages:</strong>
<ul>
<li><strong>Enhanced situational awareness:</strong> Seamless information sharing provides a comprehensive and real-time understanding of the battlespace.</li>
<li><strong>Accelerated decision-making:</strong> Machines process information and execute tasks at machine speed, enabling faster responses to threats.</li>
<li><strong>Increased efficiency and effectiveness:</strong> Automation and intelligent systems free up human operators to focus on higher-level tasks.</li>
<li><strong>Force multiplication:</strong> One human operator can potentially control numerous intelligent machines, significantly expanding the reach and scale of operations.</li>
<li><strong>Adaptability and resilience:</strong> The network can adapt to changing conditions and withstand the loss of individual nodes.</li>
</ul></li>
</ul>
</section>
<section id="implementing-a-military-internet-of-things-challenges-and-opportunities" class="level3">
<h3 class="anchored" data-anchor-id="implementing-a-military-internet-of-things-challenges-and-opportunities">Implementing a Military Internet of Things: Challenges and Opportunities</h3>
<ul>
<li><strong>Technological challenges:</strong>
<ul>
<li>Developing robust and secure communication protocols for the network.</li>
<li>Ensuring the reliability and trustworthiness of AI and autonomous systems.</li>
<li>Managing the complexity of a vast and interconnected network.</li>
</ul></li>
<li><strong>Organizational and cultural challenges:</strong>
<ul>
<li>Overcoming resistance to change within the military’s traditional, platform-centric mindset.</li>
<li>Adapting training and doctrine to accommodate new technologies and operating concepts.</li>
<li>Addressing ethical concerns surrounding the use of AI and autonomous systems in warfare.</li>
</ul></li>
<li><strong>Opportunities:</strong>
<ul>
<li><strong>Leveraging commercial technologies:</strong> The rapid pace of innovation in the private sector presents opportunities to adopt and adapt existing technologies for military use.</li>
<li><strong>Fostering partnerships:</strong> Collaborating with tech companies and research institutions to accelerate development and innovation.</li>
<li><strong>Investing in research and development:</strong> Prioritizing funding for key technologies such as AI, autonomy, and advanced networking.</li>
</ul></li>
</ul>
</section>
<section id="the-future-of-warfare-a-human-machine-partnership" class="level3">
<h3 class="anchored" data-anchor-id="the-future-of-warfare-a-human-machine-partnership">The Future of Warfare: A Human-Machine Partnership</h3>
<ul>
<li>The author envisions a future where human judgment and moral agency remain central to warfare, but are augmented by the capabilities of a military Internet of Things.</li>
<li>Intelligent machines would handle routine tasks, process information, and execute orders at machine speed, while human operators would focus on:
<ul>
<li>Setting strategic objectives.</li>
<li>Making critical decisions.</li>
<li>Providing ethical oversight.</li>
</ul></li>
<li>This human-machine partnership would enable the U.S. military to:
<ul>
<li>Maintain its technological edge in an era of rapid technological change.</li>
<li>Outmaneuver adversaries in highly contested environments.</li>
<li>Ensure the responsible and ethical use of force.</li>
</ul></li>
</ul>
</section>
<section id="conclusion-embracing-the-inevitable" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-embracing-the-inevitable">Conclusion: Embracing the Inevitable</h3>
<ul>
<li>The emergence of intelligent machines and the growing ubiquity of networked systems represent a fundamental shift in the nature of warfare.</li>
<li>The U.S. military must embrace these changes and adapt its thinking, force structure, and operating concepts to remain competitive in the 21st century.</li>
<li>The transition to a military Internet of Things will require significant investment, innovation, and a willingness to challenge long-held assumptions about the nature of military power.</li>
<li>Ultimately, the successful integration of intelligent machines into the U.S. military will depend on striking the right balance between human control and machine autonomy.</li>
</ul>
</section>
</section>
<section id="chapter-9-move-shoot-communicate" class="level2">
<h2 class="anchored" data-anchor-id="chapter-9-move-shoot-communicate">Chapter 9: Move, Shoot, Communicate</h2>
<section id="the-future-of-warfare-then-and-now" class="level3">
<h3 class="anchored" data-anchor-id="the-future-of-warfare-then-and-now">The Future of Warfare: Then and Now</h3>
<section id="jan-blochs-predictions-and-their-implications-today" class="level4">
<h4 class="anchored" data-anchor-id="jan-blochs-predictions-and-their-implications-today">Jan Bloch’s Predictions and Their Implications Today</h4>
<ul>
<li><strong>Jan Bloch</strong>, a Polish banker and military scholar, published a book in 1898 predicting how technology would transform warfare.
<ul>
<li>He accurately foresaw the lethality of modern battlefields due to technological advancements like:
<ul>
<li><strong>Machine guns</strong></li>
<li><strong>Smokeless gunpowder:</strong> This innovation would “lift the fog of war,” leaving armies exposed after initial volleys.</li>
<li><strong>Long-range artillery:</strong> Bloch calculated these were 116 times deadlier than those used a few decades prior.</li>
<li><strong>Improved rifles:</strong> Offering greater speed, accuracy, and range.</li>
<li>Other innovations: Including <strong>railroads, telegraphs, and steamships</strong>.</li>
</ul></li>
<li>Bloch believed this increase in lethality would make large-scale wars “impossible.”</li>
<li>However, World War I proved him wrong, though the conflict unfolded largely as he predicted, with trench warfare and high casualties (40 million deaths in four years).</li>
</ul></li>
</ul>
</section>
<section id="lessons-from-world-war-i-technological-advancements-and-doctrinal-lag" class="level4">
<h4 class="anchored" data-anchor-id="lessons-from-world-war-i-technological-advancements-and-doctrinal-lag">Lessons from World War I: Technological Advancements and Doctrinal Lag</h4>
<ul>
<li>World War I’s carnage resulted partly from militaries using antiquated tactics with modern technology.
<ul>
<li><strong>Technological advancements favored defenders</strong>, but offensive tactics remained unchanged, leading to devastating losses.</li>
<li><strong>Military technological parity</strong> among the great powers exacerbated the destructiveness.</li>
</ul></li>
</ul>
</section>
<section id="parallels-to-todays-security-environment-the-rise-of-china" class="level4">
<h4 class="anchored" data-anchor-id="parallels-to-todays-security-environment-the-rise-of-china">Parallels to Today’s Security Environment: The Rise of China</h4>
<ul>
<li>The proliferation of information technologies and precision strike weapons, particularly in China, is challenging America’s military dominance, creating an environment similar to the pre-World War I era.
<ul>
<li><strong>China’s military modernization</strong> is eroding U.S. advantages, especially in offensive capabilities.</li>
<li><strong>Military technological parity</strong> is re-emerging, with both the U.S. and China possessing similar advanced technologies.</li>
<li>The critical question becomes <strong>how to gain an advantage</strong> in this new era of warfare.</li>
</ul></li>
</ul>
</section>
</section>
<section id="the-enduring-competitions-of-warfare" class="level3">
<h3 class="anchored" data-anchor-id="the-enduring-competitions-of-warfare">The Enduring Competitions of Warfare</h3>
<ul>
<li><strong>Military planners</strong> face the difficult task of making investment decisions with incomplete information about future threats and technological advancements.
<ul>
<li>The goal is to <strong>discern how to gain a future advantage</strong> in the enduring competitions that define warfare.</li>
</ul></li>
</ul>
<section id="offense-vs.-defense" class="level4">
<h4 class="anchored" data-anchor-id="offense-vs.-defense">Offense vs.&nbsp;Defense</h4>
<ul>
<li>This fundamental competition involves attackers seeking to overcome defenders and vice versa.</li>
</ul>
</section>
<section id="the-kill-chain" class="level4">
<h4 class="anchored" data-anchor-id="the-kill-chain">The Kill Chain</h4>
<ul>
<li>This competition centers around which military can better:
<ul>
<li><strong>Understand</strong> the battlespace.</li>
<li><strong>Make decisions</strong> based on that understanding.</li>
<li><strong>Take actions</strong> to achieve their objectives.</li>
<li><strong>Deny</strong> these advantages to their opponents.</li>
</ul></li>
</ul>
</section>
<section id="the-three-elements-of-warfare-move-shoot-communicate" class="level4">
<h4 class="anchored" data-anchor-id="the-three-elements-of-warfare-move-shoot-communicate">The Three Elements of Warfare: Move, Shoot, Communicate</h4>
<ul>
<li>These operational considerations are crucial within the broader framework of offense vs.&nbsp;defense and the kill chain.</li>
</ul>
</section>
</section>
<section id="movement-shifting-advantages-and-the-rise-of-ubiquitous-sensing" class="level3">
<h3 class="anchored" data-anchor-id="movement-shifting-advantages-and-the-rise-of-ubiquitous-sensing">Movement: Shifting Advantages and the Rise of Ubiquitous Sensing</h3>
<section id="traditional-assumptions-of-u.s.-military-movement" class="level4">
<h4 class="anchored" data-anchor-id="traditional-assumptions-of-u.s.-military-movement">Traditional Assumptions of U.S. Military Movement</h4>
<ul>
<li>The U.S. has assumed it can:
<ul>
<li>Move large forces over long distances.</li>
<li>Rely on small numbers of advanced systems to hide, penetrate, and overmatch adversaries.</li>
<li>Maintain superior quality over quantity.</li>
<li>Ensure unfettered logistical support.</li>
</ul></li>
</ul>
</section>
<section id="the-impact-of-chinas-military-modernization-and-emerging-technologies" class="level4">
<h4 class="anchored" data-anchor-id="the-impact-of-chinas-military-modernization-and-emerging-technologies">The Impact of China’s Military Modernization and Emerging Technologies</h4>
<ul>
<li>China’s military modernization and emerging technologies challenge these assumptions:
<ul>
<li><strong>Ubiquitous sensors</strong> make hiding increasingly difficult and finding easier.
<ul>
<li>Examples:
<ul>
<li>Russian involvement in Ukraine exposed through social media imagery.</li>
<li>Chinese military installations in the South China Sea revealed by commercial satellite imagery.</li>
</ul></li>
</ul></li>
<li><strong>Large constellations of satellites</strong> will provide constant surveillance, eliminating hiding places for large military assets.</li>
<li><strong>Advanced sensors</strong>, like passive radar, are making stealth technologies less effective.</li>
<li><strong>Networks of intelligent machines</strong> will fuse sensor data, further eroding hiding opportunities.</li>
</ul></li>
</ul>
</section>
<section id="the-future-of-hiding-and-the-rise-of-deception" class="level4">
<h4 class="anchored" data-anchor-id="the-future-of-hiding-and-the-rise-of-deception">The Future of Hiding and the Rise of Deception</h4>
<ul>
<li><strong>Active deception</strong> of sensors may be the best hope for hiding.
<ul>
<li>This could involve targeting the algorithms that interpret sensor data.</li>
</ul></li>
</ul>
</section>
<section id="the-return-of-mass-to-the-battlefield-and-the-rise-of-battle-networks" class="level4">
<h4 class="anchored" data-anchor-id="the-return-of-mass-to-the-battlefield-and-the-rise-of-battle-networks">The Return of Mass to the Battlefield and the Rise of Battle Networks</h4>
<ul>
<li><strong>Military Internet of Things (IoT)</strong> will enable the deployment of vast numbers of intelligent machines, shifting the advantage to those who can field larger forces.
<ul>
<li>This challenges the traditional trade-off between quantity and quality, as militaries will be able to achieve both.</li>
<li>Example: The 2019 Iranian drone and missile attack on Saudi oil facilities demonstrates the potential of massed, attritable systems.</li>
</ul></li>
</ul>
</section>
<section id="the-increasing-speed-and-expanding-scope-of-movement" class="level4">
<h4 class="anchored" data-anchor-id="the-increasing-speed-and-expanding-scope-of-movement">The Increasing Speed and Expanding Scope of Movement</h4>
<ul>
<li>Military IoT will lead to:
<ul>
<li><strong>Exponential increase</strong> in the number of actions and the speed at which they occur.</li>
<li><strong>Collapsed timelines</strong> for decision-making, requiring greater automation.</li>
</ul></li>
<li><strong>Hypersonic weapons</strong> will further accelerate the speed of warfare, compressing strategic decisions to tactical timelines.
<ul>
<li>This could lead to a form of “mutually assured hypersonic destruction,” similar to the logic of nuclear deterrence.</li>
</ul></li>
</ul>
</section>
<section id="transformation-of-logistics" class="level4">
<h4 class="anchored" data-anchor-id="transformation-of-logistics">Transformation of Logistics</h4>
<ul>
<li><strong>Intelligent machines</strong> and <strong>advanced manufacturing</strong> will revolutionize logistics:
<ul>
<li>Systems will become easier, cheaper, and faster to produce.</li>
<li><strong>3D printing</strong> will enable on-demand production of weapons and equipment near the battlefield.</li>
</ul></li>
</ul>
</section>
<section id="the-growing-importance-of-the-digital-and-space-domains" class="level4">
<h4 class="anchored" data-anchor-id="the-growing-importance-of-the-digital-and-space-domains">The Growing Importance of the Digital and Space Domains</h4>
<ul>
<li>As physical movement becomes more difficult, militaries will prioritize:
<ul>
<li><strong>Cyber maneuver warfare:</strong> Offering speed, stealth, and plausible deniability.</li>
<li><strong>Space-based operations:</strong> Establishing persistent presence and logistical hubs in orbit.</li>
<li><strong>Expansion of the battlefield</strong> to include the space between Earth and the Moon.</li>
</ul></li>
</ul>
</section>
</section>
<section id="shooting-longer-ranges-increased-accuracy-and-overwhelming-effects" class="level3">
<h3 class="anchored" data-anchor-id="shooting-longer-ranges-increased-accuracy-and-overwhelming-effects">Shooting: Longer Ranges, Increased Accuracy, and Overwhelming Effects</h3>
<section id="traditional-u.s.-approach-to-shooting" class="level4">
<h4 class="anchored" data-anchor-id="traditional-u.s.-approach-to-shooting">Traditional U.S. Approach to Shooting</h4>
<ul>
<li>Assumptions have driven a preference for:
<ul>
<li>Small numbers of highly accurate weapons.</li>
<li>Shorter-range engagement.</li>
<li>Effective hiding as the best defense.</li>
</ul></li>
</ul>
</section>
<section id="the-impact-of-chinas-military-modernization-and-emerging-technologies-1" class="level4">
<h4 class="anchored" data-anchor-id="the-impact-of-chinas-military-modernization-and-emerging-technologies-1">The Impact of China’s Military Modernization and Emerging Technologies</h4>
<ul>
<li>China’s advancements in long-range, accurate, and lethal weapons are challenging these assumptions.
<ul>
<li>This affects U.S. air and maritime operations in East Asia and, to a lesser extent, U.S. forces in Europe and the Middle East.</li>
<li>Example: Iran’s downing of a U.S. Global Hawk drone in 2019.</li>
</ul></li>
</ul>
</section>
<section id="the-changing-character-of-shooting-from-kinetic-to-non-kinetic-effects" class="level4">
<h4 class="anchored" data-anchor-id="the-changing-character-of-shooting-from-kinetic-to-non-kinetic-effects">The Changing Character of Shooting: From Kinetic to Non-Kinetic Effects</h4>
<ul>
<li>While traditional weapons remain relevant, militaries will increasingly leverage:
<ul>
<li><strong>Cyberattacks:</strong> To cripple adversaries’ ability to wage war before deploying physical forces.</li>
<li><strong>Electronic warfare:</strong> To disrupt command and control systems.</li>
<li><strong>Directed energy weapons:</strong> Offering speed-of-light attacks.</li>
</ul></li>
</ul>
</section>
<section id="increasing-range-overcoming-physical-and-economic-limitations" class="level4">
<h4 class="anchored" data-anchor-id="increasing-range-overcoming-physical-and-economic-limitations">Increasing Range: Overcoming Physical and Economic Limitations</h4>
<ul>
<li>Non-kinetic weapons are not bound by the traditional limitations of range.</li>
<li>New technologies, such as hypersonic weapons and electromagnetic railguns, will also increase the range of kinetic fires.</li>
<li>This will eliminate safe havens and expand the battlefield to include:
<ul>
<li>Outer space.</li>
<li>Logistics networks.</li>
<li>Information and communications systems.</li>
<li>Domestic critical infrastructure.</li>
</ul></li>
</ul>
</section>
<section id="enhancing-accuracy-the-power-of-intelligent-machines-and-sensor-fusion" class="level4">
<h4 class="anchored" data-anchor-id="enhancing-accuracy-the-power-of-intelligent-machines-and-sensor-fusion">Enhancing Accuracy: The Power of Intelligent Machines and Sensor Fusion</h4>
<ul>
<li>Accuracy will improve through:
<ul>
<li>Faster data collection and sharing facilitated by intelligent machines.</li>
<li>Real-time precision strike capabilities enabled by military IoT.</li>
<li>Sensor fusion to overcome limitations of individual sensors and enhance target identification.</li>
</ul></li>
</ul>
</section>
<section id="increasing-effects-volume-velocity-and-the-overwhelm-advantage" class="level4">
<h4 class="anchored" data-anchor-id="increasing-effects-volume-velocity-and-the-overwhelm-advantage">Increasing Effects: Volume, Velocity, and the Overwhelm Advantage</h4>
<ul>
<li>The future of shooting involves:
<ul>
<li><strong>Vast numbers of armed intelligent machines</strong> capable of delivering both kinetic and non-kinetic effects.</li>
<li><strong>Increased volume and velocity of fire</strong> due to the sheer number of weapons and faster decision-making.</li>
<li><strong>Overwhelm tactics</strong> to overcome even well-defended targets through mass and attrition.</li>
</ul></li>
</ul>
</section>
</section>
<section id="communicate-decentralization-resilience-and-the-human-machine-nexus" class="level3">
<h3 class="anchored" data-anchor-id="communicate-decentralization-resilience-and-the-human-machine-nexus">Communicate: Decentralization, Resilience, and the Human-Machine Nexus</h3>
<section id="traditional-u.s.-military-communications-centralized-and-vulnerable" class="level4">
<h4 class="anchored" data-anchor-id="traditional-u.s.-military-communications-centralized-and-vulnerable">Traditional U.S. Military Communications: Centralized and Vulnerable</h4>
<ul>
<li>The U.S. relies on a <strong>centralized “hub-and-spoke” model</strong> for military communications, making it vulnerable to attack.</li>
<li>This model is:
<ul>
<li>Manpower-intensive.</li>
<li>Energy-intensive.</li>
<li>Bandwidth-dependent.</li>
<li>Physically large and susceptible to disruption.</li>
</ul></li>
</ul>
</section>
<section id="the-future-of-military-communications-decentralized-resilient-and-machine-driven" class="level4">
<h4 class="anchored" data-anchor-id="the-future-of-military-communications-decentralized-resilient-and-machine-driven">The Future of Military Communications: Decentralized, Resilient, and Machine-Driven</h4>
<ul>
<li>Militaries will prioritize:
<ul>
<li><strong>Resilient networks</strong> that can withstand attacks, recover quickly, and reconstitute themselves.</li>
<li><strong>Beyond-line-of-sight communications</strong> for extended range.</li>
<li><strong>Software-defined communications</strong> for frequency agility.</li>
<li><strong>Decentralized “mesh” networks</strong> that are more difficult to disrupt than centralized systems.</li>
</ul></li>
</ul>
</section>
<section id="enabling-technologies-for-decentralized-communications" class="level4">
<h4 class="anchored" data-anchor-id="enabling-technologies-for-decentralized-communications">Enabling Technologies for Decentralized Communications</h4>
<ul>
<li>Key enablers include:
<ul>
<li><strong>Ubiquitous space-based communications networks</strong> for global coverage and reduced jamming vulnerability.</li>
<li><strong>Intelligent machines with edge computing capabilities</strong> to process information locally, reducing reliance on centralized hubs.</li>
</ul></li>
</ul>
</section>
<section id="the-evolving-role-of-manned-systems-and-the-rise-of-human-machine-teaming" class="level4">
<h4 class="anchored" data-anchor-id="the-evolving-role-of-manned-systems-and-the-rise-of-human-machine-teaming">The Evolving Role of Manned Systems and the Rise of Human-Machine Teaming</h4>
<ul>
<li><strong>Manned systems</strong> will transition from platforms for moving, shooting, and communicating to mobile command and control centers.</li>
<li><strong>Human-machine teaming</strong> will become increasingly important, with:
<ul>
<li>Humans providing high-level decision-making and ethical oversight.</li>
<li>Machines performing tasks that require speed, scale, and precision.</li>
</ul></li>
</ul>
</section>
<section id="the-future-of-command-and-control-from-virtual-reality-to-brain-computer-interface" class="level4">
<h4 class="anchored" data-anchor-id="the-future-of-command-and-control-from-virtual-reality-to-brain-computer-interface">The Future of Command and Control: From Virtual Reality to Brain-Computer Interface</h4>
<ul>
<li>Future command and control will leverage:
<ul>
<li><strong>Virtual and augmented reality</strong> for immersive battlefield awareness.</li>
<li><strong>Brain-computer interface</strong> for direct communication between humans and intelligent machines.</li>
</ul></li>
</ul>
</section>
<section id="data-as-a-key-terrain-and-the-challenge-of-algorithmic-deception" class="level4">
<h4 class="anchored" data-anchor-id="data-as-a-key-terrain-and-the-challenge-of-algorithmic-deception">Data as a Key Terrain and the Challenge of Algorithmic Deception</h4>
<ul>
<li>Protecting military data will be crucial, as it underpins the effectiveness of artificial intelligence.
<ul>
<li>Adversaries will seek to poison data sets and deceive algorithms.</li>
<li>Countering these threats will require:
<ul>
<li><strong>Rapid algorithm updates</strong> to patch vulnerabilities and adapt to new tactics.</li>
<li><strong>Sensor fusion</strong> to provide context and reduce the likelihood of deception.</li>
</ul></li>
</ul></li>
</ul>
</section>
</section>
<section id="implications-for-the-united-states-reimagining-national-defense" class="level3">
<h3 class="anchored" data-anchor-id="implications-for-the-united-states-reimagining-national-defense">Implications for the United States: Reimagining National Defense</h3>
<section id="reassessing-assumptions-and-embracing-new-approaches" class="level4">
<h4 class="anchored" data-anchor-id="reassessing-assumptions-and-embracing-new-approaches">Reassessing Assumptions and Embracing New Approaches</h4>
<ul>
<li>The U.S. must adapt its military to a changing threat environment and technological landscape.</li>
<li>This requires rethinking assumptions about:
<ul>
<li>Force structure: From small numbers of exquisite systems to larger numbers of more affordable and attritable platforms.</li>
<li>Operational concepts: From reliance on dominance to strategies that account for contested environments.</li>
<li>Technological development: Prioritizing technologies that enhance resilience, agility, and the ability to operate in contested domains.</li>
</ul></li>
</ul>
</section>
<section id="recognizing-the-erosion-of-dominance-and-preparing-for-a-different-future" class="level4">
<h4 class="anchored" data-anchor-id="recognizing-the-erosion-of-dominance-and-preparing-for-a-different-future">Recognizing the Erosion of Dominance and Preparing for a Different Future</h4>
<ul>
<li>The U.S. must acknowledge that its military dominance is eroding.</li>
<li>China’s rise as a peer competitor necessitates a fundamental shift in thinking about national defense.</li>
<li>The future security environment will be characterized by:
<ul>
<li><strong>Military technological parity</strong> between great powers.</li>
<li><strong>Contested environments</strong> across all domains, including cyber and space.</li>
<li><strong>Accelerated decision-making timelines</strong> driven by the speed of warfare.</li>
</ul></li>
</ul>
</section>
<section id="embracing-uncertainty-and-the-need-for-adaptation" class="level4">
<h4 class="anchored" data-anchor-id="embracing-uncertainty-and-the-need-for-adaptation">Embracing Uncertainty and the Need for Adaptation</h4>
<ul>
<li>The exact trajectory of technological development and the future of warfare are uncertain.</li>
<li>The U.S. must remain adaptable, constantly reassessing its assumptions and adjusting its strategies.</li>
<li>The key to success lies in anticipating change, embracing innovation, and outmaneuvering adversaries in the enduring competitions that define warfare.</li>
</ul>
</section>
</section>
</section>
<section id="chapter-10-defense-without-dominance" class="level2">
<h2 class="anchored" data-anchor-id="chapter-10-defense-without-dominance">Chapter 10: Defense Without Dominance</h2>
<section id="the-need-for-a-new-defense-strategy" class="level3">
<h3 class="anchored" data-anchor-id="the-need-for-a-new-defense-strategy">The Need for a New Defense Strategy</h3>
<ul>
<li>In 2017, John McCain urged the Secretary of Defense to shift national defense focus from counterterrorism to the challenges posed by <strong>great power competitors</strong>, primarily China.
<ul>
<li><strong>Great power competitors</strong>: Nations with significant economic, technological, and military capabilities that can challenge U.S. interests and influence on a global scale.</li>
</ul></li>
<li>This shift was deemed necessary due to America’s declining military advantage and the increasing capabilities of China’s military.</li>
<li>McCain stressed the need for prioritization and strategic thinking in the face of finite resources.</li>
<li>He argued that the new defense strategy presented a crucial opportunity to develop an effective approach to China.</li>
</ul>
</section>
<section id="the-importance-of-strategy-and-choice" class="level3">
<h3 class="anchored" data-anchor-id="the-importance-of-strategy-and-choice">The Importance of Strategy and Choice</h3>
<ul>
<li>McCain criticized the misuse of the word “strategy” in Washington, where it often masked the lack of real prioritization.</li>
<li>He believed that effective strategies require making hard choices, prioritizing critical goals, and accepting trade-offs.</li>
<li>This approach stood in contrast to the common practice of creating all-inclusive but ultimately meaningless “laundry lists” of priorities.</li>
</ul>
</section>
<section id="the-2018-national-defense-strategy-a-step-in-the-right-direction" class="level3">
<h3 class="anchored" data-anchor-id="the-2018-national-defense-strategy-a-step-in-the-right-direction">The 2018 National Defense Strategy: A Step in the Right Direction</h3>
<ul>
<li>The 2018 National Defense Strategy, influenced by McCain’s advocacy, marked a positive step towards addressing the challenges of great power competition.</li>
<li><strong>Key Strengths:</strong>
<ul>
<li>Clearly identified long-term strategic competition with China and Russia as the top priority for the Department of Defense.</li>
<li>Provided detailed guidance for policy and programmatic choices in classified form.</li>
</ul></li>
<li>Despite its strengths, the 2018 strategy was seen as a starting point that required further development and bolder action.</li>
</ul>
</section>
<section id="the-need-for-a-more-radical-shift-defense-without-dominance" class="level3">
<h3 class="anchored" data-anchor-id="the-need-for-a-more-radical-shift-defense-without-dominance">The Need for a More Radical Shift: Defense Without Dominance</h3>
<ul>
<li>The author argues that the scale of change required necessitates a move beyond incremental adjustments.</li>
<li><strong>Defense without dominance</strong>: A strategic approach that acknowledges the decline of U.S. military superiority and focuses on defending core interests rather than pursuing global dominance.
<ul>
<li>Requires a fundamental shift in mindset, moving away from the offensive, power-projection model that has characterized U.S. military strategy since World War II.</li>
</ul></li>
</ul>
</section>
<section id="rethinking-americas-goals-in-an-era-of-great-power-competition" class="level3">
<h3 class="anchored" data-anchor-id="rethinking-americas-goals-in-an-era-of-great-power-competition">Rethinking America’s Goals in an Era of Great Power Competition</h3>
<ul>
<li>The post-Cold War era, characterized by American dominance, allowed the U.S. to pursue expansive global goals.
<ul>
<li>This period was an anomaly in history, where great power competition is the norm.</li>
</ul></li>
<li>The return of great power competition, particularly with China, necessitates a reassessment of U.S. goals and a return to prioritizing core interests.
<ul>
<li><strong>Core Interests</strong>: Those interests deemed so vital to a nation’s security, prosperity, and values that it is prepared to defend them with military force.</li>
</ul></li>
<li>The author argues for a more realistic and focused approach, recognizing that great powers can limit each other’s ambitions.</li>
</ul>
</section>
<section id="denying-china-military-dominance-the-primary-objective" class="level3">
<h3 class="anchored" data-anchor-id="denying-china-military-dominance-the-primary-objective">Denying China Military Dominance: The Primary Objective</h3>
<ul>
<li>The author contends that preventing Chinese military dominance in Asia should be the overarching objective of U.S. defense strategy.
<ul>
<li>Chinese military dominance could have detrimental consequences for the U.S. and its allies, potentially granting China control over vital economic centers and granting it leverage in international disputes.</li>
</ul></li>
<li>This goal requires prioritizing the Indo-Pacific region and making difficult choices about resource allocation and military deployments.</li>
</ul>
</section>
<section id="homeland-defense-a-new-old-imperative" class="level3">
<h3 class="anchored" data-anchor-id="homeland-defense-a-new-old-imperative">Homeland Defense: A New (Old) Imperative</h3>
<ul>
<li>For the first time since the 19th century, the U.S. faces a credible threat of conventional military attack on its homeland.
<ul>
<li>China’s development of long-range precision strike capabilities has made U.S. territory vulnerable.</li>
</ul></li>
<li>This new reality necessitates a significant shift in U.S. defense posture, requiring investments in homeland defense and a reevaluation of the military’s role in protecting the U.S. from conventional attack.</li>
</ul>
</section>
<section id="embracing-a-defensive-mindset-and-a-new-american-way-of-war" class="level3">
<h3 class="anchored" data-anchor-id="embracing-a-defensive-mindset-and-a-new-american-way-of-war">Embracing a Defensive Mindset and a New American Way of War</h3>
<ul>
<li>The author calls for a shift from an offensive to a defensive mindset, adapting to the challenges posed by China’s military capabilities.</li>
<li>This new approach emphasizes:
<ul>
<li><strong>Denial:</strong> Preventing adversaries from achieving their objectives by making it too costly or difficult.</li>
<li><strong>Deterrence:</strong> Dissuading adversaries from taking aggressive actions by demonstrating the ability and willingness to inflict unacceptable costs.</li>
</ul></li>
<li>This shift requires a move away from the traditional U.S. military model of power projection and dominance towards a more agile and resilient force structure.</li>
</ul>
</section>
<section id="building-a-different-kind-of-military-for-a-different-kind-of-war" class="level3">
<h3 class="anchored" data-anchor-id="building-a-different-kind-of-military-for-a-different-kind-of-war">Building a Different Kind of Military for a Different Kind of War</h3>
<ul>
<li>The current U.S. military, designed for a different era, is ill-suited to the challenges of great power competition with China.</li>
<li><strong>Key Weaknesses:</strong>
<ul>
<li>Reliance on small numbers of expensive, heavily manned, and vulnerable systems.</li>
<li>Centralized networks susceptible to disruption.</li>
<li>Limited ability to operate effectively in contested environments.</li>
</ul></li>
<li><strong>Attributes of a Future Force:</strong>
<ul>
<li><strong>Distributed Systems:</strong> Larger numbers of smaller, more dispersed systems to complicate enemy targeting and enhance survivability.</li>
<li><strong>Expendable Systems:</strong> Lower-cost, easily replaceable systems to mitigate the impact of losses and make it more expensive for adversaries to engage U.S. forces.</li>
<li><strong>Unmanned Systems:</strong> Greater reliance on unmanned systems to reduce risk to human life and operate more effectively in high-threat environments.</li>
<li><strong>Decentralized Networks:</strong> More resilient and adaptable networks that are difficult to disrupt and can continue to function even under attack.</li>
<li><strong>Software-Defined Capabilities:</strong> Greater emphasis on software, artificial intelligence, and autonomous systems to enhance decision-making, speed, and lethality.</li>
</ul></li>
</ul>
</section>
<section id="the-importance-of-allies-strength-in-partnerships" class="level3">
<h3 class="anchored" data-anchor-id="the-importance-of-allies-strength-in-partnerships">The Importance of Allies: Strength in Partnerships</h3>
<ul>
<li>The author stresses the critical role of allies in balancing Chinese power and deterring aggression.</li>
<li>While acknowledging the need for allies to share the burden of defense, the author criticizes the Trump administration’s approach to alliances as counterproductive.</li>
<li>He argues for a more collaborative and mutually beneficial approach, recognizing that allies provide:
<ul>
<li><strong>Forward Presence:</strong> Access to bases and territory that enhances U.S. military posture and reduces reliance on long-range power projection.</li>
<li><strong>Operational Support:</strong> Contributions to collective defense efforts, increasing overall capability and capacity.</li>
<li><strong>Political and Diplomatic Leverage:</strong> Amplified pressure on adversaries and greater legitimacy for U.S. actions.</li>
</ul></li>
</ul>
</section>
<section id="conclusion-embracing-change-and-reimagining-defense" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-embracing-change-and-reimagining-defense">Conclusion: Embracing Change and Reimagining Defense</h3>
<ul>
<li>The author emphasizes the need for urgent and substantial changes to U.S. defense strategy to adapt to the realities of great power competition with China.</li>
<li>This requires a shift in mindset, a reassessment of goals, and a willingness to make difficult choices.</li>
<li>Failure to adapt risks leaving the U.S. vulnerable to Chinese coercion and unable to defend its core interests.</li>
<li>The future of U.S. national security depends on the ability to embrace change and reimagine defense in an era of renewed great power rivalry.</li>
</ul>
</section>
</section>
<section id="chapter-11-bureaucracy-does-its-thing" class="level2">
<h2 class="anchored" data-anchor-id="chapter-11-bureaucracy-does-its-thing">Chapter 11: Bureaucracy Does Its Thing</h2>
<section id="the-case-of-the-uss-harry-truman-a-microcosm-of-bureaucratic-inertia" class="level3">
<h3 class="anchored" data-anchor-id="the-case-of-the-uss-harry-truman-a-microcosm-of-bureaucratic-inertia">The Case of the USS Harry Truman: A Microcosm of Bureaucratic Inertia</h3>
<ul>
<li>In 2019, Secretary of Defense James Mattis and Secretary of the Navy Richard Spencer sought to modernize the Navy’s fleet by retiring the USS Harry Truman, an aircraft carrier, to free up funds for new technologies.</li>
</ul>
<section id="the-rationale-for-retiring-the-truman" class="level4">
<h4 class="anchored" data-anchor-id="the-rationale-for-retiring-the-truman">The Rationale for Retiring the Truman</h4>
<ul>
<li>The Truman was due for a costly mid-life refueling.</li>
<li>Retiring the ship would save $3.5 billion in refueling costs and $30 billion in operating and maintenance costs over its remaining lifespan.</li>
<li>These savings could fund investments in unmanned vessels and other advanced capabilities.</li>
</ul>
</section>
<section id="congressional-and-industry-backlash" class="level4">
<h4 class="anchored" data-anchor-id="congressional-and-industry-backlash">Congressional and Industry Backlash</h4>
<ul>
<li>Congress, caught off guard by the proposal, reacted negatively due to a lack of prior consultation and the perceived risk of replacing a proven asset with unproven technologies.</li>
<li>Congressional representatives from states heavily invested in the Truman’s maintenance and shipbuilding industry, along with lobbyists and unions, mobilized to block the retirement.</li>
</ul>
</section>
<section id="the-white-house-reversal" class="level4">
<h4 class="anchored" data-anchor-id="the-white-house-reversal">The White House Reversal</h4>
<ul>
<li>Vice President Mike Pence, in a politically motivated move, announced the reversal of the Truman’s retirement during a visit to the ship in Virginia, a key state for the upcoming presidential election.</li>
</ul>
</section>
<section id="the-outcome" class="level4">
<h4 class="anchored" data-anchor-id="the-outcome">The Outcome</h4>
<ul>
<li>The Truman’s retirement was canceled, and Congress allocated additional funds to keep it operational, diverting resources from future capabilities.</li>
<li>This epitomizes the difficulty of enacting meaningful change within the defense establishment due to bureaucratic inertia, political maneuvering, and the influence of special interest groups.</li>
</ul>
</section>
</section>
<section id="the-budget-process-a-cycle-of-short-term-thinking" class="level3">
<h3 class="anchored" data-anchor-id="the-budget-process-a-cycle-of-short-term-thinking">The Budget Process: A Cycle of Short-Term Thinking</h3>
<ul>
<li>The annual defense budget process, totaling nearly $700 billion for fiscal year 2020, exemplifies the prioritization of short-term needs over long-term strategic investments.</li>
</ul>
<section id="challenges-of-the-budget-process" class="level4">
<h4 class="anchored" data-anchor-id="challenges-of-the-budget-process">Challenges of the Budget Process:</h4>
<ul>
<li><strong>Lengthy and Inflexible:</strong> The multi-year budget planning cycle (currently five years) hinders adaptability to emerging technologies and changing security threats.</li>
<li><strong>Congressional Constraints:</strong> Congress often restricts the Pentagon’s budgetary flexibility, limiting the ability to reallocate funds to new priorities. For example, reprogramming funds often requires approval from multiple congressional committees and is capped at a tiny fraction of the total budget (less than 0.009%).</li>
<li><strong>Focus on Existing Programs:</strong> The majority of the budget is pre-allocated to existing programs, making it challenging to secure funding for new technologies.</li>
</ul>
</section>
<section id="the-power-of-communities-of-interest" class="level4">
<h4 class="anchored" data-anchor-id="the-power-of-communities-of-interest">The Power of “Communities of Interest”</h4>
<ul>
<li><strong>Decentralized Power Structure:</strong> Power within the Pentagon is distributed among various “communities of interest” (e.g., different branches of the military, specific weapons programs). These groups wield significant influence over budgetary decisions.</li>
<li><strong>Bottom-Up Budgeting:</strong> Budget proposals often originate from these communities, focused on maintaining existing programs rather than driving innovation or embracing disruptive technologies.</li>
<li><strong>Short-Term Incentives:</strong> Military personnel and civilian officials are incentivized to prioritize the programs and platforms within their communities of interest, as this impacts their careers and funding.</li>
</ul>
</section>
</section>
<section id="a-flawed-system-from-requirements-to-acquisition" class="level3">
<h3 class="anchored" data-anchor-id="a-flawed-system-from-requirements-to-acquisition">A Flawed System: From Requirements to Acquisition</h3>
<ul>
<li>The U.S. defense establishment faces systemic challenges beyond budgeting, hindering its ability to adapt and modernize effectively.</li>
</ul>
<section id="the-requirements-process-stifling-innovation" class="level4">
<h4 class="anchored" data-anchor-id="the-requirements-process-stifling-innovation">The Requirements Process: Stifling Innovation</h4>
<ul>
<li><strong>Purpose:</strong> To determine and validate necessary military capabilities for development or acquisition.</li>
<li><strong>Challenges:</strong>
<ul>
<li><strong>Bureaucratic Delays:</strong> The process can take years, leaving the military with outdated or inadequate equipment.</li>
<li><strong>Consensus-Driven:</strong> This often leads to a focus on the lowest common denominator and a resistance to high-risk, high-reward technologies.</li>
<li><strong>Lack of Vision:</strong> The process frequently fails to anticipate future needs or consider the potential of emerging technologies.</li>
</ul></li>
</ul>
</section>
<section id="the-acquisition-process-slow-and-risk-averse" class="level4">
<h4 class="anchored" data-anchor-id="the-acquisition-process-slow-and-risk-averse">The Acquisition Process: Slow and Risk-Averse</h4>
<ul>
<li><strong>Purpose:</strong> To acquire the capabilities identified in the requirements process.</li>
<li><strong>Challenges:</strong>
<ul>
<li><strong>Excessive Bureaucracy:</strong> The process is notoriously slow, risk-averse, and bogged down in regulations and paperwork.</li>
<li><strong>Focus on Traditional Systems:</strong> There’s a bias toward acquiring familiar technologies and upgrading existing systems, even when revolutionary solutions are available.</li>
<li><strong>Lack of Accountability:</strong> The diffuse decision-making structure often means that no single individual is empowered to take risks or accelerate the acquisition of vital technologies.</li>
</ul></li>
</ul>
</section>
</section>
<section id="the-political-and-cultural-dimensions-of-inertia" class="level3">
<h3 class="anchored" data-anchor-id="the-political-and-cultural-dimensions-of-inertia">The Political and Cultural Dimensions of Inertia</h3>
<ul>
<li><strong>Short-Term Political Incentives:</strong> Elected officials prioritize immediate concerns of their constituents and are less likely to champion long-term investments in defense innovation that may not yield immediate political benefits.</li>
<li><strong>The Influence of Special Interests:</strong> While lobbying by defense contractors plays a role, the bigger issue is the dwindling number of major defense companies and the outsized influence of those focused on legacy systems. This limits competition and innovation.</li>
<li><strong>Decline in Military Experience in Congress:</strong> The declining number of lawmakers with direct military experience can lead to both excessive deference to the military’s judgment and a lack of understanding of its complexities.</li>
<li><strong>Lack of Technical Expertise:</strong> The absence of technical backgrounds among political and military leaders hinders the understanding and adoption of emerging technologies.</li>
<li><strong>Resistance to Disruption:</strong> The shift to new technologies, while necessary, will inevitably cause economic and social disruption, creating resistance from those whose livelihoods depend on legacy systems.</li>
</ul>
</section>
<section id="the-trump-factor" class="level3">
<h3 class="anchored" data-anchor-id="the-trump-factor">The Trump Factor</h3>
<ul>
<li>While not solely responsible for the dysfunction, the Trump presidency has exacerbated existing problems.</li>
<li><strong>Politicization of the Military:</strong> Trump has frequently used the military for political purposes, diverting resources and attention away from long-term strategic priorities.</li>
<li><strong>Leadership Vacancies:</strong> Prolonged vacancies in key civilian positions within the Department of Defense have hampered decision-making and stalled progress on essential initiatives.</li>
</ul>
</section>
<section id="a-crisis-of-leadership-and-imagination" class="level3">
<h3 class="anchored" data-anchor-id="a-crisis-of-leadership-and-imagination">A Crisis of Leadership and Imagination</h3>
<ul>
<li>The challenges facing the U.S. defense establishment run deeper than any single administration or political party. There’s a fundamental failure:
<ul>
<li><strong>Failure of Imagination:</strong> To anticipate and adapt to the rapidly evolving landscape of warfare in the 21st century.</li>
<li><strong>Failure of Leadership:</strong> To make difficult choices, challenge the status quo, and prioritize long-term national security over short-term political expediency.</li>
</ul></li>
</ul>
</section>
<section id="urgent-need-for-change-a-call-to-action" class="level3">
<h3 class="anchored" data-anchor-id="urgent-need-for-change-a-call-to-action">Urgent Need for Change: A Call to Action</h3>
<ul>
<li>The U.S. must urgently address these systemic issues to maintain its military edge and confront future challenges.</li>
<li>Overcoming bureaucratic inertia, political dysfunction, and a culture of short-term thinking is paramount.</li>
<li>Failure to do so risks the security and prosperity of the United States in an increasingly dangerous world.</li>
</ul>
</section>
</section>
<section id="chapter-12-how-the-future-can-win" class="level2">
<h2 class="anchored" data-anchor-id="chapter-12-how-the-future-can-win">Chapter 12: How the Future Can Win</h2>
<section id="the-need-for-change-in-u.s.-defense" class="level3">
<h3 class="anchored" data-anchor-id="the-need-for-change-in-u.s.-defense">The Need for Change in U.S. Defense</h3>
<p>This chapter argues that the U.S. defense establishment needs significant change to adapt to future challenges. The author uses the case study of the JSTARS program and draws parallels to historical examples like the adoption of aircraft carriers and ICBMs to illustrate the need for a new approach. The chapter focuses on two key elements:</p>
<ul>
<li><strong>Incentives:</strong> Rewarding innovation, agility, and the development of technologies that address future threats.</li>
<li><strong>Imagination:</strong> Moving beyond traditional platforms and doctrines to embrace new ways of warfare and leverage emerging technologies.</li>
</ul>
</section>
<section id="case-study-the-jstars-program" class="level3">
<h3 class="anchored" data-anchor-id="case-study-the-jstars-program">Case Study: The JSTARS Program</h3>
<ul>
<li><strong>The Problem:</strong> The Air Force’s plan to replace the aging JSTARS aircraft, a vital intelligence, surveillance, and reconnaissance (ISR) platform, with a new version of the same aircraft.
<ul>
<li>This plan was flawed because the new JSTARS would be vulnerable to attacks from advanced adversaries like China and Russia.</li>
</ul></li>
<li><strong>The Solution:</strong> The Air Force proposed disaggregating JSTARS’s capabilities, distributing them across a network of unmanned aircraft and satellites. This approach offered greater resilience and survivability.</li>
<li><strong>The Challenge:</strong> Powerful members of Congress and defense contractors who stood to benefit from the continued production of the traditional JSTARS aircraft opposed the Air Force’s plan.</li>
<li><strong>The Success:</strong> The Air Force’s success in shifting to the new program stemmed from several factors:
<ul>
<li><strong>Political Strategy:</strong> Early and candid engagement with key stakeholders in Congress.</li>
<li><strong>Transparency:</strong> Providing detailed information about the threat to JSTARS and the advantages of the new program.</li>
<li><strong>Industry Engagement:</strong> Informing defense companies about the new plan, enabling them to lobby Congress.</li>
<li><strong>Compromise:</strong> Basing elements of the future program in the same state that would have hosted JSTARS, securing support from potential opponents.</li>
</ul></li>
<li><strong>The Lesson:</strong> Even good ideas require political maneuvering and strategic compromise to succeed within the existing defense system.</li>
</ul>
</section>
<section id="obstacles-to-change-and-reasons-for-hope" class="level3">
<h3 class="anchored" data-anchor-id="obstacles-to-change-and-reasons-for-hope">Obstacles to Change and Reasons for Hope</h3>
<ul>
<li><strong>Obstacles:</strong> The U.S. defense establishment faces significant obstacles to change, including:
<ul>
<li><strong>Parochial Military Services:</strong> Prioritizing their own interests over joint solutions.</li>
<li><strong>Self-Interested Companies:</strong> Focusing on profits and protecting existing programs.</li>
<li><strong>Distracted Political Leaders:</strong> Lacking focus on long-term defense planning and more concerned with short-term political gains.</li>
</ul></li>
<li><strong>Reasons for Hope:</strong> Despite these obstacles, the United States possesses key elements for successful adaptation:
<ul>
<li><strong>Financial Resources:</strong> Ample funding for defense.</li>
<li><strong>Technological Leadership:</strong> Access to cutting-edge technologies.</li>
<li><strong>Skilled Workforce:</strong> A talented pool of engineers and innovators.</li>
</ul></li>
<li><strong>The Core Issue:</strong> The main obstacle lies in Washington, D.C., and stems from:
<ul>
<li><strong>Dysfunctional Political System:</strong> Hampering the ability to make tough but necessary decisions.</li>
<li><strong>Lack of Vision:</strong> A failure to envision and implement necessary defense reforms.</li>
<li><strong>Urgency Deficit:</strong> A lack of urgency to drive change.</li>
</ul></li>
</ul>
</section>
<section id="restructuring-incentives-for-a-future-ready-military" class="level3">
<h3 class="anchored" data-anchor-id="restructuring-incentives-for-a-future-ready-military">Restructuring Incentives for a Future-Ready Military</h3>
<ul>
<li><strong>The Imperative:</strong> To prepare for future threats, the U.S. must restructure its defense incentives to favor:
<ul>
<li><strong>Networked Kill Chains:</strong> Over legacy platforms.</li>
<li><strong>New Ways of War:</strong> Over familiar doctrines.</li>
<li><strong>Defense:</strong> Over offense.</li>
<li><strong>Future Needs:</strong> Over present requirements.</li>
<li><strong>Software:</strong> Over hardware.</li>
<li><strong>Rapid Capability Development:</strong> Over acquisition compliance and cost accounting.</li>
<li><strong>Technological Diversity:</strong> Over reliance on traditional defense contractors.</li>
</ul></li>
<li><strong>The Mechanism:</strong> Achieving this shift necessitates:
<ul>
<li><strong>Leadership Ownership:</strong> Senior leaders in the Department of Defense and Congress must champion and drive change.</li>
<li><strong>Collaboration:</strong> A partnership between the Pentagon and Congress to establish shared expectations and present a unified front to stakeholders.</li>
<li><strong>Long-Term Vision:</strong> Recognizing that transforming the military is a multi-year process requiring sustained commitment.</li>
</ul></li>
<li><strong>Defining the Problems:</strong> Translating vague concepts into actionable operational problems, such as:
<ul>
<li><strong>Denying China Military Dominance:</strong> Specifically, developing the capability to neutralize 350 Chinese ships within the first three days of a conflict, a challenge requiring advanced ISR, real-time information sharing, and rapid decision-making.</li>
</ul></li>
<li><strong>Shifting the Paradigm:</strong> Moving away from traditional requirements and budget processes towards:
<ul>
<li><strong>Mission-Focused Competitions:</strong> Allocating significant funding to real-world competitions that identify the best solutions to specific operational challenges.</li>
<li><strong>Rewarding Winners:</strong> Providing substantial funding and fielding opportunities to the winners of these competitions, regardless of their affiliation (military service, established company, or startup).</li>
<li><strong>Embracing Rivalry:</strong> Leveraging the inherent rivalries between military branches and companies to drive innovation and accelerate the development of effective solutions.</li>
</ul></li>
<li><strong>Transitioning Incrementally:</strong> Acknowledging that the shift from legacy platforms to future technologies will be gradual:
<ul>
<li><strong>Initial Enhancement:</strong> New technologies will initially enhance existing platforms.</li>
<li><strong>Gradual Replacement:</strong> Over time, new technologies may replace legacy systems entirely.</li>
<li><strong>Mission Adaptation:</strong> Traditional platforms may find new roles, such as homeland defense, as their relevance in high-intensity conflicts diminishes.</li>
</ul></li>
<li><strong>The Power of Demonstration:</strong> Showing, not just telling, to build support for change:
<ul>
<li><strong>Deterrence through Demonstration:</strong> Convincing adversaries of U.S. military capabilities by showcasing new technologies.</li>
<li><strong>Domestic Persuasion:</strong> Demonstrating the effectiveness of new solutions to skeptical military leaders and policymakers to build domestic political support.</li>
</ul></li>
</ul>
</section>
<section id="fostering-a-vibrant-defense-technology-ecosystem" class="level3">
<h3 class="anchored" data-anchor-id="fostering-a-vibrant-defense-technology-ecosystem">Fostering a Vibrant Defense Technology Ecosystem</h3>
<ul>
<li><strong>The Problem:</strong> A lack of private investment in defense technology due to:
<ul>
<li><strong>Perceived Risk:</strong> The defense sector is viewed as a risky investment with a high failure rate for new technologies.</li>
<li><strong>Lack of Government Commitment:</strong> The government often fails to purchase promising technologies at scale, discouraging private investment.</li>
</ul></li>
<li><strong>The Solution:</strong> Creating incentives for private investment by:
<ul>
<li><strong>Picking Winners:</strong> Identifying and investing heavily in companies developing essential technologies like AI and autonomous systems.</li>
<li><strong>Clear Signals:</strong> Sending strong signals to the market about the government’s commitment to purchasing these technologies in large quantities.</li>
<li><strong>Multiplier Effect:</strong> Large government contracts will attract significantly more private investment, creating a virtuous cycle of innovation and growth.</li>
</ul></li>
<li><strong>Rethinking Earmarks:</strong> Reconsidering the ban on congressional earmarks, with safeguards for transparency and accountability, to enable Congress to directly fund promising defense technologies.</li>
<li><strong>The Importance of Lobbying:</strong> Encouraging companies developing future-oriented military capabilities to actively lobby for their programs and secure political support.<br>
</li>
<li><strong>Addressing the “Culture Problem”:</strong> The U.S. defense establishment needs to overcome its risk-averse, bureaucratic culture and embrace agility, competition, and a willingness to fail.</li>
</ul>
</section>
<section id="conclusion-the-future-can-win" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-the-future-can-win">Conclusion: The Future Can Win</h3>
<ul>
<li><strong>The Choice:</strong> The U.S. has a choice: cling to the familiar but increasingly obsolete or embrace change and build a military capable of winning future conflicts.</li>
<li><strong>The Stakes:</strong> The stakes are high, with nothing less than America’s national security hanging in the balance.</li>
<li><strong>The Path Forward:</strong> The path forward is clear:
<ul>
<li><strong>Define problems precisely.</strong></li>
<li><strong>Compete for solutions.</strong></li>
<li><strong>Pick winners.</strong></li>
<li><strong>Fund what matters.</strong></li>
</ul></li>
<li><strong>The Call to Action:</strong> The future of U.S. defense depends on the willingness of its leaders to embrace change, demonstrate courage, and make the tough decisions necessary to build a military ready for the challenges ahead.</li>
</ul>
</section>
</section>
<section id="conclusion-a-failure-of-imagination" class="level2">
<h2 class="anchored" data-anchor-id="conclusion-a-failure-of-imagination">Conclusion: A Failure of Imagination</h2>
<section id="reflections-on-mccains-passing-and-the-state-of-america" class="level3">
<h3 class="anchored" data-anchor-id="reflections-on-mccains-passing-and-the-state-of-america">Reflections on McCain’s Passing and the State of America</h3>
<ul>
<li>On three occasions since John McCain’s death, the author experienced profound emotional responses:
<ul>
<li><strong>First Occasion:</strong> Upon receiving news of McCain’s passing, the author was overcome with gratitude for the time spent with him, realizing the incredible experiences they shared due to McCain’s influence.</li>
<li><strong>Second Occasion:</strong> During McCain’s memorial service, the author hoped for positive change in Washington, a desire for unity and a focus on national security, but remained pessimistic. This pessimism stemmed from the belief that the political divisions and mistrust would resurface, hindering progress.</li>
<li><strong>Third Occasion:</strong> Visiting McCain’s grave, the author felt sadness, recognizing that the situation in Washington had worsened since McCain’s death, becoming more divided and dysfunctional.</li>
</ul></li>
</ul>
</section>
<section id="americas-defense-opportunities-and-obstacles" class="level3">
<h3 class="anchored" data-anchor-id="americas-defense-opportunities-and-obstacles">America’s Defense: Opportunities and Obstacles</h3>
<ul>
<li>Despite the current political climate, there is a significant opportunity to reshape national defense.</li>
<li>Positive Signs:
<ul>
<li>Increased motivation within the defense establishment to adapt to new threats and technologies.</li>
<li>Dedicated personnel.</li>
<li>Advanced technology.</li>
<li>Ample financial resources.</li>
</ul></li>
<li>Major Obstacle: America’s inability to overcome internal challenges and make necessary changes.</li>
</ul>
</section>
<section id="the-persistent-problem-a-failure-of-imagination" class="level3">
<h3 class="anchored" data-anchor-id="the-persistent-problem-a-failure-of-imagination">The Persistent Problem: A Failure of Imagination</h3>
<ul>
<li>The author asserts that the root cause of the current national defense crisis is a <strong>failure of imagination</strong>, a term often used by McCain.</li>
<li>This failure manifests in the inability to:
<ul>
<li>Envision the potential consequences of inaction.</li>
<li>Comprehend the severity of the challenges faced.</li>
<li>Break free from the belief in America’s guaranteed success due to its past dominance.</li>
</ul></li>
</ul>
</section>
<section id="the-consequences-of-inaction" class="level3">
<h3 class="anchored" data-anchor-id="the-consequences-of-inaction">The Consequences of Inaction</h3>
<ul>
<li>If America fails to adapt:
<ul>
<li>Others will seize the opportunity to advance their military capabilities.</li>
<li>The United States will lose control over its destiny, becoming vulnerable to its rivals.</li>
<li>Change will be forced upon America, likely through negative events such as war or a breakdown of deterrence.</li>
</ul></li>
</ul>
</section>
<section id="call-to-action" class="level3">
<h3 class="anchored" data-anchor-id="call-to-action">Call to Action</h3>
<ul>
<li>The responsibility for safeguarding America’s future rests on the current generation.</li>
<li>While hope is essential, it is not a strategy.</li>
<li>Action is urgently needed to address the challenges and avert potential disasters.</li>
</ul>
</section>
<section id="conclusion-1" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-1">Conclusion</h3>
<ul>
<li>While the author acknowledges the difficulty of implementing necessary changes in a dysfunctional political environment, they emphasize the dire consequences of inaction.</li>
<li>The author concludes with a stark warning: failure to adapt will result in a loss of control over America’s fate.</li>
</ul>


</section>
</section>

 ]]></description>
  <category>notes</category>
  <category>history</category>
  <guid>https://christianjmills.com/posts/the-kill-chain-book-notes/</guid>
  <pubDate>Tue, 27 Aug 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Office Hours 7: Replicate</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/office-hours-007/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<section id="qa-session" class="level2">
<h2 class="anchored" data-anchor-id="qa-session">Q&amp;A Session</h2>
<section id="what-would-replicate-like-to-see-students-push-on-the-platform" class="level3">
<h3 class="anchored" data-anchor-id="what-would-replicate-like-to-see-students-push-on-the-platform">What would Replicate like to see students push on the platform?</h3>
<ul>
<li><strong>Fine-tuned models that serve useful or interesting purposes:</strong>
<ul>
<li>Replicate encourages the development of fine-tuned models, particularly for fun and interesting applications, similar to the existing image generation community.</li>
</ul></li>
<li><strong>Focus on language model applications and community experiences:</strong>
<ul>
<li>Replicate aims to foster a similar community experience for language models, acknowledging the challenge of making business-oriented language model applications as engaging as visually-driven applications like emoji generation.</li>
</ul></li>
<li><strong>Building sophisticated chains of operations with language models:</strong>
<ul>
<li>Replicate encourages the creation of application layers on top of language models, such as chaining prompts together or performing operations across different models, leveraging Replicate’s capability to make queries within models.</li>
</ul></li>
</ul>
</section>
<section id="how-enterprise-ready-is-replicate" class="level3">
<h3 class="anchored" data-anchor-id="how-enterprise-ready-is-replicate">How enterprise-ready is Replicate?</h3>
<ul>
<li><strong>Working towards enterprise readiness, but not fully there yet:</strong>
<ul>
<li>Replicate is actively working on enterprise-ready features but hasn’t achieved complete enterprise readiness.</li>
</ul></li>
<li><strong>Flexible control over data retention available:</strong>
<ul>
<li>Replicate offers flexible data retention control and is open to discussing specific data concerns with users.</li>
</ul></li>
<li><strong>Recommendation to engage in discussions via Replicate Discord:</strong>
<ul>
<li>For detailed conversations about specific requirements, reaching out via the Replicate Discord channel is recommended.</li>
</ul></li>
</ul>
</section>
<section id="how-to-push-an-open-source-function-calling-model-compatible-with-the-openai-api" class="level3">
<h3 class="anchored" data-anchor-id="how-to-push-an-open-source-function-calling-model-compatible-with-the-openai-api">How to push an open-source function-calling model compatible with the OpenAI API?</h3>
<ul>
<li><strong>Replicate’s OpenAI-compatible API and its limitations:</strong>
<ul>
<li>Replicate offers an alternative API compatible with OpenAI, but it’s currently available for a limited set of language models.</li>
<li>Replicate is exploring broader rollout of this functionality.</li>
<li>Building a completely OpenAI-compatible predictor isn’t currently possible due to limitations in supporting certain input types like lists and lists of dictionaries.</li>
</ul></li>
<li><strong>Implementing function calling with COG’s current input types:</strong>
<ul>
<li>Workarounds exist for implementing function calling using COG’s supported input types.</li>
</ul></li>
<li><strong>Upcoming updates to COG to facilitate application development:</strong>
<ul>
<li>Replicate is actively working on updates to COG that will simplify the creation of predictors and applications, making it easier to leverage these capabilities.</li>
</ul></li>
</ul>
</section>
<section id="examples-of-desired-llm-application-layers-on-replicate" class="level3">
<h3 class="anchored" data-anchor-id="examples-of-desired-llm-application-layers-on-replicate">Examples of desired LLM application layers on Replicate</h3>
<ul>
<li><strong>Examples of web scraping and potential for complex operations within predictors:</strong>
<ul>
<li>Replicate has seen examples of users implementing tasks like web scraping using Replicate models.</li>
<li>Replicate emphasizes the platform’s ability to handle arbitrary code within predictors, enabling complex operations beyond simple model inference.</li>
</ul></li>
<li><strong>Upcoming updates to COG to facilitate application development:</strong>
<ul>
<li>COG will undergo updates to make building applications within Replicate more intuitive and accessible.</li>
</ul></li>
<li><strong>Introduction of secrets to enable secure access to credentials:</strong>
<ul>
<li>Recent introduction of secrets in Replicate allows for securely storing and using sensitive information within models, such as API keys for interacting with other services.</li>
</ul></li>
</ul>
</section>
<section id="replicates-approach-to-logging-and-evaluation" class="level3">
<h3 class="anchored" data-anchor-id="replicates-approach-to-logging-and-evaluation">Replicate’s approach to logging and evaluation</h3>
<ul>
<li><strong>Logging inputs, outputs, and printed logs within the predict function:</strong>
<ul>
<li>Replicate logs input parameters (including defaults), outputs, and anything printed to the logs from within the <code>predict</code> function.</li>
</ul></li>
<li><strong>Permalink access to prediction data, including logs and metadata:</strong>
<ul>
<li>Each prediction on Replicate has a unique permalink providing access to comprehensive logs, inputs, outputs, and metadata, which is particularly valuable for debugging and collaboration.</li>
</ul></li>
<li><strong>Data retention policy and encryption practices:</strong>
<ul>
<li>Replicate retains prediction data for a specific duration (exact interval not specified) and offers variable retention options based on user needs.</li>
<li>Stored data is encrypted.</li>
</ul></li>
<li><strong>API availability for querying prediction data using prediction identifiers:</strong>
<ul>
<li>An API endpoint allows retrieval of prediction data (inputs, outputs, logs) using prediction identifiers.</li>
<li>Bulk endpoints for querying logs across predictions within a time range are currently not available but are under consideration.</li>
</ul></li>
</ul>
</section>
<section id="privacy-and-legal-concerns-when-fine-tuning-sdxl-with-personal-images" class="level3">
<h3 class="anchored" data-anchor-id="privacy-and-legal-concerns-when-fine-tuning-sdxl-with-personal-images">Privacy and legal concerns when fine-tuning SDXL with personal images</h3>
<ul>
<li><strong>Data retention policy and encryption practices:</strong>
<ul>
<li>While Replicate encrypts and doesn’t share user data, users concerned about the storage duration of personal images should exercise caution.</li>
</ul></li>
<li><strong>Adherence to U.S. law and regulations:</strong>
<ul>
<li>Replicate operates in compliance with U.S. laws and regulations, and any activities violating those are discouraged.</li>
</ul></li>
</ul>
</section>
<section id="evaluating-model-performance-over-time-and-understanding-user-behavior" class="level3">
<h3 class="anchored" data-anchor-id="evaluating-model-performance-over-time-and-understanding-user-behavior">Evaluating model performance over time and understanding user behavior</h3>
<ul>
<li>Replicate acknowledges the importance of evaluating model performance over time and understanding user behavior but hasn’t implemented extensive mechanisms for this.</li>
<li><strong>Current focus on performance and reliability:</strong>
<ul>
<li>Replicate’s primary focus has been on ensuring system performance and reliability.</li>
</ul></li>
<li><strong>Interest in understanding user intent and usage patterns:</strong>
<ul>
<li>There’s growing interest in analyzing user intent and usage patterns to enhance the platform’s capabilities and optimize performance.</li>
</ul></li>
<li><strong>Potential for using EDA (Exploratory Data Analysis) and log data:</strong>
<ul>
<li>Replicate recognizes the potential of leveraging EDA techniques and log data to gain insights into user behavior and model usage.</li>
</ul></li>
</ul>
</section>
<section id="user-feedback-mechanisms-and-logging" class="level3">
<h3 class="anchored" data-anchor-id="user-feedback-mechanisms-and-logging">User feedback mechanisms and logging</h3>
<ul>
<li><strong>Consideration of thumbs-up/thumbs-down feedback mechanism:</strong>
<ul>
<li>Replicate has considered implementing a thumbs-up/thumbs-down feedback mechanism, potentially as an annotation feature.</li>
</ul></li>
<li><strong>Potential for annotation mechanisms to associate feedback with predictions:</strong>
<ul>
<li>Replicate is exploring annotation mechanisms that would enable associating feedback or other information with specific predictions, allowing for retrospective analysis and evaluation.</li>
</ul></li>
<li><strong>Client-side logging of prediction IDs and feedback as a workaround:</strong>
<ul>
<li>As a workaround, users can log prediction IDs and feedback on the client side, storing this data in their own databases.</li>
</ul></li>
<li><strong>Focus on core platform functionality and potential integration with other tools:</strong>
<ul>
<li>Replicate carefully considers which features to prioritize within the platform and aims to integrate well with other tools that may offer specialized functionality, such as observability platforms for language models.</li>
</ul></li>
</ul>
</section>
<section id="building-paid-applications-on-replicate-and-revenue-sharing" class="level3">
<h3 class="anchored" data-anchor-id="building-paid-applications-on-replicate-and-revenue-sharing">Building paid applications on Replicate and revenue sharing</h3>
<ul>
<li><strong>Lack of built-in billing patterns but potential for implementing custom solutions:</strong>
<ul>
<li>Replicate doesn’t currently offer built-in billing mechanisms within models.</li>
</ul></li>
<li><strong>Interest in revenue sharing as a model for incentivizing collaboration:</strong>
<ul>
<li>Replicate is actively exploring revenue-sharing models to incentivize collaboration and reward creators for building valuable models on the platform.</li>
</ul></li>
</ul>


</section>
</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/office-hours-007/</guid>
  <pubDate>Sun, 25 Aug 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Notes on Weapons of Mass Instruction: A Schoolteacher’s Journey Through the Dark World of Compulsory Schooling</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/weapons-of-mass-instruction-book-notes/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
These notes are part of the following collection:
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="../../series/notes/education-notes.html"><strong>Education</strong></a></p>
</div>
</div>
<ul>
<li>Prologue: Against School<br>
</li>
<li>Chapter 1: Everything You Know About Schools Is Wrong<br>
</li>
<li>Chapter 2: Walkabout, London<br>
</li>
<li>Chapter 3: Fat Stanley and the Lancaster Amish<br>
</li>
<li>Chapter 4: David Sarnoff’s Classroom<br>
</li>
<li>Chapter 5. Hector Isn’t the Problem<br>
</li>
<li>Chapter 6: The Camino de Santiago<br>
</li>
<li>Chapter 7: Weapons of Mass Instruction<br>
</li>
<li>Chapter 8: What is Education?<br>
</li>
<li>Chapter 9: A Letter to My Granddaughter About Dartmouth<br>
</li>
<li>Chapter 10: Incident at Highland High</li>
<li>Afterword: Invitation to an Open Conspiracy</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Book Links:">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Book Links:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="https://newsociety.com/books/w/weapons-of-mass-instruction">Publisher Page</a></li>
</ul>
</div>
</div>
<section id="prologue-against-school" class="level2">
<h2 class="anchored" data-anchor-id="prologue-against-school">Prologue: Against School</h2>
<section id="boredom-in-the-classroom" class="level3">
<h3 class="anchored" data-anchor-id="boredom-in-the-classroom">Boredom in the Classroom</h3>
<ul>
<li><strong>Gatto’s Experience:</strong>
<ul>
<li>Taught for 30 years, observing pervasive boredom in schools.</li>
<li>Students found work stupid, meaningless, and unengaging.</li>
<li>Teachers were equally bored, blaming students’ lack of interest and focus on grades.</li>
<li><strong>Gatto’s Grandfather’s Lesson:</strong> Boredom is the individual’s responsibility, not an external condition.</li>
</ul></li>
<li><strong>Root of the Problem:</strong>
<ul>
<li>Schools perpetuate childishness by treating boredom and obedience as the norm.</li>
<li>Gatto observed that breaking free from these structures could foster curiosity, adventure, and resilience in students.</li>
</ul></li>
</ul>
</section>
<section id="questioning-the-system" class="level3">
<h3 class="anchored" data-anchor-id="questioning-the-system">Questioning the System</h3>
<ul>
<li><strong>A System Functioning as Designed:</strong>
<ul>
<li>What if schools are intentionally designed to produce the observed outcomes?</li>
<li>Could the goal be to prevent genuine growth and maintain a controllable populace?</li>
<li>Is forced schooling truly necessary, especially considering successful individuals who thrived without it?</li>
</ul></li>
<li><strong>Historical Perspective:</strong>
<ul>
<li>Many accomplished figures throughout American history lacked formal schooling.</li>
<li>Formal schooling does not guarantee success.</li>
<li>Compulsory schooling became widespread in the US between 1905 and 1915.</li>
</ul></li>
</ul>
</section>
<section id="the-true-purpose-of-public-schools" class="level3">
<h3 class="anchored" data-anchor-id="the-true-purpose-of-public-schools">The True Purpose of Public Schools</h3>
<ul>
<li><strong>Traditional Justifications (False):</strong>
<ul>
<li>To create good people.</li>
<li>To create good citizens.</li>
<li>To foster personal growth.</li>
</ul></li>
<li><strong>Actual Purpose (Revealed):</strong>
<ul>
<li><strong>H. L. Mencken (The American Mercury, April 1924):</strong>
<ul>
<li><blockquote class="blockquote">
<p>“The aim of public education is not to fill the young of the species with knowledge and awaken their intelligence… The aim is simply to reduce as many individuals as possible to the same safe level, to breed and train a standardized citizenry, to put down dissent and originality.”</p>
</blockquote></li>
</ul></li>
<li><strong>The Prussian Model:</strong>
<ul>
<li>American education is rooted in the Prussian system.</li>
<li>Designed to create a manageable populace through:
<ul>
<li>Mediocre intellect.</li>
<li>Suppression of individuality.</li>
<li>Limited leadership skills.</li>
<li>Docile and incomplete citizens.</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="evidence-of-prussian-influence" class="level3">
<h3 class="anchored" data-anchor-id="evidence-of-prussian-influence">Evidence of Prussian Influence</h3>
<ul>
<li><strong>Prominent Figures:</strong>
<ul>
<li><strong>William James:</strong> Alluded to the Prussian model in the early 20th century.</li>
<li><strong>Orestes Brownson:</strong> Denounced the Prussianization of American schools in the 1840s.</li>
<li><strong>Horace Mann:</strong> Advocated for the Prussian system in his 1853 report to the Massachusetts Board of Education.</li>
</ul></li>
<li><strong>Historical Context:</strong>
<ul>
<li>Prussian influence in America during the Revolutionary War and early nation-building.</li>
</ul></li>
</ul>
</section>
<section id="james-bryant-conant-and-the-transformation-of-american-education" class="level3">
<h3 class="anchored" data-anchor-id="james-bryant-conant-and-the-transformation-of-american-education">James Bryant Conant and the Transformation of American Education</h3>
<ul>
<li><strong>Key Figure:</strong> James Bryant Conant (President of Harvard, influential figure in 20th-century education).</li>
<li><strong>Conant’s Revolution:</strong>
<ul>
<li>The modern school system resulted from a deliberate revolution between 1905 and 1930 (as stated in “The Child, the Parent, and the State,” 1959).</li>
</ul></li>
<li><strong>Alexander Inglis’s “Principles of Secondary Education” (1918):</strong>
<ul>
<li>Outlines the true purposes of compulsory schooling.</li>
<li>Designed to disrupt the unity of the working class and maintain control.</li>
</ul></li>
</ul>
</section>
<section id="the-six-basic-functions-of-modern-schooling-according-to-inglis" class="level3">
<h3 class="anchored" data-anchor-id="the-six-basic-functions-of-modern-schooling-according-to-inglis">The Six Basic Functions of Modern Schooling (According to Inglis)</h3>
<ol type="1">
<li><strong>Adjustive or Adaptive Function:</strong> Establish unquestioning obedience to authority.</li>
<li><strong>Integrating Function:</strong> Enforce conformity and predictability.</li>
<li><strong>Diagnostic and Directive Function:</strong> Determine and assign social roles through standardized testing and cumulative records.</li>
<li><strong>Differentiating Function:</strong> Limit education based on predetermined social roles.</li>
<li><strong>Selective Function:</strong> Weed out the “unfit” through grades, remedial placements, and social humiliation.</li>
<li><strong>Propedeutic Function:</strong> Cultivate a small elite to manage the system and control the masses.</li>
</ol>
</section>
<section id="perpetuating-the-system" class="level3">
<h3 class="anchored" data-anchor-id="perpetuating-the-system">Perpetuating the System</h3>
<ul>
<li><strong>Inglis and Conant:</strong> Key proponents of the Prussian-inspired system.</li>
<li><strong>Financial Incentives:</strong> Industrialists like Carnegie and Rockefeller recognized the economic benefits of a dumbed-down, consumerist society.</li>
<li><strong>Woodrow Wilson (1909):</strong>
<ul>
<li><blockquote class="blockquote">
<p>“We want one class of persons to have a liberal education and we want another class of persons…to forego the privileges of a liberal education and fit themselves to perform specific, difficult manual tasks.”</p>
</blockquote></li>
</ul></li>
</ul>
</section>
<section id="schooling-for-consumption" class="level3">
<h3 class="anchored" data-anchor-id="schooling-for-consumption">Schooling for Consumption</h3>
<ul>
<li><strong>Creating Consumers:</strong>
<ul>
<li>Mass production requires mass consumption.</li>
<li>Schooling discourages critical thinking, leaving individuals susceptible to marketing and consumerism.</li>
</ul></li>
<li><strong>Extending Childhood:</strong>
<ul>
<li><strong>Elwood P. Cubberley (“Public Education in the United States”, 1934):</strong> Schooling extended childhood by 2-6 years.</li>
<li><strong>Cubberley (“Public School Administration”, 1922):</strong>
<ul>
<li><blockquote class="blockquote">
<p>“Our schools are factories in which the raw products, children, are to be shaped and fashioned…and it is the business of the school to build its pupils according to the specifications laid down.”</p>
</blockquote></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="the-modern-condition-a-nation-of-children" class="level3">
<h3 class="anchored" data-anchor-id="the-modern-condition-a-nation-of-children">The Modern Condition: A Nation of Children</h3>
<ul>
<li><strong>Consequences of Extended Childhood:</strong>
<ul>
<li>Inability to form lasting relationships.</li>
<li>Lack of financial responsibility.</li>
<li>Dependence on external entertainment.</li>
<li>Apathy and unquestioning obedience.</li>
</ul></li>
<li><strong>Surrendering Freedom:</strong> Accepting limitations on freedom of speech and thought.</li>
</ul>
</section>
<section id="a-path-for-parents-raising-leaders-not-servants" class="level3">
<h3 class="anchored" data-anchor-id="a-path-for-parents-raising-leaders-not-servants">A Path for Parents: Raising Leaders, Not Servants</h3>
<ul>
<li><strong>Challenge the System:</strong> Recognize and resist the true nature of schooling.</li>
<li><strong>Encourage Critical Thinking:</strong> Teach children to question authority and think independently.</li>
<li><strong>Embrace Boredom:</strong> Allow children to develop inner resources and self-sufficiency.</li>
<li><strong>Provide Meaningful Learning:</strong> Expose children to complex and challenging subjects.</li>
<li><strong>Foster Independence:</strong> Encourage solitude and self-directed learning.</li>
</ul>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">Conclusion</h3>
<ul>
<li><strong>Genius is Common:</strong> Schooling suppresses natural intelligence and creativity.</li>
<li><strong>A Call to Action:</strong> Resist the system and empower children to reach their full potential.</li>
</ul>
</section>
</section>
<section id="chapter-1-everything-you-know-about-schools-is-wrong" class="level2">
<h2 class="anchored" data-anchor-id="chapter-1-everything-you-know-about-schools-is-wrong">Chapter 1: Everything You Know About Schools Is Wrong</h2>
<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">Introduction</h3>
<ul>
<li><strong>Premise:</strong> Institutional schooling, contrary to popular belief, is a flawed system deliberately designed to control and limit human potential rather than foster it.</li>
<li><strong>Goal:</strong> To expose the hidden history, motivations, and consequences of compulsory schooling in America, revealing its true purpose as a tool for social engineering and economic control.</li>
<li><strong>Methodology:</strong> Examination of historical data, government documents, academic writings, and personal experiences to deconstruct the myths surrounding public education and reveal its true nature.</li>
</ul>
</section>
<section id="the-hidden-history-of-compulsory-schooling" class="level3">
<h3 class="anchored" data-anchor-id="the-hidden-history-of-compulsory-schooling">The Hidden History of Compulsory Schooling</h3>
<section id="the-factory-inspectors-survey-1909" class="level4">
<h4 class="anchored" data-anchor-id="the-factory-inspectors-survey-1909">The Factory Inspector’s Survey (1909)</h4>
<ul>
<li>A survey of 500 working children in 20 factories revealed that 412 of them preferred the harsh conditions of factory work to returning to school. (Source: Helen Todd, <em>Why Children Work</em>, McClure’s Magazine, April 1913)
<ul>
<li><strong>Archive:</strong> <a href="https://uofi.app.box.com/s/agtvym7n0hvf4qw2dr5d24txsgwrgc42">Why Children Work: The Children’s Answer By Helen M. Todd</a></li>
<li>Helen Todd received various reasons from children for favoring factory work, including:
<ol type="1">
<li><strong>Monetary Factors:</strong>
<ul>
<li>Being paid for the factory work they do.</li>
<li>The ability to support their families financially, afford more food, shoes for babies, and other basic needs.</li>
</ul></li>
<li><strong>Difficulty and Relevance of Schoolwork:</strong>
<ul>
<li>Perceived difficulty in understanding schoolwork compared to factory work.</li>
<li>Learning being perceived as hard.</li>
<li>Some children feeling unable to learn.</li>
<li>Perception that school education is not relevant to their ability to earn.</li>
</ul></li>
<li><strong>The Environment at School and Factory:</strong>
<ul>
<li>Preference for the factory environment as there is less judgment compared to school.</li>
<li>The factory environment doesn’t involve name-calling or bullying as in school.</li>
<li>They can avoid the corporal punishment experienced at school for:
<ul>
<li>Failure to learn</li>
<li>Whispering</li>
<li>Having string in their pocket</li>
<li>Squeaky seats</li>
<li>Late arrival</li>
<li>Forgetting pages of the book</li>
</ul></li>
</ul></li>
</ol></li>
</ul></li>
<li><strong>Implication:</strong> This finding challenges the conventional narrative that school is a universally desired and beneficial experience, suggesting that early schools were deeply flawed and potentially more unbearable than child labor.</li>
</ul>
</section>
<section id="the-rise-of-the-experts-1919-1933" class="level4">
<h4 class="anchored" data-anchor-id="the-rise-of-the-experts-1919-1933">The Rise of the “Experts” (1919-1933)</h4>
<ul>
<li><strong>Professor Arthur Calhoun</strong> (Social History of the Family, 1919) observed a shift from family-centered child rearing to a system where <strong>community experts</strong> increasingly controlled education. (page 175)
<ul>
<li>Calhoun believed this change aligned with the eugenics movement, promoting the idea of selective breeding and social control through education. (page 331)</li>
<li><strong>Smithsonian Archive:</strong> <a href="https://library.si.edu/digital-library/book/socialhistoryof02calh">A Social History of the American Family From Colonial Times to the Present Volume 3</a></li>
</ul></li>
<li><strong>Mayor John Hyland</strong> of New York City (1922) claimed that an “<strong>invisible government</strong>” had seized control of the city’s schools, likening the situation to an octopus capturing its prey.
<ul>
<li>Hyland pointed to the <strong>Rockefeller Foundation</strong> as a driving force behind this shift in power.</li>
</ul></li>
<li>By 1928, <em>A Sociological Philosophy of Education</em> asserted that teachers were responsible for “running not merely schools, but the world.”
<ul>
<li><strong>Book:</strong> <a href="https://books.googleusercontent.com/books/content?req=AKW5QafjppMzEtdAqelLkYKjXw1x-F2OLHg2Pe90zK_uc-9EEus2N4IEzEg_ZLII7r0kPvIE2hhmKdK91b0Yv1U9sMmHEC1zPqIwlHpXNr1-xqTfeZFT20rnIgjy9c7yEHg90_ntnPsCKE9kl5Eu-tEuC0r8Pyv28sE8v9Oa0A0IGTTLtsz0a2mXSfhx1VeZwIr9cPnvBkDsW-11pIKaNB3UPZisouDw-LPKXxnqQ3G_yvwY0KK48KlRdephQfBjnOin6pWrXLljwVceTIFBfRmRaqpgvmrNh0XpdgwcQecg5qcdHY6nGQw">A Sociological Philosophy of Education by Ross Lee Finney</a></li>
</ul></li>
<li><strong>Edward Thorndyke</strong> (Columbia Teachers College, 1929), a prominent figure in <strong>Educational Psychology</strong>, declared that traditional <strong>academic subjects are of little value</strong>.
<ul>
<li>This statement reflects a move away from traditional academic goals towards a focus on social engineering and behavioral conditioning.</li>
</ul></li>
<li><strong>William Kilpatrick</strong> (Columbia Teachers College, <em>Education and the Social Crisis</em>, 1929) advocated for expert control over child rearing, arguing that families were ill-equipped compared to trained professionals.
<ul>
<li>This perspective underscores the growing influence of a technocratic elite seeking to manage society through scientific methods.</li>
</ul></li>
<li><strong>Max Mason</strong>, President of the Rockefeller Foundation (April 11, 1933), announced a national program aimed at controlling human behavior, with schools playing a central role.
<ul>
<li>This announcement signaled an open embrace of social engineering as a primary goal of education.</li>
<li>The program drew inspiration from <strong>Max Muller</strong>, a geneticist who believed in the possibility of controlling human evolution through genetic manipulation.</li>
<li><strong>Report:</strong> <a href="https://www.rockefellerfoundation.org/wp-content/uploads/Annual-Report-1933-1.pdf">The Rockefeller Foundation Annual Report (1933)</a></li>
<li><strong>Book Chaper:</strong> <a href="https://www.dianebpaul.com/uploads/2/3/2/9/23295024/rockefeller_foundation.pdf">DB Paul, The Rockefeller Foundation and the Origins of Behavioral Genetics. In K Benson, et al., eds., The Expansion of American Biology (New Brunswick, NJ: Rutgers Univ. Press, 1991), 263-283.</a></li>
</ul></li>
</ul>
</section>
<section id="the-eugenics-connection" class="level4">
<h4 class="anchored" data-anchor-id="the-eugenics-connection">The Eugenics Connection</h4>
<ul>
<li>The influence of eugenics, a movement advocating for selective breeding to improve the human race, played a significant role in shaping early 20th-century education reform.
<ul>
<li><strong>Goal:</strong> To separate “worthwhile breeding stock” from the “evolutionary dead-end material” (Source: Muller’s geneticist’s manifesto, signed by 22 prominent biologists).</li>
<li><strong>Impact:</strong> This ideology promoted segregation and discrimination within the education system, reinforcing social hierarchies based on perceived intellectual ability and social worth.</li>
</ul></li>
</ul>
</section>
<section id="the-post-war-shift-from-education-to-indoctrination" class="level4">
<h4 class="anchored" data-anchor-id="the-post-war-shift-from-education-to-indoctrination">The Post-War Shift: From Education to Indoctrination</h4>
<ul>
<li>World War II temporarily drove eugenics underground, but its core principles continued to influence education policy.
<ul>
<li>The focus shifted towards using schools as tools for social control and economic manipulation, aligning with the needs of a burgeoning industrial capitalist system.</li>
</ul></li>
<li>Two congressional investigations (1915 and 1959) revealed that school policy was being shaped by corporate interests operating outside of public scrutiny.
<ul>
<li><strong>Findings:</strong> Both investigations concluded that major foundations like Carnegie and Rockefeller exerted significant influence over education policy through funding, research, and advocacy.</li>
<li><strong>Outcome:</strong> These investigations were largely ignored, and their findings suppressed, highlighting the lack of transparency and accountability within the education system.</li>
</ul></li>
</ul>
</section>
<section id="the-behavioral-revolution-1967-1974" class="level4">
<h4 class="anchored" data-anchor-id="the-behavioral-revolution-1967-1974">The Behavioral Revolution (1967-1974)</h4>
<ul>
<li>Teacher training underwent a radical transformation, driven by private foundations, universities, and government agencies, with the goal of aligning education with the needs of the emerging global economy.</li>
<li><strong>Three key milestones:</strong>
<ul>
<li><strong>1. Designing Education for the Future:</strong> A government initiative that redefined education as a means to achieve national economic and social goals.
<ul>
<li><strong>Education Resources Information Center:</strong> <a href="https://eric.ed.gov/?id=ED018008">Designing Education for the Future: An Eight-State Project</a></li>
</ul></li>
<li><strong>2. The Behavioral Science Teacher Education Project (BSTEP):</strong> A large-scale project (Contract No.&nbsp;OEC-09-320424-4042) outlining plans to transform schools into laboratories for behavioral conditioning.
<ul>
<li><strong>Goals:</strong> To create a system where individuals are tracked from birth, exposed to subliminal influence, and conditioned to conform to predetermined beliefs and behaviors.</li>
<li><strong>Methods:</strong> Advocated for the use of chemical experimentation on minors, foreshadowing the rise of drugs like Ritalin and Adderall in classrooms.</li>
<li><strong>Feasibility Study:</strong> <a href="https://eric.ed.gov/?id=ED041868">Behavioral Science Teacher Education Program. Final Report</a></li>
</ul></li>
<li><strong>3. Bloom’s Taxonomy of Educational Objectives:</strong> A comprehensive manual by <strong>Benjamin Bloom</strong> (University of Chicago) that aimed to classify and control all aspects of human learning.
<ul>
<li><strong>Purpose:</strong> To provide educators with a framework for shaping students’ thoughts, feelings, and actions through carefully designed instruction.</li>
<li><strong>Book:</strong> <a href="https://web.archive.org/web/20201212072520id_/https://www.uky.edu/~rsand1/china2018/texts/Bloom%20et%20al%20-Taxonomy%20of%20Educational%20Objectives.pdf">Taxonomy of Educational Objectives, Handbook 1: Cognitive Domain</a></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="teachers-as-therapists" class="level4">
<h4 class="anchored" data-anchor-id="teachers-as-therapists">Teachers as Therapists</h4>
<ul>
<li>Rising school violence in the 1960s, partly attributed to policies restricting disciplinary action, provided a pretext for further intervention.
<ul>
<li>The <strong>Ford Foundation’s</strong> policy mandating “<strong>due process</strong>” in schools hampered teachers’ ability to maintain order and address disruptive behavior effectively.</li>
</ul></li>
<li>BSTEP advocated for training teachers as “<strong>teacher therapists</strong>,” tasked with applying behavioral psychology techniques to manage students’ emotions and modify their behavior.</li>
<li>This shift marked a significant departure from traditional teaching roles, transforming educators into agents of social control.</li>
</ul>
</section>
<section id="we-dont-need-brains" class="level4">
<h4 class="anchored" data-anchor-id="we-dont-need-brains">“We Don’t Need Brains”</h4>
<ul>
<li><strong>Historical Context:</strong> Between 1896 and 1920, industrialists and financiers like <strong>Andrew Carnegie</strong> and <strong>John D. Rockefeller</strong>, through their foundations, heavily influenced the development of compulsory schooling in the US.</li>
<li><strong>Motivations:</strong>
<ul>
<li>To create a workforce that was obedient, compliant, and trained for specific tasks rather than independent thinking and innovation.</li>
</ul></li>
<li><strong>Evidence:</strong>
<ul>
<li><strong>The General Education Board</strong> (funded by Rockefeller), in its 1906 <strong>Occasional Letter No.&nbsp;1</strong>, stated its aim:
<ul>
<li><blockquote class="blockquote">
<p>“In our dreams, people yield themselves with perfect docility to our molding hands…We shall not try to make these people or any of their children into philosophers or men of learning…The task…is very simple. We will organize children and teach them to do in a perfect way the things their fathers and mothers are doing in an imperfect way.”</p>
</blockquote></li>
<li><strong>Book:</strong> <a href="https://www.loc.gov/resource/gdcmassbookdig.countryschooloft00gates/?st=pdf&amp;pdfPage=1">The country school of to-morrow</a></li>
</ul></li>
</ul></li>
<li>This statement reveals a clear intention to use schooling to maintain a social hierarchy by limiting the aspirations and potential of the working class.</li>
</ul>
</section>
<section id="the-literacy-decline-a-case-study-in-failure" class="level4">
<h4 class="anchored" data-anchor-id="the-literacy-decline-a-case-study-in-failure">The Literacy Decline: A Case Study in Failure</h4>
<ul>
<li><strong>World War II Literacy Data:</strong> A high literacy rate (96%) was observed among men drafted during World War II (schooled in the 1930s), with only 4% deemed illiterate. (Source: Army enlistment tests)</li>
<li><strong>Korean War Literacy Decline:</strong> A significant drop in literacy (down to 81%) was observed among men drafted during the Korean War (schooled in the 1940s).</li>
<li><strong>Vietnam War Literacy Crisis:</strong> Illiteracy rates continued to rise, reaching 27% among men drafted during the Vietnam War (schooled in the 1950s and 1960s).</li>
<li><strong>Analysis:</strong>
<ul>
<li>Despite increased years of schooling, more qualified teachers, and “improved” educational materials, literacy rates steadily declined.</li>
<li>This suggests that changes in teaching methods, particularly the shift from <strong>phonetic</strong> to <strong>non-phonetic</strong> reading instruction, played a significant role in the decline.</li>
<li>The lack of a phonetic foundation disproportionately impacted Black Americans, who historically had limited access to formal education and relied on schools to teach basic literacy skills.</li>
<li>The <strong>Adult Literacy Survey</strong> and the <strong>National Assessment of Educational Progress</strong> later reported a 40% illiteracy rate among Black Americans and 17% among White Americans.</li>
</ul></li>
</ul>
</section>
<section id="william-torrey-harris-the-architect-of-american-indoctrination" class="level4">
<h4 class="anchored" data-anchor-id="william-torrey-harris-the-architect-of-american-indoctrination">William Torrey Harris: The Architect of American Indoctrination</h4>
<ul>
<li><strong>Background:</strong> <strong>William Torrey Harris</strong>, U.S. Commissioner of Education (1889-1906), was a leading proponent of Hegelian philosophy and a close friend of Andrew Carnegie.</li>
<li><strong>Influence:</strong> Harris played a pivotal role in shaping the American education system, promoting standardization and German-style compulsory schooling.</li>
<li><strong>Philosophy:</strong>
<ul>
<li><strong>Harris believed that children were property of the state and that education’s purpose was to create citizens who were obedient, subservient to authority, and alienated from their individuality.</strong></li>
<li>He advocated for schools that were designed to “<strong>transcend the beauty of nature</strong>” and promote withdrawal from the external world.</li>
</ul></li>
<li><strong>Key Quotes:</strong>
<ul>
<li><blockquote class="blockquote">
<p>“<strong>Ninety-nine students out of a hundred are automata, careful to walk in prescribed paths, careful to follow the prescribed custom. This is not an accident but the result of substantial education which, scientifically defined, is the subsumption of the individual.</strong>” (Source: <em>The Philosophy of Education</em>, 1906)</p>
</blockquote></li>
<li><blockquote class="blockquote">
<p>“<strong>The great purpose of school [is] self-alienation…It is to master the physical self, to transcend the beauty of nature. School should develop the power to withdraw from the external world.</strong>” (Source: <em>The Philosophy of Education</em>, 1906)</p>
</blockquote></li>
</ul></li>
<li><strong>Impact:</strong> Harris’s ideas laid the groundwork for an education system designed to create a compliant workforce rather than critical thinkers. His influence can still be felt in the emphasis on standardized testing, conformity, and the suppression of creativity within many schools today.</li>
</ul>
</section>
<section id="the-fourth-purpose-creating-human-resources" class="level4">
<h4 class="anchored" data-anchor-id="the-fourth-purpose-creating-human-resources">The Fourth Purpose: Creating Human Resources</h4>
<ul>
<li><strong>Original Purpose of Schooling:</strong> The traditional goals of education—moral development, civic responsibility, and personal growth—were gradually supplanted by a new objective: to produce human resources for the industrial economy.</li>
<li><strong>Corporate Influence:</strong> As schools became increasingly intertwined with the needs of business and industry, the curriculum shifted towards vocational training, obedience to authority, and the acceptance of a hierarchical social order.</li>
<li><strong>Woodrow Wilson’s Vision (1909):</strong> In a speech to businessmen, Wilson stated,
<ul>
<li><blockquote class="blockquote">
<p>“<strong>We want one class to have a liberal education. We want another class, a very much larger class of necessity, to forego the privilege of a liberal education and fit themselves to perform specific, difficult manual tasks.</strong>”</p>
</blockquote></li>
</ul></li>
<li><strong>Centralized Control:</strong> The rise of the “<strong>Education Trust</strong>” in 1917, comprised of representatives from powerful foundations, elite universities, and the National Education Association, further consolidated control over education policy in the hands of a select few.</li>
<li><strong>Consequences:</strong> This shift in purpose transformed schools from institutions of learning into factories for producing compliant workers, undermining the ideals of a free and democratic society.</li>
</ul>
</section>
<section id="the-problem-of-overproduction" class="level4">
<h4 class="anchored" data-anchor-id="the-problem-of-overproduction">The Problem of Overproduction</h4>
<ul>
<li><strong>Definition:</strong> <strong>Overproduction</strong>, also known as <strong>overcapacity</strong>, occurs when businesses produce more goods and services than the market can consume, leading to falling prices, economic instability, and social unrest.</li>
<li><strong>Historical Context:</strong> In the 19th century, America’s independent and resourceful population, coupled with its high levels of innovation, frequently led to overproduction and economic downturns.</li>
<li><strong>The Role of Education:</strong>
<ul>
<li>Policymakers and business leaders began to view education as a tool to manage overproduction by shaping consumer demand and limiting independent economic activity.</li>
</ul></li>
<li><strong>Solution:</strong> By conditioning citizens from a young age to become reliable employees rather than self-sufficient producers, the threat of overproduction could be mitigated.</li>
<li><strong>Consequences:</strong> This approach transformed education from a means of fostering independence and innovation into a tool for controlling the workforce and maintaining economic stability for the benefit of those in power.</li>
</ul>
</section>
<section id="the-alternative-a-return-to-open-source-learning" class="level4">
<h4 class="anchored" data-anchor-id="the-alternative-a-return-to-open-source-learning">The Alternative: A Return to Open-Source Learning</h4>
<ul>
<li><strong>The American Experiment:</strong> For the first two centuries of its existence, the United States thrived on a system of open-source learning, where individuals were free to pursue knowledge and skills through apprenticeship, self-study, and community engagement.</li>
<li><strong>Examples:</strong> Figures like Benjamin Franklin, Thomas Jefferson, and David Farragut exemplified the success of this approach, demonstrating that traditional education was not a prerequisite for achieving greatness.</li>
<li><strong>The Value of Self-Reliance:</strong> This system fostered independence, ingenuity, and a spirit of innovation, propelling America to the forefront of global progress.</li>
<li><strong>The Need for a Paradigm Shift:</strong> Gatto argues for a return to the principles of open-source learning, recognizing that the current system of compulsory schooling stifles creativity, limits human potential, and perpetuates social inequalities.</li>
</ul>
</section>
<section id="conclusion-reclaiming-education" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-reclaiming-education">Conclusion: Reclaiming Education</h4>
<ul>
<li><strong>The Illusion of Progress:</strong> Gatto challenges the narrative that the current education system is the result of natural progress, arguing that it was deliberately designed to serve the interests of a select few.</li>
<li><strong>The Urgency of Reform:</strong> The consequences of this system—declining literacy rates, rising social inequality, and a culture of conformity—demand urgent attention and a radical rethinking of education’s purpose.</li>
<li><strong>A Call to Action:</strong> The book serves as a wake-up call to reclaim the transformative power of education, urging readers to question assumptions, challenge the status quo, and create alternative systems that empower individuals and foster a more just and equitable society.</li>
</ul>
</section>
</section>
</section>
<section id="chapter-2-walkabout-london" class="level2">
<h2 class="anchored" data-anchor-id="chapter-2-walkabout-london">Chapter 2: Walkabout, London</h2>
<section id="the-power-of-open-source-learning" class="level3">
<h3 class="anchored" data-anchor-id="the-power-of-open-source-learning">The Power of Open-Source Learning</h3>
<ul>
<li><strong>Open-source learning</strong> is argued to be of higher quality than rule-driven, standardized schooling.</li>
<li>This type of learning prioritizes individual exploration and real-world experience.</li>
</ul>
<section id="personal-anecdote-uncle-buds-miracle" class="level4">
<h4 class="anchored" data-anchor-id="personal-anecdote-uncle-buds-miracle">Personal Anecdote: Uncle Bud’s Miracle</h4>
<ul>
<li>Gatto’s uncle, Bud Zimmer, lacked formal education but became a successful steel plant manager, overseeing Harvard graduates.</li>
<li>Bud’s experience highlighted the limitations of equating schooling with education.</li>
</ul>
</section>
<section id="examples-of-successful-individuals-who-didnt-follow-traditional-paths" class="level4">
<h4 class="anchored" data-anchor-id="examples-of-successful-individuals-who-didnt-follow-traditional-paths">Examples of Successful Individuals Who Didn’t Follow Traditional Paths</h4>
<ul>
<li><strong>Jonathan Goodwin (Fast Company, November 2007 cover story):</strong>
<ul>
<li><strong>Background:</strong> Junior high school dropout from a poor Kansas farm family.</li>
<li><strong>Open-Source Path:</strong> Learned auto mechanics through odd jobs at a local garage.</li>
<li><strong>Success:</strong> Founded a successful business converting cars to achieve high gas mileage and low emissions, earning over a million dollars per year.</li>
</ul></li>
<li><strong>David Farragut:</strong> Became a US Navy admiral at age twelve, commanding a captured British ship.</li>
<li><strong>George Washington:</strong> Dropped out of school at age twelve.</li>
<li><strong>Thomas Jefferson:</strong> Managed a plantation and 250 employees at age twelve after his parents’ deaths.</li>
<li><strong>Danica Patrick:</strong>
<ul>
<li><strong>Background:</strong> Dropped out of high school at age sixteen.</li>
<li><strong>Open-Source Path:</strong> Moved to London independently to pursue a career in auto racing.</li>
<li><strong>Success:</strong> Became the first woman to win a major IndyCar race.</li>
</ul></li>
<li><strong>Nick Schulman:</strong>
<ul>
<li><strong>Background:</strong> Dropped out of school in eighth grade.</li>
<li><strong>Open-Source Path:</strong> Became skilled at poker.</li>
<li><strong>Success:</strong> Won $2 million on the World Poker Tour by age twenty-one.</li>
</ul></li>
<li><strong>Diablo Cody:</strong>
<ul>
<li><strong>Background:</strong> Worked as a stripper.</li>
<li><strong>Open-Source Path:</strong> Used her experiences to write a screenplay.</li>
<li><strong>Success:</strong> Won an Oscar for Best Original Screenplay for the movie <em>Juno</em>.</li>
</ul></li>
</ul>
</section>
</section>
<section id="open-source-learning-a-definition-and-key-principles" class="level3">
<h3 class="anchored" data-anchor-id="open-source-learning-a-definition-and-key-principles">Open-Source Learning: A Definition and Key Principles</h3>
<ul>
<li><strong>Definition:</strong> Open-source learning allows for diverse starting points on the path to self-mastery, where sequences are personalized, and everyone is a potential teacher.</li>
<li><strong>Key Principles:</strong>
<ul>
<li>Teaching is a function, not a profession. Anyone can teach.</li>
<li>Students determine their teachers.</li>
<li>No licensing is required to teach.</li>
<li>Students are active participants, not passive recipients.</li>
<li>Failure is not a setback, but an opportunity for growth.</li>
</ul></li>
</ul>
<section id="shen-wenrong-and-the-dismantling-of-the-phoenix-steel-plant" class="level4">
<h4 class="anchored" data-anchor-id="shen-wenrong-and-the-dismantling-of-the-phoenix-steel-plant">Shen Wenrong and the Dismantling of the Phoenix Steel Plant</h4>
<ul>
<li>A thousand Chinese peasants, led by Shen Wenrong, dismantled and moved a massive German steel plant in one year, three times faster than German specialists estimated.</li>
<li>Shen’s team lacked formal education, computers, and traditional offices.</li>
<li><strong>Key Takeaway:</strong> Challenges perceived as requiring specialists can often be solved by ordinary people with practical experience and ingenuity.</li>
</ul>
</section>
</section>
<section id="richard-bransons-walkabout-and-the-importance-of-early-independence" class="level3">
<h3 class="anchored" data-anchor-id="richard-bransons-walkabout-and-the-importance-of-early-independence">Richard Branson’s Walkabout and the Importance of Early Independence</h3>
<ul>
<li><strong>Richard Branson:</strong>
<ul>
<li><strong>Background:</strong> High school dropout and self-made billionaire entrepreneur (Virgin Airlines, Virgin Records).</li>
<li><strong>Early Open-Source Learning:</strong> At age four, his mother dropped him off in an unfamiliar area and challenged him to find his way home, fostering self-reliance.</li>
</ul></li>
<li><strong>Early Independence:</strong>
<ul>
<li>By age twelve, Branson was making 100-mile bike rides alone.</li>
<li>Launched his first successful business at age nineteen.</li>
</ul></li>
<li><strong>Glenn Doman and Early Childhood Learning:</strong>
<ul>
<li><strong>Glenn Doman:</strong> Author of <em>Teach Your Baby to Read</em>.</li>
<li><strong>Core Belief:</strong> Babies are capable of learning complex information (reading, math) much earlier than traditionally believed.</li>
<li><strong>Obstacles:</strong> Delaying learning increases its difficulty.</li>
<li><strong>The Institutes for the Achievement of Human Potential:</strong> Doman’s school with no entrance requirements where children learned at their own pace, demonstrating the potential of individualized learning.</li>
<li><strong>Book:</strong> <a href="https://www.gentlerevolution.com/products/how-to-teach-your-baby-to-read-40th-anniversary">How To Teach Your Baby To Read</a></li>
</ul></li>
</ul>
</section>
<section id="the-human-genome-project-and-unconventional-success" class="level3">
<h3 class="anchored" data-anchor-id="the-human-genome-project-and-unconventional-success">The Human Genome Project and Unconventional Success</h3>
<ul>
<li>The Human Genome Project, a massive scientific undertaking, was led by:
<ul>
<li><strong>Craig Venter:</strong> A former poor student and surfer.</li>
<li><strong>Francis Collins:</strong> A homeschooler who followed his interests.</li>
</ul></li>
<li><strong>Key Takeaway:</strong> Traditional educational credentials are not always reliable predictors of intellectual capacity or scientific contribution.</li>
</ul>
</section>
<section id="marilee-jones-and-the-limitations-of-degrees-as-proxies-for-education" class="level3">
<h3 class="anchored" data-anchor-id="marilee-jones-and-the-limitations-of-degrees-as-proxies-for-education">Marilee Jones and the Limitations of Degrees as Proxies for Education</h3>
<ul>
<li><strong>Marilee Jones:</strong>
<ul>
<li><strong>Background:</strong> Successful MIT admissions director for 28 years.</li>
<li><strong>Downfall:</strong> Fired for falsifying her credentials, despite her exceptional performance.</li>
<li><strong>Key Takeaway:</strong> Degrees should not be automatic substitutes for proven ability and experience.</li>
</ul></li>
</ul>
<section id="ingvar-kamprad-and-the-founding-of-ikea" class="level4">
<h4 class="anchored" data-anchor-id="ingvar-kamprad-and-the-founding-of-ikea">Ingvar Kamprad and the Founding of IKEA</h4>
<ul>
<li><strong>Ingvar Kamprad:</strong>
<ul>
<li><strong>Background:</strong> Diagnosed with dyslexia, he began as a fish peddler.</li>
<li><strong>Open-Source Learning:</strong> Developed practical business skills through real-world experience.</li>
<li><strong>Success:</strong> Founded IKEA, a global furniture empire, proving that learning disabilities are not barriers to entrepreneurial success.</li>
</ul></li>
</ul>
</section>
<section id="charles-webb-the-graduate-and-rejecting-materialism" class="level4">
<h4 class="anchored" data-anchor-id="charles-webb-the-graduate-and-rejecting-materialism">Charles Webb, <em>The Graduate</em>, and Rejecting Materialism</h4>
<ul>
<li><strong>Charles Webb:</strong>
<ul>
<li><strong>Background:</strong> Author of the novel <em>The Graduate</em>, which critiques consumerism.</li>
<li><strong>Unconventional Path:</strong> After achieving wealth and fame, Webb gave away his fortune and lived a simple life, highlighting the limitations of material success.</li>
</ul></li>
</ul>
</section>
</section>
<section id="the-plight-of-dropouts-a-misunderstood-resource" class="level3">
<h3 class="anchored" data-anchor-id="the-plight-of-dropouts-a-misunderstood-resource">The Plight of Dropouts: A Misunderstood Resource</h3>
<ul>
<li><strong>Societal Perspective:</strong> 7,000 students drop out of school daily in the US, often facing stigma and limited opportunities.</li>
<li><strong>Alternative View:</strong> Dropouts could be seen as individuals who don’t conform to standardized systems, potentially possessing unique strengths and entrepreneurial potential.</li>
</ul>
<section id="examples-of-successful-individuals-who-didnt-graduate-college" class="level4">
<h4 class="anchored" data-anchor-id="examples-of-successful-individuals-who-didnt-graduate-college">Examples of Successful Individuals Who Didn’t Graduate College</h4>
<ul>
<li><strong>Abraham Lincoln:</strong> Had less than a year of formal schooling.</li>
<li><strong>Andrew Carnegie and John D. Rockefeller:</strong> Both were elementary school dropouts who became titans of industry.</li>
<li><strong>Lula da Silva:</strong> Rose from poverty to become President of Brazil without a formal degree.</li>
<li><strong>Adolf Hitler:</strong> Exploited the education system of the “best-schooled nation in history” to gain power, demonstrating that even highly educated societies are vulnerable to manipulation.</li>
<li><strong>Thomas Edison:</strong>
<ul>
<li><strong>Background:</strong> Dropped out of elementary school.</li>
<li><strong>Open-Source Learning:</strong> Pursued his interests and learned through experimentation.</li>
<li><strong>Success:</strong> Became a prolific inventor (electric light, phonograph) and founded General Electric, holding 1,093 patents.</li>
</ul></li>
<li><strong>George Bernard Shaw:</strong> Dropped out of school at fourteen and became a renowned playwright.</li>
</ul>
</section>
<section id="challenging-assumptions-about-education-and-success" class="level4">
<h4 class="anchored" data-anchor-id="challenging-assumptions-about-education-and-success">Challenging Assumptions About Education and Success</h4>
<ul>
<li>The achievements of individuals with unconventional backgrounds challenge the notion that formal schooling is the only path to success.</li>
<li>Gatto questions why these alternative narratives are not highlighted more prominently in education.</li>
</ul>
</section>
<section id="the-international-happiness-survey" class="level4">
<h4 class="anchored" data-anchor-id="the-international-happiness-survey">The International Happiness Survey</h4>
<ul>
<li>The United States consistently ranks as mediocre in happiness, suggesting that material wealth and standardized education do not necessarily equate to well-being.</li>
</ul>
</section>
</section>
<section id="the-artificial-extension-of-childhood" class="level3">
<h3 class="anchored" data-anchor-id="the-artificial-extension-of-childhood">The Artificial Extension of Childhood</h3>
<ul>
<li><strong>Adolescence:</strong> A historically recent concept that prolongs childhood.</li>
<li><strong>Pre-Industrial America:</strong> Children contributed to society at a young age, learning through real-world experiences and apprenticeships.</li>
<li><strong>Post-Civil War Shift:</strong> Compulsory schooling laws and the rise of factories created a system where children were segregated from adult life and prepared for industrial work.</li>
</ul>
<section id="the-impact-of-industrialization-on-education-and-society" class="level4">
<h4 class="anchored" data-anchor-id="the-impact-of-industrialization-on-education-and-society">The Impact of Industrialization on Education and Society</h4>
<ul>
<li>The rise of factories and industrialization led to a need for a compliant workforce, which influenced the development of compulsory schooling.</li>
<li>Forced schooling, modeled after German systems, aimed to create a more manageable and less independent workforce.</li>
</ul>
</section>
<section id="andrew-carnegie-and-the-trade-off-of-merit-for-social-stability" class="level4">
<h4 class="anchored" data-anchor-id="andrew-carnegie-and-the-trade-off-of-merit-for-social-stability">Andrew Carnegie and the Trade-Off of Merit for Social Stability</h4>
<ul>
<li><strong>Andrew Carnegie:</strong> Steel magnate and philanthropist who recognized the drawbacks of standardized education.</li>
<li><strong>Carnegie’s Perspective:</strong> While acknowledging that some talented individuals would be overlooked, he believed that mass education was necessary for social control and economic growth.</li>
</ul>
</section>
<section id="william-torrey-harris-and-the-goal-of-self-alienation" class="level4">
<h4 class="anchored" data-anchor-id="william-torrey-harris-and-the-goal-of-self-alienation">William Torrey Harris and the Goal of Self-Alienation</h4>
<ul>
<li><strong>William Torrey Harris:</strong> US Commissioner of Education (1889-1906), advocated for schooling that promoted self-alienation to benefit the state and corporations.</li>
<li><strong>Harris’s View:</strong> Schools should prioritize obedience and conformity over individual expression.</li>
</ul>
</section>
</section>
<section id="the-dangers-of-centralized-control-and-the-need-for-dialectical-thinking" class="level3">
<h3 class="anchored" data-anchor-id="the-dangers-of-centralized-control-and-the-need-for-dialectical-thinking">The Dangers of Centralized Control and the Need for Dialectical Thinking</h3>
<ul>
<li><strong>Centralized Economies:</strong> Tend towards oligarchies, stifle innovation, and prioritize stability over creative destruction.</li>
<li><strong>Dialectical Thinking:</strong> The ability to question assumptions and consider multiple perspectives, which is essential for a healthy society but undermined by standardized education.</li>
<li><strong>The Importance of Personal Production:</strong> Early America valued self-sufficiency, but the shift towards consumerism has made people more dependent on corporations and less resilient.</li>
</ul>
<section id="the-role-of-schooling-in-promoting-consumption" class="level4">
<h4 class="anchored" data-anchor-id="the-role-of-schooling-in-promoting-consumption">The Role of Schooling in Promoting Consumption</h4>
<ul>
<li>Schools often prioritize obedience, conformity, and test-taking over critical thinking and self-reliance.</li>
<li>This system prepares students to be passive consumers rather than active producers and critical thinkers.</li>
</ul>
</section>
<section id="the-decline-of-american-innovation" class="level4">
<h4 class="anchored" data-anchor-id="the-decline-of-american-innovation">The Decline of American Innovation</h4>
<ul>
<li>The rise of standardized education coincides with a decline in patent applications by Americans.</li>
<li>This suggests that suppressing creativity and independent thinking can have negative consequences for innovation.</li>
</ul>
</section>
<section id="g.-stanley-hall-and-the-invention-of-adolescence" class="level4">
<h4 class="anchored" data-anchor-id="g.-stanley-hall-and-the-invention-of-adolescence">G. Stanley Hall and the Invention of Adolescence</h4>
<ul>
<li><strong>G. Stanley Hall:</strong> Psychologist who popularized the concept of adolescence as a period of storm and stress, justifying the extension of compulsory schooling into the teenage years.</li>
<li><strong>Hall’s Influence:</strong> His ideas contributed to the medicalization of youth and the view that teenagers require extensive supervision and control.</li>
</ul>
</section>
<section id="the-erosion-of-american-individualism" class="level4">
<h4 class="anchored" data-anchor-id="the-erosion-of-american-individualism">The Erosion of American Individualism</h4>
<ul>
<li>Forced schooling has contributed to the decline of American individualism and self-reliance, replacing it with conformity and dependence on institutions.</li>
</ul>
</section>
<section id="the-consequences-of-suppressing-imagination" class="level4">
<h4 class="anchored" data-anchor-id="the-consequences-of-suppressing-imagination">The Consequences of Suppressing Imagination</h4>
<ul>
<li>The suppression of imagination through standardized education creates a more manageable but less innovative and adaptable society.</li>
</ul>
</section>
</section>
<section id="the-honor-roll-of-school-failures" class="level3">
<h3 class="anchored" data-anchor-id="the-honor-roll-of-school-failures">The Honor Roll of School Failures</h3>
<ul>
<li><strong>Successful Individuals Who Did Not Excel in Traditional Schooling:</strong>
<ul>
<li>Craig Venter</li>
<li>Franklin D. Roosevelt</li>
<li>George W. Bush</li>
<li>John Kerry</li>
<li>Al Gore</li>
<li>Dick Cheney</li>
<li>Paul Wellstone</li>
<li>Bill Gates (Microsoft)</li>
<li>Paul Allen (Microsoft)</li>
<li>Steve Jobs (Apple)</li>
<li>Steve Wozniak (Apple)</li>
<li>Michael Dell (Dell Computers)</li>
<li>Larry Ellison (Oracle)</li>
<li>Ted Turner (CNN)</li>
<li>William Faulkner</li>
<li>Warren Avis (Avis Rent a Car)</li>
<li>Edward Hamilton (book retailer)</li>
<li>Paul Orfalea (Kinko’s)</li>
<li>Sean Fanning (Napster)</li>
</ul></li>
<li><strong>Key Takeaway:</strong> Traditional academic success is a poor predictor of entrepreneurial spirit, innovation, or real-world achievement.</li>
</ul>
<section id="lou-wasserman-from-movie-usher-to-hollywood-mogul" class="level4">
<h4 class="anchored" data-anchor-id="lou-wasserman-from-movie-usher-to-hollywood-mogul">Lou Wasserman: From Movie Usher to Hollywood Mogul</h4>
<ul>
<li><strong>Lou Wasserman:</strong>
<ul>
<li><strong>Background:</strong> Movie usher who dropped out of school at thirteen.</li>
<li><strong>Open-Source Learning:</strong> Developed entrepreneurial skills through his work experience.</li>
<li><strong>Success:</strong> Founded MCA, a powerful Hollywood talent agency, demonstrating the value of street smarts and practical experience.</li>
</ul></li>
</ul>
</section>
<section id="warren-buffett-an-early-entrepreneurial-prodigy" class="level4">
<h4 class="anchored" data-anchor-id="warren-buffett-an-early-entrepreneurial-prodigy">Warren Buffett: An Early Entrepreneurial Prodigy</h4>
<ul>
<li><strong>Warren Buffett:</strong>
<ul>
<li><strong>Background:</strong> Began his first business at age six.</li>
<li><strong>Early Open-Source Learning:</strong> Developed business acumen through various ventures, including selling Coca-Cola, golf balls, and renting pinball machines.</li>
<li><strong>Success:</strong> Became one of the world’s wealthiest men through his investment firm, Berkshire Hathaway.</li>
</ul></li>
</ul>
</section>
</section>
<section id="why-doesnt-school-teach-real-world-skills" class="level3">
<h3 class="anchored" data-anchor-id="why-doesnt-school-teach-real-world-skills">Why Doesn’t School Teach Real-World Skills?</h3>
<ul>
<li>Schools often prioritize abstract knowledge over practical skills and entrepreneurial thinking.</li>
<li>This disconnect leaves students ill-prepared for the complexities of the modern economy.</li>
</ul>
<section id="the-potential-of-65-million-children-as-producers" class="level4">
<h4 class="anchored" data-anchor-id="the-potential-of-65-million-children-as-producers">The Potential of 65 Million Children as Producers</h4>
<ul>
<li>Imagine the possibilities if the 65 million children currently in the US school system were encouraged to develop their entrepreneurial potential and become producers rather than just consumers.</li>
</ul>
</section>
</section>
<section id="the-power-of-mixing-ages-and-experiences" class="level3">
<h3 class="anchored" data-anchor-id="the-power-of-mixing-ages-and-experiences">The Power of Mixing Ages and Experiences</h3>
<ul>
<li><strong>Pre-Industrial Society:</strong> Children learned from adults in mixed-age settings, gaining valuable experience and mentorship.</li>
<li><strong>Modern Society:</strong> Age segregation limits opportunities for intergenerational learning and the transmission of practical skills.</li>
</ul>
</section>
<section id="the-decline-of-american-manufacturing-and-the-rise-of-financial-bubbles" class="level3">
<h3 class="anchored" data-anchor-id="the-decline-of-american-manufacturing-and-the-rise-of-financial-bubbles">The Decline of American Manufacturing and the Rise of Financial Bubbles</h3>
<ul>
<li>The US has shifted from a manufacturing-based economy to one increasingly reliant on financial speculation and debt.</li>
<li>This shift, facilitated by a decline in practical skills and an increase in risk-taking, has created instability and economic inequality.</li>
</ul>
<section id="the-school-bubble-a-drain-on-resources-and-innovation" class="level4">
<h4 class="anchored" data-anchor-id="the-school-bubble-a-drain-on-resources-and-innovation">The School Bubble: A Drain on Resources and Innovation</h4>
<ul>
<li>The education system has become a massive industry that consumes vast resources without necessarily producing commensurate returns in terms of innovation or economic growth.</li>
<li>This “school bubble” diverts resources from more productive sectors of the economy.</li>
</ul>
</section>
</section>
<section id="st.-paul-and-the-rule-book-dragon" class="level3">
<h3 class="anchored" data-anchor-id="st.-paul-and-the-rule-book-dragon">St.&nbsp;Paul and the Rule Book Dragon</h3>
<ul>
<li><strong>St.&nbsp;Paul’s Message:</strong> In his letters to early Christian communities, Paul emphasized the importance of adaptability and love over rigid adherence to rules.</li>
<li><strong>The Dangers of Excessive Regulation:</strong> Over-regulation stifles creativity, innovation, and personal responsibility.</li>
</ul>
<section id="the-return-of-the-rule-choked-society" class="level4">
<h4 class="anchored" data-anchor-id="the-return-of-the-rule-choked-society">The Return of the Rule-Choked Society</h4>
<ul>
<li>Modern society has become increasingly rule-bound, with surveillance technology and bureaucratic systems limiting individual freedom and autonomy.</li>
<li>This trend mirrors the rule-heavy environment of ancient Israel, which St.&nbsp;Paul challenged.</li>
</ul>
</section>
<section id="the-insurgency-against-the-system" class="level4">
<h4 class="anchored" data-anchor-id="the-insurgency-against-the-system">The Insurgency Against the System</h4>
<ul>
<li><strong>Signs of Resistance:</strong> The growth of homeschooling, the internet’s democratizing influence, and the rise of alternative economies all point to a growing dissatisfaction with the status quo.</li>
<li><strong>Identity Theft and Copyright Infringement:</strong> These forms of crime can be seen as acts of rebellion against systems that restrict individual autonomy and access to information.</li>
</ul>
</section>
<section id="the-failure-of-the-military-industrial-complex" class="level4">
<h4 class="anchored" data-anchor-id="the-failure-of-the-military-industrial-complex">The Failure of the Military-Industrial Complex</h4>
<ul>
<li><strong>The Limits of Military Technology:</strong> The US military’s technological superiority has proven ineffective against unconventional tactics and determined adversaries.</li>
<li><strong>The Importance of Clear Objectives:</strong> The lack of clear objectives in recent US military interventions has undermined morale and made it difficult to achieve lasting victory.</li>
</ul>
</section>
<section id="the-time-of-the-sweat-bath" class="level4">
<h4 class="anchored" data-anchor-id="the-time-of-the-sweat-bath">The Time of the Sweat Bath</h4>
<ul>
<li>We are living in a time of unprecedented challenges, characterized by environmental degradation, economic instability, and social unrest.</li>
<li><strong>The Need for New Solutions:</strong> Traditional institutions and approaches are failing to address these challenges, necessitating a radical shift in thinking and action.</li>
</ul>
</section>
<section id="choosing-allies-for-the-future" class="level4">
<h4 class="anchored" data-anchor-id="choosing-allies-for-the-future">Choosing Allies for the Future</h4>
<ul>
<li>In times of crisis, adaptability, creativity, and independent thinking are more valuable than conformity and obedience.</li>
<li>We need to support individuals who challenge the status quo and offer new solutions.</li>
</ul>
</section>
</section>
<section id="the-importance-of-self-awareness-and-rejecting-the-human-resource-mentality" class="level3">
<h3 class="anchored" data-anchor-id="the-importance-of-self-awareness-and-rejecting-the-human-resource-mentality">The Importance of Self-Awareness and Rejecting the “Human Resource” Mentality</h3>
<ul>
<li><strong>Know Thyself:</strong> Understanding one’s strengths, values, and purpose is essential for a fulfilling life.</li>
<li><strong>Rejecting the “Human Resource” Label:</strong> Embracing self-reliance and pursuing meaningful work rather than simply being a cog in a machine.</li>
</ul>
<section id="the-power-of-open-source-learning-in-a-changing-world" class="level4">
<h4 class="anchored" data-anchor-id="the-power-of-open-source-learning-in-a-changing-world">The Power of Open-Source Learning in a Changing World</h4>
<ul>
<li>Open-source learning, with its emphasis on adaptability, experimentation, and personal growth, is essential for navigating the complexities of the 21st century.</li>
<li>It’s time to move beyond the limitations of standardized education and embrace a more personalized and empowering approach to learning.</li>
</ul>
</section>
</section>
</section>
<section id="chapter-3-fat-stanley-and-the-lancaster-amish" class="level2">
<h2 class="anchored" data-anchor-id="chapter-3-fat-stanley-and-the-lancaster-amish">Chapter 3: Fat Stanley and the Lancaster Amish</h2>
<p>This analysis explores the limitations of traditional schooling and highlights the value of self-directed education, drawing parallels between the experiences of “Fat Stanley,” a truant student, and the educational practices of the Amish community.</p>
<section id="the-illusion-of-schooling" class="level3">
<h3 class="anchored" data-anchor-id="the-illusion-of-schooling">The Illusion of Schooling</h3>
<ul>
<li><strong>Schooling</strong>, often mistaken for education, focuses on:
<ul>
<li>Habit formation</li>
<li>Attitude training</li>
<li>External control rather than internal motivation</li>
<li>This approach can be unpleasant and stifling for individuals.</li>
</ul></li>
<li><strong>Education</strong>, in contrast, emphasizes:
<ul>
<li>Self-mastery</li>
<li>Self-enlargement</li>
<li>Self-transcendence</li>
<li>Exploration of individual potential</li>
</ul></li>
<li>While schooling can complement education, Gatto argues that education is paramount for a fulfilling life.</li>
</ul>
</section>
<section id="success-without-schooling-examples" class="level3">
<h3 class="anchored" data-anchor-id="success-without-schooling-examples">Success Without Schooling: Examples</h3>
<ul>
<li><strong>Mary Shelley:</strong>
<ul>
<li>Wrote <em>Frankenstein</em> at 18, now considered a literary masterpiece.</li>
</ul></li>
<li><strong>William Shakespeare:</strong>
<ul>
<li>Had limited formal education but remains a global icon of literature.</li>
</ul></li>
<li><strong>Inventive individuals across fields</strong> often achieve success with minimal formal schooling, emphasizing the importance of self-directed learning.</li>
</ul>
</section>
<section id="the-essence-of-true-education" class="level3">
<h3 class="anchored" data-anchor-id="the-essence-of-true-education">The Essence of True Education</h3>
<ul>
<li><strong>Self-initiated learning</strong> is crucial for genuine education.</li>
<li>Key elements of self-directed education include:
<ul>
<li><strong>Broad experience:</strong> Gaining knowledge and skills from diverse sources beyond the classroom.</li>
<li><strong>Introspection:</strong> Reflecting on experiences and insights to deepen understanding.</li>
<li><strong>Focus and Concentration:</strong> Developing the ability to sustain attention on one’s goals despite distractions.</li>
<li><strong>Curiosity and Patience:</strong> Cultivating a thirst for knowledge and a willingness to persevere in the face of challenges.</li>
<li><strong>Trial and Error:</strong> Embracing experimentation, learning from mistakes, and adapting strategies accordingly.</li>
<li><strong>Feedback Integration:</strong> Actively seeking and utilizing feedback from the environment to refine understanding and approaches.</li>
</ul></li>
</ul>
</section>
<section id="a-case-for-criticism" class="level3">
<h3 class="anchored" data-anchor-id="a-case-for-criticism">A Case for Criticism</h3>
<ul>
<li>Gatto highlights the importance of embracing criticism for personal growth.</li>
<li>An anecdote about a family member who “doesn’t take criticism well” exemplifies the detrimental effects of such an attitude.</li>
</ul>
</section>
<section id="fat-stanley-a-lesson-in-unconventional-learning" class="level3">
<h3 class="anchored" data-anchor-id="fat-stanley-a-lesson-in-unconventional-learning">Fat Stanley: A Lesson in Unconventional Learning</h3>
<ul>
<li><strong>Fat Stanley</strong>, a 13-year-old student, rarely attended school.
<ul>
<li>He excelled in using his fists to deter bullies.</li>
</ul></li>
<li>Gatto’s inquiry into Stanley’s absences revealed a unique approach to learning:
<ul>
<li>Stanley had five aunts and uncles who owned businesses.</li>
<li>He worked for each relative, gaining practical experience and business acumen.</li>
<li>His goal was to become self-employed, like his relatives.</li>
<li>Stanley valued this hands-on education more than formal schooling.</li>
</ul></li>
<li>Stanley’s perspective:
<ul>
<li><blockquote class="blockquote">
<p>“This way I get a chance to see how the different businesses work. You tell me what books I have to read and I’ll read them, but I don’t have time to waste in school unless I want to end up like you, working for somebody else.”</p>
</blockquote></li>
</ul></li>
<li>Impressed by Stanley’s initiative and his mother’s support, Gatto chose to support his alternative education.</li>
</ul>
</section>
<section id="the-flaws-of-mass-schooling" class="level3">
<h3 class="anchored" data-anchor-id="the-flaws-of-mass-schooling">The Flaws of Mass Schooling</h3>
<ul>
<li>Traditional schooling often fails to cater to the diverse learning styles and needs of individual children.</li>
<li>Gatto argues that schooling primarily conditions students for conformity and obedience, not self-direction.</li>
<li><strong>Negative consequences of this system include:</strong>
<ul>
<li><strong>Waiting and Submission:</strong> Students are taught to prioritize external validation and passively follow instructions.</li>
<li><strong>Artificial Ranking:</strong> Schooling instills a sense of competition and creates a hierarchy of winners and losers, impacting self-esteem and future opportunities.</li>
<li><strong>Irrelevant Curriculum:</strong> Classroom work often feels disconnected from students’ real-life experiences, leading to disengagement and apathy.</li>
<li><strong>Suppression of Self-Discovery:</strong> The structured environment of traditional schooling can hinder the natural curiosity and exploration essential for true learning.</li>
</ul></li>
</ul>
</section>
<section id="the-amish-model-community-and-self-reliance" class="level3">
<h3 class="anchored" data-anchor-id="the-amish-model-community-and-self-reliance">The Amish Model: Community and Self-Reliance</h3>
<ul>
<li>Gatto contrasts the schooling model with the practices of the <strong>Old Order Amish</strong>, a community known for its:
<ul>
<li><strong>Small business and farm-based economy</strong></li>
<li><strong>Emphasis on practical skills, self-sufficiency, and community well-being</strong></li>
</ul></li>
<li>The Amish prioritize the development of:
<ul>
<li>Competence in essential life skills</li>
<li>Self-reliance</li>
<li>Dependability</li>
<li>Honesty</li>
<li>Neighborliness</li>
<li>Compassion</li>
<li>Piety</li>
<li>Commitment to the common good</li>
</ul></li>
<li>The Amish success challenges conventional assumptions about business and success, demonstrating that alternative paths to prosperity exist.</li>
</ul>
</section>
<section id="consumption-vs.-community-a-tale-of-two-systems" class="level3">
<h3 class="anchored" data-anchor-id="consumption-vs.-community-a-tale-of-two-systems">Consumption vs.&nbsp;Community: A Tale of Two Systems</h3>
<ul>
<li>Gatto argues that the dominant economic system encourages:
<ul>
<li>A relentless pursuit of novelty and fashion</li>
<li>Unnecessary consumption driven by manufactured desires and the fear of social shame</li>
<li>This cycle perpetuates a culture of “out with the old, in with the new,” contrasting sharply with the Amish values of sustainability and community.</li>
</ul></li>
</ul>
</section>
<section id="the-bell-curve-and-its-discontents" class="level3">
<h3 class="anchored" data-anchor-id="the-bell-curve-and-its-discontents">The Bell Curve and Its Discontents</h3>
<ul>
<li>School bells are used as a metaphor for the constant interruptions and distractions that prevent deep focus and meaningful learning.</li>
<li>Gatto argues that the emphasis on standardized testing and grading fosters a culture of shame and humiliation, hindering genuine intellectual growth.</li>
<li>This system, according to Gatto, produces:
<ul>
<li>A workforce conditioned for obedience and conformity.</li>
<li>A populace susceptible to manipulation through consumerism and superficial desires.</li>
</ul></li>
</ul>
</section>
<section id="the-amish-resistance-protecting-community-and-values" class="level3">
<h3 class="anchored" data-anchor-id="the-amish-resistance-protecting-community-and-values">The Amish Resistance: Protecting Community and Values</h3>
<ul>
<li>The <strong>Amish</strong> have actively resisted attempts to impose compulsory schooling that conflicts with their values.</li>
<li>In the landmark case <strong>Yoder v. Wisconsin (1976)</strong>, the Amish successfully argued that:
<ul>
<li>Government-mandated schooling undermined their community’s social fabric and family life.</li>
<li>The separation of knowledge from practical experience and the competitive nature of schooling were detrimental to their way of life.</li>
</ul></li>
<li>As part of their compromise with the state of Wisconsin, the Amish demanded:
<ul>
<li>Small, localized schools within walking distance of students’ homes.</li>
<li>Continuity in teachers to foster strong relationships and understanding.</li>
<li>A shorter school year focused on essential knowledge and skills.</li>
<li>Parental control over educational decisions.</li>
<li>Teachers who respected and understood Amish values and rural life.</li>
<li>An educational approach that balanced academic knowledge with practical wisdom.</li>
<li>Integration of apprenticeships and real-world experiences into the curriculum.</li>
</ul></li>
</ul>
</section>
<section id="lessons-from-stanley-and-the-amish" class="level3">
<h3 class="anchored" data-anchor-id="lessons-from-stanley-and-the-amish">Lessons from Stanley and the Amish</h3>
<ul>
<li>Both Stanley’s story and the Amish way of life challenge the assumption that standardized schooling is the only path to success and fulfillment.</li>
<li>Key takeaways include:
<ul>
<li><strong>Embracing Individuality:</strong> Recognize and nurture the unique talents and learning styles of each child.</li>
<li><strong>Rethinking “Success”:</strong> Challenge the societal definition of success solely based on material wealth and status.</li>
<li><strong>Prioritizing Community:</strong> Foster a sense of belonging, cooperation, and mutual support within communities.</li>
<li><strong>Valuing Practical Skills:</strong> Encourage the acquisition of real-world skills and knowledge applicable to daily life.</li>
<li><strong>Promoting Self-Direction:</strong> Empower individuals to take ownership of their education and pursue their passions.</li>
<li><strong>Honoring Individual Freedom:</strong> Respect the right of individuals and communities to choose alternative educational paths aligned with their values.</li>
</ul></li>
</ul>
</section>
<section id="conclusion-a-call-for-educational-transformation" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-a-call-for-educational-transformation">Conclusion: A Call for Educational Transformation</h3>
<ul>
<li>Gatto urges a reevaluation of the current schooling system, advocating for a shift towards:
<ul>
<li>Personalized learning experiences</li>
<li>Community-based education</li>
<li>A focus on practical skills and self-reliance</li>
<li>The fostering of critical thinking, creativity, and a lifelong love of learning</li>
</ul></li>
</ul>
</section>
</section>
<section id="chapter-4-david-sarnoffs-classroom" class="level2">
<h2 class="anchored" data-anchor-id="chapter-4-david-sarnoffs-classroom">Chapter 4: David Sarnoff’s Classroom</h2>
<section id="introduction-and-context" class="level3">
<h3 class="anchored" data-anchor-id="introduction-and-context">Introduction and Context</h3>
<ul>
<li>The letter is written by Gatto in School District 3, Manhattan, to their assistant principal, Murray.</li>
<li>Gatto has 28 years of experience in the district.</li>
<li>The letter expresses deep dissatisfaction with the state of education in their district, arguing that it fails to equip students with essential skills and competencies.</li>
<li>Gatto draws a stark contrast between the inadequate education system and the self-driven success story of David Sarnoff, a prominent figure in the history of technology.</li>
<li>The letter serves as a scathing critique of the bureaucratic structures, flawed policies, and prevailing attitudes that Gatto believes are actively harming students’ futures.</li>
</ul>
</section>
<section id="a-critique-of-school-district-3s-educational-approach" class="level3">
<h3 class="anchored" data-anchor-id="a-critique-of-school-district-3s-educational-approach">A Critique of School District 3’s Educational Approach</h3>
<section id="the-failure-to-teach-essential-skills" class="level4">
<h4 class="anchored" data-anchor-id="the-failure-to-teach-essential-skills">The Failure to Teach Essential Skills</h4>
<ul>
<li>Gatto argues that School District 3 fails to teach students the essential skills needed to thrive in the evolving global economy.
<ul>
<li><strong>Evidence:</strong> A brochure from Harvard University outlining nine essential skills for success in the new international economy is cited as a benchmark.
<ul>
<li><h4 id="nine-essential-skills" class="anchored">Nine Essential Skills:</h4>
<ul>
<li>Ability to ask hard questions of data from various sources.</li>
<li>Ability to define problems independently.</li>
<li>Ability to extract useful information from irrelevant data.</li>
<li>Ability to conceptualize.</li>
<li>Ability to reorganize information for new perspectives.</li>
<li>Possessing a mind fluent in different modes of thought (deductive, inductive, heuristic, intuitive).</li>
<li>Facility in collaboration.</li>
<li>Skill in discussing issues, problems, or techniques.</li>
<li>Skill in rhetoric and persuasion.</li>
</ul></li>
</ul></li>
</ul></li>
<li>Gatto contends that the district actively avoids teaching these skills to maintain existing power structures.</li>
<li>Gatto laments the abandonment of practical skills training (e.g., shop, cooking) that were once common and valuable.</li>
</ul>
</section>
<section id="the-david-sarnoff-example-a-case-for-self-driven-education" class="level4">
<h4 class="anchored" data-anchor-id="the-david-sarnoff-example-a-case-for-self-driven-education">The David Sarnoff Example: A Case for Self-Driven Education</h4>
<ul>
<li>Gatto presents David Sarnoff’s life as a counterpoint to the failures of the education system.
<ul>
<li><strong>David Sarnoff’s Accomplishments:</strong>
<ul>
<li>Learned English and became a successful newsboy within five months of arriving in New York City at age nine, after his father died.</li>
<li>Owned his own newsstand at fourteen, using newspapers as his primary learning source.</li>
<li>Became an office boy at Marconi Wireless at fourteen through sheer initiative.</li>
<li>Taught himself telegraphy, leading to a successful career in the burgeoning field of radio technology.</li>
<li>Became president of RCA at age 39.</li>
</ul></li>
</ul></li>
<li><strong>Key Takeaway:</strong> Sarnoff’s success was a result of self-directed learning, initiative, and real-world experience, not formal education.</li>
<li>Gatto implies that the current school system stifles these qualities in students.</li>
</ul>
</section>
<section id="the-mask-of-school-reform" class="level4">
<h4 class="anchored" data-anchor-id="the-mask-of-school-reform">The Mask of School Reform</h4>
<ul>
<li>Gatto recounts a visit to a well-regarded alternative school in East Harlem, led by the respected educator Debbie Meyer.</li>
<li>Despite the school’s positive reputation, Gatto observes significant shortcomings stemming from bureaucratic constraints and traditional attitudes.
<ul>
<li><strong>Constraints and Shortcomings:</strong>
<ul>
<li>A pervasive culture of negativity and limitations (“you can’t do this, you can’t do that”).</li>
<li>Excessive emphasis on standardized tests.</li>
<li>Suppression of imagination and creativity among both students and teachers.</li>
<li>A trivialized community service program (two hours per week), rendering it meaningless.</li>
</ul></li>
</ul></li>
<li>Gatto concludes that even this supposedly innovative school falls short of providing a truly valuable education, especially when compared to the self-driven model embodied by David Sarnoff.</li>
</ul>
</section>
<section id="statistical-evidence-of-failure" class="level4">
<h4 class="anchored" data-anchor-id="statistical-evidence-of-failure">Statistical Evidence of Failure</h4>
<ul>
<li>Gatto cites a report by the State Commission of Education ranking School District 3 last in New York State in key educational metrics.
<ul>
<li><strong>Key Statistics:</strong>
<ul>
<li>Last place out of 736 school districts in third-grade math and reading.</li>
<li>Near the bottom in fifth-grade writing, sixth-grade reading, math, and social studies.</li>
<li>Poor performance in seventh-grade honor math and honor biology.</li>
</ul></li>
</ul></li>
<li>Gatto points out the irony of such poor performance given the district’s affluent location and access to resources.</li>
<li>Gatto uses the report to emphasize the severity of the district’s failure, arguing that “last isn’t an easy degree of failure to achieve.”</li>
</ul>
</section>
<section id="a-culture-of-complacency-and-corruption" class="level4">
<h4 class="anchored" data-anchor-id="a-culture-of-complacency-and-corruption">A Culture of Complacency and Corruption</h4>
<ul>
<li>Gatto argues that a culture of complacency, self-preservation, and corruption within the district perpetuates its failures.
<ul>
<li><strong>Evidence:</strong>
<ul>
<li>High teacher turnover rate (22% annually) is attributed to a “caste system” that rewards favored teachers with desirable assignments while burdening others with impossible workloads.</li>
<li>Inflated administrative bureaucracy and a “shadow economy” divert resources away from teaching and contribute to a deceptive student-teacher ratio.</li>
<li>Administrators prioritize their careers and maintaining the status quo over meaningful educational reform.</li>
<li>A principal’s statement that students’ futures are predetermined, highlighting a defeatist attitude toward disadvantaged students.</li>
</ul></li>
</ul></li>
<li><strong>Key Argument:</strong> Gatto suggests that the system is intentionally designed to disadvantage students from less privileged backgrounds, arguing that “we’re both involved in a social engineering project whose mission is to weaken children’s minds and give them bad characters.”</li>
</ul>
</section>
<section id="the-roots-of-educational-failure" class="level4">
<h4 class="anchored" data-anchor-id="the-roots-of-educational-failure">The Roots of Educational Failure</h4>
<ul>
<li>Gatto identifies two specific district policies that have had a detrimental impact on students’ ability to learn and thrive.
<ul>
<li><strong>Policy 1: Tolerance of Disruptive Behavior:</strong>
<ul>
<li>The decision, influenced by the Ford Foundation, to not control disruptive classroom behavior out of concern for students’ self-esteem is criticized as misguided and harmful.</li>
<li>Gatto contends that this policy has created a chaotic learning environment that hinders all students, including those who are well-behaved.</li>
</ul></li>
<li><strong>Policy 2: Recruitment of Disruptive Students:</strong>
<ul>
<li>The district’s practice of recruiting disruptive students from other areas to mask declining enrollment is condemned as a cynical maneuver that exacerbates the existing problems.</li>
</ul></li>
</ul></li>
<li><strong>Outcome:</strong> These policies, combined with a lack of accountability for administrators, have resulted in a decline in educational standards and a system that fails to serve its students.</li>
</ul>
</section>
<section id="the-perpetuation-of-passivity" class="level4">
<h4 class="anchored" data-anchor-id="the-perpetuation-of-passivity">The Perpetuation of Passivity</h4>
<ul>
<li>Gatto argues that the current education system functions as a “narcotic,” addicting children to passivity, entertainment, and a detachment from reality.
<ul>
<li><strong>Evidence:</strong>
<ul>
<li>Students’ lack of interest in exploration, play, and personal growth.</li>
<li>Excessive consumption of television, music videos, and computer games.</li>
<li>The observation that children from stable, two-parent households where the mother does not work engage in far less passive entertainment.</li>
</ul></li>
</ul></li>
<li><strong>Conclusion:</strong> The education system, instead of fostering critical thinking and engagement with the world, cultivates a dependence on superficial stimulation and an inability to cope with the demands of a meaningful life.</li>
</ul>
</section>
</section>
<section id="a-call-to-action-and-a-bleak-outlook" class="level3">
<h3 class="anchored" data-anchor-id="a-call-to-action-and-a-bleak-outlook">A Call to Action and a Bleak Outlook</h3>
<ul>
<li>Gatto announces their intention to circulate the letter to the new school board, hoping, albeit with skepticism, to spark reflection and change.</li>
<li>Gatto expresses a sense of hopelessness about the likelihood of real reform, believing that self-preservation and entrenched interests will always prevail over genuine efforts to improve the education system.</li>
<li>The letter ends on a pessimistic note, implying that the cycle of failure will continue unless those in power are willing to prioritize the well-being and future of the students above all else.</li>
</ul>
</section>
</section>
<section id="chapter-5.-hector-isnt-the-problem" class="level2">
<h2 class="anchored" data-anchor-id="chapter-5.-hector-isnt-the-problem">Chapter 5. Hector Isn’t the Problem</h2>
<section id="i-quit-a-teachers-disillusionment" class="level3">
<h3 class="anchored" data-anchor-id="i-quit-a-teachers-disillusionment">I Quit: A Teacher’s Disillusionment</h3>
<ul>
<li>Gatto, a 30-year veteran teacher in Manhattan’s Community School District 3, recounts their extensive experience:
<ul>
<li>Teaching in all five district secondary schools.</li>
<li>Facing repeated attempts by administrations to remove them.</li>
<li>Experiencing two license suspensions for insubordination and covert termination during medical leave.</li>
<li>Achieving success as a lecturer at CUNY’s education department, ranking first in student-faculty ratings.</li>
<li>Implementing successful initiatives:
<ul>
<li>New York City’s most successful permanent school fundraiser.</li>
<li>30,000 hours of volunteer community service by an eighth-grade class.</li>
<li>A student-run food cooperative.</li>
<li>Securing over 1,000 apprenticeships.</li>
<li>Directing the collection of tens of thousands of books for student libraries.</li>
<li>Producing four talking job dictionaries for the blind.</li>
<li>Writing two original student musicals.</li>
</ul></li>
<li>Being named New York State Teacher of the Year.</li>
</ul></li>
<li>Despite these achievements, Gatto reached a point of overwhelming disgust and frustration, leading them to quit.</li>
</ul>
</section>
<section id="i-quit-i-think-a-scathing-critique-of-schooling" class="level3">
<h3 class="anchored" data-anchor-id="i-quit-i-think-a-scathing-critique-of-schooling">I Quit, I Think: A Scathing Critique of Schooling</h3>
<ul>
<li>Gatto’s essay, “I Quit, I Think,” published in the Wall Street Journal, outlines their reasons for leaving the profession:
<ul>
<li><strong>Government schooling is the most radical adventure in history</strong>, killing the family by:
<ul>
<li>Monopolizing childhood’s best times.</li>
<li>Teaching disrespect for home and parents.</li>
</ul></li>
<li>The structure of schooling is rooted in an <strong>Egyptian, not Greek or Roman, blueprint</strong>, based on the belief that:
<ul>
<li><strong>Human value is scarce</strong>, symbolized by a pyramid’s narrow peak.</li>
<li>This idea, passed down through the Puritans, found scientific expression in the <strong>bell curve</strong>, which suggests talent is biologically determined.</li>
<li><strong>School serves as the church of this religious notion, with rituals to maintain orthodoxy.</strong></li>
</ul></li>
<li><strong>Professional educators benefit from making the simple seem complex</strong>, subordinating the public to their expertise.</li>
<li><strong>School, as a jobs program, contract provider, and guardian of the social order, resists reform.</strong></li>
<li><strong>Reform efforts fail to fundamentally change the system.</strong></li>
<li><strong>Standardized measures like age grading and testing are arbitrary and harmful</strong>:
<ul>
<li>Children develop at different paces, and judging them by uniform standards is illogical.</li>
<li>Gatto uses the example of David (reading at age 4) and Rachel (reading at age 9), who show no difference in reading ability at age 13.</li>
<li>School, however, would label Rachel as learning disabled and hold David back, creating artificial categories and dependencies.</li>
</ul></li>
<li>Gatto argues that <strong>learning disabilities and giftedness are “sacred myths,”</strong> perpetuating the school system.</li>
<li><strong>True education is not standardized;</strong> there are countless ways to learn, like fingerprints.</li>
<li><strong>State-certified teachers are not essential for education and may hinder it.</strong></li>
<li><strong>Good schools need free-market choices and variety, not more money or time.</strong></li>
<li><strong>National curriculum and testing are based on ignorance of how people learn.</strong></li>
<li>Gatto concludes, unable to participate in a system that harms children, and seeks alternative work.</li>
</ul></li>
</ul>
</section>
<section id="a-religion-of-schooling-and-the-myth-of-dumbness" class="level3">
<h3 class="anchored" data-anchor-id="a-religion-of-schooling-and-the-myth-of-dumbness">A Religion of Schooling and the Myth of Dumbness</h3>
<ul>
<li>Gatto reflects on their 30-year career, questioning how they participated in an <strong>indoctrinating and sorting machine</strong> that steals children’s potential.</li>
<li>School, they argue, is a <strong>religion</strong>; understanding its “holy mission” is crucial to understanding its workings.</li>
<li>While human failings exist within the system, they are not the root cause; <strong>schooling itself is designed to produce “dumbness.”</strong></li>
<li><strong>This new dumbness is not mere ignorance but a categorization of relative stupidity</strong>, creating artificial hierarchies like:
<ul>
<li>Gifted and talented</li>
<li>Mainstream</li>
<li>Special Ed</li>
</ul></li>
<li>These categories ration learning, benefiting the system and social order.</li>
<li>The <strong>“new dumb” are perceived as dangerous and require conditioning with “commercially prepared disinformation.”</strong></li>
<li>This dumbness particularly harms middle and upper-middle-class children, already pressured to conform, leaving them vulnerable to existential crises later in life.</li>
<li>Gatto cites English historian Alan Bullock: <strong>“Evil is a state of incompetence.”</strong> Schooling, they argue, has filled the 20th century with evil by breaking children to a system that rewards compliance over critical thinking.</li>
<li>This system produces individuals dependent on group approval, exemplified by a National Merit Scholar in Gatto’s family who aspired to be “a small part in a great machine.”</li>
<li><strong>The “dumbed down” cannot think independently, constantly seeking external validation and vulnerable to manipulation.</strong></li>
<li>Gatto challenges prevalent explanations for “dumbness”:
<ul>
<li><strong>Biological determinism (the bell curve)</strong></li>
<li><strong>Capitalist oppression (neo-Marxism)</strong></li>
<li><strong>Moral failing (Calvinism)</strong></li>
<li><strong>Natural selection (Darwinism)</strong></li>
<li><strong>Social utility (pragmatic elitism)</strong></li>
<li><strong>Karmic retribution (Buddhism)</strong></li>
</ul></li>
<li>All these explanations, Gatto contends, justify the existence of a vast bureaucracy to manage the “problem” of the “dumb.”</li>
<li>Gatto’s proposition: <strong>mass dumbness is a fabrication, not a reality.</strong> It was invented to serve the system.</li>
</ul>
</section>
<section id="hector-the-horse-tamer-a-case-study" class="level3">
<h3 class="anchored" data-anchor-id="hector-the-horse-tamer-a-case-study">Hector, the Horse Tamer: A Case Study</h3>
<ul>
<li>Gatto introduces <strong>Hector Rodriguez, a 13-year-old student</strong>, observed one November day:
<ul>
<li>Small, olive-skinned, with large black eyes.</li>
<li>Trying to slip past the Central Park skating rink gate despite having a paid ticket.</li>
</ul></li>
<li>Hector’s actions, puzzling at first, demonstrate his experimental nature—testing the gate’s security with a safety net (the ticket).</li>
<li>School records reveal Hector’s history:
<ul>
<li>Labeled an “outlaw” for minor infractions that would not have been criminalized in the past.</li>
<li>Attending one of New York State’s lowest-rated schools, facing potential state takeover.</li>
<li>Placed in the “Mainstream D” category, the lowest of the low, above only Special Ed.</li>
<li>Standardized test scores placed him three years behind his peers.</li>
</ul></li>
<li>Despite this, Hector displays initiative and a desire to challenge norms, as seen in his gate-crashing experiment.</li>
<li>His “criminal” record includes:
<ul>
<li>Being caught with a fake gun in his former elementary school during Christmas break.</li>
<li>Intending to “free the slaves” (the younger children) like a modern-day Spartacus.</li>
</ul></li>
<li>This incident highlights the school’s perception of Hector as a problem, as expressed by the principal: “Gatto, what have you done to me?”</li>
<li>A year later, Hector’s high school record shows:
<ul>
<li>Failing every subject.</li>
<li>Excessive absences and truancy.</li>
</ul></li>
<li>The system paints a picture of Hector as a lost cause:
<ul>
<li>Poor, small, minority, ignored, “dumb,” a trouble-maker, a failure.</li>
</ul></li>
<li>Gatto asks: <strong>What is society to do with its Hectors?</strong></li>
<li>Hector represents millions of children deemed problematic by the education system.</li>
<li>Gatto argues that <strong>schooling was reimagined to control children like Hector</strong>, turning it into:
<ul>
<li>A warehouse</li>
<li>A behavior modification clinic</li>
<li>A tool for attitude adjustment</li>
</ul></li>
<li>This system is justified as a defense against chaos, with Hector representing the chaos that needs taming.</li>
<li>The principal, in the documentary about Gatto’s class, acknowledges the system’s flaws but defends it as better than chaos.</li>
<li>Gatto challenges this notion: <strong>Is chaos the only alternative to a stifling system?</strong></li>
<li><strong>The real demon, Gatto argues, is the misperception that Hector is the problem.</strong></li>
<li><strong>Forced schooling, presented as a bulwark against chaos, is actually the source of the problem.</strong></li>
<li>The belief that <strong>human nature’s irrationality must be suppressed</strong> is presented as a dangerous dogma driving the education system.</li>
</ul>
</section>
</section>
<section id="chapter-6-the-camino-de-santiago" class="level2">
<h2 class="anchored" data-anchor-id="chapter-6-the-camino-de-santiago">Chapter 6: The Camino de Santiago</h2>
<section id="confessions-of-a-tv-free-america-advisor" class="level3">
<h3 class="anchored" data-anchor-id="confessions-of-a-tv-free-america-advisor">Confessions of a TV Free America Advisor</h3>
<ul>
<li>Gatto, a school teacher and advisor for TV Free America, observed negative behavioral patterns in TV-addicted children:
<ul>
<li>Irresponsibility</li>
<li>Childishness</li>
<li>Dishonesty</li>
<li>Maliciousness</li>
<li>Lack of purpose</li>
</ul></li>
<li>These children seemed to lose the ability to behave with integrity and grow up, as if their spirits were dwarfed by consuming too many fabricated stories and explanations.</li>
<li>Gatto felt that computers often worsened the problem, leading to:
<ul>
<li>Exposure to pornography</li>
<li>Playing against programs instead of other people</li>
<li>Passive consumption rather than active participation</li>
<li>Crossing the line into a passive state even with the internet, unless good discipline was exercised.</li>
</ul></li>
</ul>
</section>
<section id="suppression-of-natural-feedback-circuits" class="level3">
<h3 class="anchored" data-anchor-id="suppression-of-natural-feedback-circuits">Suppression of Natural Feedback Circuits</h3>
<ul>
<li>Gatto sought a solution to counteract the negative effects of excessive media consumption, recognizing that traditional preaching was ineffective.</li>
<li>Gatto believed that relief could be found by encouraging physical activity and real-life experiences, as opposed to passively consuming media.</li>
<li>The core issue identified was the suppression of <strong>natural feedback circuits</strong>, which are essential for learning from mistakes.</li>
<li>Gatto uses the example of learning to sail:
<ul>
<li>A novice sailor will inevitably make mistakes, such as tacking too far left or right.</li>
<li>However, through practice and feedback, the sailor learns to adjust and improve.</li>
</ul></li>
<li>Similarly, mastering speech requires significant practice and feedback.</li>
<li>Gatto argues that bureaucracies, including school systems, often fail because they cannot efficiently respond to feedback.
<ul>
<li>They are bound by rigid rules and resistant to input from parents, teachers, students, or outside sources.</li>
</ul></li>
<li>Gatto observed that the rigid structure of traditional schooling limited students’ opportunities for growth through feedback.</li>
</ul>
</section>
<section id="a-guerrilla-curriculum-inspired-by-the-camino-de-santiago" class="level3">
<h3 class="anchored" data-anchor-id="a-guerrilla-curriculum-inspired-by-the-camino-de-santiago">A Guerrilla Curriculum Inspired by the Camino de Santiago</h3>
<ul>
<li>Gatto’s solution was a <strong>guerrilla curriculum</strong> designed to restore natural feedback circuits in children.</li>
<li>This curriculum targeted inactivity and activities that did not significantly engage feedback mechanisms.</li>
<li>Gatto believed that sufficient activity, regardless of its specific nature, would motivate children to reduce their screen time.</li>
<li>The goal was to shift children from being passive spectators to active participants in their own lives.</li>
<li><strong>Inspiration from the Camino de Santiago:</strong>
<ul>
<li>The Camino de Santiago is a medieval pilgrimage route across northern Spain, ending at the burial place of the Apostle James in Santiago de Compostela.</li>
<li>Thousands of people undertake this pilgrimage annually, seeking personal growth, self-reliance, connection with nature, and time for reflection.</li>
<li>Gatto drew inspiration from the Camino, recognizing that a similar pilgrimage could help children reconnect with themselves, their families, and the natural world.</li>
</ul></li>
</ul>
<section id="the-new-york-city-pilgrimage" class="level4">
<h4 class="anchored" data-anchor-id="the-new-york-city-pilgrimage">The New York City Pilgrimage</h4>
<ul>
<li>Gatto, with the support of parents, sent 13-year-old students on solo journeys on foot through New York City’s five boroughs.</li>
<li>These expeditions involved:
<ul>
<li>Walking the circumference of Manhattan (approximately 30 miles)</li>
<li>Exploring different neighborhoods, observing and analyzing their characteristics</li>
<li>Mapping Central Park, university campuses, business districts, churches, and museums</li>
<li>Visiting government departments, such as the Board of Education or police headquarters, individually</li>
</ul></li>
<li>Students documented their observations, conducted interviews, researched, and created guide pamphlets.</li>
<li>Gatto encouraged solo expeditions as they offered the most significant learning opportunities, but students could also opt for shorter trips.</li>
<li>The key requirement was a willingness to walk alone and engage in meaningful exploration and study.</li>
</ul>
</section>
<section id="a-visitors-key-to-iceland-and-its-influence" class="level4">
<h4 class="anchored" data-anchor-id="a-visitors-key-to-iceland-and-its-influence">A Visitor’s Key to Iceland and Its Influence</h4>
<ul>
<li>Gatto found further inspiration for the curriculum in “A Visitor’s Key to Iceland,” a unique guidebook.</li>
<li>The guidebook meticulously describes every road in Iceland, bringing the land and its history to life through vivid anecdotes.</li>
<li>Inspired by this approach, Gatto’s students created their own “visitors’ keys” to various aspects of New York City:
<ul>
<li>Safe spots for playing hooky</li>
<li>Notable pizza parlors</li>
<li>Architectural features of brownstone buildings</li>
<li>Swimming pools in the five boroughs, including sociological analyses of their cultural context</li>
</ul></li>
<li>Many projects involved gathering knowledge and perspectives from elderly individuals, both those confined to homes and those spending time in public spaces.</li>
<li>As students engaged in these production-oriented activities, the allure of screens diminished.</li>
</ul>
</section>
</section>
<section id="results-and-reflections" class="level3">
<h3 class="anchored" data-anchor-id="results-and-reflections">Results and Reflections</h3>
<ul>
<li>Gatto observed that engaging with reality through intellectually stimulating work activated feedback circuits in most students, leading to substantial personal growth.</li>
<li>By April, many students who had initially displayed negative behaviors transformed into interesting and productive individuals.</li>
<li>Gatto emphasizes that embracing challenges is fundamental to self-mastery and competence, a concept likely discovered in humanity’s early days.</li>
<li>Gatto was surprised by how easily this transformation was achieved, requiring neither exceptional talent nor financial resources.</li>
<li>While implementing the curriculum with 130 students annually was challenging, Gatto believes it would be significantly easier in a system that prioritized learning over social control.</li>
<li>Gatto received numerous awards from the school establishment, which was unaware of the curriculum’s unconventional nature.</li>
<li>Gatto emphasizes the importance of allowing children to learn through real-life experiences rather than imposing limitations.</li>
</ul>
</section>
<section id="urgent-appointments-with-reality" class="level3">
<h3 class="anchored" data-anchor-id="urgent-appointments-with-reality">Urgent Appointments with Reality</h3>
<ul>
<li>Gatto argues that everyone has “appointments to keep with reality,” including:
<ul>
<li>Real work to do</li>
<li>Real skills to learn</li>
<li>Real battles to fight</li>
<li>Real risks to take</li>
<li>Real ideas to grapple with</li>
<li>A constant awareness of death’s inevitability</li>
</ul></li>
<li>According to Gatto, television, computers, and government schooling have diverted children from these essential experiences, resulting in a generation of emotionally and developmentally stunted individuals.</li>
<li>Gatto believes that restoring opportunities for real-life engagement will alleviate these problems and allow children to mature naturally.</li>
</ul>
</section>
<section id="breaking-free-from-the-electronic-trance" class="level3">
<h3 class="anchored" data-anchor-id="breaking-free-from-the-electronic-trance">Breaking Free from the Electronic Trance</h3>
<ul>
<li>While acknowledging the potential benefits of technology, Gatto cautions against becoming overly reliant on it.</li>
<li>Gatto suggests that reducing reliance on screens can be as simple as physically unplugging.</li>
<li>Exposing young people to the richness of real life can naturally diminish their dependence on television.</li>
<li>Gatto highlights the importance of showing, rather than telling, children the value of experiences beyond the screen.</li>
<li>Gatto expresses concerns about the potential negative impacts of excessive computer use, similar to those associated with television.</li>
</ul>
</section>
<section id="the-camino-de-santiago-as-a-model-for-education-reform" class="level3">
<h3 class="anchored" data-anchor-id="the-camino-de-santiago-as-a-model-for-education-reform">The Camino de Santiago as a Model for Education Reform</h3>
<ul>
<li>Gatto proposes a radical education reform:
<ul>
<li>Eliminate two years of high school and use the funds to send every student on their own “Camino de Santiago.”</li>
</ul></li>
<li>This experience, inspired by the pilgrimage, would involve significant personal journeys, fostering self-reliance, exploration, and reflection.</li>
<li>Gatto emphasizes that these journeys do not need to be as physically demanding as those undertaken by adventurers like George Mee or Tani Abe.</li>
<li>Gatto firmly believes that all young people should experience a significant personal “Camino” as part of their education.</li>
<li>Gatto encourages individuals to take on this responsibility themselves if governments fail to implement such a program.</li>
</ul>
</section>
</section>
<section id="chapter-7-weapons-of-mass-instruction" class="level2">
<h2 class="anchored" data-anchor-id="chapter-7-weapons-of-mass-instruction">Chapter 7: Weapons of Mass Instruction</h2>
<section id="schools-deficiencies-statistics-and-observations" class="level3">
<h3 class="anchored" data-anchor-id="schools-deficiencies-statistics-and-observations">School’s Deficiencies: Statistics and Observations</h3>
<ul>
<li>Only <strong>31%</strong> of college-educated Americans can fully comprehend a newspaper story, down from <strong>40%</strong> a decade ago.
<ul>
<li>Source: <em>National Commission on the Future of Higher Education</em>, August 2006</li>
</ul></li>
<li><strong>35%</strong> of young people regret their university experience, not considering the time and money invested worth it.
<ul>
<li>More than half said they learned nothing of use.</li>
<li>Source: <em>Wilson Quarterly</em>, Autumn 2006</li>
</ul></li>
</ul>
</section>
<section id="jacques-lusserins-critique-of-schooling" class="level3">
<h3 class="anchored" data-anchor-id="jacques-lusserins-critique-of-schooling">Jacques Lusserin’s Critique of Schooling</h3>
<ul>
<li>Jacques Lusserin, a blind French teenager who led a resistance group during World War II, criticizes schooling in his autobiography, <em>And Then There Was Light</em>.
<ul>
<li>In Chapter 4, he describes the classroom experience as a “<strong>moral disaster,</strong>” likening the compulsory confinement of students to a foul odor.</li>
<li>He argues that school suppresses anger, independence, curiosity, and other natural impulses, creating an environment where true moral development is impossible.
<ul>
<li>He connects this to his ability to commit violence shortly after leaving this environment.</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="examining-the-purpose-and-effects-of-schooling" class="level3">
<h3 class="anchored" data-anchor-id="examining-the-purpose-and-effects-of-schooling">Examining the Purpose and Effects of Schooling</h3>
<ul>
<li>Gatto questions the benefits of schooling, given its historically negative portrayal.
<ul>
<li>He acknowledges the system must offer some benefits but questions what they are and who they serve.</li>
<li>He suggests the focus on winning in school supersedes the goal of learning, leading to scandals where even elite students lack knowledge.</li>
</ul></li>
<li>Gatto examines the cultural implications of entrusting children to strangers for instruction for extended periods, questioning the underlying message this practice sends.</li>
<li>He presents various cultural artifacts as evidence of schooling’s negative perception:
<ul>
<li><strong>Horace’s ode:</strong> Describes the torments of schooling.</li>
<li><strong>Pompeii mosaics:</strong> Illustrate painful school discipline.</li>
<li><strong>Washington Irving’s “The Legend of Sleepy Hollow”:</strong> Celebrates a protagonist who turns the tables on an insufferable schoolmaster.</li>
<li><strong>World War I era song “School Days”:</strong> Romantically links school learning with corporal punishment.</li>
<li><strong>Hollywood film “Teaching Miss Tingle”:</strong> Depicts a schoolteacher kidnapped and tortured by her students.</li>
<li><strong>Websites:</strong> Dedicated to disrupting school routines.</li>
</ul></li>
</ul>
</section>
<section id="gattos-personal-experience-and-methodology" class="level3">
<h3 class="anchored" data-anchor-id="gattos-personal-experience-and-methodology">Gatto’s Personal Experience and Methodology</h3>
<ul>
<li>Gatto, a teacher of 30 years, realized early in his career that school diminishes intellectual power, creativity, and character.
<ul>
<li>He compares the school system to a penitentiary, with rules and procedures acting as guards.</li>
</ul></li>
<li>Inspired by Lusserin, Gatto sought to peacefully sabotage the system.
<ul>
<li>He developed a formula for individualized learning:
<ul>
<li><strong>Step 1: Comprehensive Student Biography</strong>
<ul>
<li>Assemble a detailed biography of each student, going beyond school records to include information from family, friends, and others who know the student well.</li>
</ul></li>
<li><strong>Step 2: Personal Wishes and Weaknesses</strong>
<ul>
<li>Ask each student to list:
<ul>
<li><strong>Three things they want to learn by the year’s end.</strong></li>
<li><strong>Three weaknesses they want to overcome.</strong></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li>This approach motivated students, encouraging hard work and self-directed learning.</li>
<li>Gatto also embarked on extensive research into the history and purpose of schooling:
<ul>
<li>He read thousands of books, traveled extensively, and engaged in debates about education.</li>
<li>His research culminated in a book, <em>The Underground History of American Education</em>, which a major publisher refused to publish, deeming it too controversial.</li>
</ul></li>
<li>Gatto’s teaching practices were informed by his research and daring field experiments conducted with his students (referred to as “gatos-gorillas”):
<ul>
<li>They infiltrated public events and institutions, conducted polls, and staged dramatic performances.</li>
<li>Their goal:
<ul>
<li>Promote independence, self-reliance, and critical thinking.</li>
<li>Expose the barriers schooling creates that limit intellectual and behavioral growth.</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="school-as-a-system-designed-to-maintain-the-status-quo" class="level3">
<h3 class="anchored" data-anchor-id="school-as-a-system-designed-to-maintain-the-status-quo">School as a System Designed to Maintain the Status Quo</h3>
<ul>
<li>Gatto argues that school, like any bureaucracy, prioritizes self-preservation over its stated mission.
<ul>
<li>He cites Robert Michel’s study of bureaucracies, which found that their primary goal is always to preserve themselves.</li>
</ul></li>
<li>Gatto contends that school operates on illusions, mirroring the economic system’s reliance on “bubbles.”</li>
<li>He questions whether schooling is designed to produce truly educated individuals or to maintain a system of control that benefits a select few.</li>
</ul>
</section>
<section id="adam-smiths-perspective-on-education-vs.-schooling" class="level3">
<h3 class="anchored" data-anchor-id="adam-smiths-perspective-on-education-vs.-schooling">Adam Smith’s Perspective on Education vs.&nbsp;Schooling</h3>
<ul>
<li>Gatto highlights Adam Smith’s distinction between <strong>education</strong> and <strong>schooling</strong> in <em>The Wealth of Nations</em>:
<ul>
<li><strong>Schooling:</strong> Focuses on training for specific roles in society, often limiting intellectual development.</li>
<li><strong>Education:</strong> Aims to compensate for the negative psychological effects of capitalism, fostering critical thinking, creativity, and well-rounded individuals.</li>
</ul></li>
<li>Smith argued that capitalism creates four damaging effects on workers:
<ul>
<li>Cowardice</li>
<li>Stupidity</li>
<li>Sluggishness</li>
<li>Indifference to anything beyond basic needs</li>
</ul></li>
<li>According to Smith, education is necessary to counteract these effects.</li>
<li>Gatto’s curriculum aimed to address these issues, focusing on personal growth and critical engagement with the world.</li>
</ul>
</section>
<section id="william-playfairs-counterargument-the-policy-of-keeping-people-dumb" class="level3">
<h3 class="anchored" data-anchor-id="william-playfairs-counterargument-the-policy-of-keeping-people-dumb">William Playfair’s Counterargument: The Policy of Keeping People Dumb</h3>
<ul>
<li>William Playfair, Smith’s publisher, believed education for the masses threatened social order.
<ul>
<li>He argued that widespread knowledge would lead to social upheaval and economic instability.</li>
<li>He coined the phrase “a little knowledge is a dangerous thing,” advocating for limited education that would maintain the existing power structure.</li>
</ul></li>
<li>Playfair’s philosophy aligns with the ancient Chinese concept of “The Policy of Keeping People Dumb.”</li>
<li>Gatto suggests that modern leaders, while less overt, still employ this strategy to maintain control.</li>
</ul>
</section>
<section id="the-lincoln-elective-program-a-case-study-in-school-system-failure" class="level3">
<h3 class="anchored" data-anchor-id="the-lincoln-elective-program-a-case-study-in-school-system-failure">The Lincoln Elective Program: A Case Study in School System Failure</h3>
<ul>
<li>Gatto recounts his experience with an elective program at Lincoln Academy, a public junior high school in a wealthy, intellectually vibrant area of Manhattan.</li>
<li>Despite its location and resources, the school was plagued by violence, apathy, and a disconnect between the administration’s rhetoric and the reality of student experiences.</li>
<li>Gatto’s attempt to engage students in an elective on epic poetry was met with resistance and revealed a system where students lacked agency and genuine choice.</li>
</ul>
</section>
<section id="school-as-a-breeding-ground-for-contempt" class="level3">
<h3 class="anchored" data-anchor-id="school-as-a-breeding-ground-for-contempt">School as a Breeding Ground for Contempt</h3>
<ul>
<li>Gatto cites a 2005 Indiana University study on anti-smoking programs in schools.
<ul>
<li>The study found that all school-based programs, despite significant funding, failed.</li>
<li>The lead researcher, Dr.&nbsp;Sarah Wee, suggested that school environments inherently breed contempt in students, undermining any initiative.</li>
</ul></li>
<li>Gatto connects this finding to the story of Roger Gaufrin, the sole survivor of the Oradour-sur-Glane massacre in World War II.
<ul>
<li>Gaufrin’s contempt for school, which led him to disobey his teachers’ instructions to gather in the town square, saved his life.</li>
</ul></li>
</ul>
</section>
<section id="the-pervasive-irrelevance-of-school-curricula" class="level3">
<h3 class="anchored" data-anchor-id="the-pervasive-irrelevance-of-school-curricula">The Pervasive Irrelevance of School Curricula</h3>
<ul>
<li>Gatto argues that school curricula are often irrelevant to students’ lives and future needs.</li>
<li>He attributes this to the political nature of schooling, where powerful entities influence what is taught and omitted.</li>
<li>Examples of irrelevance:
<ul>
<li><strong>Lack of environmental education in Australia:</strong> Despite the country’s fragile ecosystem and the impact of human activities (e.g., sheep farming), schools avoid addressing these critical issues due to political pressure.</li>
<li><strong>Limited coverage of sensitive historical topics:</strong> Schools often gloss over or omit controversial aspects of history (e.g., religious wars, social inequality), depriving students of a complete understanding of the past.</li>
<li><strong>Emphasis on reading over speaking:</strong> Despite the importance of spoken language in everyday life, schools prioritize reading and writing, neglecting this crucial skill.</li>
<li><strong>Neglect of statistics in mathematics:</strong> While statistical reasoning is essential for navigating the modern world, school math curricula often focus on abstract concepts with limited practical application.</li>
</ul></li>
</ul>
</section>
<section id="the-illusion-of-choice-and-the-suppression-of-critical-thought" class="level3">
<h3 class="anchored" data-anchor-id="the-illusion-of-choice-and-the-suppression-of-critical-thought">The Illusion of Choice and the Suppression of Critical Thought</h3>
<ul>
<li>Gatto uses the example of evolution to illustrate how schools present biased perspectives as absolute truth.
<ul>
<li>He contrasts the theories of Charles Darwin (survival of the fittest) and Alfred Russel Wallace (adaptation and cooperation):
<ul>
<li><strong>Darwin’s theory:</strong>
<ul>
<li>Aligned with the prevailing social and political ideology of 19th-century Britain, justifying imperialism, social Darwinism, and eugenics.</li>
<li>Gained prominence due to Darwin’s social standing and connections.</li>
</ul></li>
<li><strong>Wallace’s theory:</strong>
<ul>
<li>Challenged the status quo by advocating for social justice and cooperation.</li>
<li>Largely ignored or dismissed due to Wallace’s lower social class and radical views.</li>
</ul></li>
</ul></li>
</ul></li>
<li>Gatto argues that schools omit Wallace’s perspective to maintain a specific narrative that supports existing power structures.</li>
</ul>
</section>
<section id="the-control-of-information-from-explosives-to-education" class="level3">
<h3 class="anchored" data-anchor-id="the-control-of-information-from-explosives-to-education">The Control of Information: From Explosives to Education</h3>
<ul>
<li>Gatto highlights the historical shift in access to information, using explosives as an example:
<ul>
<li>In the early 20th century, instructions for making explosives were readily available, reflecting a time when self-reliance and the ability to defend oneself were valued.</li>
<li>Today, such information is heavily restricted, reflecting a shift towards greater government control and a distrust of citizens’ ability to handle powerful knowledge.</li>
</ul></li>
<li>Gatto argues that this control extends to education, where schools limit access to information that could challenge the status quo or empower individuals to think critically about the world around them.</li>
</ul>
</section>
<section id="school-as-a-tool-for-creating-physical-and-psychological-ugliness" class="level3">
<h3 class="anchored" data-anchor-id="school-as-a-tool-for-creating-physical-and-psychological-ugliness">School as a Tool for Creating Physical and Psychological Ugliness</h3>
<ul>
<li>Gatto contends that school contributes to physical and psychological ugliness in students.
<ul>
<li>He argues that the enforced immobility, stress, and unhealthy diets prevalent in schools lead to obesity, low vitality, and a lack of grace.</li>
</ul></li>
<li>He highlights the hypocrisy of a system that promotes physical education while simultaneously fostering environments detrimental to physical well-being.</li>
<li>Gatto connects this to the unspoken bias towards physical appearance in elite college admissions:
<ul>
<li>Universities prioritize attractive, athletic candidates, recognizing the advantages these qualities offer in life.</li>
<li>This preference is rarely acknowledged or discussed in high schools, perpetuating a system where students are judged not solely on their intellectual merits but also on superficial traits.</li>
</ul></li>
</ul>
</section>
<section id="the-enduring-relevance-of-learning-and-the-need-for-change" class="level3">
<h3 class="anchored" data-anchor-id="the-enduring-relevance-of-learning-and-the-need-for-change">The Enduring Relevance of Learning and the Need for Change</h3>
<ul>
<li>Gatto cites Langdon Winner’s book, <em>Autonomous Technology</em>, which argues that modern society is characterized by a reliance on technology that most people do not understand.
<ul>
<li>Winner compares this to a “fundamental bewilderment” similar to that of a newborn child.</li>
</ul></li>
<li>Gatto suggests that school, instead of equipping students to navigate this complexity, perpetuates a state of dependence and intellectual immaturity.</li>
<li>He argues that true learning happens despite school, not because of it, as the emphasis on winning overshadows genuine intellectual curiosity.</li>
<li>He cites Seymour Papert’s belief that learning can be as natural and enjoyable as a child learning to talk, suggesting that traditional schooling is an outdated model.</li>
<li>Gatto points to the rise of homeschooling and the increasing dropout rate as evidence of a growing dissatisfaction with the current system.</li>
</ul>
</section>
<section id="conclusion-reclaiming-education-and-empowering-individuals" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-reclaiming-education-and-empowering-individuals">Conclusion: Reclaiming Education and Empowering Individuals</h3>
<ul>
<li>Gatto argues that school, as it currently exists, functions as a tool for social control, limiting students’ potential and perpetuating a system of inequality.</li>
<li>He advocates for a shift towards true education that:
<ul>
<li>Prioritizes critical thinking, creativity, and self-directed learning.</li>
<li>Provides students with a complete and accurate understanding of the world, even when it challenges prevailing narratives.</li>
<li>Empowers individuals to question, explore, and reach their full potential.</li>
</ul></li>
</ul>
</section>
<section id="the-question-of-intent" class="level3">
<h3 class="anchored" data-anchor-id="the-question-of-intent">The Question of Intent</h3>
<ul>
<li>The irrelevance of school offerings raises questions about the underlying intent.</li>
<li><strong>Is it incompetence or a deliberate design?</strong>
<ul>
<li>Frontline educators (superintendents, principals) may genuinely be unsure but are constrained by the system.</li>
<li>However, the possibility of a darker intent at the policy level cannot be dismissed.</li>
</ul></li>
<li><strong>Social Engineering through Schooling:</strong>
<ul>
<li>Schooling benefits those in power, raising the possibility of its use for social engineering.</li>
<li>Evidence suggests this is indeed the case.</li>
</ul></li>
</ul>
</section>
<section id="walter-lippmanns-indictment-of-modern-education" class="level3">
<h3 class="anchored" data-anchor-id="walter-lippmanns-indictment-of-modern-education">Walter Lippmann’s Indictment of Modern Education</h3>
<ul>
<li><strong>Excerpt from a 1940 speech by Walter Lippmann to the Association for the Advancement of Science:</strong>
<ul>
<li><blockquote class="blockquote">
<p>“During the past 40 or 50 years, those who are responsible for education have progressively removed from the curriculum the Western culture which produced the modern democratic state. The schools and colleges have therefore been sending out into the world men who no longer understand the creative principle of the society in which they must live. Deprived of their cultural tradition, the newly educated Western men no longer possess in the form and substance of their own minds and spirits and ideas the premises, the rationale, the logic, the methods, the values of the deposited wisdom which are the genius of the development of Western civilization. The prevailing education is destined, if it continues, to destroy Western civilization and is in fact destroying it.”</p>
</blockquote></li>
</ul></li>
<li>Lippmann argues that modern education has stripped away Western culture, leaving graduates ill-equipped to understand or contribute to society.</li>
</ul>
</section>
<section id="carol-quigleys-tragedy-and-hope" class="level3">
<h3 class="anchored" data-anchor-id="carol-quigleys-tragedy-and-hope">Carol Quigley’s “Tragedy and Hope”</h3>
<ul>
<li><strong>Dr.&nbsp;Carol Quigley</strong>, Georgetown University scholar, explored the dismantling of Western culture in his 1966 book, <strong>“Tragedy and Hope: A History of the World in Our Time.”</strong></li>
<li><strong>Suppression of “Tragedy and Hope”:</strong>
<ul>
<li>The book was so revealing that its publisher destroyed the plates after the first printing and refused to reprint despite high demand.</li>
<li>Dr.&nbsp;Quigley was told the book met with public indifference.</li>
<li>Since then, numerous bootleg copies have circulated.</li>
<li><strong>Caution:</strong> Some recent printings may be altered; older versions are recommended.</li>
</ul></li>
<li><strong>Quigley’s Influence:</strong>
<ul>
<li>Quigley was President Bill Clinton’s tutor at Georgetown.</li>
<li>Clinton acknowledged Quigley in his acceptance speech for the Democratic Party presidential nomination.</li>
</ul></li>
</ul>
</section>
<section id="scientific-management-and-subordination-in-schooling" class="level3">
<h3 class="anchored" data-anchor-id="scientific-management-and-subordination-in-schooling">Scientific Management and Subordination in Schooling</h3>
<ul>
<li><strong>Scientific management</strong>, as championed by Frederick Taylor (<strong>“Principles of Scientific Management,”</strong> 1911), prioritizes <strong>subordination</strong> above all else.
<ul>
<li>This principle permeates various sectors: business, government, schooling, religion, social work, etc.</li>
</ul></li>
<li><strong>Hierarchy and Predictability:</strong>
<ul>
<li>Bureaucracies rely on hierarchy, where productivity is secondary to obedience.</li>
<li>Subordination ensures employees are confined to their roles, making them predictable and controllable.</li>
</ul></li>
<li><strong>Eliminating Independent Thinkers:</strong>
<ul>
<li>Educated individuals and those with strong principles pose a threat to scientific management.</li>
<li>They are capable of critical thought, questioning authority, and acting on their own moral compass.</li>
</ul></li>
<li><strong>The Ideal Hireling:</strong>
<ul>
<li>The ideal worker is unquestioningly obedient, enthusiastic, and eager to please.</li>
<li>This training begins in the first grade with the word “don’t.”</li>
</ul></li>
</ul>
</section>
<section id="the-dont-drill-limiting-childrens-potential" class="level3">
<h3 class="anchored" data-anchor-id="the-dont-drill-limiting-childrens-potential">The “Don’t” Drill: Limiting Children’s Potential</h3>
<ul>
<li>Primary school, instead of nurturing self-development, focuses on limitations.</li>
<li><strong>Examples of “don’ts” in school:</strong>
<ul>
<li>Don’t run, talk, climb trees, play rough.</li>
<li>Don’t talk without raising your hand, fidget, get out of your seat, stare out the window, take your shoes off.</li>
<li>Don’t eat or drink in class, laugh, take too long.</li>
<li>Don’t read ahead, go off the path, say “I’m bored.”</li>
<li>Don’t mix with older kids, complain, bring toys.</li>
</ul></li>
<li><strong>Implied “don’ts”:</strong>
<ul>
<li>Don’t have your own ideas, show initiative, be independent, make your own choices, take responsibility for your own learning.</li>
</ul></li>
<li><strong>Consequences of Constant Negativity:</strong>
<ul>
<li>The endless “don’ts” stifle creativity, curiosity, and a sense of agency.</li>
<li>They foster indifference, leading to escapism through negative outlets (violence, drugs, etc.).</li>
</ul></li>
</ul>
</section>
<section id="discouraging-direct-experience-a-school-trip-permission-form" class="level3">
<h3 class="anchored" data-anchor-id="discouraging-direct-experience-a-school-trip-permission-form">Discouraging Direct Experience: A School Trip Permission Form</h3>
<ul>
<li>A 2005 permission form from Queen Elizabeth Junior and Senior High School (Calgary, Canada) exemplifies how schools discourage direct experience.</li>
<li><strong>Exaggerated List of Potential Hazards:</strong>
<ul>
<li>The form lists numerous mundane risks associated with a museum trip (bus travel, weather, tripping hazards, etc.).</li>
</ul></li>
<li><strong>Creating Fear and Aversion to Risk:</strong>
<ul>
<li>This approach fosters a culture of fear and discourages parents and children from engaging in real-world experiences.</li>
</ul></li>
<li><strong>Implication:</strong> Children are better off confined within the controlled environment of school, where such perils are supposedly minimized.</li>
</ul>
</section>
<section id="collectivization-and-disconnection-in-education" class="level3">
<h3 class="anchored" data-anchor-id="collectivization-and-disconnection-in-education">Collectivization and Disconnection in Education</h3>
<ul>
<li><strong>Following the Prussian model (William Torrey Harris), schools prioritize collectivism over individuality.</strong></li>
<li><strong>Categorizing Children:</strong>
<ul>
<li>Children are treated as members of groups rather than unique individuals.</li>
<li>Examples: race, academic ability, socioeconomic status, etc.</li>
</ul></li>
<li><strong>The Lowest Common Denominator:</strong>
<ul>
<li>Collectivism leads to a focus on the average, neglecting the needs of individual students.</li>
<li>This results in a lowering of standards and a focus on the lowest common denominator.</li>
</ul></li>
<li><strong>Example: New York City Schools (2002-2008):</strong>
<ul>
<li>Increased spending and teacher hiring did not improve outcomes when standards were lowered.</li>
</ul></li>
</ul>
</section>
<section id="the-connected-mind-vs.-school-induced-disconnection" class="level3">
<h3 class="anchored" data-anchor-id="the-connected-mind-vs.-school-induced-disconnection">The Connected Mind vs.&nbsp;School-Induced Disconnection</h3>
<ul>
<li><strong>The Educated Mind:</strong>
<ul>
<li>A truly educated mind is connected to ideas, experiences, people, and itself.</li>
<li>It embraces diverse perspectives, engages in real-world experiences, and values self-knowledge.</li>
</ul></li>
<li><strong>School-Induced Disconnection:</strong>
<ul>
<li>Schools, however, prioritize disconnection:
<ul>
<li>Separation from families, traditions, communities, religions, peers, interests.</li>
<li>Disconnection from the Western intellectual tradition.</li>
<li>Limited opportunities for risk-taking and adventure.</li>
</ul></li>
<li>This leaves graduates ill-equipped for life’s complexities.</li>
</ul></li>
</ul>
</section>
<section id="the-talking-choo-choo-syndrome-artificial-extension-of-childhood" class="level3">
<h3 class="anchored" data-anchor-id="the-talking-choo-choo-syndrome-artificial-extension-of-childhood">The Talking Choo-Choo Syndrome: Artificial Extension of Childhood</h3>
<ul>
<li><strong>Gatto’s experience critiquing a private school curriculum:</strong>
<ul>
<li>While impressed with the school’s environment, two concerns arose:
<ol type="1">
<li>Students were not encouraged to participate in discussions about their own education.</li>
<li>The use of a simplified version of Homer’s “Odyssey” raised concerns about diluting challenging material.</li>
</ol></li>
</ul></li>
<li><strong>The Talking Choo-Choo Analogy:</strong>
<ul>
<li>A talking choo-choo in a workbook symbolizes the trend of simplifying and infantilizing education.</li>
<li>This “German disease” artificially extends childhood and undermines intellectual development.</li>
</ul></li>
<li><strong>Perpetuating Childishness:</strong>
<ul>
<li>This approach creates a dependence on simplified information and a fear of complex ideas.</li>
<li>It fosters a culture of instant gratification and a lack of critical thinking.</li>
</ul></li>
<li><strong>Examples of the Talking Choo-Choo Syndrome:</strong>
<ul>
<li>Slasher films, pornography, fast food, tabloid news.</li>
<li>The glorification of youth and the reluctance to engage with adult complexities.</li>
</ul></li>
<li><strong>Historical Roots:</strong>
<ul>
<li>This strategy of control through infantilization can be traced back to:
<ul>
<li>John Calvin’s “Institutes” (1535)</li>
<li>Baruch Spinoza’s “Tractate” (1670)</li>
<li>Johann Gottlieb Fichte’s educational reforms in 19th-century Prussia.</li>
</ul></li>
</ul></li>
<li><strong>The Welfare State and Infantilization:</strong>
<ul>
<li>The welfare state, while seemingly benevolent, can perpetuate dependence and discourage self-reliance.</li>
</ul></li>
</ul>
</section>
<section id="beatrix-potter-a-counterpoint-to-talking-choo-choo-education" class="level3">
<h3 class="anchored" data-anchor-id="beatrix-potter-a-counterpoint-to-talking-choo-choo-education">Beatrix Potter: A Counterpoint to Talking Choo-Choo Education</h3>
<ul>
<li><strong>Beatrix Potter’s Children’s Stories:</strong>
<ul>
<li>Potter’s stories, though featuring animals, do not shy away from darkness, violence, and death.</li>
<li>This reflects the realities of life and challenges children to confront difficult subjects.</li>
</ul></li>
<li><strong>Embracing Complexity:</strong>
<ul>
<li>Children are drawn to Potter’s work because it acknowledges the complexity of the world, unlike sanitized, “talking choo-choo” narratives.</li>
</ul></li>
<li><strong>Potter’s Educational Philosophy:</strong>
<ul>
<li>Potter believed in exposing children to real-world experiences and encouraging their intellectual curiosity.</li>
<li>She rejected the artificial extension of childhood and the dumbing down of education.</li>
</ul></li>
</ul>
</section>
<section id="alina-del-don-detaching-the-training-wheels-at-age-three" class="level3">
<h3 class="anchored" data-anchor-id="alina-del-don-detaching-the-training-wheels-at-age-three">Alina Del Don: Detaching the Training Wheels at Age Three</h3>
<ul>
<li><strong>Alina Del Don</strong>, a basketball prodigy, displayed remarkable independence at a young age.</li>
<li><strong>Detaching the Training Wheels:</strong>
<ul>
<li>At three years old, she independently removed the training wheels from her bicycle.</li>
<li>This act symbolizes a rejection of limitations and a willingness to embrace challenges.</li>
</ul></li>
<li><strong>Implications for Education:</strong>
<ul>
<li>Del Don’s example highlights the importance of fostering self-reliance and encouraging children to push their boundaries.</li>
</ul></li>
</ul>
</section>
<section id="abandoning-the-illusion-of-extended-childhood" class="level3">
<h3 class="anchored" data-anchor-id="abandoning-the-illusion-of-extended-childhood">Abandoning the Illusion of Extended Childhood</h3>
<ul>
<li><strong>Treat Children as Capable Individuals:</strong>
<ul>
<li>Parents should view their children as capable individuals rather than perpetually dependent “kids.”</li>
<li>This means:
<ul>
<li>Involving them in age-appropriate discussions about family finances, responsibilities, and decision-making.</li>
<li>Encouraging independence and self-sufficiency.</li>
<li>Providing opportunities for real-world experiences and risk-taking.</li>
</ul></li>
</ul></li>
<li><strong>Rejecting Adolescence as a Social Construct:</strong>
<ul>
<li>The concept of “adolescence” is a relatively recent invention that artificially prolongs childhood.</li>
<li>Young people are capable of much more than society gives them credit for.</li>
</ul></li>
</ul>
</section>
<section id="john-latsis-success-without-formal-education" class="level3">
<h3 class="anchored" data-anchor-id="john-latsis-success-without-formal-education">John Latsis: Success Without Formal Education</h3>
<ul>
<li><strong>John Latsis</strong>, a self-made billionaire, achieved extraordinary success without formal education.</li>
<li><strong>From Laborer to Shipping Tycoon:</strong>
<ul>
<li>He started working at age 12, eventually becoming a shipping magnate through hard work, determination, and a keen business sense.</li>
</ul></li>
<li><strong>A Bygone Era:</strong>
<ul>
<li>Latsis’ story, once common, is now rare as schools emphasize specialized employment over entrepreneurialism.</li>
</ul></li>
</ul>
</section>
<section id="tanya-eby-and-george-meehan-triumphs-of-the-unschooled-spirit" class="level3">
<h3 class="anchored" data-anchor-id="tanya-eby-and-george-meehan-triumphs-of-the-unschooled-spirit">Tanya Eby and George Meehan: Triumphs of the Unschooled Spirit</h3>
<ul>
<li><strong>Tanya Eby:</strong>
<ul>
<li>The first woman to circumnavigate the globe solo, overcoming challenges and teaching herself navigation along the way.</li>
<li>Her struggles in traditional schooling led her to seek alternative paths to learning and self-discovery.</li>
</ul></li>
<li><strong>George Meehan:</strong>
<ul>
<li>Completed the longest walk in human history (from Tierra del Fuego to Point Barrow, Alaska) with minimal resources and no formal education beyond the third grade.</li>
<li>His journey exemplifies the resilience, resourcefulness, and determination of the human spirit.</li>
</ul></li>
<li><strong>Lessons from Tanya and George:</strong>
<ul>
<li>Both individuals achieved extraordinary feats outside the confines of formal education.</li>
<li>Their stories challenge conventional notions of what is possible and highlight the importance of self-directed learning.</li>
</ul></li>
</ul>
</section>
<section id="the-cauldron-of-broken-time-the-fragmentation-of-attention" class="level3">
<h3 class="anchored" data-anchor-id="the-cauldron-of-broken-time-the-fragmentation-of-attention">The Cauldron of Broken Time: The Fragmentation of Attention</h3>
<ul>
<li><strong>The Importance of Uninterrupted Time:</strong>
<ul>
<li>Uninterrupted time is crucial for deep thinking, reflection, and the synthesis of information.</li>
</ul></li>
<li><strong>Schools as Interruption Factories:</strong>
<ul>
<li>The school environment is characterized by constant interruptions: bells, announcements, visitors, etc.</li>
</ul></li>
<li><strong>Consequences of Fragmented Attention:</strong>
<ul>
<li>This constant fragmentation hinders concentration, making it difficult for students (and teachers) to engage deeply with material.</li>
</ul></li>
<li><strong>Claire Wolfe’s Insight:</strong>
<ul>
<li>Writer Claire Wolfe emphasizes the importance of “uninterrupted waking time” for meaningful learning and intellectual exploration.</li>
</ul></li>
</ul>
</section>
<section id="conclusion-1" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-1">Conclusion</h3>
<ul>
<li>The current education system, with its emphasis on subordination, disconnection, and the artificial extension of childhood, hinders true learning and personal growth.</li>
<li>It is imperative to challenge these harmful practices and create alternative paths to education that empower individuals to reach their full potential.</li>
</ul>
</section>
</section>
<section id="chapter-8-what-is-education" class="level2">
<h2 class="anchored" data-anchor-id="chapter-8-what-is-education">Chapter 8: What is Education?</h2>
<section id="salters-perspective-europe-as-an-unfathomable-classroom" class="level3">
<h3 class="anchored" data-anchor-id="salters-perspective-europe-as-an-unfathomable-classroom">Salter’s Perspective: Europe as an Unfathomable Classroom</h3>
<ul>
<li><strong>James Salter</strong>, a travel writer, admired Europe and its unique ability to answer Kant’s questions.</li>
<li>Salter believed Europe provided <strong>education</strong>:
<ul>
<li><strong>Not traditional school lessons</strong>, but a deeper understanding of life.</li>
<li><strong>A guide on:</strong>
<ul>
<li><strong>How to endure.</strong></li>
<li><strong>How to appreciate:</strong>
<ul>
<li>Leisure</li>
<li>Food</li>
<li>Love</li>
<li>Conversation</li>
<li>Nakedness</li>
<li>Architecture</li>
<li>Streets</li>
</ul></li>
</ul></li>
<li><strong>A new way of thinking, fresh and insightful.</strong></li>
</ul></li>
<li><strong>Europe’s Impact:</strong>
<ul>
<li><strong>History’s Shadow:</strong> Being surrounded by Europe’s rich history makes one aware of their small place in time.</li>
<li><strong>Knowing nothing is equivalent to having done nothing.</strong></li>
<li><strong>Self-obsession is like “worshipping a dust moat.”</strong></li>
<li><strong>Europe is an “immense and unfathomable classroom,” beyond any catalog or description.</strong></li>
</ul></li>
<li><strong>Salter’s Comparison</strong>: Salter contrasts the vastness of European education with the limitations of traditional schooling.</li>
<li><strong>Challenge to the Reader:</strong> Look at America as Salter did Europe. Did your schooling teach you how we arrived at our current state?</li>
</ul>
</section>
<section id="gattos-testimony-a-scathing-critique-of-the-school-system" class="level3">
<h3 class="anchored" data-anchor-id="gattos-testimony-a-scathing-critique-of-the-school-system">Gatto’s Testimony: A Scathing Critique of the School System</h3>
<ul>
<li><strong>Date:</strong> October 23, 1991</li>
<li><strong>Occasion:</strong> Testimony before the U.S. Senate Committee on Labor and Human Relations</li>
<li><strong>Topic:</strong> The future of schools in the year 2000</li>
<li><strong>Gatto’s Pessimistic View:</strong>
<ul>
<li><strong>Schools in 2000 will likely mirror those of 1990 and 1890.</strong></li>
<li><strong>Schools have resisted meaningful change for over a century.</strong></li>
<li><strong>The current system is deeply flawed.</strong></li>
</ul></li>
</ul>
<section id="a-historical-perspective-1790-vs.-today" class="level4">
<h4 class="anchored" data-anchor-id="a-historical-perspective-1790-vs.-today">A Historical Perspective: 1790 vs.&nbsp;Today</h4>
<ul>
<li><strong>1790:</strong>
<ul>
<li><strong>Education was readily attainable in America.</strong></li>
<li><strong>Schooling was:</strong>
<ul>
<li>Voluntary</li>
<li>Short in duration</li>
<li>Did not monopolize a child’s time</li>
<li>Did not burden families</li>
<li>Did not instill servile habits in the young</li>
<li>Did not indoctrinate with pre-determined thoughts</li>
</ul></li>
<li>Fewer people claiming to provide education resulted in greater freedom to learn.</li>
</ul></li>
<li><strong>Gatto’s Example: In Massachusetts, literacy rates were higher when schooling was voluntary.</strong></li>
<li><strong>Today:</strong>
<ul>
<li>The possibility of obtaining a quality education is threatened by compulsory schooling.</li>
<li>Political roadblocks hinder change:
<ul>
<li>The current system financially benefits those in power.</li>
<li>Schools provide lucrative contracts and jobs, creating conflicts of interest for politicians.</li>
<li>Politicians are beholden to donors with vested interests in maintaining the status quo.</li>
</ul></li>
<li><strong>Gatto’s Assertion:</strong> Genuine change must come from individuals (parents, students, and teachers) who challenge the system.</li>
<li>Homeschooling is a prime example of this rebellion.</li>
<li>The system has had a century to prove itself and has failed.</li>
</ul></li>
</ul>
</section>
<section id="reimagining-education-a-call-for-fundamental-change" class="level4">
<h4 class="anchored" data-anchor-id="reimagining-education-a-call-for-fundamental-change">Reimagining Education: A Call for Fundamental Change</h4>
<ul>
<li><strong>Step 1: Define an Educated Person:</strong>
<ul>
<li>A nationwide debate is needed to establish a clear definition of what constitutes an educated person.</li>
<li>Professional pedagogy has failed to provide a concrete definition beyond vague generalizations.</li>
<li>A shared understanding of educational goals is crucial for meaningful reform.</li>
</ul></li>
<li><strong>Exposing the Fallacy of Standardized Testing:</strong>
<ul>
<li><strong>Current educational emphasis on standardized test scores is misguided.</strong></li>
<li><strong>High test scores do not necessarily translate to real-world competence or success.</strong></li>
<li><strong>Example:</strong>** Many successful individuals (including U.S. presidents and corporate executives) have achieved success despite mediocre test scores.</li>
<li><strong>Inconsistency:</strong> While consumers demand performance data in other areas (e.g., horse racing), they are denied this information when it comes to educators.</li>
<li><strong>Distinction:</strong> High standards are not synonymous with standardized testing.</li>
<li><strong>Newspeak Manipulation:</strong> The public has been conditioned to equate the two.</li>
<li><strong>Gatto’s Proposal:</strong> Schools should guarantee the development of valuable human competencies or lose their power to enforce attendance.</li>
</ul></li>
</ul>
</section>
<section id="gattos-definition-of-an-educated-person-key-characteristics" class="level4">
<h4 class="anchored" data-anchor-id="gattos-definition-of-an-educated-person-key-characteristics">Gatto’s Definition of an Educated Person: Key Characteristics</h4>
<ul>
<li><strong>Time Management:</strong> Educated individuals utilize time effectively and find solace in solitude.</li>
<li><strong>Relationships:</strong> They form meaningful connections due to their understanding of relationship dynamics.</li>
<li><strong>Mortality:</strong> They possess a deep understanding and acceptance of their own mortality, learning and growing from each stage of life.</li>
<li><strong>Values:</strong> They develop a strong personal value system, critically evaluating external influences.</li>
<li><strong>Cultural Awareness:</strong> They are knowledgeable about their own culture and the values of other cultures.</li>
<li><strong>Creativity:</strong> They possess the power to generate new ideas and experiences.</li>
<li><strong>Truth Seekers:</strong> They discover truth independently through critical thinking and evidence, rather than blindly accepting the opinions of others.</li>
<li><strong>Empathy and Service:</strong> They are attuned to the needs of others and find fulfillment in meeting those needs.</li>
<li><strong>Financial Independence:</strong> While capable of earning a living, they do not rely solely on material wealth for happiness.</li>
<li><strong>Balance:</strong> They embrace variety and seek new experiences while recognizing the importance of a stable home and responsibilities.</li>
</ul>
</section>
<section id="a-curriculum-for-true-education-essential-life-themes" class="level4">
<h4 class="anchored" data-anchor-id="a-curriculum-for-true-education-essential-life-themes">A Curriculum for True Education: Essential Life Themes</h4>
<ol type="1">
<li><strong>Birth and Self-Discovery:</strong>
<ul>
<li>Understanding one’s origins, family history, and cultural influences is crucial.</li>
<li><strong>Key Questions:</strong>
<ul>
<li>“Who am I?”</li>
<li>“What are my limits and possibilities?”</li>
<li>“What motivates those around me?”</li>
</ul></li>
</ul></li>
<li><strong>Exploration of the Physical World:</strong>
<ul>
<li>Direct, hands-on experience is essential.</li>
<li><strong>Compulsory schooling hinders this exploration by confining children and relying on abstract concepts.</strong></li>
<li><strong>Missed opportunities for exploration have lasting consequences.</strong></li>
</ul></li>
<li><strong>The Art of Human Connection:</strong>
<ul>
<li>Experiencing various forms of relationships firsthand is vital:
<ul>
<li>Family</li>
<li>Friendships</li>
<li>Companionships</li>
<li>Love</li>
<li>Hate</li>
<li>Community</li>
<li>Networking</li>
</ul></li>
<li><strong>Each form has its own benefits and risks.</strong></li>
<li><strong>Lack of experience leads to emotional stunting.</strong></li>
<li><strong>Criticism of School Socialization:</strong> Schools often confine children to networks, the weakest form of human connection.</li>
</ul></li>
<li><strong>Vocational Exploration:</strong>
<ul>
<li><strong>Central Question:</strong> How can one contribute to society while earning a living?</li>
</ul></li>
<li><strong>The Transition to Adulthood:</strong>
<ul>
<li><strong>Key Questions:</strong>
<ul>
<li>What differentiates an adult from a child?</li>
<li>What responsibilities accompany adulthood?</li>
<li>What leads to maturity and independence?</li>
</ul></li>
</ul></li>
<li><strong>Confronting Mortality:</strong>
<ul>
<li><strong>Death is the final stage in the cycle of life.</strong></li>
<li><strong>Awareness of death gives meaning to life.</strong></li>
<li><strong>Finite time makes choices meaningful.</strong></li>
<li><strong>Legacy:</strong> It is our duty to leave the world as good or better than we found it.</li>
</ul></li>
</ol>
</section>
<section id="dismantling-the-cathedral-of-education" class="level4">
<h4 class="anchored" data-anchor-id="dismantling-the-cathedral-of-education">Dismantling the “Cathedral” of Education</h4>
<ul>
<li><strong>To truly educate, schools must:</strong>
<ul>
<li><strong>Abandon:</strong>
<ul>
<li>The “walled compound” mentality</li>
<li>Reliance on a “priesthood” of certified teachers who prioritize obedience and political correctness</li>
<li>Dependence on the state and its economic interests</li>
</ul></li>
<li><strong>Embrace:</strong>
<ul>
<li>Decentralization</li>
<li>Diversity of thought</li>
<li>Individual empowerment</li>
</ul></li>
</ul></li>
<li><strong>Short-Term Gain vs.&nbsp;Long-Term Loss:</strong> While the current system benefits those in control, it ultimately weakens society, hindering adaptability and progress.</li>
<li><strong>Historical Parallel:</strong> The Soviet Union’s collapse serves as a cautionary tale.</li>
</ul>
</section>
<section id="a-vision-for-a-new-school-decentralized-flexible-and-empowering" class="level4">
<h4 class="anchored" data-anchor-id="a-vision-for-a-new-school-decentralized-flexible-and-empowering">A Vision for a New School: Decentralized, Flexible, and Empowering</h4>
<ul>
<li><strong>Breaking the Monopoly:</strong> Ending compulsory schooling would disrupt the current educational monopoly and:
<ul>
<li>Reduce corruption</li>
<li>Encourage innovation</li>
<li>Empower parents and students</li>
<li>Foster a free market of learning opportunities</li>
</ul></li>
<li><strong>Key Features:</strong>
<ul>
<li><strong>Location:</strong> Learning can take place anywhere, not just within traditional school walls.</li>
<li><strong>Decertified Teaching:</strong> Anyone with valuable skills can share their knowledge, regardless of formal credentials.</li>
<li><strong>Financial Control:</strong> Taxpayer money would be redirected to families, allowing them to choose educational services.</li>
<li><strong>Flexible Learning:</strong>
<ul>
<li>Time commitments</li>
<li>Learning spaces</li>
<li>Study options</li>
<li>Sequencing</li>
</ul></li>
<li><strong>Elimination of Standardized Testing:</strong>
<ul>
<li><strong>Focus on Authentic Assessment:</strong> Replace standardized tests with more meaningful measures of learning.</li>
<li><strong>Reasons for Elimination:</strong>
<ul>
<li>Tests do not accurately reflect real-world skills or character.</li>
<li>They stifle imagination and creativity.</li>
<li>They perpetuate dishonesty.</li>
<li>They are a relic of authoritarian cultures.</li>
<li>They create artificial problems and waste resources.</li>
</ul></li>
</ul></li>
</ul></li>
<li><strong>Addressing the Reading “Problem”:</strong>
<ul>
<li><strong>Natural Learning:</strong> Learning to read is a natural process that typically requires around 30 hours under the right conditions.</li>
<li><strong>Obstacles to Literacy:</strong> The current system, with its emphasis on:
<ul>
<li>Age-segregated classrooms</li>
<li>Forced instruction</li>
<li>Pressure and ranking</li>
<li>Creates a negative association with reading, leading to indifference or aversion.</li>
</ul></li>
</ul></li>
<li><strong>Solution:</strong> A more natural and individualized approach is needed.</li>
</ul>
</section>
<section id="embracing-the-power-of-informal-learning" class="level4">
<h4 class="anchored" data-anchor-id="embracing-the-power-of-informal-learning">Embracing the Power of Informal Learning</h4>
<ul>
<li><strong>The Information Age Paradox:</strong> Despite a lack of formal schooling, millions have learned to navigate the complexities of computers and technology.</li>
<li><strong>Real-World Learning:</strong> Skills like computer literacy and driving are often acquired through self-directed learning, experimentation, and observation.</li>
<li><strong>Lessons from Driving:</strong>
<ul>
<li>Driving involves complex physical and cognitive skills yet is successfully learned by most without formal schooling.</li>
<li>Drivers are not graded; they either pass or fail a competency-based test.</li>
<li>This system highlights trust in individual competence over formal credentials.</li>
</ul></li>
<li><strong>The Illusion of Control:</strong> Schools often take credit for advancements that occur independently.</li>
</ul>
</section>
<section id="conclusion-a-call-to-action" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-a-call-to-action">Conclusion: A Call to Action</h4>
<ul>
<li><strong>The Path Forward:</strong>
<ul>
<li>Recognize the limitations of the current system.</li>
<li>Embrace a more decentralized and individualized approach to education.</li>
<li>Empower parents and students as active participants in the learning process.</li>
</ul></li>
<li><strong>A Call to Leadership:</strong> Gatto challenges Senators to demonstrate courage by challenging the status quo and advocating for meaningful reform.</li>
<li><strong>The Power of “Productive Sabotage”:</strong> Parents, students, and even teachers must work to dismantle the system from within, like “noble termites.”</li>
</ul>
</section>
</section>
<section id="a-grandfathers-wish-education-for-christina" class="level3">
<h3 class="anchored" data-anchor-id="a-grandfathers-wish-education-for-christina">A Grandfather’s Wish: Education for Christina</h3>
<ul>
<li><strong>Education should foster individuality and strength of character.</strong></li>
<li><strong>It should equip individuals to face challenges and embrace their unique paths.</strong></li>
<li><strong>It should provide guiding principles and the courage to confront adversity.</strong></li>
<li><strong>It should foster a deep understanding of life, death, and what truly matters.</strong></li>
</ul>
</section>
</section>
<section id="chapter-9-a-letter-to-my-granddaughter-about-dartmouth" class="level2">
<h2 class="anchored" data-anchor-id="chapter-9-a-letter-to-my-granddaughter-about-dartmouth">Chapter 9: A Letter to My Granddaughter About Dartmouth</h2>
<section id="family-matters" class="level3">
<h3 class="anchored" data-anchor-id="family-matters">Family Matters</h3>
<ul>
<li>Gatto’s granddaughter, Christina, is a rebellious and accomplished individual.
<ul>
<li>Rode her bike on Fifth Avenue in defiance of a city ban.</li>
<li>Captain of a national champion debating team.</li>
<li>Legally changed her name from Gudrun to Christina.</li>
</ul></li>
<li>Gatto comes from a long line of “boat rockers” and contrarians.
<ul>
<li>His wife Janet’s family was outlawed by the British Crown.</li>
<li>His great-great-grandmother from Glenorchy wore a top hat, a symbol of unconventionality.</li>
<li>The outlaw Rob Roy considered Gatto’s wife’s clan to be his own.</li>
</ul></li>
<li>Gatto and his wife Janet were married in a Buddhist temple near Columbia University in New York City.
<ul>
<li>They chose this location because they were both unemployed, broke, and underage for a civil marriage.</li>
<li>The Buddhist temple offered free marriage ceremonies, unlike other religious institutions they approached.</li>
<li>Janet was pregnant with Gatto’s daughter (Christina’s mother) at the time of their marriage.</li>
</ul></li>
<li>Gatto recounts the struggles and triumphs of his ancestors:
<ul>
<li><strong>His grandmother:</strong> Fired from a job for attempting to organize a union.</li>
<li><strong>Gatto:</strong> Fired from a job on Madison Avenue for incompetence.</li>
<li><strong>His great-great-grandfather Giovanni (Italian side):</strong>
<ul>
<li>A Presbyterian, journalist, and Freemason, he faced persecution in early 20th century Italy.</li>
<li>Forced to flee Italy with his wife, Lucrezia, who lost her inheritance and title for marrying him.</li>
<li>Found success in Pittsburgh working for Mellon Bank but died young from an extravagant lifestyle.</li>
<li>Buried in an unmarked grave by Lucrezia for having a mistress.</li>
</ul></li>
<li><strong>His great-grandfather Harry Taylor Zimmer (German side):</strong>
<ul>
<li>Town printer and traveling circus owner in Monongahela, Pennsylvania.</li>
<li>A staunch Republican in a predominantly Democratic town.</li>
<li>Ran for mayor multiple times, using his printing press to launch scathing attacks on opponents.</li>
<li>Openly supported German victory during World War II, making Gatto’s childhood walks to school eventful.</li>
</ul></li>
</ul></li>
<li>Gatto highlights the protective presence of his uncle, Bud Zimmer:
<ul>
<li>The toughest man in town, Bud’s reputation shielded Gatto from bullies.</li>
<li>Bud served as a field officer in World War II, his unit featured in newsreels.</li>
<li>His wartime service earned him a management position at Rockwell’s plant, despite lacking a college degree.</li>
</ul></li>
</ul>
</section>
<section id="dartmouth-college" class="level3">
<h3 class="anchored" data-anchor-id="dartmouth-college">Dartmouth College</h3>
<ul>
<li>Gatto advises his granddaughter, Christina, to reconsider her pursuit of an Ivy League education at Dartmouth.
<ul>
<li>He believes that such institutions promote an illusion of social privilege and limit personal growth.</li>
</ul></li>
<li>He criticizes the modern education system:
<ul>
<li><strong>Promotes a hierarchical view of education:</strong> Elite colleges are falsely touted as the sole gateways to success.</li>
<li><strong>Instills a false sense of urgency:</strong> Students feel pressured to gain acceptance into prestigious colleges, leading to unhealthy competition and anxiety.</li>
<li><strong>Perpetuates social inequality:</strong> Gatto uses George Orwell’s <em>Animal Farm</em> analogy to criticize the elitist mindset prevalent in prestigious institutions.</li>
</ul></li>
<li>He challenges the notion that college guarantees success:
<ul>
<li>Financial success can be achieved through alternative paths.</li>
<li>True fulfillment comes from finding purpose and adding value to society.</li>
</ul></li>
<li>He argues that true education is a personal journey of self-discovery:
<ul>
<li>It’s about developing critical thinking skills and navigating the complexities of the world.</li>
</ul></li>
<li>He outlines eight essential elements of true learning:
<ol type="1">
<li><strong>Self-knowledge:</strong> Understanding one’s character, strengths, weaknesses, and tendencies.</li>
<li><strong>Observation:</strong> Cultivating sharp observational skills to gather accurate information.</li>
<li><strong>Feedback:</strong> Learning to receive and evaluate criticism effectively.</li>
<li><strong>Analysis:</strong> Developing the ability to break down complex problems into manageable components.</li>
<li><strong>Mirroring:</strong> Cultivating empathy and the ability to understand diverse perspectives.</li>
<li><strong>Expression:</strong> Mastering clear and effective communication in both written and spoken forms.</li>
<li><strong>Judgment:</strong> Developing the ability to discern truth from falsehood and make sound decisions.</li>
<li><strong>Adding Value:</strong> Contributing meaningfully to society and every interaction.</li>
</ol></li>
<li>Gatto emphasizes that true learning extends beyond the confines of formal education and requires active engagement with the world.</li>
</ul>
</section>
<section id="the-new-atlantis" class="level3">
<h3 class="anchored" data-anchor-id="the-new-atlantis">The New Atlantis</h3>
<ul>
<li>Gatto argues that the current education system, particularly in elite institutions like Dartmouth, is modeled after Francis Bacon’s <em>The New Atlantis</em>.</li>
<li>He outlines the core principles of Bacon’s vision:
<ul>
<li><strong>Utility over Reflection:</strong> Education should primarily focus on training a workforce for the needs of corporations and government institutions.</li>
<li><strong>Social Control:</strong> Universities should function as instruments to maintain social order and stability.</li>
<li><strong>Surveillance and Control:</strong> Implement systems to monitor and regulate the behavior and aspirations of the masses.</li>
<li><strong>Managed Morality:</strong> Promote a culture of permissiveness in personal morals while emphasizing conformity in professional life.</li>
<li><strong>Co-option of Potential Leaders:</strong> Identify and absorb talented individuals from lower classes into the ruling structure to prevent dissent.</li>
</ul></li>
<li>Gatto argues that this system has led to several negative consequences:
<ul>
<li><strong>Social Unrest:</strong> A growing sense of disillusionment and distrust in leadership due to increasing inequality and lack of opportunity.</li>
<li><strong>Economic Inequality:</strong> The widening gap between the rich and the poor, fueled by corporate greed and the exploitation of workers.</li>
<li><strong>Contingent Labor:</strong> The rise of temporary and insecure employment, creating a precarious workforce without benefits or long-term security.</li>
<li><strong>Lean Production:</strong> The relentless pursuit of efficiency and profit maximization at the expense of worker well-being and job satisfaction.</li>
</ul></li>
<li>Gatto concludes by emphasizing that addressing these issues requires political action and a fundamental shift in societal values rather than relying solely on traditional education systems.
<ul>
<li>He urges his granddaughter to be an agent of change and fight for a more just and equitable society.</li>
</ul></li>
</ul>
</section>
</section>
<section id="chapter-10-incident-at-highland-high" class="level2">
<h2 class="anchored" data-anchor-id="chapter-10-incident-at-highland-high">Chapter 10: Incident at Highland High</h2>
<section id="the-illusion-of-education-and-the-reality-of-schooling" class="level3">
<h3 class="anchored" data-anchor-id="the-illusion-of-education-and-the-reality-of-schooling">The Illusion of Education and the Reality of Schooling</h3>
<ul>
<li>Gatto’s central argument is that <strong>schooling</strong>, as it exists, is not synonymous with <strong>education</strong>.</li>
<li>He urges readers to:
<ul>
<li><strong>Question their own schooling experiences:</strong> Examine the costs and compromises made in the name of education.</li>
<li><strong>See through the illusions schooling perpetuates:</strong> Recognize the disconnect between the promises of schooling and its actual outcomes.</li>
<li><strong>Understand the lasting influence of schooling:</strong> Acknowledge how its structures and ideologies continue to shape our thinking long after formal education ends.</li>
</ul></li>
</ul>
</section>
<section id="schoolings-imperial-ambition" class="level3">
<h3 class="anchored" data-anchor-id="schoolings-imperial-ambition">Schooling’s Imperial Ambition</h3>
<ul>
<li><strong>Schooling’s Expansion:</strong>
<ul>
<li>Originating as a limited endeavor in colonial America (2 hours/day, a few months/year), schooling has steadily expanded its reach.</li>
<li>It now encroaches upon personal time and resists boundaries like summer vacation.</li>
<li>The concept of “<strong>lifelong learning</strong>” often translates to “lifelong schooling,” promoting the idea that more schooling is always the solution.</li>
</ul></li>
<li><strong>Schooling as a False Solution:</strong>
<ul>
<li>Gatto argues that societal issues (incoherence, aimlessness, incompetence, class hatred) often attributed to a lack of schooling are, in fact, exacerbated by it.</li>
<li>More schooling, he contends, cannot fix problems created by the institution itself.</li>
</ul></li>
<li><strong>Schooling’s Assault on Alternative Forms of Development:</strong>
<ul>
<li>Schooling undermines and seeks to supplant other vital sources of growth and learning:
<ul>
<li><strong>Family:</strong> Dismissed as a “retrograde institution” to be replaced by idealized, expert-designed models.</li>
<li><strong>Church:</strong> Seen as a threat to Gattoity of expert opinion and therefore targeted for removal.</li>
<li><strong>Tradition, Ethnic Loyalty, Loyalty to Place:</strong> Deemed obstacles to progress and slated for eradication.</li>
</ul></li>
<li>This systematic dismantling of alternative influences, Gatto argues, cripples individual sovereignty, erodes ideals of liberty, and disrupts the natural transmission of knowledge and values across generations.</li>
</ul></li>
</ul>
</section>
<section id="schooling-vs.-education-key-distinctions" class="level3">
<h3 class="anchored" data-anchor-id="schooling-vs.-education-key-distinctions">Schooling vs.&nbsp;Education: Key Distinctions</h3>
<ul>
<li>Gatto presents several key distinctions between schooling and education:
<ul>
<li><strong>Source of Organization:</strong>
<ul>
<li><strong>Schooling:</strong> Controlled externally through command and control structures.</li>
<li><strong>Education:</strong> Self-directed and driven by internal motivation.</li>
</ul></li>
<li><strong>Connection to Learning Sources:</strong>
<ul>
<li><strong>Schooling:</strong> Isolates students from diverse learning opportunities to maintain administrative efficiency.</li>
<li><strong>Education:</strong> Actively seeks out a rich network of connections – random, intentional, varied, and often unexpected – recognizing that resourcefulness, self-sufficiency, and innovation thrive on diverse inputs.</li>
</ul></li>
<li><strong>Role of Feedback:</strong>
<ul>
<li><strong>Schooling:</strong> Relies on external rules and evaluations, limiting opportunities for independent judgment and self-correction.</li>
<li><strong>Education:</strong> Emphasizes the crucial role of natural feedback loops. Students learn to attend to these loops, not to conform to external dictates, fostering self-reliance and personalized learning pathways.</li>
</ul></li>
<li><strong>Focus of Learning:</strong>
<ul>
<li><strong>Schooling:</strong> Prioritizes subject knowledge and specialization, aiming to produce efficient clerks for predefined roles within existing systems.</li>
<li><strong>Education:</strong> Values broad contexts and connections between disciplines, recognizing that true understanding and innovation often emerge from cross-fertilization of ideas.
<ul>
<li>Example: John Cancius, a non-specialist and college dropout, developed a breakthrough cancer treatment precisely because he wasn’t confined by specialized knowledge.</li>
</ul></li>
</ul></li>
<li><strong>Approach to Knowledge:</strong>
<ul>
<li><strong>Schooling:</strong> Emphasizes memorization and acceptance of established truths, discouraging critical thinking.</li>
<li><strong>Education:</strong> Cultivates a state of internal debate and questioning, constantly seeking to challenge and refine existing knowledge.
<ul>
<li>This echoes Schumpeter’s concept of “<strong>creative destruction</strong>” – the driving force of capitalism – where questioning established norms and seeking better alternatives fuels progress.</li>
</ul></li>
</ul></li>
<li><strong>Impact on Well-being:</strong>
<ul>
<li>Gatto cites the <strong>International Happiness Survey</strong>, which consistently identifies three key factors for a happy life:
<ul>
<li>Good relationships.</li>
<li>Good health.</li>
<li>Satisfying work.</li>
</ul></li>
<li><strong>Schooling, however, often undermines these factors:</strong>
<ul>
<li>It promotes unhealthy lifestyles and offers little support for developing strong relationships.</li>
<li>Tracking systems and segregation by background exacerbate class prejudice, hindering relationships across difference.</li>
<li>The work imposed rarely connects with the genuine interests and passions of young people.</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="a-dark-force-at-work" class="level3">
<h3 class="anchored" data-anchor-id="a-dark-force-at-work">A Dark Force at Work?</h3>
<ul>
<li>Gatto acknowledges the potential for criticism: Are his views exaggerated? Is schooling not an essential institution with flaws that can be rationally addressed?</li>
<li>He counters by suggesting the presence of a “<strong>dark force</strong>” – a deliberate, hidden agenda operating within the institution of schooling.</li>
<li>He argues that without exposing and confronting this hidden force, any talk of “school reform” is futile.</li>
<li>To support his claim, he presents three “hair-raising school stories” designed to illustrate the seemingly irrational and even sinister nature of schooling’s influence:
<ul>
<li>The incidents described are meant to raise questions about the true motives and mechanisms of power at play within the education system.</li>
</ul></li>
</ul>
</section>
<section id="incident-at-nuremberg-homeschooling-as-a-threat" class="level3">
<h3 class="anchored" data-anchor-id="incident-at-nuremberg-homeschooling-as-a-threat">Incident at Nuremberg: Homeschooling as a Threat</h3>
<ul>
<li><strong>Date:</strong> January 29, 2008</li>
<li><strong>Location:</strong> Nuremberg, Germany</li>
<li><strong>Victim:</strong> Melissa Busekros, a 16-year-old girl</li>
<li><strong>Event:</strong>
<ul>
<li>Melissa is forcibly removed from her home by 15 police officers and city officials.</li>
<li>Her “crime” is homeschooling, a practice outlawed in Germany since 1937 under the Nazi regime.</li>
</ul></li>
<li><strong>Author’s Response:</strong>
<ul>
<li>He expresses his disgust by writing to the German ambassador in Washington, highlighting the disturbing parallels between contemporary Germany and its Nazi past.</li>
</ul></li>
<li><strong>Details of the Incident:</strong>
<ul>
<li>Despite no history of behavioral issues, Melissa is subjected to a 240-minute psychiatric interrogation focused solely on her reasons for homeschooling.</li>
<li>The interrogation concludes that Melissa suffers from “school phobia,” a dubious diagnosis used to justify the forceful intervention.</li>
<li>German authorities cite Melissa’s “delayed development” by one year as evidence of harm, despite lacking any internationally recognized standard for such assessment.</li>
<li>The court order authorizes the forceful removal of Melissa, deeming it necessary to protect her from her parents’ “illegal conduct” of homeschooling.</li>
<li>The German Education Authority vows to “bring convictions of the family into line,” employing language reminiscent of totalitarian regimes.</li>
</ul></li>
<li><strong>Author’s Analysis:</strong>
<ul>
<li>He questions the reasoning, philosophy, and values driving such extreme measures against a peaceful family exercising their right to choose an alternative educational path.</li>
<li>He draws parallels between this incident and Germany’s dark history of persecution, from witch hunts to the Holocaust, suggesting a dangerous pattern of suppressing individual liberty and enforcing conformity through state power.</li>
<li>He criticizes the German education system’s rigid adherence to rules and its stifling of individual initiative, citing the ThyssenKrupp steel plant debacle as evidence of its negative economic consequences.</li>
</ul></li>
<li><strong>Outcome:</strong>
<ul>
<li>Gatto’s letter to the German ambassador receives no reply.</li>
<li>The incident highlights the extreme measures employed to enforce compulsory schooling and the silencing of dissenting voices.</li>
</ul></li>
</ul>
</section>
<section id="incident-at-highland-high-suppressing-inconvenient-truths" class="level3">
<h3 class="anchored" data-anchor-id="incident-at-highland-high-suppressing-inconvenient-truths">Incident at Highland High: Suppressing Inconvenient Truths</h3>
<ul>
<li><strong>Date:</strong> March 25, 2004</li>
<li><strong>Location:</strong> Highland High School, Rockland County, New York</li>
<li><strong>Event:</strong>
<ul>
<li>Gatto is invited to speak at Highland High by school board member John Jankowicz, who is concerned about the negative effects of the school’s rigid, test-driven approach to education.</li>
</ul></li>
<li><strong>Gatto’s Observations:</strong>
<ul>
<li>He notes the affluence of the school and the students’ sense of entitlement, masking a deeper lack of intellectual curiosity and critical thinking skills.</li>
<li>He recognizes the pervasive climate of fear and dishonesty surrounding college admissions, used as a tool to control student behavior.</li>
</ul></li>
<li><strong>Gatto’s Talk:</strong>
<ul>
<li>He decides to address the students’ anxieties by deconstructing the myths surrounding college admissions, using real-world examples to challenge their assumptions.</li>
<li>He presents evidence that many successful individuals, including industry leaders, writers, and even politicians, did not conform to the traditional model of academic success.</li>
<li>He cites examples of college dropouts who have achieved extraordinary things, challenging the notion that elite college acceptance is the only path to a meaningful life.</li>
<li>He encourages students to question Gattoity of school officials and to demand transparency regarding their own educators’ academic records.</li>
<li>He shares information about the admission policies of prestigious universities, emphasizing that factors beyond grades and test scores, such as initiative, creativity, and real-world experience, are highly valued.</li>
<li>He presents Richard Branson’s entrepreneurial success as an example of a high school dropout who defied expectations and achieved extraordinary things.</li>
</ul></li>
<li><strong>Police Intervention:</strong>
<ul>
<li>In the midst of Gatto’s calm and factual presentation, a police detail suddenly enters the auditorium and orders everyone to leave.</li>
<li>The officer in charge uses a bullhorn to assert control, creating a deliberately intimidating atmosphere.</li>
</ul></li>
<li><strong>Aftermath:</strong>
<ul>
<li>Gatto learns that the superintendent, McCarthy, deemed the talk “inflammatory” and called the police to shut it down.</li>
<li>This extreme reaction, despite Gatto’s calm demeanor and factual content, suggests a deep-seated resistance to any challenge of the established schooling narrative.</li>
<li>Gatto’s scheduled evening talk for parents is also canceled, further demonstrating the school’s determination to suppress dissenting views.</li>
</ul></li>
<li><strong>Media Coverage and Silence:</strong>
<ul>
<li>The local newspaper, the Mid-Hudson Highland Post, publishes a sanitized account of the incident, omitting any mention of the police intervention.</li>
<li>The superintendent falsely claims that Gatto showed a “violent film,” further highlighting the school’s dishonest attempts to control the narrative.</li>
<li>Gatto’s subsequent attempts to gather perspectives from the superintendent, principal, parents’ association, and student newspaper are met with complete silence.</li>
</ul></li>
<li><strong>Analysis:</strong>
<ul>
<li>The incident at Highland High demonstrates the power of fear and control within the school system.</li>
<li>It shows how easily authorities can silence dissenting voices and suppress information that challenges the status quo.</li>
<li>The lack of transparency and accountability further reinforces the idea of a hidden agenda at work.</li>
</ul></li>
</ul>
</section>
<section id="incident-at-walden-crushing-local-control-and-common-sense" class="level3">
<h3 class="anchored" data-anchor-id="incident-at-walden-crushing-local-control-and-common-sense">Incident at Walden: Crushing Local Control and Common Sense</h3>
<ul>
<li><strong>Date:</strong> 1991</li>
<li><strong>Location:</strong> Walden, Vermont, a rural town with four historic one-room schoolhouses</li>
<li><strong>Event:</strong>
<ul>
<li>The state of Vermont threatens to close Walden’s beloved one-room schools, citing the cost of making them wheelchair accessible as prohibitive.</li>
<li>This is despite the schools’ strong academic performance, the community’s satisfaction, and the children’s evident well-being.</li>
<li>A plan is put forward to build a centralized concrete block school and bus students from up to 50 miles away.</li>
</ul></li>
<li><strong>Author’s Involvement:</strong>
<ul>
<li>He is invited to Walden to advocate for the preservation of the one-room schools.</li>
<li>He reviews the state’s proposal and finds the estimated costs for renovations to be grossly inflated.</li>
<li>He seeks expert testimony from a renowned architect familiar with construction costs in Vermont.</li>
</ul></li>
<li><strong>Expert Opinion and Fear:</strong>
<ul>
<li>The architect confirms that the state’s estimates are ten times higher than the actual cost, suggesting a deliberate attempt to mislead the community.</li>
<li>He reveals that the contract for the new school has likely already been promised to a specific firm, further highlighting the corruption at play.</li>
<li>However, the architect refuses to testify publicly, fearing professional repercussions from the state government.</li>
</ul></li>
<li><strong>Outcome:</strong>
<ul>
<li>Despite Gatto’s best efforts and the community’s desire to preserve their schools, the state’s repeated threats and the climate of fear prove too powerful.</li>
<li>Walden reluctantly approves the bond issue, goes into debt, and builds the centralized school, sacrificing their unique educational environment and sense of community control.</li>
</ul></li>
<li><strong>Analysis:</strong>
<ul>
<li>The Walden incident demonstrates how a powerful entity like the state government can exploit its authority and financial leverage to impose its will on a community.</li>
<li>It highlights the corrupt practices often used to justify decisions made behind closed doors, benefiting select interests at the expense of local needs and desires.</li>
<li>The architect’s fear of speaking out reveals the insidious reach of such systems and the potential for silencing dissent even within professional circles.</li>
</ul></li>
</ul>
</section>
<section id="conclusion-the-urgent-need-for-subversion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-the-urgent-need-for-subversion">Conclusion: The Urgent Need for Subversion</h3>
<ul>
<li>Gatto uses these three incidents to illustrate the pervasive and often hidden forces at play within the institution of schooling.</li>
<li>He argues that these forces prioritize control, conformity, and the maintenance of power over the genuine needs and well-being of students.</li>
<li>He concludes that true education requires a conscious effort to subvert the harmful aspects of schooling, to question its assumptions, and to seek out alternative paths to knowledge and personal fulfillment.</li>
<li>Gatto issues a call to action:
<ul>
<li>Recognize the dark side of schooling and its impact on individuals and society.</li>
<li>Actively resist its attempts to limit thinking, creativity, and individual potential.</li>
<li>Seek out alternative educational experiences that nurture curiosity, critical thinking, and a love of learning.</li>
</ul></li>
<li>Gatto believes that by understanding and challenging the hidden agendas of schooling, individuals can reclaim their right to a meaningful and empowering education. He leaves the reader with the responsibility to carry on this fight:
<ul>
<li><blockquote class="blockquote">
<p>“But you’ll have to convince yourself of the substance of my allegation, that some sort of dark matter, some powerful but invisible force is at work in schooling. If you are to become strong enough to defend yourself and your family, I can’t do the work for you. You can’t memorize my conclusions.”</p>
</blockquote></li>
<li><blockquote class="blockquote">
<p>“Because you choose not to see the dark world school represents, because you only pay attention to its stupidities, it gets worse all the time.”</p>
</blockquote></li>
<li><blockquote class="blockquote">
<p>“Do I mean to imply that Highland School is the worst school in America? Hardly. For all I know, it is one of the best. Certainly it’s one of the richest. What you need to ask yourself is how many school districts from coast to coast find truth unbearable because it gets in the way of their real mission.”</p>
</blockquote></li>
<li><blockquote class="blockquote">
<p>“Unless the ends of the operation are put on public trial, and its sexual relationship with economics and social management exposed to the light and ended, each reform effort will only be another illusion, another room added to the National House of Mirrors.”</p>
</blockquote></li>
<li><blockquote class="blockquote">
<p>“Our government thinks some companies are too big to be allowed to fail, and that schooling is too important to allow education to get in its way.”</p>
</blockquote></li>
</ul></li>
</ul>
</section>
</section>
<section id="afterword-invitation-to-an-open-conspiracy" class="level2">
<h2 class="anchored" data-anchor-id="afterword-invitation-to-an-open-conspiracy">Afterword: Invitation to an Open Conspiracy</h2>
<section id="afterward" class="level3">
<h3 class="anchored" data-anchor-id="afterward">Afterward</h3>
<ul>
<li><strong>Verse:</strong> Mark 9:42</li>
<li><strong>Content:</strong> Whoever causes a child to sin would be better off thrown into the sea with a millstone around their neck.</li>
</ul>
</section>
<section id="invitation-to-an-open-conspiracy-the-bartleby-project" class="level3">
<h3 class="anchored" data-anchor-id="invitation-to-an-open-conspiracy-the-bartleby-project">Invitation to an Open Conspiracy: The Bartleby Project</h3>
<ul>
<li><strong>Source:</strong> <em>Weapons of Mass Instruction</em> by John Taylor Gatto (2008)</li>
</ul>
<section id="the-purpose-of-the-bartleby-project" class="level4">
<h4 class="anchored" data-anchor-id="the-purpose-of-the-bartleby-project">The Purpose of the Bartleby Project</h4>
<ul>
<li><strong>Goal:</strong> Destroy the standardized testing industry.</li>
<li><strong>Method:</strong> Open conspiracy with individuals acting as independent unit commanders.</li>
<li><strong>Reasoning:</strong>
<ul>
<li>Standardized testing is more damaging than beneficial to individuals and society.</li>
<li>Test destruction, not reform, is the only solution.</li>
</ul></li>
</ul>
</section>
<section id="the-problems-with-standardized-testing" class="level4">
<h4 class="anchored" data-anchor-id="the-problems-with-standardized-testing">The Problems With Standardized Testing</h4>
<ul>
<li><strong>Ineffectiveness:</strong>
<ul>
<li>Information generated is unreliable and misleading.</li>
<li>Data is unused in adult life.</li>
<li>No correlation between test performance and future success.</li>
</ul></li>
<li><strong>Damaging Effects:</strong>
<ul>
<li>Significant personal and social harm to students.</li>
<li>Ranking system creates winners and losers, fostering a sense of inferiority.</li>
</ul></li>
<li><strong>Tool of Social Control:</strong>
<ul>
<li>Weaponized by social engineers to control institutional schooling.</li>
<li>Used to classify individuals as human resources.</li>
</ul></li>
<li><strong>Waste of Resources:</strong>
<ul>
<li>Hundreds of millions of school days lost to test preparation, administration, and recovery.</li>
<li>Tens of billions of dollars diverted to private companies.</li>
</ul></li>
</ul>
</section>
<section id="the-outlaw-ethic-of-institutional-schooling" class="level4">
<h4 class="anchored" data-anchor-id="the-outlaw-ethic-of-institutional-schooling">The Outlaw Ethic of Institutional Schooling</h4>
<ul>
<li><strong>Example:</strong> New York City Public Schools’ failure to provide mandated physical education.
<ul>
<li>Only 1 in 25 students receive the legal minimum of 24 minutes of physical education per day (New York Sun, May 8, 2008).</li>
<li>Parents concerned about lack of physical education, but have no significant voice in school decisions.</li>
</ul></li>
<li><strong>Consequences:</strong>
<ul>
<li>National epidemic of childhood obesity and diabetes.</li>
<li>Physical and psychological harm to students.</li>
</ul></li>
<li><strong>Institutional Hypocrisy:</strong>
<ul>
<li>NYC Board of Education claims to be “beginning to realize” the importance of student health after a century of control (New York Sun, May 8, 2008).</li>
<li>Schools continue to prioritize confinement over physical activity.</li>
</ul></li>
<li><strong>Conclusion:</strong>
<ul>
<li>Institutional schooling operates with an outlaw ethic, disregarding student well-being.</li>
<li>Schools will act against student and faculty interests under pressure.</li>
</ul></li>
</ul>
</section>
<section id="the-decline-of-american-education" class="level4">
<h4 class="anchored" data-anchor-id="the-decline-of-american-education">The Decline of American Education</h4>
<ul>
<li><strong>Post-World War II:</strong> Schooling replaced education.
<ul>
<li>Standardization based on the German model.</li>
<li>Standardized testing implemented and gradually gained importance (fully implemented by 1963).</li>
</ul></li>
<li><strong>1950s:</strong> Curriculum dumbed down, teachers became less connected to the community.</li>
<li><strong>1960s:</strong> Test scores become the primary measure of excellence.</li>
<li><strong>1970s:</strong> Schools become a lucrative business, further incentivizing the status quo.
<ul>
<li>Eccentricity in teaching is persecuted.</li>
<li>Tracking systems solidify the division of students based on perceived ability.</li>
<li>Curriculum for affluent students is equivalent to that of working-class students in the 1940s-50s.</li>
</ul></li>
</ul>
</section>
<section id="the-assumption-of-inherent-inferiority" class="level4">
<h4 class="anchored" data-anchor-id="the-assumption-of-inherent-inferiority">The Assumption of Inherent Inferiority</h4>
<ul>
<li><strong>Prevalent Belief:</strong> The majority of the population is inherently incapable of intellectual growth beyond a mental age of 12.</li>
<li><strong>Proponents:</strong>
<ul>
<li>Abraham Lincoln ridiculed this view in 1859 (Richard Hofstadter’s <em>Anti-Intellectualism in American Life</em>).</li>
<li>Edward Thorndike, inventor of educational psychology at Columbia Teachers College.</li>
<li>H.H. Goddard, Chairman of the Psychology Department at Princeton.</li>
<li>James Bryant Conant, President of Harvard.</li>
<li>Major private foundations (e.g., Rockefeller, Carnegie).</li>
<li>Historical figures like Plato, John Calvin, Benedict Spinoza, Johann Fichte, Charles Darwin, and Francis Galton.</li>
</ul></li>
<li><strong>Consequences:</strong>
<ul>
<li>Justification for limited educational expectations.</li>
<li>Acceptance of rigid social class systems.</li>
</ul></li>
<li><strong>American Exceptionalism (Pre-Civil War):</strong>
<ul>
<li>Ordinary citizens controlled education.</li>
<li>Egalitarian ethic prevailed.</li>
<li>Self-education thrived, enabling social mobility.</li>
</ul></li>
<li><strong>Post-WWII Shift:</strong>
<ul>
<li>The German model eroded opportunities for escape from the system.</li>
<li>Decline in national prospects and material wealth due to the suppression of individual potential.</li>
</ul></li>
</ul>
</section>
<section id="the-power-of-citizen-action-and-the-bartleby-solution" class="level4">
<h4 class="anchored" data-anchor-id="the-power-of-citizen-action-and-the-bartleby-solution">The Power of Citizen Action and The Bartleby Solution</h4>
<ul>
<li><strong>Foundational Rights:</strong> American founding documents guarantee inalienable rights, including liberty, that are undermined by compulsory schooling.</li>
<li><strong>Need for Drastic Action:</strong> Revitalizing education requires a complete rejection of government control (Alexander Sholzhenitsyn, “How to Revitalize Russia,” <em>Pravda</em>, September 18, 1988).</li>
<li><strong>The Bartleby Solution:</strong>
<ul>
<li>Inspired by Herman Melville’s short story “Bartleby, the Scrivener” (1853).
<ul>
<li>Bartleby, a copyist, exercises passive resistance by responding to requests with, “I would prefer not to.”</li>
<li>This simple act disrupts the workplace and exposes the limitations of control.</li>
</ul></li>
<li>Students are called upon to peacefully refuse standardized tests.</li>
<li>Write “I would prefer not to take this test” on the test forms.</li>
</ul></li>
</ul>
</section>
<section id="implementing-the-bartleby-project" class="level4">
<h4 class="anchored" data-anchor-id="implementing-the-bartleby-project">Implementing the Bartleby Project</h4>
<ul>
<li><strong>Decentralized Structure:</strong>
<ul>
<li>No formal organization or leadership to prevent co-option or corruption.</li>
<li>Individuals act independently, guided by the shared goal.</li>
</ul></li>
<li><strong>Target Audience:</strong> 60 million American students.</li>
<li><strong>Messaging:</strong>
<ul>
<li>Tests are unnecessary and harmful to education.</li>
<li>Students have the right to refuse.</li>
</ul></li>
<li><strong>Anticipated Challenges:</strong>
<ul>
<li>Intimidation and threats of retribution from authorities.</li>
<li>Denial of college admissions (unlikely due to colleges needing students).</li>
</ul></li>
</ul>
</section>
<section id="the-success-of-bartleby-moments" class="level4">
<h4 class="anchored" data-anchor-id="the-success-of-bartleby-moments">The Success of “Bartleby Moments”</h4>
<ul>
<li><strong>Historical Examples of Citizen-Led Change:</strong>
<ul>
<li>The end of the Vietnam War.</li>
<li>The fall of the Berlin Wall.</li>
<li>The collapse of the Soviet Union.</li>
</ul></li>
<li><strong>Common Thread:</strong> Peaceful, persistent resistance by ordinary people.</li>
</ul>
</section>
<section id="the-future-of-education-embracing-the-bartleby-spirit" class="level4">
<h4 class="anchored" data-anchor-id="the-future-of-education-embracing-the-bartleby-spirit">The Future of Education: Embracing the Bartleby Spirit</h4>
<ul>
<li><strong>Smith College’s Decision (May 27, 2008):</strong>
<ul>
<li>No longer requiring SAT scores for admission.</li>
<li>Prioritizing writing, character, talent, and extracurricular achievements.</li>
<li>No decline in academic ability observed.</li>
</ul></li>
<li><strong>Call to Action:</strong>
<ul>
<li>Reject compromise.</li>
<li>Embrace the power of “I would prefer not to.”</li>
<li>Students must lead the way in dismantling the testing empire and reclaiming true education.</li>
</ul></li>
</ul>


</section>
</section>
</section>

 ]]></description>
  <category>notes</category>
  <category>education</category>
  <category>history</category>
  <guid>https://christianjmills.com/posts/weapons-of-mass-instruction-book-notes/</guid>
  <pubDate>Sun, 25 Aug 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Conference Talk 15: Modal - Simple Scalable Serverless Services</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-015/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<ul>
<li><strong>Speaker:</strong> Charles (<a href="https://twitter.com/charles_irl"><span class="citation" data-cites="charles_irl">@charles_irl</span></a> on Twitter)</li>
<li><strong>Topic:</strong> A deeper dive into Modal, focusing on its broader applications beyond fine-tuning LLMs.</li>
<li><strong>Slides:</strong> <a href="https://docs.google.com/presentation/d/14uDnzd06j9i0zAQ3lTmB7QHBSO45BIsVGUZBZ3HKxGo/edit#slide=id.g2c7588f453b_0_272">Simple Scalable Serverless Services</a></li>
</ul>
</section>
<section id="modal-overview" class="level2">
<h2 class="anchored" data-anchor-id="modal-overview">Modal Overview</h2>
<section id="modal-vision-scalable-cost-efficient-serverless-services" class="level3">
<h3 class="anchored" data-anchor-id="modal-vision-scalable-cost-efficient-serverless-services">Modal Vision: Scalable, Cost-Efficient, Serverless Services</h3>
<ul>
<li>Modal’s vision is to enable the deployment of scalable services that are cost-efficient and serverless, all while being simple and easy to use.</li>
</ul>
</section>
<section id="defining-scalable-services" class="level3">
<h3 class="anchored" data-anchor-id="defining-scalable-services">Defining “Scalable Services”</h3>
<section id="three-key-service-requirements-inputoutput-storage-compute" class="level4">
<h4 class="anchored" data-anchor-id="three-key-service-requirements-inputoutput-storage-compute">Three Key Service Requirements: Input/Output, Storage, Compute</h4>
<ol type="1">
<li><strong>Input/Output:</strong> Connecting the service to the outside world and its information.
<ul>
<li>This enables services to receive input and provide output over networks, unlike isolated scripts or notebooks.</li>
</ul></li>
<li><strong>Storage:</strong> Preserving information for later use.
<ul>
<li>Databases and file storage are crucial for storing and retrieving data within the service.</li>
</ul></li>
<li><strong>Compute:</strong> Manipulating and processing information.
<ul>
<li>Even simple storage solutions benefit from compute capabilities for efficient access and retrieval.</li>
</ul></li>
</ol>
</section>
<section id="scalability-as-table-stakes" class="level4">
<h4 class="anchored" data-anchor-id="scalability-as-table-stakes">Scalability as Table Stakes</h4>
<ul>
<li>Modern services are expected to scale to handle:
<ul>
<li>Global user bases accessing services concurrently.</li>
<li>Massive data storage needs, potentially reaching petabytes or more.</li>
<li>Computationally intensive tasks distributed across multiple machines.</li>
</ul></li>
</ul>
</section>
<section id="challenges-and-importance-of-scalability" class="level4">
<h4 class="anchored" data-anchor-id="challenges-and-importance-of-scalability">Challenges and Importance of Scalability</h4>
<ul>
<li>Failing to scale can lead to:
<ul>
<li>Service outages when traffic surges.</li>
<li>Poor user experiences due to slow response times.</li>
</ul></li>
</ul>
</section>
<section id="distributed-systems-for-scalability" class="level4">
<h4 class="anchored" data-anchor-id="distributed-systems-for-scalability">Distributed Systems for Scalability</h4>
<ul>
<li>Scalability is typically achieved through distributed systems, spreading the workload across numerous machines and data centers.</li>
<li>However, building and managing distributed systems is complex and challenging.</li>
</ul>
</section>
</section>
<section id="modals-solution-simple-scalable-services-with-python" class="level3">
<h3 class="anchored" data-anchor-id="modals-solution-simple-scalable-services-with-python">Modal’s Solution: Simple Scalable Services with Python</h3>
<ul>
<li>Modal aims to simplify the creation of scalable services using Python.</li>
</ul>
<section id="pythonic-tools-for-building-services" class="level4">
<h4 class="anchored" data-anchor-id="pythonic-tools-for-building-services">Pythonic Tools for Building Services</h4>
<ul>
<li><strong>Web Endpoints and Servers:</strong> Easily define web endpoints and servers that scale without complex configurations.
<ul>
<li>Modal handles the complexities of distribution and scaling, requiring minimal configuration from the developer.</li>
</ul></li>
<li><strong>Storage Options:</strong>
<ul>
<li><strong>Caching and Distributed Storage:</strong> Modal provides distributed dictionaries and queues for efficient inter-process communication in scaled environments.</li>
<li><strong>Volumes:</strong> Abstract away the complexities of distributed file systems, offering a local file system interface for storing data like weights and datasets.</li>
</ul></li>
<li><strong>Compute with Python Functions:</strong> Python functions serve as the fundamental units of work in Modal.
<ul>
<li>Define functions that execute upon endpoint requests or as cron jobs.</li>
</ul></li>
</ul>
</section>
</section>
<section id="modal-dashboard-overview" class="level3">
<h3 class="anchored" data-anchor-id="modal-dashboard-overview">Modal Dashboard Overview</h3>
<section id="model-inference-function-example" class="level4">
<h4 class="anchored" data-anchor-id="model-inference-function-example">Model Inference Function Example</h4>
<ul>
<li>Modal’s dashboard visualizes resource usage for running functions.</li>
<li>Example: A model inference function triggered by user requests, scaling resources like CPU, memory, and GPU usage based on demand.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-015/images/model-inference-function-example.png" class="img-fluid figure-img"></p>
<figcaption>Model Inference Function Example</figcaption>
</figure>
</div>
</section>
<section id="scaling-up-and-down-resources" class="level4">
<h4 class="anchored" data-anchor-id="scaling-up-and-down-resources">Scaling Up and Down Resources</h4>
<ul>
<li>Modal dynamically adjusts resource allocation based on real-time needs, ensuring optimal performance and cost efficiency.</li>
</ul>
</section>
<section id="handling-multiple-inputs" class="level4">
<h4 class="anchored" data-anchor-id="handling-multiple-inputs">Handling Multiple Inputs</h4>
<ul>
<li>Functions can be designed to handle multiple inputs concurrently, maximizing resource utilization.</li>
</ul>
</section>
<section id="cron-jobs-with-modal" class="level4">
<h4 class="anchored" data-anchor-id="cron-jobs-with-modal">Cron Jobs with Modal</h4>
<ul>
<li>Schedule periodic function execution for tasks like:
<ul>
<li>Regularly displaying generated content.</li>
<li>Pulling data from production databases to data warehouses.</li>
<li>Performing regular data analysis.</li>
<li>Fine-tuning and retraining models on a cadence.</li>
<li>Rerunning evaluations with live user data.</li>
</ul></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-015/images/cron-jobs-with-modal.png" class="img-fluid figure-img"></p>
<figcaption>Cron Jobs with Modal</figcaption>
</figure>
</div>
</section>
</section>
</section>
<section id="qa-session-1" class="level2">
<h2 class="anchored" data-anchor-id="qa-session-1">Q&amp;A Session 1</h2>
<section id="database-service-availability" class="level4">
<h4 class="anchored" data-anchor-id="database-service-availability">Database Service Availability</h4>
<ul>
<li>Modal does not currently offer a managed database service, particularly serverless Postgres.</li>
</ul>
</section>
<section id="challenges-of-serverless-postgres" class="level4">
<h4 class="anchored" data-anchor-id="challenges-of-serverless-postgres">Challenges of Serverless Postgres</h4>
<ul>
<li>Two main types of databases:
<ul>
<li><strong>OLTP (Online Transaction Processing):</strong> Difficult to scale due to row-level operations and complex joins.</li>
<li><strong>OLAP (Online Analytical Processing):</strong> More straightforward to run on Modal using examples with tools like DuckDB and parquet files stored in S3.</li>
</ul></li>
</ul>
</section>
<section id="running-analytical-workloads-on-modal" class="level4">
<h4 class="anchored" data-anchor-id="running-analytical-workloads-on-modal">Running Analytical Workloads on Modal</h4>
<ul>
<li>Modal provides examples for running analytical workloads:
<ul>
<li>Downloading parquet files from S3.</li>
<li>Performing analysis using tools like DuckDB.</li>
</ul></li>
</ul>
</section>
<section id="challenges-of-scaling-transaction-processing" class="level4">
<h4 class="anchored" data-anchor-id="challenges-of-scaling-transaction-processing">Challenges of Scaling Transaction Processing</h4>
<ul>
<li>Distributed transaction processing databases are more challenging to build and scale effectively.</li>
</ul>
</section>
<section id="recommendations-for-serverless-postgres-neon-superbase" class="level4">
<h4 class="anchored" data-anchor-id="recommendations-for-serverless-postgres-neon-superbase">Recommendations for Serverless Postgres: Neon, Superbase</h4>
<ul>
<li>For serverless Postgres, Modal recommends using external services like <a href="https://neon.tech/">Neon</a> or <a href="https://www.superbase.com/">Superbase</a>, which integrate well with Modal’s serverless API apps.</li>
</ul>
</section>
</section>
<section id="storage-in-modal" class="level2">
<h2 class="anchored" data-anchor-id="storage-in-modal">Storage in Modal</h2>
<section id="importance-of-data-storage" class="level3">
<h3 class="anchored" data-anchor-id="importance-of-data-storage">Importance of Data Storage</h3>
<ul>
<li>Data storage is paramount, often defining the value of applications.</li>
</ul>
</section>
<section id="focus-on-long-term-storage" class="level3">
<h3 class="anchored" data-anchor-id="focus-on-long-term-storage">Focus on Long-Term Storage</h3>
<ul>
<li>This section emphasizes long-term storage solutions rather than in-memory dictionaries and queues.</li>
</ul>
</section>
<section id="file-system-abstractions-volumes" class="level3">
<h3 class="anchored" data-anchor-id="file-system-abstractions-volumes">File System Abstractions: Volumes</h3>
<section id="use-cases-storing-weights-datasets" class="level4">
<h4 class="anchored" data-anchor-id="use-cases-storing-weights-datasets">Use Cases: Storing Weights, Datasets</h4>
<ul>
<li>Volumes provide a distributed file system abstraction, ideal for storing:
<ul>
<li>Model weights.</li>
<li>Datasets, including large ones (terabyte-scale or even low petabyte-scale).</li>
</ul></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-015/images/storage-volume.png" class="img-fluid figure-img"></p>
<figcaption>Storage Volume</figcaption>
</figure>
</div>
</section>
<section id="examples-of-stored-volumes" class="level4">
<h4 class="anchored" data-anchor-id="examples-of-stored-volumes">Examples of Stored Volumes</h4>
<ul>
<li>Model weights from Axolotl fine-tuning runs.</li>
<li>CIFAR-10 data and models.</li>
<li>Raw Wikipedia dataset from Hugging Face Datasets in Arrow file format.</li>
</ul>
</section>
<section id="handling-large-datasets" class="level4">
<h4 class="anchored" data-anchor-id="handling-large-datasets">Handling Large Datasets</h4>
<ul>
<li>Modal offers examples for storing and working with very large datasets on the order of terabytes or even low petabytes.</li>
</ul>
</section>
<section id="volumes-optimized-for-write-once-read-many-workloads" class="level4">
<h4 class="anchored" data-anchor-id="volumes-optimized-for-write-once-read-many-workloads">Volumes: Optimized for Write Once, Read Many Workloads</h4>
<ul>
<li>Modal’s volumes are designed for workloads where data is written infrequently but read frequently.</li>
<li>This design choice optimizes for:
<ul>
<li>Datasets that are not frequently overwritten.</li>
<li>Model weights where new versions are written, but existing versions are not modified.</li>
</ul></li>
</ul>
<section id="explanation-of-write-once-read-many" class="level5">
<h5 class="anchored" data-anchor-id="explanation-of-write-once-read-many">Explanation of Write Once, Read Many</h5>
<ul>
<li>Data is written once and then read many times, common for datasets and model weights.</li>
</ul>
</section>
<section id="benefits-for-scaling" class="level5">
<h5 class="anchored" data-anchor-id="benefits-for-scaling">Benefits for Scaling</h5>
<ul>
<li>Scaling read operations is significantly easier than scaling write operations, making volumes well-suited for read-heavy workloads.</li>
</ul>
</section>
</section>
</section>
</section>
<section id="qa-session-2" class="level2">
<h2 class="anchored" data-anchor-id="qa-session-2">Q&amp;A Session 2</h2>
<section id="storage-pricing" class="level4">
<h4 class="anchored" data-anchor-id="storage-pricing">Storage Pricing</h4>
<ul>
<li>While Modal does not currently charge for storage, it plans to implement pricing eventually.</li>
<li>The goal is to price storage at a rate comparable to S3, Modal’s underlying storage provider.</li>
</ul>
</section>
<section id="addressing-other-storage-related-questions" class="level4">
<h4 class="anchored" data-anchor-id="addressing-other-storage-related-questions">Addressing Other Storage-Related Questions</h4>
<ul>
<li><strong>Petabyte-Sized Datasets and S3:</strong> Very large datasets may be stored directly on S3 rather than Modal’s volumes.</li>
<li><strong>Data Transport Costs:</strong> Modal does not currently charge for data ingress or egress, but may implement pricing if it becomes a significant cost.</li>
<li><strong>Explanation of Mounts:</strong> Mounts make data from the local machine available to code running on Modal. This is useful for:
<ul>
<li>Accessing code files.</li>
<li>Including assets for static sites.</li>
</ul></li>
</ul>
</section>
</section>
<section id="input-and-output-in-modal" class="level2">
<h2 class="anchored" data-anchor-id="input-and-output-in-modal">Input and Output in Modal</h2>
<section id="fastapi-integration" class="level3">
<h3 class="anchored" data-anchor-id="fastapi-integration">FastAPI Integration</h3>
<section id="benefits-of-using-fastapi-with-modal" class="level4">
<h4 class="anchored" data-anchor-id="benefits-of-using-fastapi-with-modal">Benefits of Using FastAPI with Modal</h4>
<ul>
<li>Asynchronous Python: FastAPI enables asynchronous programming without the complexities of manually managing asynchronous operations.</li>
<li>Documentation: FastAPI provides excellent documentation.</li>
<li>Scalability: Asynchronous programming in FastAPI aligns well with Modal’s scaling capabilities.</li>
<li>Performance: Asynchronous operations can improve performance, especially with Modal’s distributed architecture.</li>
</ul>
<section id="asynchronous-python-documentation-scalability-performance" class="level5">
<h5 class="anchored" data-anchor-id="asynchronous-python-documentation-scalability-performance">Asynchronous Python, Documentation, Scalability, Performance</h5>
<ul>
<li>FastAPI simplifies asynchronous programming and offers performance benefits when used with Modal.</li>
</ul>
</section>
<section id="modals-handling-of-synchronous-and-asynchronous-functions" class="level5">
<h5 class="anchored" data-anchor-id="modals-handling-of-synchronous-and-asynchronous-functions">Modal’s Handling of Synchronous and Asynchronous Functions</h5>
<ul>
<li>Modal seamlessly handles both synchronous and asynchronous functions, avoiding common errors associated with mixing the two.</li>
</ul>
</section>
<section id="flexibility-and-performance-with-async" class="level5">
<h5 class="anchored" data-anchor-id="flexibility-and-performance-with-async">Flexibility and Performance with Async</h5>
<ul>
<li>Developers can gradually introduce asynchronous code into their Modal projects without major refactoring.</li>
</ul>
</section>
</section>
<section id="web-endpoints-for-exposing-services" class="level4">
<h4 class="anchored" data-anchor-id="web-endpoints-for-exposing-services">Web Endpoints for Exposing Services</h4>
<ul>
<li>FastAPI, based on the ASGI protocol, offers a robust way to define and expose web services.</li>
</ul>
<section id="fastapi-as-a-dependency" class="level5">
<h5 class="anchored" data-anchor-id="fastapi-as-a-dependency">FastAPI as a Dependency</h5>
<ul>
<li>FastAPI is a dependency of Modal, simplifying project setup and dependency management.</li>
</ul>
</section>
<section id="creating-urls-from-python-functions" class="level5">
<h5 class="anchored" data-anchor-id="creating-urls-from-python-functions">Creating URLs from Python Functions</h5>
<ul>
<li>Modal can automatically create URLs from Python functions, simplifying web service creation.</li>
</ul>
</section>
</section>
<section id="asynchronous-server-gateway-interface-asgi" class="level4">
<h4 class="anchored" data-anchor-id="asynchronous-server-gateway-interface-asgi">Asynchronous Server Gateway Interface (ASGI)</h4>
<section id="flexibility-beyond-fastapi" class="level5">
<h5 class="anchored" data-anchor-id="flexibility-beyond-fastapi">Flexibility Beyond FastAPI</h5>
<ul>
<li>Modal supports any ASGI-compliant web framework, providing flexibility beyond FastAPI.</li>
</ul>
</section>
</section>
<section id="wsgi-and-flask-support" class="level4">
<h4 class="anchored" data-anchor-id="wsgi-and-flask-support">WSGI and Flask Support</h4>
<section id="comparison-of-wsgi-and-asgi" class="level5">
<h5 class="anchored" data-anchor-id="comparison-of-wsgi-and-asgi">Comparison of WSGI and ASGI</h5>
<ul>
<li>Modal also supports WSGI (Web Server Gateway Interface), an older protocol commonly used with frameworks like Flask.</li>
<li>While WSGI offers a mature ecosystem, it lacks native asynchronous support, potentially impacting performance compared to ASGI.</li>
</ul>
</section>
<section id="potential-trade-offs-with-wsgi" class="level5">
<h5 class="anchored" data-anchor-id="potential-trade-offs-with-wsgi">Potential Trade-offs with WSGI</h5>
<ul>
<li>WSGI may provide a wider range of existing projects and libraries but might lack the performance advantages of ASGI.</li>
</ul>
</section>
</section>
<section id="running-arbitrary-web-servers" class="level4">
<h4 class="anchored" data-anchor-id="running-arbitrary-web-servers">Running Arbitrary Web Servers</h4>
<ul>
<li>Modal allows running arbitrary web servers, even those not written in Python, by treating them as subprocesses.</li>
</ul>
</section>
</section>
</section>
<section id="qa-session-3" class="level2">
<h2 class="anchored" data-anchor-id="qa-session-3">Q&amp;A Session 3</h2>
<section id="ddos-attack-prevention" class="level4">
<h4 class="anchored" data-anchor-id="ddos-attack-prevention">DDoS Attack Prevention</h4>
<ul>
<li>Modal does not currently have built-in DDoS protection but acknowledges its importance and plans to offer it in the future.</li>
</ul>
<section id="current-mitigation-strategies" class="level5">
<h5 class="anchored" data-anchor-id="current-mitigation-strategies">Current Mitigation Strategies</h5>
<ul>
<li>Developers can implement authentication middleware in FastAPI or Flask to restrict access.</li>
</ul>
</section>
<section id="importance-of-authentication-and-rate-limiting" class="level5">
<h5 class="anchored" data-anchor-id="importance-of-authentication-and-rate-limiting">Importance of Authentication and Rate Limiting</h5>
<ul>
<li>Authentication and rate limiting are crucial for preventing unauthorized access and mitigating DDoS attacks.</li>
</ul>
</section>
<section id="potential-for-cloudflare-ddos-protection" class="level5">
<h5 class="anchored" data-anchor-id="potential-for-cloudflare-ddos-protection">Potential for Cloudflare DDoS Protection</h5>
<ul>
<li>Integrating with services like Cloudflare for DDoS protection is worth exploring.</li>
</ul>
</section>
</section>
<section id="websockets-and-max-execution-time" class="level4">
<h4 class="anchored" data-anchor-id="websockets-and-max-execution-time">WebSockets and Max Execution Time</h4>
<ul>
<li>For questions related to WebSockets and maximum execution time, Modal recommends reaching out on their Slack channel for more specific guidance.</li>
</ul>
</section>
<section id="clarification-on-djangos-async-support" class="level4">
<h4 class="anchored" data-anchor-id="clarification-on-djangos-async-support">Clarification on Django’s Async Support</h4>
<ul>
<li>A participant clarifies that Django supports asynchronous views and requests when running under ASGI.</li>
</ul>
</section>
<section id="addressing-storage-related-questions" class="level4">
<h4 class="anchored" data-anchor-id="addressing-storage-related-questions">Addressing Storage-Related Questions</h4>
<ul>
<li>Modal reiterates its stance on storage pricing and data transport costs, aiming for transparency and aligning with S3’s pricing model.</li>
</ul>
</section>
</section>
<section id="serverless-nature-of-modal" class="level2">
<h2 class="anchored" data-anchor-id="serverless-nature-of-modal">Serverless Nature of Modal</h2>
<section id="importance-of-serverless-architecture" class="level3">
<h3 class="anchored" data-anchor-id="importance-of-serverless-architecture">Importance of Serverless Architecture</h3>
<ul>
<li>Serverless architecture is a key aspect of Modal, contributing to its cost-efficiency and developer experience.</li>
</ul>
</section>
<section id="serverless-for-cost-efficiency-and-developer-experience" class="level3">
<h3 class="anchored" data-anchor-id="serverless-for-cost-efficiency-and-developer-experience">Serverless for Cost Efficiency and Developer Experience</h3>
<ul>
<li>Modal’s serverless nature offers both financial and ergonomic benefits for development teams.</li>
</ul>
</section>
<section id="variable-resource-utilization" class="level3">
<h3 class="anchored" data-anchor-id="variable-resource-utilization">Variable Resource Utilization</h3>
<ul>
<li>Service resource usage fluctuates over time due to factors like:
<ul>
<li>Time zone-dependent usage patterns.</li>
<li>Traffic spikes from external events.</li>
</ul></li>
</ul>
<section id="provisioning-for-peaks-and-cost-implications" class="level4">
<h4 class="anchored" data-anchor-id="provisioning-for-peaks-and-cost-implications">Provisioning for Peaks and Cost Implications</h4>
<ul>
<li>Traditional approaches involve provisioning resources for peak usage, leading to wasted resources and unnecessary costs during off-peak times.</li>
</ul>
</section>
<section id="resource-utilization-challenges" class="level4">
<h4 class="anchored" data-anchor-id="resource-utilization-challenges">Resource Utilization Challenges</h4>
<ul>
<li>Optimizing resource utilization becomes crucial to minimize costs, as exemplified by Amazon’s journey into cloud computing.</li>
</ul>
</section>
<section id="the-rise-of-cloud-computing" class="level4">
<h4 class="anchored" data-anchor-id="the-rise-of-cloud-computing">The Rise of Cloud Computing</h4>
<ul>
<li>Cloud computing emerged partly from the need to utilize idle resources effectively.</li>
</ul>
</section>
</section>
<section id="manual-provisioning-and-its-drawbacks" class="level3">
<h3 class="anchored" data-anchor-id="manual-provisioning-and-its-drawbacks">Manual Provisioning and Its Drawbacks</h3>
<ul>
<li>Manually scaling resources up and down can reduce costs but is reactive, stressful, and may not handle sudden traffic spikes well.</li>
</ul>
<section id="handling-traffic-spikes" class="level4">
<h4 class="anchored" data-anchor-id="handling-traffic-spikes">Handling Traffic Spikes</h4>
<ul>
<li>Manual provisioning struggles to respond quickly to unexpected surges in traffic.</li>
</ul>
</section>
<section id="reducing-costs-but-potentially-sacrificing-user-experience" class="level4">
<h4 class="anchored" data-anchor-id="reducing-costs-but-potentially-sacrificing-user-experience">Reducing Costs but Potentially Sacrificing User Experience</h4>
<ul>
<li>While manual provisioning can save costs, it can also lead to poor user experiences during scaling events.</li>
</ul>
</section>
</section>
<section id="automatic-provisioning-and-autoscaling" class="level3">
<h3 class="anchored" data-anchor-id="automatic-provisioning-and-autoscaling">Automatic Provisioning and Autoscaling</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-015/images/auto-scaling.png" class="img-fluid figure-img"></p>
<figcaption>Auto-Scaling Resource Utilization</figcaption>
</figure>
</div>
<section id="kubernetes-and-autoscaling" class="level4">
<h4 class="anchored" data-anchor-id="kubernetes-and-autoscaling">Kubernetes and Autoscaling</h4>
<ul>
<li>Tools like Kubernetes automate provisioning and scaling, dynamically adjusting resources based on demand.</li>
</ul>
</section>
<section id="lag-in-autoscaling" class="level4">
<h4 class="anchored" data-anchor-id="lag-in-autoscaling">Lag in Autoscaling</h4>
<ul>
<li>Autoscaling typically involves a lag between resource demand and allocation.</li>
</ul>
</section>
<section id="granularity-of-autoscaling" class="level4">
<h4 class="anchored" data-anchor-id="granularity-of-autoscaling">Granularity of Autoscaling</h4>
<ul>
<li>Smaller units of autoscaling allow for more precise resource allocation.</li>
</ul>
</section>
</section>
<section id="achieving-serverless-matching-costs-to-resource-utilization" class="level3">
<h3 class="anchored" data-anchor-id="achieving-serverless-matching-costs-to-resource-utilization">Achieving Serverless: Matching Costs to Resource Utilization</h3>
<ul>
<li>Serverless computing aims to align costs directly with resource consumption.</li>
</ul>
<section id="scaling-to-zero" class="level4">
<h4 class="anchored" data-anchor-id="scaling-to-zero">Scaling to Zero</h4>
<ul>
<li>A defining characteristic of serverless is the ability to scale resources down to zero when not in use.</li>
</ul>
</section>
<section id="functions-as-a-service-faas" class="level4">
<h4 class="anchored" data-anchor-id="functions-as-a-service-faas">Functions as a Service (FaaS)</h4>
<ul>
<li>Serverless is often implemented using Functions as a Service (FaaS), where individual functions are executed on demand.</li>
</ul>
</section>
</section>
<section id="benefits-of-serverless-cost-savings-improved-user-experience" class="level3">
<h3 class="anchored" data-anchor-id="benefits-of-serverless-cost-savings-improved-user-experience">Benefits of Serverless: Cost Savings, Improved User Experience</h3>
<ul>
<li>Serverless offers:
<ul>
<li>Reduced costs by paying only for resources consumed.</li>
<li>Improved user experiences by dynamically scaling to meet demand.</li>
</ul></li>
</ul>
</section>
<section id="why-use-a-serverless-platform-like-modal" class="level3">
<h3 class="anchored" data-anchor-id="why-use-a-serverless-platform-like-modal">Why Use a Serverless Platform Like Modal?</h3>
<ul>
<li>Managing serverless infrastructure requires significant engineering effort.</li>
</ul>
<section id="why-use-a-serverless-platform-like-modal-1" class="level4">
<h4 class="anchored" data-anchor-id="why-use-a-serverless-platform-like-modal-1">Why Use a Serverless Platform Like Modal?</h4>
<ul>
<li>Serverless platforms like Modal offer economies of scale, handling the complexities of:
<ul>
<li>Resource allocation.</li>
<li>Autoscaling.</li>
<li>Infrastructure management.</li>
</ul></li>
</ul>
</section>
<section id="amortizing-engineering-complexity" class="level4">
<h4 class="anchored" data-anchor-id="amortizing-engineering-complexity">Amortizing Engineering Complexity</h4>
<ul>
<li>Modal amortizes the engineering complexity of serverless across its entire user base.</li>
</ul>
</section>
<section id="smoothing-fluctuations-with-multiple-users" class="level4">
<h4 class="anchored" data-anchor-id="smoothing-fluctuations-with-multiple-users">Smoothing Fluctuations with Multiple Users</h4>
<ul>
<li>Fluctuations in individual users’ resource usage are smoothed out by the aggregate usage of all users on the platform.</li>
</ul>
</section>
<section id="economics-of-serverless-computing" class="level4">
<h4 class="anchored" data-anchor-id="economics-of-serverless-computing">Economics of Serverless Computing</h4>
<ul>
<li>The “Berkeley View” paper highlights the economic benefits of serverless computing, emphasizing economies of scale and resource utilization.</li>
</ul>
<section id="berkeley-paper-on-serverless" class="level5">
<h5 class="anchored" data-anchor-id="berkeley-paper-on-serverless">Berkeley Paper on Serverless</h5>
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/1902.03383">Cloud Programming Simplified: A Berkeley View on Serverless Computing</a></li>
</ul>
</section>
</section>
</section>
</section>
<section id="remote-procedure-calling-rpc-in-modal" class="level2">
<h2 class="anchored" data-anchor-id="remote-procedure-calling-rpc-in-modal">Remote Procedure Calling (RPC) in Modal</h2>
<section id="rpc-as-the-core-idea-behind-serverless" class="level3">
<h3 class="anchored" data-anchor-id="rpc-as-the-core-idea-behind-serverless">RPC as the Core Idea Behind Serverless</h3>
<ul>
<li>Remote Procedure Calling (RPC) is fundamental to serverless computing and Modal’s functionality.</li>
</ul>
</section>
<section id="how-rpc-works" class="level3">
<h3 class="anchored" data-anchor-id="how-rpc-works">How RPC Works</h3>
<ul>
<li>In RPC, local code invokes functions that execute on remote machines, abstracting away the complexities of network communication.</li>
<li><strong>Book:</strong> <a href="https://book.systemsapproach.org/index.html">Computer Networks: A Systems Approach</a>
<ul>
<li><strong>Section:</strong> <a href="https://book.systemsapproach.org/e2e/rpc.html#remote-procedure-call">5.3 Remote Procedure Call</a></li>
</ul></li>
</ul>
<section id="transparency-and-seamlessness" class="level4">
<h4 class="anchored" data-anchor-id="transparency-and-seamlessness">Transparency and Seamlessness</h4>
<ul>
<li>RPC strives for transparency, making remote function calls appear as if they were local.</li>
</ul>
</section>
</section>
<section id="modals-implementation-with-grpc" class="level3">
<h3 class="anchored" data-anchor-id="modals-implementation-with-grpc">Modal’s Implementation with gRPC</h3>
<ul>
<li>Modal utilizes gRPC as its RPC framework.</li>
</ul>
</section>
<section id="understanding-modals-behavior" class="level3">
<h3 class="anchored" data-anchor-id="understanding-modals-behavior">Understanding Modal’s Behavior</h3>
<section id="why-modal-feels-different-from-local-python" class="level4">
<h4 class="anchored" data-anchor-id="why-modal-feels-different-from-local-python">Why Modal Feels Different from Local Python</h4>
<ul>
<li>Modal’s RPC mechanisms introduce differences compared to traditional local Python execution.</li>
</ul>
</section>
<section id="code-execution-on-modals-machines" class="level4">
<h4 class="anchored" data-anchor-id="code-execution-on-modals-machines">Code Execution on Modal’s Machines</h4>
<ul>
<li>Code, including functions, is sent to Modal’s infrastructure for execution.</li>
</ul>
</section>
<section id="dynamic-function-execution" class="level4">
<h4 class="anchored" data-anchor-id="dynamic-function-execution">Dynamic Function Execution</h4>
<ul>
<li>Modal dynamically uploads and executes functions defined in local scripts.</li>
</ul>
</section>
<section id="handling-global-scope-and-imports" class="level4">
<h4 class="anchored" data-anchor-id="handling-global-scope-and-imports">Handling Global Scope and Imports</h4>
<ul>
<li>Understanding how Modal manages global scope and imports is crucial for writing effective Modal code.</li>
</ul>
</section>
</section>
<section id="running-code-on-gpus" class="level3">
<h3 class="anchored" data-anchor-id="running-code-on-gpus">Running Code on GPUs</h3>
<ul>
<li>Modal enables running code on GPUs even if the local machine lacks them.</li>
</ul>
</section>
<section id="demo-mini-modal" class="level3">
<h3 class="anchored" data-anchor-id="demo-mini-modal">Demo: Mini Modal</h3>
<section id="simulating-modal-locally" class="level4">
<h4 class="anchored" data-anchor-id="simulating-modal-locally">Simulating Modal Locally</h4>
<ul>
<li><strong><a href="https://github.com/charlesfrye/minimodal">MiniModal</a>:</strong> A simplified local simulation of Modal’s core concepts.</li>
</ul>
</section>
<section id="understanding-modals-internals" class="level4">
<h4 class="anchored" data-anchor-id="understanding-modals-internals">Understanding Modal’s Internals</h4>
<ul>
<li>Mini Modal provides insights into Modal’s internal workings, particularly its handling of virtual environments and code execution.</li>
</ul>
</section>
<section id="separating-virtual-environments" class="level4">
<h4 class="anchored" data-anchor-id="separating-virtual-environments">Separating Virtual Environments</h4>
<ul>
<li>Mini Modal demonstrates the isolation of virtual environments, a key aspect of Modal’s functionality.</li>
</ul>
</section>
</section>
</section>
<section id="qa-session-4" class="level2">
<h2 class="anchored" data-anchor-id="qa-session-4">Q&amp;A Session 4</h2>
<section id="how-modal-hosts-suno.ai" class="level4">
<h4 class="anchored" data-anchor-id="how-modal-hosts-suno.ai">How Modal Hosts Suno.ai</h4>
<ul>
<li><a href="https://suno.com/">Suno.ai</a>, a generative AI application, utilizes various Modal features, including functions, cron jobs, volumes, and web endpoints.</li>
</ul>
<section id="suno.ais-use-of-modals-features" class="level5">
<h5 class="anchored" data-anchor-id="suno.ais-use-of-modals-features">Suno.ai’s Use of Modal’s Features</h5>
<ul>
<li>A blog post details Suno.ai’s reasons for choosing Modal and how they leverage its features.</li>
</ul>
</section>
<section id="blog-post-about-suno.ais-choice-of-modal" class="level5">
<h5 class="anchored" data-anchor-id="blog-post-about-suno.ais-choice-of-modal">Blog Post about Suno.ai’s Choice of Modal</h5>
<ul>
<li>The blog post provides insights into Suno.ai’s decision to use Modal and their experience with the platform.</li>
</ul>


</section>
</section>
</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-015/</guid>
  <pubDate>Sun, 25 Aug 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Notes on The Learning Game꞉ Teaching Kids to Think for Themselves, Embrace Challenge, and Love Learning</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/the-learning-game-book-notes/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
These notes are part of the following collection:
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="../../series/notes/education-notes.html"><strong>Education</strong></a></p>
</div>
</div>
<ul>
<li>Executive Summary</li>
<li>The Problem with the “Game of School”<br>
</li>
<li>Reimagining Education<br>
</li>
<li>Part 1: School<br>
</li>
<li>Part 2: How Kids Learn<br>
</li>
<li>Part 3: The Power of Games<br>
</li>
<li>Part 4: Raising Successful Kids<br>
</li>
<li>Part 5: The Model Parent<br>
</li>
<li>Conclusion: Design Your Learning Game</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Book LInks:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="https://harriman.house/books/the-learning-game/">Publisher Page</a></li>
<li><a href="https://afabrega.com/">Author’s Website</a></li>
</ul>
</div>
</div>
<section id="executive-summary" class="level2">
<h2 class="anchored" data-anchor-id="executive-summary">Executive Summary</h2>
<p>This book critiques the modern education system, arguing that it stifles curiosity and creativity in children. It advocates for a shift from instruction-based learning to a more engaging, game-like approach that empowers children to think independently, embrace failure, and develop a lifelong love of learning.</p>
<p>The author draws upon personal experience as a teacher and insights from various fields, including psychology, game design, and philosophy, to offer practical strategies for parents and educators to design a “Learning Game” that fosters genuine learning.</p>
<p>The book challenges common misconceptions about learning styles, the role of memorization, and the fear of failure, proposing alternative methods like story-driven learning, mental models, and elastic thinking.</p>
</section>
<section id="the-problem-with-the-game-of-school" class="level2">
<h2 class="anchored" data-anchor-id="the-problem-with-the-game-of-school">The Problem with the “Game of School”</h2>
<section id="authors-personal-journey" class="level3">
<h3 class="anchored" data-anchor-id="authors-personal-journey">Author’s Personal Journey</h3>
<ul>
<li>The author attended 10 schools across 7 countries, experiencing diverse educational systems and adapting to new environments.</li>
<li>She realized that succeeding in school often meant playing the “game” - following rules, pleasing teachers, and achieving good grades - rather than deeply engaging with learning.</li>
<li>Her true passion for learning flourished outside the classroom, where she could pursue personal interests and explore creatively.</li>
</ul>
</section>
<section id="the-pervasive-game-of-school" class="level3">
<h3 class="anchored" data-anchor-id="the-pervasive-game-of-school">The Pervasive “Game of School”</h3>
<ul>
<li>The author observed the same “game” being played in classrooms worldwide, with students expected to conform and obey rather than think critically and independently.</li>
<li>This realization led her to question the effectiveness of an educational system that stifles curiosity and enforces a standardized approach to learning.</li>
</ul>
</section>
<section id="impact-on-childrens-love-of-learning" class="level3">
<h3 class="anchored" data-anchor-id="impact-on-childrens-love-of-learning">Impact on Children’s Love of Learning</h3>
<ul>
<li>Young children possess a natural desire to learn, but this enthusiasm often dwindles as they progress through a rigid and prescriptive school system.</li>
<li>The lack of choice, autonomy, and personalized learning experiences contributes to disengagement and a reliance on extrinsic motivation (grades).</li>
</ul>
</section>
</section>
<section id="reimagining-education" class="level2">
<h2 class="anchored" data-anchor-id="reimagining-education">Reimagining Education</h2>
<section id="key-questions-for-transforming-education" class="level3">
<h3 class="anchored" data-anchor-id="key-questions-for-transforming-education">Key Questions for Transforming Education</h3>
<ul>
<li>How can we shift from a “game of school” to a “game of learning” that fosters lifelong curiosity and a genuine passion for knowledge?</li>
<li>How can we tailor education to individual needs and empower children to take ownership of their learning journeys?</li>
<li>How do we equip children with the tools and mindsets to thrive in a world of constant change and embrace challenges as opportunities for growth?</li>
</ul>
</section>
<section id="the-learning-game-approach" class="level3">
<h3 class="anchored" data-anchor-id="the-learning-game-approach">The “Learning Game” Approach</h3>
<ul>
<li>Encourages parents and educators to challenge traditional assumptions about education and actively participate in shaping their children’s learning experiences.</li>
<li>Emphasizes the importance of:
<ul>
<li><strong>Curiosity-driven Exploration:</strong> Allowing children to pursue their passions and interests, even if they deviate from conventional academic paths.</li>
<li><strong>Critical Thinking and Questioning:</strong> Encouraging children to challenge assumptions, seek evidence, and think independently.</li>
<li><strong>Personal Relevance and Real-World Application:</strong> Connecting learning to children’s lives and demonstrating the practical applications of knowledge.</li>
<li><strong>Embrace of Mistakes and Challenges:</strong> Fostering a growth mindset where mistakes are viewed as opportunities for learning and challenges are embraced as catalysts for development.</li>
</ul></li>
</ul>
</section>
</section>
<section id="part-1-school" class="level2">
<h2 class="anchored" data-anchor-id="part-1-school">Part 1: School</h2>
<section id="chapter-1-seven-dangerous-lessons-taught-in-schools" class="level3">
<h3 class="anchored" data-anchor-id="chapter-1-seven-dangerous-lessons-taught-in-schools">Chapter 1: Seven Dangerous Lessons Taught in Schools</h3>
<div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Book:</strong> “<a href="https://newsociety.com/books/d/dumbing-us-down-25th-anniversary-edition">Dumbing Us Down, The Hidden Curriculum of Compulsory Schooling</a>” by John Taylor Gatto.</li>
</ul>
</div>
</div>
<p>This chapter, drawing upon John Taylor Gatto’s book “Dumbing Us Down,” outlines seven detrimental lessons ingrained in the traditional education system:</p>
<ol type="1">
<li><strong>Confusion:</strong> Subjects taught in isolation, lacking real-world context, leaving students confused about how knowledge connects.
<ul>
<li><strong>Alternative:</strong> Teach concepts in context, applying them to solve problems or build projects.</li>
</ul></li>
<li><strong>Class Position:</strong> Obsession with ranking and labeling students, fostering competition instead of collaboration.
<ul>
<li><strong>Alternative:</strong> Encourage collaboration, letting kids define success on their own terms, valuing individual strengths and contributions.</li>
</ul></li>
<li><strong>Indifference:</strong> Discouraging deep engagement by forcing rapid subject switching, mirroring the fragmented attention of the digital age.
<ul>
<li><strong>Alternative:</strong> Let kids follow their interests, allowing them to dive deep into topics that excite them, fostering focus and depth.</li>
</ul></li>
<li><strong>Emotional Dependency:</strong> Students conditioned to mirror teachers’ emotions, hindering their ability to develop emotional regulation and resilience.
<ul>
<li><strong>Alternative:</strong> Encourage kids to explore and manage their own feelings, fostering emotional intelligence and resilience.</li>
</ul></li>
<li><strong>Intellectual Dependency:</strong> Prioritizing conformity and obedience over independent thought and challenging the status quo.
<ul>
<li><strong>Alternative:</strong> Encourage divergent thinking, questioning, and the development of individual perspectives, valuing critical thinking over rote memorization.</li>
</ul></li>
<li><strong>Provisional Self-Esteem:</strong> Tying self-worth to external validation from teachers and grades, rather than internal standards and self-assessment.
<ul>
<li><strong>Alternative:</strong> Encourage kids to develop an internal measuring stick, fostering self-confidence and self-reliance based on personal growth and effort.</li>
</ul></li>
<li><strong>Students Can’t Hide:</strong> Constant surveillance and lack of privacy, hindering experimentation, risk-taking, and the development of self-directed learning.
<ul>
<li><strong>Alternative:</strong> Provide opportunities for privacy, creative exploration, and independent action, allowing kids to learn through trial and error.</li>
</ul></li>
</ol>
</section>
<section id="chapter-2-how-did-we-get-here" class="level3">
<h3 class="anchored" data-anchor-id="chapter-2-how-did-we-get-here">Chapter 2: How Did We Get Here?</h3>
<div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Blog Post:</strong> <a href="https://afabrega.com/my-blog/the-origin-of-the-modern-school-system">The Origin of the Modern School System</a></li>
</ul>
</div>
</div>
<p>This chapter traces the historical development of the education system, revealing the origins of its flaws:</p>
<ul>
<li><strong>Prussia:</strong>
<ul>
<li>The modern school system originated in Prussia, designed to create loyal, literate soldiers after their defeat by Napoleon.</li>
<li>This model emphasized standardized curriculum, teacher certification, and mandated attendance, prioritizing obedience and indoctrination.</li>
</ul></li>
<li><strong>The USA:</strong>
<ul>
<li>In the 20th century, the focus shifted from training soldiers to producing factory managers, leading to the adoption of the “factory model” in American schools.</li>
<li>This model emphasized standardization, efficiency, age-based grouping, specialized teachers, and long school days, mirroring the assembly line approach.</li>
<li>This model has yielded disappointing results, with stagnant test scores, declining public confidence, and a disconnect from real-world success.</li>
</ul></li>
</ul>
<p>This historical context reveals how the education system prioritizes state and industrial needs over genuine learning, leading to the current instruction-based model.</p>
</section>
<section id="chapter-3-how-tests-and-rewards-go-wrong" class="level3">
<h3 class="anchored" data-anchor-id="chapter-3-how-tests-and-rewards-go-wrong">Chapter 3: How Tests and Rewards Go Wrong</h3>
<p>This chapter examines the detrimental effects of standardized testing and extrinsic rewards:</p>
<ul>
<li><strong>Standardized Tests:</strong>
<ul>
<li>Initially designed to measure student progress, standardized tests have become the primary focus of education, leading to several negative consequences.</li>
<li>They create stressful learning environments, compromise mental health, do not accurately reflect real-world success, and incentivize cheating.</li>
</ul></li>
<li><strong>Extrinsic Rewards:</strong>
<ul>
<li>Schools rely on extrinsic rewards like pizza parties or prizes, offering short-term motivation but undermining long-term engagement.</li>
<li>Extrinsic motivators create dependence on external validation, hindering the development of intrinsic motivation.</li>
</ul></li>
</ul>
<p>The chapter suggests alternative assessment methods, including portfolios and projects, and emphasizes the importance of intrinsic motivation, encouraging:</p>
<ul>
<li>Providing choices and fostering accountability.</li>
<li>Involving children in decision-making.</li>
<li>Offering specific feedback that focuses on effort and the learning process, not just outcomes.</li>
<li>Engaging in “why” conversations to connect learning to real-world relevance and purpose.</li>
<li>Prioritizing fun and intrinsic enjoyment in the learning process.</li>
</ul>
</section>
<section id="chapter-4-lessons-to-unlearn-from-school" class="level3">
<h3 class="anchored" data-anchor-id="chapter-4-lessons-to-unlearn-from-school">Chapter 4: Lessons to Unlearn from School</h3>
<p>This chapter highlights five counterproductive lessons learned in traditional school that need to be unlearned:</p>
<ol type="1">
<li><strong>Fearing Mistakes:</strong> Shift from penalizing errors to embracing them as valuable learning opportunities.</li>
<li><strong>Fitting In:</strong> Encourage individuality, divergent thinking, and “coloring outside the lines” over conformity and seeking validation through sameness.</li>
<li><strong>Waiting for Instructions:</strong> Cultivate problem-solving skills, resourcefulness, and the ability to learn independently without relying on constant direction.</li>
<li><strong>Learning Just in Case:</strong> Embrace “learning on demand,” where knowledge and skills are acquired as needed, driven by curiosity and real-world application.</li>
<li><strong>Fear of Questioning Authority:</strong> Foster critical thinking, challenging assumptions, and seeking evidence-based answers over blind acceptance of authority.</li>
</ol>
</section>
<section id="chapter-5-the-game-of-school" class="level3">
<h3 class="anchored" data-anchor-id="chapter-5-the-game-of-school">Chapter 5: The Game of School</h3>
<p>This chapter contrasts the “game of school,” characterized by compliance and seeking external validation, with the “learning game,” emphasizing:</p>
<ul>
<li><strong>Game of School:</strong> Mastering the system through superficial engagement, prioritizing grades over true understanding, and focusing on short-term performance.</li>
<li><strong>Learning Game:</strong> Embracing curiosity-driven exploration, taking ownership of the learning process, valuing the journey of discovery over external rewards.</li>
</ul>
<p>The chapter advocates for guiding children towards the learning game, fostering intrinsic motivation, and equipping them with the skills and mindset to become lifelong learners.</p>
</section>
</section>
<section id="part-2-how-kids-learn" class="level2">
<h2 class="anchored" data-anchor-id="part-2-how-kids-learn">Part 2: How Kids Learn</h2>
<section id="chapter-6-learning-to-love-learning" class="level3">
<h3 class="anchored" data-anchor-id="chapter-6-learning-to-love-learning">Chapter 6: Learning to Love Learning</h3>
<ul>
<li><strong>Separating Work and Play:</strong> Traditional education often separates learning from joy by framing schoolwork as “real work” and personal projects as mere play. This undermines the potential for genuine learning that blossoms when children are intrinsically motivated.</li>
<li><strong>The Power of Personal Projects:</strong>
<ul>
<li>Personal projects, like building a tree house, offer opportunities for children to engage deeply in learning experiences they direct themselves. This mirrors the work of innovators like Darwin and Newton, whose successes stemmed from pursuing their own curiosities.</li>
<li>Examples like Mark Zuckerberg, Elon Musk, and Jenny Britton Bauer illustrate that groundbreaking achievements often arise from intensely pursuing personal passions, even if they fall outside traditional academic paths.</li>
<li><strong>Vuja De:</strong> Seeing a familiar situation with a fresh perspective that leads to new insights.</li>
<li><strong>Recommendation:</strong> Encourage children to pursue their own projects. Help them see these endeavors as valuable learning experiences, fostering their passions and cultivating a love for learning.</li>
</ul></li>
</ul>
</section>
<section id="chapter-7-story-driven-learning" class="level3">
<h3 class="anchored" data-anchor-id="chapter-7-story-driven-learning">Chapter 7: Story-Driven Learning</h3>
<ul>
<li><p><strong>The Power of Stories:</strong> Humans are naturally wired to learn through stories. Stories make abstract concepts concrete, provide relatable examples, and offer memorable narratives that engage our emotions and enhance recall.</p></li>
<li><p><strong>Learning from Role Models:</strong> Stories provide us with heroes to admire and emulate. By connecting with the experiences of individuals who have mastered specific skills or concepts, we can find inspiration and practical strategies for our own learning journeys.</p>
<ul>
<li><div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Newsletter:</strong> <a href="https://www.readtheprofile.com/t/interviews">The Profile - Interviews</a>
<ul>
<li>Interviews Polina Pompliano, offering stories of unique individuals for learning.</li>
</ul></li>
</ul>
</div>
</div></li>
</ul></li>
<li><p><strong>How to Use Story-Driven Learning:</strong></p>
<ul>
<li>Identify individuals who embody the skills or knowledge you want to acquire. Explore their stories through books, articles, documentaries, or podcasts.</li>
<li>Connect the abstract concepts to the practical applications demonstrated in the individual’s life. For example, learn about decision-making through the story of a successful poker player who utilizes probability theory.</li>
<li><strong>Recommendation:</strong> Encourage children to explore topics they’re interested in through stories. Help them find biographies, documentaries, or articles about people who excel in those areas. This makes learning relatable and engaging.</li>
</ul></li>
</ul>
</section>
<section id="chapter-8-learning-through-memorization" class="level3">
<h3 class="anchored" data-anchor-id="chapter-8-learning-through-memorization">Chapter 8: Learning Through Memorization</h3>
<ul>
<li><p><strong>Rethinking Memorization in the Digital Age:</strong> With information readily accessible, rote memorization of isolated facts holds less importance. Instead, prioritize understanding fundamental concepts, developing critical thinking skills, and building a foundation of applicable knowledge.</p></li>
<li><p><strong>Pair Memory with Meaning:</strong></p>
<ul>
<li>Encourage understanding the “why” behind the “what.” Simply memorizing facts without comprehending their meaning limits genuine learning and the ability to apply knowledge effectively.</li>
</ul></li>
<li><p><strong>Focus on Essential Knowledge:</strong></p>
<ul>
<li>Prioritize memorizing information with practical, real-world application over trivial facts easily retrieved online. Focus on concepts crucial for decision-making and understanding how the world works.</li>
</ul></li>
<li><p><strong>Effective Memorization Techniques:</strong></p>
<ul>
<li><p><strong>Memory Palace:</strong> This technique leverages our natural ability to remember places and vivid imagery.</p>
<ol type="1">
<li>Imagine a familiar location (e.g., your childhood home).</li>
<li>Associate items to be memorized with specific locations within this “palace” (e.g., placing grocery items in different rooms).</li>
<li>Create unusual, memorable scenes involving these items (e.g., apples singing in the mailbox).</li>
<li>To recall the items, mentally walk through the “palace” and retrieve the vivid associations.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Blog Post:</strong> <a href="https://artofmemory.com/blog/how-to-build-a-memory-palace/">How to Build a Memory Palace</a></li>
<li><strong>Book:</strong> <a href="https://joshuafoer.com/moonwalking-with-einstein/">Moonwalking with Einstein</a></li>
</ul>
</div>
</div></li>
</ul></li>
<li><p><strong>Recommendation:</strong> Teach children effective memorization techniques like the Memory Palace method. This makes memorization more engaging and helps them retain important information.</p></li>
</ul>
</section>
<section id="chapter-9-the-learning-style-myth" class="level3">
<h3 class="anchored" data-anchor-id="chapter-9-the-learning-style-myth">Chapter 9: The Learning Style Myth</h3>
<ul>
<li><strong>Challenging the Myth:</strong> The notion that individuals have one dominant learning style (visual, auditory, kinesthetic) lacks scientific support. Sensory modalities are interconnected, and we learn best by engaging multiple senses simultaneously.</li>
<li><strong>Problems with Learning Styles:</strong>
<ul>
<li><strong>No Single Style:</strong> We do not have a single, fixed learning style. Preferences can vary depending on the context and the type of information being processed.</li>
<li><strong>Ineffective Customization:</strong> Tailoring teaching to supposed learning styles does not improve learning outcomes.</li>
<li><strong>Fixed Mindset:</strong> Labeling children as specific learner types can foster limiting beliefs about their abilities.</li>
</ul></li>
<li><strong>Recommendations:</strong>
<ul>
<li><strong>Debunk the Myth:</strong> Help children understand they don’t have just one learning style.</li>
<li><strong>Embrace Flexibility:</strong> Emphasize that learning preferences are adaptable and can change based on the situation.</li>
<li><strong>Encourage a Diverse Toolkit:</strong> Help children develop a range of learning strategies and encourage them to identify the most effective tools for different tasks.</li>
<li><strong>Provide Multi-Sensory Experiences:</strong> Offer diverse learning opportunities that engage multiple senses.</li>
</ul></li>
</ul>
</section>
<section id="chapter-10-confusion-sparks-curiosity" class="level3">
<h3 class="anchored" data-anchor-id="chapter-10-confusion-sparks-curiosity">Chapter 10: Confusion Sparks Curiosity</h3>
<ul>
<li><p><strong>Embracing Confusion:</strong> Instead of viewing confusion as a negative experience, reframe it as an opportunity for growth. Cognitive disequilibrium, the feeling of discomfort when encountering new information, drives us to seek answers and deepen our understanding.</p>
<ul>
<li><div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Psychological Concept:</strong> <a href="https://link.springer.com/referenceworkentry/10.1007/978-0-387-79061-9_598">Cognitive disequilibrium</a></li>
</ul>
</div>
</div></li>
</ul></li>
<li><p><strong>Benefits of Confusion:</strong></p>
<ul>
<li><strong>Deeper Processing:</strong> Confusion prompts us to engage more deeply with information to resolve inconsistencies with our existing knowledge.</li>
<li><strong>Curiosity and Motivation:</strong> Confusion can spark curiosity, leading to increased motivation and engagement in the learning process.</li>
</ul></li>
<li><p><strong>Learning Through Connections:</strong> Present new information within a relevant context to help children see the connections between different subjects and real-world applications.</p></li>
<li><p><strong>A Case Study: Synthesis:</strong> The Synthesis class at Ad Astra School, founded by Elon Musk, uses simulations and challenges to help kids embrace confusion and develop problem-solving skills.</p>
<ul>
<li><div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Learning Platform:</strong> <a href="https://www.synthesis.com/">Synthesis</a></li>
</ul>
</div>
</div></li>
</ul></li>
<li><p><strong>Principles for Exploring Confusion:</strong></p>
<ul>
<li><strong>Expose Kids to Challenges:</strong> Encourage them to tackle challenging problems and unfamiliar situations.</li>
<li><strong>Reframe Confusion:</strong> Help children view confusion as a positive step in the learning process, not a sign of failure.</li>
<li><strong>Support Productive Struggle:</strong> Provide guidance and support, but allow children to grapple with challenges and discover solutions independently.</li>
</ul></li>
<li><p><strong>Recommendation:</strong> Create learning environments that embrace confusion and encourage experimentation. Encourage children to view challenges as exciting opportunities for growth.</p></li>
</ul>
</section>
</section>
<section id="part-3-the-power-of-games" class="level2">
<h2 class="anchored" data-anchor-id="part-3-the-power-of-games">Part 3: The Power of Games</h2>
<section id="chapter-11-the-architecture-of-great-games" class="level3">
<h3 class="anchored" data-anchor-id="chapter-11-the-architecture-of-great-games">Chapter 11: The Architecture of Great Games</h3>
<p>This chapter explores how to leverage game design principles to enhance learning experiences.</p>
<section id="why-games-captivate-the-power-of-flow" class="level4">
<h4 class="anchored" data-anchor-id="why-games-captivate-the-power-of-flow">Why Games Captivate: The Power of Flow</h4>
<ul>
<li><strong>Engagement and Flow:</strong> Games captivate players by inducing a state of “flow,” characterized by:
<ul>
<li>Clear goals</li>
<li>Unambiguous feedback</li>
<li>Goldilocks challenge level (not too easy, not too hard)</li>
</ul></li>
<li><strong>Flow fosters intrinsic motivation</strong>, where enjoyment stems from the activity itself, not external rewards.</li>
<li><strong>Games vs.&nbsp;Classrooms:</strong> Traditional classrooms often lack the elements needed for flow:
<ul>
<li>Unclear goals</li>
<li>Ambiguous feedback</li>
<li>One-size-fits-all challenges</li>
</ul></li>
</ul>
</section>
<section id="beyond-pointsification-true-gamification" class="level4">
<h4 class="anchored" data-anchor-id="beyond-pointsification-true-gamification">Beyond Pointsification: True Gamification</h4>
<ul>
<li><strong>Pointsification:</strong> Superficial use of game elements (points, badges, leaderboards) that relies on external motivation. While it may yield short-term results, it’s unsustainable and doesn’t cultivate a genuine love for learning.</li>
<li><strong>True Gamification:</strong> Understanding and integrating what makes games truly engaging:
<ul>
<li><strong>Meaningful challenges:</strong> Aligned with players’ genuine interests.</li>
<li><strong>Immersive experiences:</strong> Capable of inducing a flow state.</li>
</ul></li>
</ul>
<section id="example-new-york-public-library" class="level5">
<h5 class="anchored" data-anchor-id="example-new-york-public-library">Example: New York Public Library</h5>
<ul>
<li><strong>Challenge:</strong> Attract young people to physical libraries in the digital age.</li>
<li><strong>Solution:</strong> A game that turns participants into published authors by locking them in the library overnight with the challenge of writing a book.</li>
<li><strong>Result:</strong> Participants found the challenge meaningful, enjoyed their time at the library, and developed a newfound appreciation for the space.</li>
</ul>
</section>
</section>
<section id="the-super-mario-effect-embracing-failure" class="level4">
<h4 class="anchored" data-anchor-id="the-super-mario-effect-embracing-failure">The Super Mario Effect: Embracing Failure</h4>
<ul>
<li><strong>Reframing Failure:</strong> Games encourage persistence despite repeated failures. Players focus on the ultimate goal, viewing mistakes as part of the learning process.</li>
<li><strong>The Super Mario Effect:</strong> Prioritizing the end goal over the fear of failure.</li>
<li><strong>Shifting Focus in Education:</strong> From grades to mastery, from penalizing mistakes to encouraging iterative learning.</li>
</ul>
</section>
<section id="the-benefits-of-video-games" class="level4">
<h4 class="anchored" data-anchor-id="the-benefits-of-video-games">The Benefits of Video Games</h4>
<ul>
<li><strong>Developing Thinking Skills:</strong> Games are simulations that provide a safe space to practice problem-solving and strategic thinking.</li>
<li><strong>Fostering Self-Directed Learning:</strong> Games empower players to learn at their own pace, explore their interests, and develop a growth mindset.</li>
</ul>
</section>
</section>
<section id="chapter-12-the-psychology-of-healthy-gaming" class="level3">
<h3 class="anchored" data-anchor-id="chapter-12-the-psychology-of-healthy-gaming">Chapter 12: The Psychology of Healthy Gaming</h3>
<p>This chapter delves into the motivations behind children’s screen time and offers strategies for fostering healthy technology use.</p>
<section id="understanding-motivation-self-determination-theory" class="level4">
<h4 class="anchored" data-anchor-id="understanding-motivation-self-determination-theory">Understanding Motivation: Self-Determination Theory</h4>
<ul>
<li><p><strong>Three Basic Needs:</strong> Humans are driven by the need for:</p>
<ul>
<li><strong>Autonomy:</strong> Making our own choices.</li>
<li><strong>Competency:</strong> Developing skills and knowledge.</li>
<li><strong>Relatedness:</strong> Connecting with others.</li>
</ul></li>
<li><p><strong>The Online Appeal:</strong> The digital world often provides kids with more opportunities to satisfy these needs than traditional environments like schools.</p></li>
<li><div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Book:</strong> <a href="https://www.nirandfar.com/indistractable/">Indistractable: How to Control Your Attention and Choose Your Life</a></li>
</ul>
</div>
</div></li>
</ul>
</section>
<section id="motivation-school-vs.-online" class="level4">
<h4 class="anchored" data-anchor-id="motivation-school-vs.-online">Motivation: School vs.&nbsp;Online</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 10%">
<col style="width: 41%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th>Need</th>
<th>School</th>
<th>Online</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Autonomy</td>
<td>Strict rules, limited choices</td>
<td>Freedom to choose, less adult control</td>
</tr>
<tr class="even">
<td>Competency</td>
<td>Standardized learning, limited agency</td>
<td>Personalized learning, self-directed exploration</td>
</tr>
<tr class="odd">
<td>Relatedness</td>
<td>Structured interactions, limited free time</td>
<td>Easy to connect with like-minded peers</td>
</tr>
</tbody>
</table>
</section>
<section id="navigating-screen-time-7-tactics-for-parents" class="level4">
<h4 class="anchored" data-anchor-id="navigating-screen-time-7-tactics-for-parents">Navigating Screen Time: 7 Tactics for Parents</h4>
<ol type="1">
<li><strong>Discuss Pros and Cons:</strong> Have open conversations about technology’s benefits and drawbacks.</li>
<li><strong>Show Empathy:</strong> Validate children’s feelings and acknowledge their struggle with limits.</li>
<li><strong>Share Your Own Challenges:</strong> Model healthy tech habits and be transparent about your own struggles.</li>
<li><strong>Collaborate on Boundaries:</strong> Involve children in setting screen time limits to foster a sense of ownership.</li>
<li><strong>Offer Offline Fulfillment:</strong> Provide ample opportunities for play, socializing, and pursuing passions offline.</li>
<li><strong>Encourage Creation over Consumption:</strong> Promote active engagement with technology through learning, making, and connecting.</li>
<li><strong>Provide a Better Yes:</strong> Ensure that saying no to screens means saying yes to something more engaging and fulfilling.</li>
</ol>
</section>
<section id="healthy-gaming-4-tactics" class="level4">
<h4 class="anchored" data-anchor-id="healthy-gaming-4-tactics">Healthy Gaming: 4 Tactics</h4>
<ol type="1">
<li><strong>Focus on Purposeful Play:</strong> Encourage gaming with a goal beyond escapism, such as socializing, learning, or skill-building.</li>
<li><strong>Maintain a Healthy Limit:</strong> Keep gaming under 21 hours per week to maximize benefits and minimize potential negative effects.</li>
<li><strong>Reverse the Order:</strong> Encourage studying after gaming to capitalize on the brain’s tendency to consolidate learning during sleep.</li>
<li><strong>Choose Social Over Competitive:</strong> Limit competitive play against strangers, emphasizing cooperative games or competing with known individuals.</li>
</ol>
</section>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">Conclusion</h3>
<p>By understanding the psychological needs driving children’s tech use and applying game design principles thoughtfully, parents and educators can harness the power of games to foster learning, creativity, and healthy development.</p>
</section>
</section>
<section id="part-4-raising-successful-kids" class="level2">
<h2 class="anchored" data-anchor-id="part-4-raising-successful-kids">Part 4: Raising Successful Kids</h2>
<section id="chapter-13-skin-in-the-game" class="level3">
<h3 class="anchored" data-anchor-id="chapter-13-skin-in-the-game">Chapter 13: Skin in the Game</h3>
<div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Book:</strong> <a href="https://www.penguinrandomhouse.com/books/537828/skin-in-the-game-by-nassim-nicholas-taleb/">Skin in the Game: Hidden Asymmetries in Daily Life</a></li>
</ul>
</div>
</div>
<section id="skin-in-the-game-for-kids" class="level4">
<h4 class="anchored" data-anchor-id="skin-in-the-game-for-kids">Skin in the Game for Kids</h4>
<ul>
<li><strong>Traditional school provides limited “skin in the game”:</strong> While grades offer some accountability, they lack relevance to the real world.</li>
<li><strong>Real-world problem-solving offers higher stakes:</strong> Children crave opportunities to tackle meaningful challenges with tangible outcomes.</li>
<li><strong>Benefits of Skin in the Game:</strong>
<ul>
<li><strong>Enhanced Learning:</strong> High stakes increase focus, motivation, and information retention.</li>
<li><strong>Memorable Experiences:</strong> Lessons learned through experience stick with us longer.</li>
<li><strong>Increased Engagement:</strong> Real-world application makes learning exciting and meaningful.</li>
</ul></li>
<li><strong>Synthesis - A Case Study:</strong>
<ul>
<li><strong>Conundrums:</strong> Synthesis initially presented complex ethical and practical dilemmas for children to debate.</li>
<li><strong>Simulations:</strong> Evolved to include competitive simulations with real winners and losers, raising the stakes and encouraging strategic thinking and decision-making.</li>
</ul></li>
</ul>
</section>
<section id="skin-in-the-game-for-parents" class="level4">
<h4 class="anchored" data-anchor-id="skin-in-the-game-for-parents">Skin in the Game for Parents</h4>
<ul>
<li><strong>Moving Beyond Outsourcing Education:</strong> Parents need to be active participants in their children’s education, not just rely on schools.</li>
<li><strong>Benefits of Parental Involvement:</strong>
<ul>
<li><strong>Stability for Children:</strong> Consistent support and understanding from someone who knows them well.</li>
<li><strong>Deeper Insights:</strong> Direct involvement provides unparalleled understanding of a child’s strengths, weaknesses, and learning style.</li>
<li><strong>Addressing Learning Gaps:</strong> Personalized attention can fill gaps and tailor the learning experience.</li>
<li><strong>Maximizing Quality Time:</strong> Leverage the formative years to directly impact a child’s future.</li>
</ul></li>
</ul>
</section>
<section id="how-to-increase-parental-involvement" class="level4">
<h4 class="anchored" data-anchor-id="how-to-increase-parental-involvement">How to Increase Parental Involvement:</h4>
<ul>
<li><strong>Explore Educational Options:</strong> Research and experiment with different programs, methods, and schools.</li>
<li><strong>Focus on One Subject:</strong> Start small by teaching a subject at home, even for a couple of hours a week.</li>
<li><strong>Pursue Passion Projects Together:</strong> Engage in activities the child is passionate about, learning and growing alongside them.</li>
<li><strong>Allow for Change:</strong> Be flexible and let children change their minds about activities they dislike.</li>
<li><strong>Take Responsibility:</strong> Avoid blaming teachers or schools when challenges arise, focus on finding solutions.</li>
</ul>
</section>
</section>
<section id="chapter-14-raising-antifragile-kids" class="level3">
<h3 class="anchored" data-anchor-id="chapter-14-raising-antifragile-kids">Chapter 14: Raising Antifragile Kids</h3>
<section id="the-downside-of-overprotection" class="level4">
<h4 class="anchored" data-anchor-id="the-downside-of-overprotection">The Downside of Overprotection:</h4>
<ul>
<li><strong>Shielding from Discomfort:</strong> Constantly protecting children from setbacks, disappointment, and failure hinders their development.</li>
<li><strong>Consequences of Overprotection:</strong>
<ul>
<li><strong>Inability to Handle Setbacks:</strong> Dependence on adults for problem-solving leads to discouragement when facing challenges.</li>
<li><strong>Low Self-Esteem:</strong> Feeling incapable of handling situations independently.</li>
</ul></li>
</ul>
</section>
<section id="the-power-of-anti-fragility" class="level4">
<h4 class="anchored" data-anchor-id="the-power-of-anti-fragility">The Power of Anti-Fragility:</h4>
<ul>
<li><div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Book:</strong> <a href="https://www.penguinrandomhouse.com/books/176227/antifragile-by-nassim-nicholas-taleb/">Antifragile: Things That Gain from Disorder</a></li>
</ul>
</div>
</div></li>
<li><p><strong>Definition:</strong> Antifragility, a term coined by Nassim Taleb, describes things that grow stronger when exposed to stress and randomness.</p></li>
<li><p><strong>Children are Antifragile:</strong> They thrive when allowed to face and overcome moderate challenges.</p></li>
<li><p><strong>Benefits of Embracing Challenges:</strong></p>
<ul>
<li><strong>Resilience:</strong> Developing the ability to bounce back from setbacks.</li>
<li><strong>Independence:</strong> Learning to solve problems and make decisions autonomously.</li>
<li><strong>Self-Confidence:</strong> Gaining belief in their own abilities through facing and overcoming challenges.</li>
</ul></li>
</ul>
</section>
<section id="fostering-antifragility" class="level4">
<h4 class="anchored" data-anchor-id="fostering-antifragility">Fostering Antifragility:</h4>
<ul>
<li><strong>Allow for Natural Consequences:</strong> Resist the urge to constantly intervene and solve problems for children.</li>
<li><strong>Encourage Risk-Taking:</strong> Create opportunities for safe, age-appropriate risks and challenges.</li>
<li><strong>Promote Problem-Solving:</strong> Guide children to find solutions independently before offering assistance.</li>
<li><strong>Model Resilience:</strong> Demonstrate healthy coping mechanisms and a positive attitude towards challenges.</li>
</ul>
</section>
</section>
<section id="chapter-15-how-to-develop-character-like-the-stoics" class="level3">
<h3 class="anchored" data-anchor-id="chapter-15-how-to-develop-character-like-the-stoics">Chapter 15: How to Develop Character Like the Stoics</h3>
<section id="the-importance-of-character-development" class="level4">
<h4 class="anchored" data-anchor-id="the-importance-of-character-development">The Importance of Character Development:</h4>
<ul>
<li><strong>Historical Perspective:</strong> Education in the past emphasized character development and producing virtuous citizens.</li>
<li><strong>Stoicism:</strong> A philosophy that stresses self-control, perseverance, and moral virtue.</li>
<li><strong>Relevancy of Stoicism:</strong> Stoic principles remain relevant today and can guide children towards becoming well-rounded adults.</li>
</ul>
</section>
<section id="the-four-stoic-virtues" class="level4">
<h4 class="anchored" data-anchor-id="the-four-stoic-virtues">The Four Stoic Virtues:</h4>
<ul>
<li><strong>Courage:</strong> Facing adversity with bravery and taking action despite fear.</li>
<li><strong>Temperance:</strong> Practicing moderation and avoiding extremes, finding a balance between recklessness and cowardice.</li>
<li><strong>Justice:</strong> Acting with fairness, honesty, and respect towards others, prioritizing the good of society.</li>
<li><strong>Wisdom:</strong> Applying knowledge and experience to make sound judgments and live a virtuous life.</li>
</ul>
</section>
<section id="four-tactics-for-developing-stoic-virtues" class="level4">
<h4 class="anchored" data-anchor-id="four-tactics-for-developing-stoic-virtues">Four Tactics for Developing Stoic Virtues:</h4>
<ul>
<li><strong>Read Stories of Heroes:</strong> Provide concrete examples of virtuous behavior through inspiring tales from history and mythology.</li>
<li><strong>Focus on What’s Controllable:</strong> Teach children to differentiate between things they can and cannot control and focus their efforts accordingly.</li>
<li><strong>Keep a Virtue Journal:</strong> Encourage self-reflection on how they demonstrate or could have better demonstrated virtues in daily life.</li>
<li><strong>Virtue as a Muscle:</strong> Explain that character strengthens over time with consistent effort and reflection, just like physical muscles.</li>
</ul>
</section>
</section>
<section id="chapter-16-range-and-specific-knowledge" class="level3">
<h3 class="anchored" data-anchor-id="chapter-16-range-and-specific-knowledge">Chapter 16: Range and Specific Knowledge</h3>
<section id="helping-kids-develop-range" class="level4">
<h4 class="anchored" data-anchor-id="helping-kids-develop-range">Helping Kids Develop Range</h4>
<ul>
<li><div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Book:</strong> <a href="https://davidepstein.com/range/">Range: Why Generalists Triumph in a Specialized World</a></li>
</ul>
</div>
</div></li>
<li><p><strong>Early Specialization vs.&nbsp;Range:</strong> While early specialization works in predictable fields, a broad base of knowledge is crucial in our complex world.</p></li>
<li><p><strong>Benefits of Range:</strong> Adaptability, creativity, and the ability to draw on diverse experiences to solve problems.</p></li>
<li><p><strong>Developing Range:</strong></p>
<ul>
<li><strong>Sampling Period:</strong> Encourage trying new activities without pressure to commit long-term.</li>
<li><strong>Unstructured Play:</strong> Foster imagination, creativity, and autonomy through play without predefined goals or adult direction.</li>
<li><strong>Self-Reflection:</strong> Prompt reflection on experiences to identify preferences, strengths, and areas for growth.</li>
<li><strong>Diverse Learning Diet:</strong> Expose children to various subjects, cultures, and ways of thinking through books, museums, travel, etc.</li>
</ul></li>
</ul>
</section>
<section id="discovering-specific-knowledge" class="level4">
<h4 class="anchored" data-anchor-id="discovering-specific-knowledge">Discovering Specific Knowledge:</h4>
<ul>
<li><strong>Definition:</strong> The unique combination of traits, experiences, and passions that allow an individual to make a unique contribution to the world.</li>
<li><strong>Identifying Specific Knowledge:</strong>
<ul>
<li><strong>Observe Natural Abilities:</strong> Pay attention to activities children excel at effortlessly or find intrinsically rewarding.</li>
<li><strong>Explore Passions:</strong> Encourage deep dives into subjects that spark their curiosity and enthusiasm.</li>
<li><strong>Embrace Late Blooming:</strong> Recognize that specific knowledge often emerges over time through exploration and experimentation.</li>
</ul></li>
</ul>
</section>
<section id="helping-kids-develop-specific-knowledge" class="level4">
<h4 class="anchored" data-anchor-id="helping-kids-develop-specific-knowledge">Helping Kids Develop Specific Knowledge:</h4>
<ul>
<li><strong>Focus on Play, Not Pressure:</strong> Avoid forcing specific knowledge; it should arise organically from genuine interest and enjoyment.</li>
<li><strong>Encourage Exploration:</strong> Provide space, resources, and support for children to pursue their passions.</li>
<li><strong>Guide, Don’t Control:</strong> Offer gentle guidance and mentorship without dictating their path.</li>
<li><strong>Build a Strong Foundation:</strong> Ensure a broad base of knowledge and skills (range) to provide context and fuel for discovering specific knowledge.</li>
</ul>
</section>
</section>
<section id="chapter-17-the-art-of-failing-and-quitting" class="level3">
<h3 class="anchored" data-anchor-id="chapter-17-the-art-of-failing-and-quitting">Chapter 17: The Art of Failing and Quitting</h3>
<div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Book:</strong> <a href="https://www.johnholtgws.com/shop/p/how-children-fail">How Children Fail</a></li>
</ul>
</div>
</div>
<section id="the-art-of-failure" class="level4">
<h4 class="anchored" data-anchor-id="the-art-of-failure">The Art of Failure:</h4>
<ul>
<li><strong>Reframing Failure:</strong> Shift from viewing failure as negative to seeing it as a necessary step in the learning process.</li>
<li><strong>Benefits of Embracing Failure:</strong>
<ul>
<li><strong>Innovation and Progress:</strong> Failure often precedes breakthroughs and discoveries.</li>
<li><strong>Learning from Mistakes:</strong> Analyzing failures helps us refine our approaches and make better decisions in the future.</li>
</ul></li>
<li><strong>Encouraging Constructive Failure:</strong>
<ul>
<li><strong>Provide Opportunities for Small Failures:</strong> Create safe spaces for experimentation and risk-taking.</li>
<li><strong>Celebrate Failure as a Learning Experience:</strong> Encourage reflection and identify takeaways from setbacks.</li>
<li><strong>Model Healthy Self-Talk:</strong> Demonstrate positive self-talk and reframing negative thoughts after setbacks.</li>
<li><strong>Share Personal Failures:</strong> Show vulnerability by openly discussing your own experiences with failure.</li>
<li><strong>Highlight Stories of Resilience:</strong> Emphasize that many successful people overcame significant failures.</li>
</ul></li>
</ul>
</section>
<section id="the-art-of-quitting" class="level4">
<h4 class="anchored" data-anchor-id="the-art-of-quitting">The Art of Quitting:</h4>
<ul>
<li><div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Talk:</strong> <a href="https://www.youtube.com/watch?v=D73mm29XXAw">Prof Deepak Malhotra - HBS - 2012 Speech to Graduating Harvard MBA Students</a></li>
</ul>
</div>
</div></li>
<li><p><strong>Rethinking Quitting:</strong> Recognize quitting as a valuable tool for redirecting effort towards more fulfilling and impactful pursuits.</p></li>
<li><p><strong>Benefits of Quitting:</strong></p>
<ul>
<li><strong>Time Management:</strong> Free up time and energy to focus on activities that align with strengths and passions.</li>
<li><strong>Pursuing Specific Knowledge:</strong> Allowing children to disengage from unfulfilling activities helps them hone in on their unique talents.</li>
</ul></li>
<li><p><strong>Developing Healthy Quitting Habits:</strong></p>
<ul>
<li><strong>Establish Clear Quitting Principles:</strong> Help children differentiate between valid and invalid reasons for quitting (e.g., lack of interest vs.&nbsp;temporary difficulty).</li>
<li><strong>Encourage Reflection:</strong> Guide them to reflect on their experiences and articulate their reasons for wanting to quit.</li>
<li><strong>Support Decision-Making:</strong> Empower children to make informed choices about continuing or quitting activities.</li>
</ul></li>
</ul>
</section>
<section id="the-one-question-to-avoid" class="level4">
<h4 class="anchored" data-anchor-id="the-one-question-to-avoid">The One Question to Avoid:</h4>
<ul>
<li><strong>“What do you want to be when you grow up?”:</strong> This question is limiting, outdated, and potentially harmful.</li>
<li><strong>Why It’s Problematic:</strong>
<ul>
<li><strong>Fixed Mindset:</strong> Implies a single, predetermined path and discourages exploration.</li>
<li><strong>Limited Vision:</strong> Many future jobs haven’t been invented yet, and children’s interests evolve over time.</li>
<li><strong>Single Identity:</strong> People often have multiple careers and passions throughout their lives.</li>
</ul></li>
</ul>
</section>
<section id="better-alternatives" class="level4">
<h4 class="anchored" data-anchor-id="better-alternatives">Better Alternatives:</h4>
<ul>
<li><p><strong>“What do you love to do?”:</strong> Focus on uncovering passions and interests rather than job titles.</p></li>
<li><p><strong>“What are you curious about?”</strong>: Encourage exploration and a love of learning.</p></li>
<li><p><strong>Present Careers as Actions:</strong> Frame careers as verbs (things people do) instead of nouns (fixed identities).</p>
<ul>
<li><div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Book:</strong> <a href="https://adamgrant.net/book/think-again/">Think Again: The Power of Knowing What You Don’t Know</a></li>
</ul>
</div>
</div></li>
</ul></li>
</ul>
</section>
</section>
<section id="conclusion-1" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-1">Conclusion</h3>
<p>Raising successful children requires a shift from traditional models. We must empower children to face challenges, make decisions, and develop resilience through skin in the game. Parents should actively engage in their children’s education, guiding them to cultivate both range and specific knowledge. By embracing failure and quitting as valuable learning opportunities, we can help children discover their passions, hone their unique talents, and ultimately lead fulfilling and impactful lives.</p>
</section>
</section>
<section id="part-5-the-model-parent" class="level2">
<h2 class="anchored" data-anchor-id="part-5-the-model-parent">Part 5: The Model Parent</h2>
<section id="chapter-18-mental-models-for-parents" class="level3">
<h3 class="anchored" data-anchor-id="chapter-18-mental-models-for-parents">Chapter 18: Mental Models for Parents</h3>
<p>This chapter emphasizes the power of <strong>mental models</strong> in parenting.</p>
<p><strong>What are mental models?</strong></p>
<ul>
<li>Mental models are generalized rules of thumb about how the world works, helping us make sense of our experiences.</li>
<li>They act like maps, enabling us to connect information, recognize patterns, and gain a broader perspective for better decision-making.</li>
<li>Mental models are essential for clear, rational, and effective thinking, and they are relevant in various disciplines.</li>
<li>We need a diverse set of mental models from multiple disciplines to understand and navigate the complexities of life.</li>
</ul>
<p><strong>Why are mental models important for parents?</strong></p>
<ul>
<li>Parenting presents constantly evolving challenges with children’s ever-changing needs and an overwhelming amount of (often conflicting) advice.</li>
<li>Mental models provide a framework for processing information, evaluating options, and responding effectively to children’s behavior.</li>
</ul>
<p><strong>Five Mental Models for Parents:</strong></p>
<ol type="1">
<li><strong>Maslow’s Hammer:</strong> Avoid relying on a single parenting tactic (like a hammer seeing every problem as a nail). Children need diverse approaches as they grow and face new challenges.</li>
<li><strong>Reactance:</strong> Recognize that pressure often breeds resistance. Giving children autonomy and choices, rather than imposing our will, can be more effective.</li>
<li><strong>Nudges:</strong> Instead of just lecturing, create environments that naturally nudge children toward positive choices. For example, make healthy snacks more accessible than unhealthy ones.</li>
<li><strong>Reframing:</strong> Help children reframe challenges by shifting their perspective. Encourage them to find positive aspects or opportunities within difficult situations.</li>
<li><strong>Inversion:</strong> Teach children to approach problems by considering the opposite perspective (what they <em>don’t</em> want), then work backward to identify desirable actions.</li>
</ol>
<p><strong>Building Your Own Mental Models:</strong></p>
<div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong><a href="https://fs.blog/">Farnham Street</a>:</strong> Organization offering resources and a course on mental models, including those relevant to parenting.
<ul>
<li><strong>Article:</strong> <a href="https://fs.blog/mental-models/">Mental Models: The Best Way to Make Intelligent Decisions (~100 Models Explained)</a></li>
</ul></li>
<li><strong>Superthinking by Gabriel Weinberg and Loring McCann:</strong> Book exploring over 100 mental models and their practical applications.
<ul>
<li><strong>Book:</strong> <a href="https://www.penguinrandomhouse.com/books/562923/super-thinking-by-gabriel-weinberg-and-lauren-mccann/">Super Thinking: The Big Book of Mental Models</a></li>
</ul></li>
</ul>
</div>
</div>
<ul>
<li><p><strong>Practice:</strong> Observe your child’s behavior for patterns, connect the dots with past experiences, and identify recurring themes.</p></li>
<li><p><strong>Document:</strong> Keep notes on your child’s behavior and your responses to recognize long-term trends and develop child-specific mental models.</p></li>
<li><p><strong>Use Checklists:</strong> Create checklists of strategies for common challenges, experiment to find what works, and update them as your child grows.</p></li>
</ul>
</section>
<section id="chapter-19-the-thinking-toolkit" class="level3">
<h3 class="anchored" data-anchor-id="chapter-19-the-thinking-toolkit">Chapter 19: The Thinking Toolkit</h3>
<p>This chapter argues that good thinking is a skill set anyone can develop. It focuses on three thinking tools:</p>
<section id="the-thinking-hats" class="level4">
<h4 class="anchored" data-anchor-id="the-thinking-hats">The Thinking Hats</h4>
<div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Book:</strong> <a href="https://www.debono.com/Books/teach-your-child-how-to-think">Teach Your Child How To Think</a></li>
<li><strong>Book:</strong> <a href="https://www.debono.com/Books/six-thinking-hats">Six Thinking Hats</a></li>
</ul>
</div>
</div>
<p>Developed by Edward de Bono, the Six Thinking Hats encourage a well-rounded thinking process:</p>
<ol type="1">
<li><strong>White Hat (Facts):</strong> Focuses on objective information, gathering data, and identifying what’s known and unknown.</li>
<li><strong>Red Hat (Emotions):</strong> Explores feelings, intuitions, and emotional responses related to the situation.</li>
<li><strong>Black Hat (Caution):</strong> Engages in critical thinking, identifying risks, flaws, and potential downsides.</li>
<li><strong>Yellow Hat (Optimism):</strong> Explores the positive aspects, benefits, and potential advantages.</li>
<li><strong>Green Hat (Creativity):</strong> Encourages brainstorming, out-of-the-box thinking, and exploring new possibilities.</li>
<li><strong>Blue Hat (Metacognition):</strong> Oversees the thinking process itself, monitoring progress, managing the use of other hats, and reflecting on the overall approach.</li>
</ol>
<p><strong>Benefits of Using the Six Thinking Hats:</strong></p>
<ul>
<li><strong>Broadened Perspective:</strong> Helps children see situations from multiple angles instead of fixating on a single viewpoint.</li>
<li><strong>Improved Decision-Making:</strong> Encourages consideration of various factors before reaching a conclusion.</li>
<li><strong>Enhanced Creativity:</strong> Promotes the generation of novel ideas and solutions.</li>
<li><strong>Increased Wisdom:</strong> Develops the habit of thoughtful observation, careful consideration, and balanced judgment.</li>
</ul>
</section>
<section id="thinking-in-bets" class="level4">
<h4 class="anchored" data-anchor-id="thinking-in-bets">Thinking in Bets</h4>
<div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Book:</strong> <a href="https://www.penguinrandomhouse.com/books/552885/thinking-in-bets-by-annie-duke/">Thinking in Bets: Making Smarter Decisions When You Don’t Have All the Facts</a></li>
</ul>
</div>
</div>
<p>This section highlights the importance of probabilistic thinking and making decisions with the understanding that the future is uncertain:</p>
<ul>
<li><strong>Avoid Resulting:</strong> Don’t judge the quality of a decision solely on its outcome, as luck plays a role. Instead, focus on the decision-making process itself.</li>
</ul>
<p><strong>Lessons for Children:</strong></p>
<ol type="1">
<li><strong>Think in Probabilities:</strong> Encourage children to express likelihood in terms of percentages rather than absolutes. Help them understand that multiple outcomes are possible.</li>
<li><strong>Keep an Open Mind:</strong> Promote flexibility and adaptability in thinking. Encourage children to consider various perspectives and be open to changing their minds.</li>
<li><strong>Collaborate:</strong> Facilitate group discussions where children can challenge each other’s thinking, identify biases, and learn from different viewpoints.</li>
<li><strong>Embrace Updates:</strong> Create a safe space for children to reflect on their decisions, acknowledge mistakes, and adjust their beliefs based on new information.</li>
</ol>
</section>
<section id="elastic-thinking" class="level4">
<h4 class="anchored" data-anchor-id="elastic-thinking">Elastic Thinking</h4>
<div class="callout callout-style-default callout-tip callout-titled" title="Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Book:</strong> <a href="https://www.amazon.com/gp/product/0141987391/">Elastic</a></li>
</ul>
</div>
</div>
<p>This section emphasizes the unique human capacity for creative and adaptable thinking:</p>
<p><strong>Three Types of Thinking:</strong></p>
<ol type="1">
<li><strong>Automatic:</strong> Reflexive responses to stimuli (common to most animals).</li>
<li><strong>Analytical:</strong> Logical, step-by-step reasoning (enhanced through education and practiced by computers).</li>
<li><strong>Elastic:</strong> Creative, spontaneous, and adaptable problem-solving in unfamiliar situations.</li>
</ol>
<p><strong>Cultivating Elastic Thinking in Children:</strong></p>
<ul>
<li><strong>Embrace Novelty:</strong> Move away from the rigid, rule-bound structure of traditional schooling.</li>
<li><strong>Encourage Exploration:</strong> Provide ample opportunities for unstructured play, self-directed projects, and experimentation.</li>
<li><strong>Value the Process:</strong> Focus on the journey of discovery and learning from mistakes rather than just achieving a predetermined outcome.</li>
</ul>
</section>
</section>
</section>
<section id="conclusion-design-your-learning-game" class="level2">
<h2 class="anchored" data-anchor-id="conclusion-design-your-learning-game">Conclusion: Design Your Learning Game</h2>
<p>This section offers guidance for parents seeking to create a more engaging and effective learning environment for their children:</p>
<p><strong>Key Takeaways:</strong></p>
<ol type="1">
<li><strong>Encourage Independence:</strong> Avoid over-instruction; give children the space and resources to figure things out for themselves.</li>
<li><strong>Reframe Failure:</strong> Treat mistakes as valuable learning opportunities, not something to fear.</li>
<li><strong>Provide Meaningful Feedback:</strong> Focus praise on effort, ethics, the learning process, and a growth mindset, rather than just outcomes or innate ability.</li>
<li><strong>Grant Autonomy and Accountability:</strong> Involve children in decision-making, treat them like capable individuals, and trust them with responsibility.</li>
<li><strong>Support Passion Projects:</strong> Encourage children to pursue their own interests and devote time to self-directed learning endeavors.</li>
<li><strong>Expand Assessment Methods:</strong> Move beyond standardized tests and grades; embrace diverse ways for children to demonstrate knowledge and skills.</li>
<li><strong>Unlock Intrinsic Motivation:</strong> Minimize reliance on extrinsic rewards; help children discover the joy and satisfaction of learning for its own sake.</li>
<li><strong>Embrace Discomfort:</strong> Teach children to navigate challenges, uncertainty, and the feeling of not fitting in, building resilience.</li>
<li><strong>Allow for Confusion:</strong> Recognize that a healthy dose of confusion can spark curiosity and lead to deeper understanding.</li>
<li><strong>Encourage Questioning:</strong> Cultivate a skeptical mindset; empower children to inquire, seek evidence, and challenge assumptions.</li>
<li><strong>Cherish “Why” Questions:</strong> View these questions as signs of genuine curiosity and a desire to make sense of the world.</li>
<li><strong>Connect with Stories:</strong> Make learning relatable and memorable by tying information to compelling narratives and real-life examples.</li>
<li><strong>Develop Character:</strong> Emphasize ethical decision-making, courage, justice, temperance, and wisdom, drawing inspiration from stories of true heroes.</li>
<li><strong>Go Beyond Memorization:</strong> Focus on understanding concepts, their significance, and how to apply them in real-life scenarios.</li>
<li><strong>Identify and Leverage Strengths:</strong> Help children discover their talents, passions, and learning preferences through exploration and experimentation.</li>
<li><strong>Cultivate Skilled Thinking:</strong> Teach children mental models, critical thinking strategies, and a toolbox of approaches to problem-solving.</li>
<li><strong>Embrace Learning Preferences:</strong> Help children recognize and utilize their preferred learning styles while also expanding their repertoire.</li>
<li><strong>Leverage Video Games:</strong> Recognize the potential of well-designed games to engage children, provide immediate feedback, and teach valuable skills.</li>
<li><strong>Address Online Behavior:</strong> Have open conversations about online habits, finding healthy ways to fulfill the needs met through screen time in the real world.</li>
<li><strong>Gamify Learning (Thoughtfully):</strong> Incorporate game-like elements to make learning more engaging without turning it into a superficial point-gathering system.</li>
<li><strong>Increase Stakes (Safely):</strong> Connect learning to real-world scenarios and challenges, providing a sense of purpose and consequence without life-altering risks.</li>
<li><strong>Engage Deeply:</strong> Be an active participant in your child’s learning journey, understanding their needs, and partnering with them to support their growth.</li>
<li><strong>Utilize Mental Models (Parenting):</strong> Apply the concept of mental models to better understand and respond to your child’s behavior, creating a more harmonious dynamic.</li>
<li><strong>Avoid Overprotection:</strong> Allow your child to face age-appropriate challenges and develop resilience through experience.</li>
<li><strong>Find Balance:</strong> Strive for a balanced approach that encourages both challenge and support, knowing when to push and when to offer guidance and encouragement.</li>
</ol>


</section>

 ]]></description>
  <category>education</category>
  <category>notes</category>
  <guid>https://christianjmills.com/posts/the-learning-game-book-notes/</guid>
  <pubDate>Sat, 03 Aug 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Notes on Dumbing Us Down: The Hidden Curriculum of Compulsory Schooling</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/dumbing-us-down-book-notes/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
These notes are part of the following collection:
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="../../series/notes/education-notes.html"><strong>Education</strong></a></p>
</div>
</div>
<ul>
<li>Executive Summary</li>
<li>About the Author: John Taylor Gatto<br>
</li>
<li>Chapter 1: The Seven-Lesson Schoolteacher<br>
</li>
<li>Chapter 2: The Psychopathic School<br>
</li>
<li>Chapter 3: The Green Monongahela<br>
</li>
<li>Chapter 4: We Need Less School, Not More<br>
</li>
<li>Chapter 5: The Congregational Principle<br>
</li>
<li>Actionable Recommendations</li>
<li>Glossary</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Book LInks:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="https://newsociety.com/books/d/dumbing-us-down-25th-anniversary-edition">Publisher Page</a></li>
</ul>
</div>
</div>
<section id="executive-summary" class="level2">
<h2 class="anchored" data-anchor-id="executive-summary">Executive Summary</h2>
<p>John Taylor Gatto, a former New York State Teacher of the Year, argues that the American compulsory schooling system is inherently flawed, serving as a tool for social control and economic manipulation rather than genuine education.</p>
<p>He outlines seven harmful lessons instilled in students: confusion, class position, indifference, emotional dependency, intellectual dependency, provisional self-esteem, and constant surveillance.</p>
<p>Gatto advocates for a decentralized, community-based approach to education that prioritizes individual growth, self-reliance, and engagement with the real world, drawing inspiration from the successes of homeschooling and the historical model of colonial New England’s congregational principle.</p>
<p>He calls for radical reform, including decertification of teaching, privatization, and a return to family-centric learning.</p>
</section>
<section id="about-the-author-john-taylor-gatto" class="level2">
<h2 class="anchored" data-anchor-id="about-the-author-john-taylor-gatto">About the Author: John Taylor Gatto</h2>
<section id="personal-background-and-influences" class="level3">
<h3 class="anchored" data-anchor-id="personal-background-and-influences">Personal Background and Influences</h3>
<ul>
<li>Gatto draws from his 30-year experience teaching in diverse NYC schools, from affluent Upper West Side to underprivileged Harlem.</li>
<li>His upbringing in Monongahela, Pennsylvania, a tight-knit, working-class town, instilled in him a strong sense of community and self-reliance.</li>
<li>Contrasting the values of his hometown with the impersonal nature of Manhattan fueled his critical perspective on societal structures.</li>
<li>His grandfather, the town printer and former newspaper publisher, fostered Gatto’s independent thinking and provided valuable life lessons.</li>
</ul>
</section>
<section id="classroom-as-a-laboratory" class="level3">
<h3 class="anchored" data-anchor-id="classroom-as-a-laboratory">Classroom as a Laboratory</h3>
<ul>
<li>Gatto views his classrooms as spaces to observe and study the full spectrum of human potential and the factors that influence its expression.</li>
<li>He challenges the notion of intelligence as a normally distributed trait, having witnessed remarkable abilities in the most unexpected students.</li>
<li>This led him to question if the very structure of schooling, with its rigid schedules, constant monitoring, and lack of autonomy, stifles natural learning.</li>
</ul>
</section>
<section id="guerilla-exercises-to-empower-students" class="level3">
<h3 class="anchored" data-anchor-id="guerilla-exercises-to-empower-students">Guerilla Exercises to Empower Students</h3>
<ul>
<li>Gatto implements unconventional teaching methods that prioritize student freedom and self-directed learning:
<ul>
<li>Provides privacy and reduces surveillance</li>
<li>Offers choices in learning activities</li>
<li>Creates diverse learning environments and social interactions</li>
</ul></li>
<li>He aims to empower students to become their own teachers and shape their own education.</li>
</ul>
</section>
<section id="teaching-as-sculpture-not-painting" class="level3">
<h3 class="anchored" data-anchor-id="teaching-as-sculpture-not-painting">Teaching as Sculpture, Not Painting</h3>
<ul>
<li>Gatto uses the analogy of sculpture to describe his teaching philosophy:
<ul>
<li><strong>Traditional teaching:</strong> Like painting, it focuses on adding information onto a blank canvas (the student’s mind).</li>
<li><strong>Gatto’s approach:</strong> Like sculpting, it involves removing barriers that prevent inherent potential from emerging.</li>
</ul></li>
<li>He shifted away from seeing himself as the expert filling empty vessels to recognizing the innate abilities within each child.</li>
</ul>
</section>
<section id="threats-to-the-system" class="level3">
<h3 class="anchored" data-anchor-id="threats-to-the-system">Threats to the System</h3>
<ul>
<li>Gatto believes his teaching philosophy poses two major threats:
<ul>
<li><strong>To the school system:</strong> It challenges the fundamental assumptions that underpin the institution, such as the perceived difficulty of learning.</li>
<li><strong>To the economy:</strong> It could produce critically thinking individuals who disrupt the existing economic order that relies on conformity and a fixed social hierarchy.</li>
</ul></li>
</ul>
</section>
<section id="principles-of-successful-teaching" class="level3">
<h3 class="anchored" data-anchor-id="principles-of-successful-teaching">Principles of Successful Teaching</h3>
<ul>
<li><strong>Unconditional Trust:</strong> Allowing students to make mistakes and learn from them is crucial for self-mastery.</li>
<li><strong>Challenging Assumptions:</strong> Questioning traditional notions of valuable knowledge and a fulfilling life.</li>
<li><strong>Focus on Individual Paths:</strong> Encouraging students to pursue their own unique interests and truths.</li>
</ul>
</section>
<section id="the-invisible-curriculum-and-its-consequences" class="level3">
<h3 class="anchored" data-anchor-id="the-invisible-curriculum-and-its-consequences">The Invisible Curriculum and its Consequences</h3>
<ul>
<li>Gatto argues that compulsory schooling, despite its stated goals, promotes an “invisible curriculum” that:
<ul>
<li>Reinforces the legitimacy of the institution itself.</li>
<li>Prepares students for a society stratified by social class (caste).</li>
</ul></li>
<li>He acknowledges his own complicity in perpetuating this system, even unintentionally.</li>
</ul>
</section>
<section id="focusing-on-the-wrongs" class="level3">
<h3 class="anchored" data-anchor-id="focusing-on-the-wrongs">Focusing on the Wrongs</h3>
<ul>
<li>Gatto aims to illuminate the flaws of the education system:
<ul>
<li><strong>What he does right:</strong> Getting out of the way of students’ natural curiosity and providing space, time, and respect.</li>
<li><strong>What he does wrong:</strong> Unintentionally reinforcing the hidden curriculum and hindering true learning.</li>
</ul></li>
</ul>
</section>
</section>
<section id="chapter-1-the-seven-lesson-schoolteacher" class="level2">
<h2 class="anchored" data-anchor-id="chapter-1-the-seven-lesson-schoolteacher">Chapter 1: The Seven-Lesson Schoolteacher</h2>
<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">Introduction</h3>
<p>This chapter stems from Gatto’s 1991 New York State Teacher of the Year acceptance speech, where he ironically highlights the seven damaging lessons he teaches, revealing the hidden curriculum of compulsory schooling.</p>
</section>
<section id="lesson-1-confusion" class="level3">
<h3 class="anchored" data-anchor-id="lesson-1-confusion">Lesson 1: Confusion</h3>
<ul>
<li>Gatto argues that schools teach information out of context, creating a fragmented and disconnected learning experience.</li>
<li>The curriculum lacks coherence and is overloaded with disparate subjects and activities, leaving students feeling overwhelmed and panicked.</li>
<li>The constant exposure to numerous, often unconnected, adults further contributes to confusion.</li>
<li>Schools prioritize superficial jargon over genuine enthusiasm and in-depth understanding.</li>
<li>This systematic confusion conditions students to accept it as their destiny, inhibiting their ability to seek meaning and make connections.</li>
</ul>
</section>
<section id="lesson-2-class-position" class="level3">
<h3 class="anchored" data-anchor-id="lesson-2-class-position">Lesson 2: Class Position</h3>
<ul>
<li>Schools enforce a rigid class system based on academic performance and standardized testing.</li>
<li>Students are numbered and categorized, discouraged from aspiring beyond their assigned class.</li>
<li>Gatto admits to using false promises of upward mobility through test scores to motivate students, perpetuating the illusion of meritocracy.</li>
<li>He acknowledges the incompatibility of truth and school teaching, highlighting how the system reinforces social stratification.</li>
</ul>
</section>
<section id="lesson-3-indifference" class="level3">
<h3 class="anchored" data-anchor-id="lesson-3-indifference">Lesson 3: Indifference</h3>
<ul>
<li>Schools cultivate indifference by demanding enthusiasm during lessons but enforcing detachment at the sound of the bell.</li>
<li>Students are conditioned to switch their emotions on and off, preventing them from fully engaging with any subject.</li>
<li>The bell system signals that no work is worth finishing, fostering a lack of care and follow-through.</li>
<li>This learned indifference prepares students for a world without meaningful work, perpetuating a cycle of apathy.</li>
</ul>
</section>
<section id="lesson-4-emotional-dependency" class="level3">
<h3 class="anchored" data-anchor-id="lesson-4-emotional-dependency">Lesson 4: Emotional Dependency</h3>
<ul>
<li>Schools train students to be emotionally dependent on external authority figures.</li>
<li>Rewards and punishments are used to control behavior and suppress individuality, teaching students to surrender their will to the established hierarchy.</li>
<li>Gatto emphasizes the absence of genuine rights within schools, replaced by privileges granted or revoked at the whim of authority.</li>
<li>This dependency extends to personal decisions, with teachers intervening and dictating acceptable behavior.</li>
</ul>
</section>
<section id="lesson-5-intellectual-dependency" class="level3">
<h3 class="anchored" data-anchor-id="lesson-5-intellectual-dependency">Lesson 5: Intellectual Dependency</h3>
<ul>
<li>The most crucial lesson taught is intellectual dependency, conditioning students to rely on experts for knowledge and meaning.</li>
<li>Students are discouraged from independent thought, learning to passively accept information as presented by teachers.</li>
<li>Curiosity is suppressed, replaced by conformity to prescribed thinking.</li>
<li>This dependency prepares students for a workforce that follows orders without questioning, perpetuating a system reliant on unquestioning obedience.</li>
</ul>
</section>
<section id="lesson-6-provisional-self-esteem" class="level3">
<h3 class="anchored" data-anchor-id="lesson-6-provisional-self-esteem">Lesson 6: Provisional Self-Esteem</h3>
<ul>
<li>Schools link self-esteem to external evaluations, fostering a dependence on expert opinion.</li>
<li>Constant grading, testing, and reporting create a culture of judgment and dissatisfaction, undermining students’ self-worth.</li>
<li>Gatto argues that the system benefits from perpetuating dissatisfaction, mirroring the consumerist economy’s reliance on manufactured needs.</li>
<li>Students are discouraged from trusting their own judgment and that of their parents, relying instead on the pronouncements of certified officials.</li>
</ul>
</section>
<section id="lesson-7-one-cant-hide" class="level3">
<h3 class="anchored" data-anchor-id="lesson-7-one-cant-hide">Lesson 7: One Can’t Hide</h3>
<ul>
<li>Schools create an environment of constant surveillance, denying students privacy and autonomy.</li>
<li>Students are encouraged to tattle on each other and even on their own families, fostering an atmosphere of distrust and suspicion.</li>
<li>Homework extends surveillance into the home, hindering independent learning and family time.</li>
<li>This constant monitoring teaches students that privacy is illegitimate and that authority figures are always watching, preparing them for a society under constant control.</li>
</ul>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">Conclusion</h3>
<p>Gatto argues that these seven lessons create a national curriculum that serves the interests of a centralized, hierarchical society at the expense of individual development and genuine education. He contends that this system is structurally unreformable, calling for a fundamental rethinking of educational approaches.</p>
</section>
</section>
<section id="chapter-2-the-psychopathic-school" class="level2">
<h2 class="anchored" data-anchor-id="chapter-2-the-psychopathic-school">Chapter 2: The Psychopathic School</h2>
<section id="introduction-1" class="level3">
<h3 class="anchored" data-anchor-id="introduction-1">Introduction</h3>
<p>This chapter originates from Gatto’s 1990 New York City Teacher of the Year acceptance speech, where he expands on the destructive nature of compulsory schooling and its connection to broader social ills.</p>
</section>
<section id="the-social-crisis-and-the-school-crisis" class="level3">
<h3 class="anchored" data-anchor-id="the-social-crisis-and-the-school-crisis">The Social Crisis and the School Crisis</h3>
<ul>
<li>Gatto links the crisis in American education to a larger social crisis marked by declining educational rankings, high rates of drug addiction, teenage suicide, and marriage instability.</li>
<li>He attributes these problems to a loss of identity and community, highlighting the isolation of children and the elderly from meaningful participation in society.</li>
<li>He criticizes the prevalence of networks over communities, lamenting the lack of genuine connections and the resulting sense of loneliness.</li>
</ul>
</section>
<section id="the-irrelevance-of-schooling" class="level3">
<h3 class="anchored" data-anchor-id="the-irrelevance-of-schooling">The Irrelevance of Schooling</h3>
<ul>
<li>Gatto argues that schools are increasingly irrelevant to the real world, failing to prepare students for the actual demands of various professions.</li>
<li>He emphasizes that schools primarily teach obedience, not critical thinking or practical skills.</li>
<li>He compares the school institution to a psychopath, lacking conscience and prioritizing conformity over individual growth.</li>
</ul>
</section>
<section id="the-origins-of-compulsory-schooling" class="level3">
<h3 class="anchored" data-anchor-id="the-origins-of-compulsory-schooling">The Origins of Compulsory Schooling</h3>
<ul>
<li>Gatto traces the origins of compulsory schooling to 19th-century Massachusetts, highlighting the resistance it faced from families who valued individual choice and local control.</li>
<li>He cites evidence suggesting that literacy rates were higher before compulsory schooling was implemented.</li>
<li>He draws parallels with the success of homeschooling, showcasing its ability to foster independent thinking and accelerate learning.</li>
</ul>
</section>
<section id="schooling-vs.-education" class="level3">
<h3 class="anchored" data-anchor-id="schooling-vs.-education">Schooling vs.&nbsp;Education</h3>
<ul>
<li>Gatto distinguishes between schooling and education, asserting that schools are designed for population management, not genuine learning.</li>
<li>He criticizes the school system’s emphasis on producing predictable and controllable individuals, arguing that this renders them irrelevant and useless in a rapidly changing world.</li>
<li>He attributes social problems like drug abuse, mindless competition, and materialism to the dependency and aimlessness fostered by the current educational paradigm.</li>
</ul>
</section>
<section id="the-effects-of-time-deprivation-and-abstraction" class="level3">
<h3 class="anchored" data-anchor-id="the-effects-of-time-deprivation-and-abstraction">The Effects of Time Deprivation and Abstraction</h3>
<ul>
<li>Gatto highlights the limited time available for children to develop their unique identities, with schooling, homework, and television consuming most of their waking hours.</li>
<li>He emphasizes the detrimental effects of abstract learning detached from real-world experience.</li>
<li>He lists specific pathologies resulting from this system, including indifference, lack of curiosity, a poor sense of the future, cruelty, difficulty with intimacy, materialism, dependency, passivity, and timidity.</li>
</ul>
</section>
<section id="a-call-for-change" class="level3">
<h3 class="anchored" data-anchor-id="a-call-for-change">A Call for Change</h3>
<ul>
<li>Gatto calls for a sustained national debate on the purpose and structure of education, urging a move away from top-down control and towards grassroots solutions.</li>
<li>He promotes homeschooling as a viable alternative, advocating for the redirection of funds to family-centric education.</li>
<li>He emphasizes the need to reject the mechanical and anti-human aspects of the current system, returning to a philosophy that prioritizes self-knowledge, family, and community.</li>
</ul>
</section>
</section>
<section id="chapter-3-the-green-monongahela" class="level2">
<h2 class="anchored" data-anchor-id="chapter-3-the-green-monongahela">Chapter 3: The Green Monongahela</h2>
<section id="introduction-2" class="level3">
<h3 class="anchored" data-anchor-id="introduction-2">Introduction</h3>
<p>Gatto reflects on his childhood in Monongahela, Pennsylvania, and how his experiences shaped his philosophy of education.</p>
</section>
<section id="early-education-on-the-river" class="level3">
<h3 class="anchored" data-anchor-id="early-education-on-the-river">Early Education on the River</h3>
<ul>
<li>The Monongahela River served as Gatto’s first classroom, fostering his observation skills and love of nature.</li>
<li>He learned from the diverse people in his community, from riverboat workers to train conductors, absorbing lessons about work, responsibility, and adventure.</li>
<li>These experiences instilled in him a sense of purpose and belonging, contrasting sharply with the sterile environment of institutional schooling.</li>
</ul>
</section>
<section id="leaving-monongahela-and-finding-significance-in-teaching" class="level3">
<h3 class="anchored" data-anchor-id="leaving-monongahela-and-finding-significance-in-teaching">Leaving Monongahela and Finding Significance in Teaching</h3>
<ul>
<li>Gatto recounts his disillusionment with his advertising career, seeking meaning beyond superficial consumerism.</li>
<li>He found his calling as a teacher, drawn to the potential for making a genuine difference in the lives of young people.</li>
<li>He contrasts the sense of purpose he felt in teaching with the emptiness of his corporate job.</li>
</ul>
</section>
<section id="leaving-advertising-for-teaching" class="level3">
<h3 class="anchored" data-anchor-id="leaving-advertising-for-teaching">Leaving Advertising for Teaching</h3>
<ul>
<li>Gatto describes his initial struggles as a substitute teacher in New York City, grappling with challenging working conditions and a lack of support from the system.</li>
<li>He recounts a near-violent encounter with a student, highlighting the chaotic and demoralizing environment of many urban schools.</li>
</ul>
</section>
<section id="milagros-and-the-power-of-a-student" class="level3">
<h3 class="anchored" data-anchor-id="milagros-and-the-power-of-a-student">Milagros and the Power of a Student</h3>
<ul>
<li>Gatto’s perspective shifted when he encountered Milagros, a gifted reader stuck in a low-level class due to bureaucratic indifference.</li>
<li>He championed her cause, challenging the school authorities and ultimately securing her placement in a more appropriate learning environment.</li>
<li>Milagros’ heartfelt expression of gratitude, “A teacher like you cannot be found,” solidified Gatto’s commitment to teaching.</li>
</ul>
</section>
<section id="milagros-accomplishments" class="level3">
<h3 class="anchored" data-anchor-id="milagros-accomplishments">Milagros’ Accomplishments</h3>
<ul>
<li>Gatto learns years later that Milagros went on to become a successful teacher herself, validating his belief in the transformative power of individual encouragement and recognizing potential.</li>
<li>He reflects on the possibility that his intervention served as a catalyst for Milagros, drawing a parallel with the influential figures from his own childhood.</li>
</ul>
</section>
</section>
<section id="chapter-4-we-need-less-school-not-more" class="level2">
<h2 class="anchored" data-anchor-id="chapter-4-we-need-less-school-not-more">Chapter 4: We Need Less School, Not More</h2>
<section id="introduction-3" class="level3">
<h3 class="anchored" data-anchor-id="introduction-3">Introduction</h3>
<p>This chapter delves into the detrimental effects of expanding the scope of institutional schooling, advocating for a reduction in its influence.</p>
</section>
<section id="communities-vs.-networks" class="level3">
<h3 class="anchored" data-anchor-id="communities-vs.-networks">Communities vs.&nbsp;Networks</h3>
<ul>
<li>Gatto distinguishes between communities and networks, emphasizing the vital role of communities in fostering holistic human development.</li>
<li>He argues that networks, while efficient, drain vitality from communities and families, offering temporary, mechanical solutions to complex human problems.</li>
<li>He criticizes the notion of replacing a bad network with a good one, highlighting the inherent limitations of network-based solutions.</li>
</ul>
</section>
<section id="the-limits-of-networks" class="level3">
<h3 class="anchored" data-anchor-id="the-limits-of-networks">The Limits of Networks</h3>
<ul>
<li>Gatto uses the example of weight loss to illustrate the shortcomings of quick-fix, network-driven solutions.</li>
<li>He contrasts the fleeting nature of network relationships with the enduring bonds of family and community.</li>
<li>He criticizes the narrow focus of networks, which require individuals to suppress aspects of their personality, leading to fragmentation and a sense of disconnection.</li>
</ul>
</section>
<section id="the-fragmentation-of-modern-life" class="level3">
<h3 class="anchored" data-anchor-id="the-fragmentation-of-modern-life">The Fragmentation of Modern Life</h3>
<ul>
<li>Gatto argues that excessive networking leads to a fragmented sense of self, with individuals compartmentalizing their lives into specialized roles.</li>
<li>He attributes social problems like divorce and a feeling of being “out of control” to this fragmentation, highlighting the emotional toll of prioritizing network interests.</li>
</ul>
</section>
<section id="the-success-of-homeschooling" class="level3">
<h3 class="anchored" data-anchor-id="the-success-of-homeschooling">The Success of Homeschooling</h3>
<ul>
<li>Gatto champions the success of homeschooling, demonstrating that certified schools are not necessary for acquiring a good education.</li>
<li>He points to the growing homeschooling movement as evidence of a desire for alternatives to the dominant educational paradigm.</li>
<li>He emphasizes that homeschooling allows children to learn in a context that fosters self-reliance and independent thinking.</li>
</ul>
</section>
<section id="schools-as-networks" class="level3">
<h3 class="anchored" data-anchor-id="schools-as-networks">Schools as Networks</h3>
<ul>
<li>Gatto reiterates the distinction between communities and networks, applying this framework to schools.</li>
<li>He criticizes schools for isolating children from the diversity of real life and for imposing artificial structures that stifle individuality.</li>
<li>He argues that schools destroy community vitality by preempting time and energy that could be devoted to building genuine connections.</li>
</ul>
</section>
<section id="schools-destroying-community-vitality" class="level3">
<h3 class="anchored" data-anchor-id="schools-destroying-community-vitality">Schools Destroying Community Vitality</h3>
<ul>
<li>Gatto details specific ways in which schools undermine community and family life:
<ul>
<li>Separating children from the working world and from interaction with different age groups.</li>
<li>Interrupting learning with bells and schedules, devaluing the importance of sustained engagement.</li>
<li>Suppressing individuality and enforcing conformity through rigid rules and punishments.</li>
<li>Fostering competition and envy through grading and ranking systems.</li>
</ul></li>
<li>He concludes that we need less schooling, not more, to allow communities and families to reclaim their vital roles in child development.</li>
</ul>
</section>
<section id="human-beings-beyond-rationality" class="level3">
<h3 class="anchored" data-anchor-id="human-beings-beyond-rationality">Human Beings Beyond Rationality</h3>
<ul>
<li>Gatto challenges the Enlightenment’s emphasis on rationality, arguing that humans are more than just machines and that our deepest needs cannot be met through purely rational systems.</li>
<li>He criticizes the dehumanizing effects of networks, which prioritize efficiency over emotional well-being.</li>
<li>He asserts that networks inherently make people lonely, failing to provide the authentic connections that nourish the human spirit.</li>
</ul>
</section>
<section id="loneliness-in-a-crowd" class="level3">
<h3 class="anchored" data-anchor-id="loneliness-in-a-crowd">Loneliness in a Crowd</h3>
<ul>
<li>Gatto describes the paradoxical experience of feeling lonely even when surrounded by people in network-dominated environments.</li>
<li>He argues that networks, no matter how numerous, cannot substitute for genuine community, leaving individuals feeling isolated and unseen.</li>
<li>He emphasizes the transient nature of network relationships, contrasting them with the enduring bonds of family and community.</li>
</ul>
</section>
<section id="the-natural-order-of-society" class="level3">
<h3 class="anchored" data-anchor-id="the-natural-order-of-society">The Natural Order of Society</h3>
<ul>
<li>Gatto traces the historical development of society, asserting that families came first, followed by communities, and only later by institutions.</li>
<li>He criticizes the modern tendency for institutions to claim authority over families and communities, demanding primary loyalty and dictating how people should live.</li>
<li>He challenges the notion of the state as a surrogate parent, arguing that this undermines the essential role of families in shaping individual values and identity.</li>
</ul>
</section>
<section id="the-destructive-claim-of-institutional-prerogative" class="level3">
<h3 class="anchored" data-anchor-id="the-destructive-claim-of-institutional-prerogative">The Destructive Claim of Institutional Prerogative</h3>
<ul>
<li>Gatto examines the harmful effects of institutional dominance on individuals and families.</li>
<li>He criticizes the narrow focus of institutions, which prioritize specialized performance over holistic development.</li>
<li>He argues that defining success within institutional frameworks leads to alienation from oneself and from others.</li>
</ul>
</section>
<section id="the-united-states-as-a-nation-of-institutions" class="level3">
<h3 class="anchored" data-anchor-id="the-united-states-as-a-nation-of-institutions">The United States as a Nation of Institutions</h3>
<ul>
<li>Gatto laments the transformation of the United States from a nation of communities to a nation of institutions.</li>
<li>He attributes the decline of community life to the isolating effects of large cities and the competition from institutions for the time and attention of citizens.</li>
<li>He points to low voter turnout as evidence of alienation and disengagement from civic life.</li>
</ul>
</section>
<section id="alienation-from-community-life" class="level3">
<h3 class="anchored" data-anchor-id="alienation-from-community-life">Alienation from Community Life</h3>
<ul>
<li>Gatto criticizes the prevalence of “pseudo-communities” – simulated gatherings that lack the genuine connections and shared responsibilities of true communities.</li>
<li>He argues that institutional simulations of community fail to meet fundamental human needs, leading to feelings of isolation and dissatisfaction.</li>
</ul>
</section>
<section id="the-jeopardy-of-human-needs" class="level3">
<h3 class="anchored" data-anchor-id="the-jeopardy-of-human-needs">The Jeopardy of Human Needs</h3>
<ul>
<li>Gatto argues that institutional goals, even when well-intentioned, cannot fully align with the unique needs of individuals.</li>
<li>He emphasizes the lack of conscience in institutions, which operate based on impersonal accounting methods rather than genuine concern for human well-being.</li>
<li>He criticizes the tendency for institutions to prioritize uniformity and control over individual expression and variety.</li>
</ul>
</section>
<section id="the-damage-of-institutional-intervention" class="level3">
<h3 class="anchored" data-anchor-id="the-damage-of-institutional-intervention">The Damage of Institutional Intervention</h3>
<ul>
<li>Gatto warns against the dangers of ceding power to institutions, comparing it to anointing a machine as king.</li>
<li>He emphasizes the pervasive reach of technology, which amplifies the influence of institutions and makes escape from their control increasingly difficult.</li>
</ul>
</section>
<section id="institutional-survival-as-the-primary-goal" class="level3">
<h3 class="anchored" data-anchor-id="institutional-survival-as-the-primary-goal">Institutional Survival as the Primary Goal</h3>
<ul>
<li>Gatto cites the observation of a French sociologist that every institution’s primary goal is its own survival and growth, often overshadowing its stated mission.</li>
<li>He uses the examples of postal services and the military to illustrate this principle, highlighting the tendency for institutions to prioritize the interests of their employees over their intended beneficiaries.</li>
</ul>
</section>
<section id="schools-as-protective-institutions-for-teachers" class="level3">
<h3 class="anchored" data-anchor-id="schools-as-protective-institutions-for-teachers">Schools as Protective Institutions for Teachers</h3>
<ul>
<li>Gatto argues that schools have become protective institutions for teachers, rather than places of learning for students.</li>
<li>He criticizes the New York City public school system for its poor performance despite its vast resources and coercive power.</li>
</ul>
</section>
<section id="freedom-from-institutional-intervention" class="level3">
<h3 class="anchored" data-anchor-id="freedom-from-institutional-intervention">Freedom from Institutional Intervention</h3>
<ul>
<li>Gatto contrasts the liberating atmosphere of communities with limited institutional influence to the stifling environment of urban centers dominated by networks and institutions.</li>
<li>He suggests that freedom from institutional intervention allows for greater self-reliance, community spirit, and individual growth.</li>
</ul>
</section>
<section id="education-as-an-economic-good" class="level3">
<h3 class="anchored" data-anchor-id="education-as-an-economic-good">Education as an Economic Good</h3>
<ul>
<li>Gatto challenges the prevailing view of education as an economic good, arguing that this reinforces a consumerist mindset and perpetuates unsustainable patterns of consumption.</li>
<li>He questions the wisdom of linking educational success to material wealth, considering the social and environmental costs of rampant consumerism.</li>
</ul>
</section>
<section id="the-absurdity-of-economic-education" class="level3">
<h3 class="anchored" data-anchor-id="the-absurdity-of-economic-education">The Absurdity of Economic Education</h3>
<ul>
<li>Gatto exposes the absurdity of equating education with economic advancement, highlighting the emptiness of a life defined by material possessions.</li>
<li>He urges a reevaluation of our priorities, suggesting that genuine education should foster values beyond material acquisition.</li>
</ul>
</section>
<section id="the-true-purpose-of-schooling" class="level3">
<h3 class="anchored" data-anchor-id="the-true-purpose-of-schooling">The True Purpose of Schooling</h3>
<ul>
<li>Gatto questions the true purpose of mass schooling, rejecting the notions that it aims to create a wealthy elite or to prepare students for meaningful work.</li>
<li>He criticizes the system’s reliance on competition, social stratification, and material rewards, arguing that this contradicts the principles of a just and equitable society.</li>
</ul>
</section>
<section id="natural-limits-of-communities" class="level3">
<h3 class="anchored" data-anchor-id="natural-limits-of-communities">Natural Limits of Communities</h3>
<ul>
<li>Gatto contrasts the natural limits of communities with the indefinite expansion of institutions and networks.</li>
<li>He argues that communities foster a sense of belonging and importance because they are small enough for individuals to make a noticeable impact.</li>
<li>He criticizes pseudo-communities for creating a sense of anonymity and alienation, leading to a reliance on consumerism to fulfill basic human needs.</li>
</ul>
</section>
<section id="pseudo-communities" class="level3">
<h3 class="anchored" data-anchor-id="pseudo-communities">Pseudo-Communities</h3>
<ul>
<li>Gatto describes the characteristics of pseudo-communities:
<ul>
<li>Transient relationships and weak bonds.</li>
<li>A tendency to view problems as someone else’s responsibility.</li>
<li>A desire to escape and “trade up” to a supposedly better place.</li>
</ul></li>
<li>He contrasts these with the enduring connections and shared purpose of genuine communities.</li>
</ul>
</section>
<section id="the-indefinite-expansion-of-networks" class="level3">
<h3 class="anchored" data-anchor-id="the-indefinite-expansion-of-networks">The Indefinite Expansion of Networks</h3>
<ul>
<li>Gatto argues that networks, unlike communities, have an inherent tendency to expand indefinitely, fueled by the profit motive of those who benefit from their growth.</li>
<li>He criticizes the push for expanding the scope of schooling, recognizing it as a ploy for increased control and financial gain.</li>
</ul>
</section>
<section id="measuring-success-in-networks" class="level3">
<h3 class="anchored" data-anchor-id="measuring-success-in-networks">Measuring Success in Networks</h3>
<ul>
<li>Gatto contrasts the multifaceted satisfactions of community life with the narrow, quantitative measures of success prevalent in networks.</li>
<li>He criticizes the competitive nature of networks, which pits individuals against each other for material rewards and recognition.</li>
</ul>
</section>
<section id="the-contradictions-of-school-competition" class="level3">
<h3 class="anchored" data-anchor-id="the-contradictions-of-school-competition">The Contradictions of School Competition</h3>
<ul>
<li>Gatto argues that competition within institutions like schools is fundamentally different from competition in the free market.</li>
<li>He points out that school competition is often subjective and arbitrary, leading to envy, dissatisfaction, and a reliance on manipulation rather than genuine effort.</li>
</ul>
</section>
<section id="truth-in-communities-vs.-networks" class="level3">
<h3 class="anchored" data-anchor-id="truth-in-communities-vs.-networks">Truth in Communities vs.&nbsp;Networks</h3>
<ul>
<li>Gatto highlights the importance of honesty in communities, where reputation and trust are paramount.</li>
<li>He contrasts this with the prevalence of lying and deception within institutions, where individuals are often seen as adversaries and manipulation is considered part of the game.</li>
</ul>
</section>
<section id="the-cathedral-of-reims-as-a-model-of-community" class="level3">
<h3 class="anchored" data-anchor-id="the-cathedral-of-reims-as-a-model-of-community">The Cathedral of Reims as a Model of Community</h3>
<ul>
<li>Gatto uses the example of the Cathedral of Reims, built over centuries by a community of skilled artisans, as a testament to the power of shared purpose and uncoerced collaboration.</li>
<li>He emphasizes the absence of individual recognition and self-promotion among the builders, highlighting the collectivist spirit that drove the project.</li>
</ul>
</section>
<section id="the-essence-of-communities" class="level3">
<h3 class="anchored" data-anchor-id="the-essence-of-communities">The Essence of Communities</h3>
<ul>
<li>Gatto defines communities as extensions of family, where individuals find meaning in belonging to a larger group with shared values and responsibilities.</li>
<li>He emphasizes the importance of face-to-face interaction, mutual support, and the acceptance of human variety as essential elements of thriving communities.</li>
</ul>
</section>
<section id="the-allure-of-artificial-integration" class="level3">
<h3 class="anchored" data-anchor-id="the-allure-of-artificial-integration">The Allure of Artificial Integration</h3>
<ul>
<li>Gatto warns against the allure of artificial integration offered by institutions and networks, which promise a sense of belonging but ultimately fail to deliver.</li>
<li>He argues that this artificial integration is superficial and fleeting, leaving individuals feeling isolated and unfulfilled.</li>
</ul>
</section>
<section id="the-new-world-order-of-schooling" class="level3">
<h3 class="anchored" data-anchor-id="the-new-world-order-of-schooling">The New World Order of Schooling</h3>
<ul>
<li>Gatto criticizes proposals to expand the role of schools into providing all-encompassing services, such as meals, therapy, and recreation.</li>
<li>He argues that this “New World Order” of schooling would further weaken families and communities by usurping their traditional functions.</li>
<li>He sees schools as already contributing to the breakdown of family life by isolating children from their parents and undermining their sense of belonging.</li>
</ul>
</section>
<section id="the-maximum-efficiency-of-schools" class="level3">
<h3 class="anchored" data-anchor-id="the-maximum-efficiency-of-schools">The Maximum Efficiency of Schools</h3>
<ul>
<li>Gatto asserts that schools have reached their maximum efficiency, meaning that any further expansion will likely worsen rather than improve outcomes.</li>
<li>He calls for a shift in focus from increasing the scale of schooling to rethinking its fundamental purpose and structure.</li>
</ul>
</section>
<section id="the-true-purpose-of-education" class="level3">
<h3 class="anchored" data-anchor-id="the-true-purpose-of-education">The True Purpose of Education</h3>
<ul>
<li>Gatto outlines his vision for genuine education:
<ul>
<li>Fostering individuality and originality.</li>
<li>Equipping students with the tools to tackle life’s challenges.</li>
<li>Guiding them towards a personal code of values.</li>
<li>Instilling a love of learning and a sense of purpose.</li>
</ul></li>
<li>He argues that mass schooling fails to achieve these goals, prioritizing conformity and obedience over individual development.</li>
</ul>
</section>
<section id="social-engineering-and-the-one-right-way" class="level3">
<h3 class="anchored" data-anchor-id="social-engineering-and-the-one-right-way">Social Engineering and the One Right Way</h3>
<ul>
<li>Gatto criticizes the “one right way” approach to education, arguing that it is based on a flawed theory of social engineering that seeks to control and homogenize individuals.</li>
<li>He advocates for a more decentralized approach that recognizes the diversity of human potential and allows for individual choice.</li>
</ul>
</section>
<section id="the-hive-society" class="level3">
<h3 class="anchored" data-anchor-id="the-hive-society">The Hive Society</h3>
<ul>
<li>Gatto warns against the dangers of creating a “hive society,” where individuality is suppressed and conformity reigns supreme.</li>
<li>He attributes the rise of social pathologies like drug addiction and violence to the stifling effects of institutional control.</li>
</ul>
</section>
<section id="the-flawed-theory-and-structure-of-mass-education" class="level3">
<h3 class="anchored" data-anchor-id="the-flawed-theory-and-structure-of-mass-education">The Flawed Theory and Structure of Mass Education</h3>
<ul>
<li>Gatto reiterates his belief that the current system of mass education is fundamentally flawed and cannot be reformed through incremental changes.</li>
<li>He argues that it undermines the principles of democracy by prioritizing uniformity and control over individual liberty.</li>
</ul>
</section>
<section id="the-cost-of-education-vs.-schooling" class="level3">
<h3 class="anchored" data-anchor-id="the-cost-of-education-vs.-schooling">The Cost of Education vs.&nbsp;Schooling</h3>
<ul>
<li>Gatto emphasizes the distinction between education, which is inherently inexpensive and self-directed, and schooling, which is a costly and inefficient system.</li>
<li>He encourages families to reclaim their educational authority and to seek alternatives to the institutional model.</li>
</ul>
</section>
<section id="bertrand-russells-critique-of-american-schooling" class="level3">
<h3 class="anchored" data-anchor-id="bertrand-russells-critique-of-american-schooling">Bertrand Russell’s Critique of American Schooling</h3>
<ul>
<li>Gatto cites Bertrand Russell’s criticism of American schooling, highlighting its anti-democratic tendencies and its production of conformist, uncritical citizens.</li>
<li>He agrees with Russell’s assessment that mass schooling hinders the development of “inner freedom” and creates a shallow, materialistic culture.
<ul>
<li><a href="https://archive.org/stream/in.ernet.dli.2015.139389/2015.139389.The-Basic-Writings-Of-Bertrand-Russell_djvu.txt">The Basic Writings Of Bertrand Russell - The Aims of Education</a></li>
</ul></li>
</ul>
</section>
<section id="american-national-unity-and-the-role-of-schooling" class="level3">
<h3 class="anchored" data-anchor-id="american-national-unity-and-the-role-of-schooling">American National Unity and the Role of Schooling</h3>
<ul>
<li>Gatto argues that the quest for national unity has led to misguided attempts to homogenize the population through forced schooling.</li>
<li>He suggests that this approach has backfired, undermining the very values it sought to promote.</li>
</ul>
</section>
<section id="building-families-and-communities" class="level3">
<h3 class="anchored" data-anchor-id="building-families-and-communities">Building Families and Communities</h3>
<ul>
<li>Gatto advocates for a return to strong families and communities as the foundation for a healthy society.</li>
<li>He suggests that rebuilding these units will empower individuals to take charge of their own education and to contribute to the common good.</li>
</ul>
</section>
<section id="breaking-up-institutional-schools" class="level3">
<h3 class="anchored" data-anchor-id="breaking-up-institutional-schools">Breaking Up Institutional Schools</h3>
<ul>
<li>Gatto proposes radical reforms to the schooling system:
<ul>
<li>Decertifying teaching and allowing anyone to compete in the educational marketplace.</li>
<li>Privatizing education and giving families control over their educational choices.</li>
<li>Trusting the free market to deliver diverse and effective learning opportunities.</li>
</ul></li>
</ul>
</section>
</section>
<section id="chapter-5-the-congregational-principle" class="level2">
<h2 class="anchored" data-anchor-id="chapter-5-the-congregational-principle">Chapter 5: The Congregational Principle</h2>
<section id="introduction-4" class="level3">
<h3 class="anchored" data-anchor-id="introduction-4">Introduction</h3>
<p>Gatto explores the history of colonial New England’s Congregationalist movement as a model for a decentralized, community-based approach to education.</p>
</section>
<section id="the-surrealism-of-educational-reform" class="level3">
<h3 class="anchored" data-anchor-id="the-surrealism-of-educational-reform">The Surrealism of Educational Reform</h3>
<ul>
<li>Gatto criticizes the ongoing push for centralized educational reforms, arguing that these proposals ignore the lessons of history and perpetuate a system that has consistently failed to deliver on its promises.</li>
<li>He suggests that the search for “one right answer” to the educational crisis is misguided, advocating for a more pluralistic approach that embraces local control and individual choice.</li>
</ul>
</section>
<section id="colonial-new-england-and-a-different-theory-of-institutions" class="level3">
<h3 class="anchored" data-anchor-id="colonial-new-england-and-a-different-theory-of-institutions">Colonial New England and a Different Theory of Institutions</h3>
<ul>
<li>Gatto contrasts the centralized, top-down approach of modern schooling with the decentralized, community-based model of colonial New England.</li>
<li>He highlights the Congregationalist principle of local autonomy and self-governance, where congregations determined their own affairs without external interference.</li>
</ul>
</section>
<section id="the-salem-procedure" class="level3">
<h3 class="anchored" data-anchor-id="the-salem-procedure">The Salem Procedure</h3>
<ul>
<li>Gatto describes the “Salem Procedure” of 1629, where the First Puritan Church at Salem established the principle of congregational authority.</li>
<li>He emphasizes the significance of this act, which shifted power from certified experts to the members of the congregation themselves.</li>
</ul>
</section>
<section id="localism-and-decentralization" class="level3">
<h3 class="anchored" data-anchor-id="localism-and-decentralization">Localism and Decentralization</h3>
<ul>
<li>Gatto explains how the Congregationalist system fostered localism and decentralization:
<ul>
<li>Each congregation had the freedom to interpret doctrine and to address local issues through open debate among its members.</li>
<li>They took responsibility for their own problems, rather than relying on central authorities for solutions.</li>
</ul></li>
</ul>
</section>
<section id="the-congregational-monopoly" class="level3">
<h3 class="anchored" data-anchor-id="the-congregational-monopoly">The Congregational Monopoly</h3>
<ul>
<li>Gatto acknowledges the irony of the Congregationalists’ initial insistence on religious uniformity, despite their commitment to local control.</li>
<li>He describes their opposition to other denominations, such as Unitarianism, and their attempts to maintain their religious monopoly.</li>
</ul>
</section>
<section id="the-transformation-of-congregationalism" class="level3">
<h3 class="anchored" data-anchor-id="the-transformation-of-congregationalism">The Transformation of Congregationalism</h3>
<ul>
<li>Gatto highlights the remarkable transformation of Congregationalism over time, as it gradually embraced greater tolerance and diversity.</li>
<li>He attributes this evolution to the inherent dynamism of the Congregationalist principle, which allowed for internal debate and self-correction.</li>
</ul>
</section>
<section id="the-dialectical-nature-of-congregationalism" class="level3">
<h3 class="anchored" data-anchor-id="the-dialectical-nature-of-congregationalism">The Dialectical Nature of Congregationalism</h3>
<ul>
<li>Gatto explains how the Congregationalist approach to decision-making resembled the dialectical process, where opposing viewpoints are synthesized to arrive at a more comprehensive understanding.</li>
<li>He argues that this process fostered critical thinking, intellectual growth, and a willingness to adapt to changing circumstances.</li>
</ul>
</section>
<section id="local-choice-and-variety" class="level3">
<h3 class="anchored" data-anchor-id="local-choice-and-variety">Local Choice and Variety</h3>
<ul>
<li>Gatto emphasizes the diversity of local cultures that flourished in colonial New England, despite the initial emphasis on religious conformity.</li>
<li>He uses the examples of Dedham and Sudbury, neighboring towns with distinct economic and social structures, to illustrate the flexibility and adaptability of the Congregationalist system.</li>
</ul>
</section>
<section id="the-necessity-of-exclusion" class="level3">
<h3 class="anchored" data-anchor-id="the-necessity-of-exclusion">The Necessity of Exclusion</h3>
<ul>
<li>Gatto acknowledges the controversial practice of exclusion in colonial New England, where towns often restricted membership to those who shared their values and beliefs.</li>
<li>He argues that this exclusion, while problematic, was necessary to maintain a degree of social cohesion and to allow for the effective functioning of the dialectical process.</li>
</ul>
</section>
<section id="the-paradox-of-local-choice" class="level3">
<h3 class="anchored" data-anchor-id="the-paradox-of-local-choice">The Paradox of Local Choice</h3>
<ul>
<li>Gatto explores the paradoxical nature of local choice, highlighting both its positive and negative aspects.</li>
<li>He acknowledges the potential for local tyranny and exclusion, while emphasizing the crucial role of choice in fostering individual development, community spirit, and democratic values.</li>
</ul>
</section>
<section id="local-knowledge-and-love" class="level3">
<h3 class="anchored" data-anchor-id="local-knowledge-and-love">Local Knowledge and Love</h3>
<ul>
<li>Gatto quotes Wendell Berry’s argument in favor of local knowledge and action, emphasizing the importance of understanding and caring for specific places and people.</li>
<li>He contrasts this with the abstract, global thinking that often leads to destructive interventions based on incomplete information and a lack of genuine connection to the places being affected.</li>
</ul>
</section>
<section id="the-negative-side-of-localism" class="level3">
<h3 class="anchored" data-anchor-id="the-negative-side-of-localism">The Negative Side of Localism</h3>
<ul>
<li>Gatto provides examples of the negative consequences of local control in colonial New England, such as the persecution of Quakers and the exclusion of other religious groups.</li>
<li>He acknowledges the potential for intolerance and discrimination when communities have the power to choose their own members.</li>
</ul>
</section>
<section id="the-mystery-of-congregational-reform" class="level3">
<h3 class="anchored" data-anchor-id="the-mystery-of-congregational-reform">The Mystery of Congregational Reform</h3>
<ul>
<li>Gatto marvels at the ability of Congregationalist communities to reform themselves over time, embracing greater tolerance and diversity without external pressure or legal compulsion.</li>
<li>He attributes this self-correction to the inherent dynamics of the Congregationalist system, which allowed for free debate, dissent, and the natural consequences of poor choices.</li>
</ul>
</section>
<section id="unconditional-local-choice-and-self-correction" class="level3">
<h3 class="anchored" data-anchor-id="unconditional-local-choice-and-self-correction">Unconditional Local Choice and Self-Correction</h3>
<ul>
<li>Gatto argues that the absence of a central orthodoxy and the freedom to “vote with their feet” allowed for a marketplace of ideas in colonial New England.</li>
<li>He suggests that this system naturally rewarded good practices and punished bad ones, leading to a gradual improvement in social conditions.</li>
</ul>
</section>
<section id="the-value-of-choice-and-the-danger-of-central-orthodoxy" class="level3">
<h3 class="anchored" data-anchor-id="the-value-of-choice-and-the-danger-of-central-orthodoxy">The Value of Choice and the Danger of Central Orthodoxy</h3>
<ul>
<li>Gatto emphasizes the importance of choice in fostering a democratic society, arguing that ceding power to central authorities in the name of fairness can ultimately undermine individual liberty and lead to tyranny.</li>
<li>He uses the example of a national curriculum to illustrate the dangers of imposing a single, uniform approach to education, stifling innovation and local adaptation.</li>
</ul>
</section>
<section id="the-failures-of-central-planning" class="level3">
<h3 class="anchored" data-anchor-id="the-failures-of-central-planning">The Failures of Central Planning</h3>
<ul>
<li>Gatto points to the failures of centralized planning in the 20th century, arguing that attempts to legislate social change often have unintended consequences and fail to address the root causes of problems.</li>
<li>He uses examples like affirmative action, desegregation, and drug prohibition to illustrate this point, suggesting that these measures may have exacerbated the very issues they sought to address.</li>
</ul>
</section>
<section id="questionable-victories" class="level3">
<h3 class="anchored" data-anchor-id="questionable-victories">Questionable Victories</h3>
<ul>
<li>Gatto questions the effectiveness of social change imposed through legal coercion, arguing that it often creates resentment and undermines genuine progress.</li>
<li>He suggests that true social change must be rooted in a shift in public consensus, rather than forced compliance.</li>
</ul>
</section>
<section id="the-dangers-of-compulsion" class="level3">
<h3 class="anchored" data-anchor-id="the-dangers-of-compulsion">The Dangers of Compulsion</h3>
<ul>
<li>Gatto warns against the dangers of relying on compulsion to achieve social goals, arguing that it often diminishes the quality of human life and creates a culture of resistance and evasion.</li>
<li>He contrasts this with the effectiveness of voluntary cooperation and self-motivation, which foster a sense of ownership and responsibility.</li>
</ul>
</section>
<section id="the-growth-of-the-school-monopoly" class="level3">
<h3 class="anchored" data-anchor-id="the-growth-of-the-school-monopoly">The Growth of the School Monopoly</h3>
<ul>
<li>Gatto criticizes the unchecked growth of the government school monopoly, which has become increasingly powerful despite its consistent failures to deliver on its promises.</li>
<li>He attributes this growth to the influence of special interest groups, such as teacher colleges, textbook publishers, and educational bureaucrats, who benefit from the status quo.</li>
</ul>
</section>
<section id="the-prohibitions-of-compulsory-schooling" class="level3">
<h3 class="anchored" data-anchor-id="the-prohibitions-of-compulsory-schooling">The Prohibitions of Compulsory Schooling</h3>
<ul>
<li>Gatto outlines the numerous prohibitions imposed by compulsory schooling:
<ul>
<li>Limiting educational choices to a narrow range of government-approved options.</li>
<li>Denying parents and communities the freedom to shape their own educational systems.</li>
<li>Stifling innovation and creativity through standardized curricula and testing regimes.</li>
</ul></li>
</ul>
</section>
<section id="the-power-of-the-congregational-principle" class="level3">
<h3 class="anchored" data-anchor-id="the-power-of-the-congregational-principle">The Power of the Congregational Principle</h3>
<ul>
<li>Gatto argues that the Congregationalist principle, even without its religious context, offers a valuable model for a decentralized, community-based approach to education.</li>
<li>He emphasizes the power of small groups working together towards shared goals, fostering individual growth and a sense of belonging.</li>
</ul>
</section>
<section id="learning-from-dedhams-transformation" class="level3">
<h3 class="anchored" data-anchor-id="learning-from-dedhams-transformation">Learning from Dedham’s Transformation</h3>
<ul>
<li>Gatto uses the example of Dedham’s transformation from a religiously intolerant community to a more inclusive one as evidence of the self-correcting nature of the Congregationalist system.</li>
<li>He suggests that allowing for local choice, even with its potential for error, ultimately leads to greater tolerance and understanding.</li>
</ul>
</section>
<section id="the-failure-of-centrally-planned-schools" class="level3">
<h3 class="anchored" data-anchor-id="the-failure-of-centrally-planned-schools">The Failure of Centrally Planned Schools</h3>
<ul>
<li>Gatto reiterates his critique of centrally planned schools, arguing that they cannot adequately address the diverse needs of individuals and communities.</li>
<li>He emphasizes the importance of allowing for local experimentation and adaptation, trusting families and communities to find solutions that work for them.</li>
</ul>
</section>
<section id="two-wrong-ways-to-view-education" class="level3">
<h3 class="anchored" data-anchor-id="two-wrong-ways-to-view-education">Two Wrong Ways to View Education</h3>
<ul>
<li>Gatto identifies two flawed perspectives on education:
<ul>
<li>Viewing it as an engineering problem that can be solved through standardized solutions.</li>
<li>Searching for villains to blame for educational failures, rather than examining the system itself.</li>
</ul></li>
</ul>
</section>
<section id="the-allure-of-quick-fixes" class="level3">
<h3 class="anchored" data-anchor-id="the-allure-of-quick-fixes">The Allure of Quick Fixes</h3>
<ul>
<li>Gatto criticizes the American tendency to seek quick fixes and magical solutions to complex problems, perpetuated by the advertising industry and a culture of instant gratification.</li>
<li>He argues that genuine solutions require a deeper understanding of human nature and a willingness to engage in sustained effort.</li>
</ul>
</section>
<section id="the-mechanical-view-of-human-nature" class="level3">
<h3 class="anchored" data-anchor-id="the-mechanical-view-of-human-nature">The Mechanical View of Human Nature</h3>
<ul>
<li>Gatto challenges the mechanical view of human nature, which reduces individuals to interchangeable parts in a system designed for efficiency and control.</li>
<li>He argues that this perspective ignores the complexity and uniqueness of each human being, ultimately leading to dehumanization and alienation.</li>
</ul>
</section>
<section id="schools-teaching-people-as-machines" class="level3">
<h3 class="anchored" data-anchor-id="schools-teaching-people-as-machines">Schools Teaching People as Machines</h3>
<ul>
<li>Gatto describes how the structure and methodology of modern schooling reinforce the mechanical view of human nature:
<ul>
<li>Bells and schedules dictate the rhythm of the day, treating students like programmable machines.</li>
<li>Grades and rankings reduce complex qualities to numerical scores, devaluing individual expression.</li>
<li>Standardized curricula and testing regimes stifle creativity and independent thinking.</li>
</ul></li>
</ul>
</section>
<section id="the-consequences-of-the-machine-model" class="level3">
<h3 class="anchored" data-anchor-id="the-consequences-of-the-machine-model">The Consequences of the Machine Model</h3>
<ul>
<li>Gatto quotes Octavio Paz’s criticism of the American educational system, which he describes as a “conspiracy” that prevents individuals from fully developing their potential.</li>
<li>He argues that this system creates a culture of dependency and immaturity, leaving people ill-equipped to navigate the complexities of life.</li>
</ul>
</section>
<section id="the-uniform-failure-of-government-schools" class="level3">
<h3 class="anchored" data-anchor-id="the-uniform-failure-of-government-schools">The Uniform Failure of Government Schools</h3>
<ul>
<li>Gatto highlights the consistent failure of government schools to achieve their stated goals, despite decades of reform efforts and vast expenditures.</li>
<li>He argues that this failure is systemic, stemming from the flawed assumptions underlying the model itself.</li>
</ul>
</section>
<section id="looking-to-the-past-for-solutions" class="level3">
<h3 class="anchored" data-anchor-id="looking-to-the-past-for-solutions">Looking to the Past for Solutions</h3>
<ul>
<li>Gatto proposes looking back to the Congregationalist model of colonial New England for inspiration, urging a return to decentralized, community-based approaches to education.</li>
<li>He encourages experimentation and local innovation, trusting families and communities to find solutions that best meet their unique needs.</li>
</ul>
</section>
<section id="embracing-the-congregational-principle" class="level3">
<h3 class="anchored" data-anchor-id="embracing-the-congregational-principle">Embracing the Congregational Principle</h3>
<ul>
<li>Gatto encourages a rediscovery of the Congregationalist principle, adapting its core values to the modern context:
<ul>
<li>Empowering individuals to take charge of their own learning.</li>
<li>Fostering a sense of community and belonging through shared responsibility for education.</li>
<li>Embracing diversity and respecting individual differences.</li>
</ul></li>
</ul>
</section>
<section id="decertifying-learning-and-embracing-competition" class="level3">
<h3 class="anchored" data-anchor-id="decertifying-learning-and-embracing-competition">Decertifying Learning and Embracing Competition</h3>
<ul>
<li>Gatto calls for the decertification of teaching, breaking the monopoly of certified experts and allowing anyone with a passion for education to compete in a free market.</li>
<li>He suggests that this would lead to greater diversity, innovation, and responsiveness to the needs of individual learners.</li>
</ul>
</section>
</section>
<section id="actionable-recommendations" class="level2">
<h2 class="anchored" data-anchor-id="actionable-recommendations">Actionable Recommendations</h2>
<ul>
<li><strong>Decentralize education:</strong> Support initiatives that promote local control, such as charter schools, homeschooling, and community-based learning centers.</li>
<li><strong>Decertify teaching:</strong> Advocate for the removal of mandatory teacher certification, allowing anyone with a passion for education to teach.</li>
<li><strong>Privatize education:</strong> Promote policies that empower families to choose their own educational paths, such as vouchers and tax credits for educational expenses.</li>
<li><strong>Reduce the scope of schooling:</strong> Advocate for shorter school days, shorter school years, and a reduced emphasis on standardized testing, allowing children more time for self-directed learning and family involvement.</li>
<li><strong>Encourage community involvement:</strong> Support programs that integrate children into the life of their communities through apprenticeships, internships, and community service opportunities.</li>
<li><strong>Promote self-knowledge and personal values:</strong> Encourage children to explore their own interests, to develop their own sense of purpose, and to cultivate a personal code of ethics.</li>
<li><strong>Support alternative learning models:</strong> Explore and promote innovative approaches to education, such as Montessori, Waldorf, and unschooling.</li>
<li><strong>Become a saboteur:</strong> Find ways to subvert the oppressive mechanisms of the school system from within, empowering students to think critically and to challenge the status quo.</li>
<li><strong>Join the conversation:</strong> Engage in discussions about education reform with family, friends, community members, and policymakers.</li>
<li><strong>Share Gatto’s work:</strong> Spread awareness of Gatto’s ideas and his critique of forced schooling, encouraging others to question the dominant educational paradigm.</li>
</ul>
</section>
<section id="glossary" class="level2">
<h2 class="anchored" data-anchor-id="glossary">Glossary</h2>
<ul>
<li><strong>Congregational principle:</strong> A system of local self-governance, where communities determine their own affairs without external interference.</li>
<li><strong>Dialectical process:</strong> A method of reasoning that involves synthesizing opposing viewpoints to arrive at a more comprehensive understanding.</li>
<li><strong>Homeschooling:</strong> Educating children at home, typically by parents or guardians, rather than in a formal school setting.</li>
<li><strong>Institutional schooling:</strong> The dominant model of education in modern societies, characterized by centralized control, standardized curricula, and compulsory attendance.</li>
<li><strong>Network:</strong> A system of interconnected individuals or groups, often focused on a specific purpose or interest. Networks tend to be more superficial and transient than communities, with weaker bonds and a narrower range of interaction.</li>
<li><strong>Provisional self-esteem:</strong> A sense of self-worth that is contingent upon external evaluations and the approval of authority figures.</li>
<li><strong>Pseudo-community:</strong> A simulated gathering or association that lacks the genuine connections, shared values, and enduring bonds of a true community.</li>
<li><strong>Social engineering:</strong> The attempt to control and manipulate human behavior through social policies and institutions.</li>
<li><strong>The Seven-Lesson Schoolteacher:</strong> The title of John Taylor Gatto’s essay, in which he outlines seven harmful lessons instilled by the compulsory schooling system: confusion, class position, indifference, emotional dependency, intellectual dependency, provisional self-esteem, and constant surveillance.</li>
<li><strong>The Psychopathic School:</strong> The title of another John Taylor Gatto essay which describes the school system as lacking conscience and serving the interests of a centralized, industrial economy at the expense of individual growth and well-being.</li>
</ul>


</section>

 ]]></description>
  <category>notes</category>
  <category>education</category>
  <category>history</category>
  <guid>https://christianjmills.com/posts/dumbing-us-down-book-notes/</guid>
  <pubDate>Sat, 03 Aug 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Conference Talk 14: Explaining the Basics of Retrieval Augmented Generation</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-014/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<ul>
<li>Summary</li>
<li>Demystifying RAG</li>
<li>The Compact MVP: A Simple RAG Implementation</li>
<li>Understanding Bi-Encoders in Vector Search</li>
<li>Improving Retrieval with Re-ranking</li>
<li>Keyword Search</li>
<li>Leveraging Metadata for Targeted Retrieval</li>
<li>Putting it All Together: The Complete MVP++ Pipeline</li>
<li>Beyond the Basics: Future Exploration and Resources</li>
<li>Q&amp;A Session</li>
</ul>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p><a href="https://ben.clavie.eu/">Ben Clavié</a> deconstructs the concept of Retrieval-Augmented Generation (RAG) and guides the audience through building a robust, basic RAG pipeline. He emphasizes that RAG is not a standalone technology, but a pipeline combining retrieval and generation, and each component needs individual attention for optimization. Ben advocates for a “MVP++” approach, incorporating essential elements like bi-encoders, re-ranking, keyword search (TF-IDF/BM25), and metadata filtering for a well-rounded system.</p>
</section>
<section id="demystifying-rag" class="level2">
<h2 class="anchored" data-anchor-id="demystifying-rag">Demystifying RAG</h2>
<ul>
<li><strong>RAG: Overused and Misunderstood</strong>
<ul>
<li>The term “RAG” is often used incorrectly to represent an end-to-end system, creating confusion.</li>
</ul></li>
<li><strong>RAG as a Pipeline: Retrieval + Generation</strong>
<ul>
<li>RAG simply combines retrieval (finding relevant information) and generation (creating text) using Large Language Models (LLMs).</li>
<li>It’s not a single technology, but a pipeline requiring optimization at each stage: retrieval, generation, and their connection.</li>
</ul></li>
<li><strong>Importance of Identifying Specific RAG Issues</strong>
<ul>
<li>“My RAG doesn’t work” is too broad. Pinpointing the failing component (retrieval, LLM utilization) is crucial for debugging.</li>
</ul></li>
</ul>
</section>
<section id="the-compact-mvp-a-simple-rag-implementation" class="level2">
<h2 class="anchored" data-anchor-id="the-compact-mvp-a-simple-rag-implementation">The Compact MVP: A Simple RAG Implementation</h2>
<ul>
<li><strong>Basic Pipeline Components and Flow</strong>
<ul>
<li>Query embedding</li>
<li>Document embedding</li>
<li>Cosine similarity search for relevant documents</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="672" height="480" viewbox="0.00 0.00 478.00 336.80" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 332.8)">
<title>bencoder_approach</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-332.8 474,-332.8 474,4 -4,4"></polygon>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M20,-136C20,-136 450,-136 450,-136 456,-136 462,-142 462,-148 462,-148 462,-272.8 462,-272.8 462,-278.8 456,-284.8 450,-284.8 450,-284.8 20,-284.8 20,-284.8 14,-284.8 8,-278.8 8,-272.8 8,-272.8 8,-148 8,-148 8,-142 14,-136 20,-136"></path>
<text text-anchor="middle" x="235" y="-268.2" font-family="Times,serif" font-size="14.00" fill="red">This is called a 'bi-encoder' approach</text>
</g>
<!-- Query -->
<g id="node1" class="node">
<title>Query</title>
<path fill="#a4d8ff" stroke="black" d="M136,-328.8C136,-328.8 106,-328.8 106,-328.8 100,-328.8 94,-322.8 94,-316.8 94,-316.8 94,-304.8 94,-304.8 94,-298.8 100,-292.8 106,-292.8 106,-292.8 136,-292.8 136,-292.8 142,-292.8 148,-298.8 148,-304.8 148,-304.8 148,-316.8 148,-316.8 148,-322.8 142,-328.8 136,-328.8"></path>
<text text-anchor="middle" x="121" y="-306.6" font-family="Times,serif" font-size="14.00">Query</text>
</g>
<!-- Query_Embedding_Model -->
<g id="node3" class="node">
<title>Query_Embedding_Model</title>
<path fill="#ffc9c9" stroke="black" d="M169.1,-252C169.1,-252 72.9,-252 72.9,-252 66.9,-252 60.9,-246 60.9,-240 60.9,-240 60.9,-228 60.9,-228 60.9,-222 66.9,-216 72.9,-216 72.9,-216 169.1,-216 169.1,-216 175.1,-216 181.1,-222 181.1,-228 181.1,-228 181.1,-240 181.1,-240 181.1,-246 175.1,-252 169.1,-252"></path>
<text text-anchor="middle" x="121" y="-229.8" font-family="Times,serif" font-size="14.00">Embedding Model</text>
</g>
<!-- Query&#45;&gt;Query_Embedding_Model -->
<g id="edge1" class="edge">
<title>Query-&gt;Query_Embedding_Model</title>
<path fill="none" stroke="black" d="M121,-292.45C121,-283.58 121,-272.56 121,-262.56"></path>
<polygon fill="black" stroke="black" points="124.5,-262.25 121,-252.25 117.5,-262.25 124.5,-262.25"></polygon>
</g>
<!-- Documents -->
<g id="node2" class="node">
<title>Documents</title>
<path fill="#feec98" stroke="black" d="M376.77,-328.8C376.77,-328.8 321.23,-328.8 321.23,-328.8 315.23,-328.8 309.23,-322.8 309.23,-316.8 309.23,-316.8 309.23,-304.8 309.23,-304.8 309.23,-298.8 315.23,-292.8 321.23,-292.8 321.23,-292.8 376.77,-292.8 376.77,-292.8 382.77,-292.8 388.77,-298.8 388.77,-304.8 388.77,-304.8 388.77,-316.8 388.77,-316.8 388.77,-322.8 382.77,-328.8 376.77,-328.8"></path>
<text text-anchor="middle" x="349" y="-306.6" font-family="Times,serif" font-size="14.00">Documents</text>
</g>
<!-- Document_Embedding_Model -->
<g id="node5" class="node">
<title>Document_Embedding_Model</title>
<path fill="#ffc9c9" stroke="black" d="M397.1,-252C397.1,-252 300.9,-252 300.9,-252 294.9,-252 288.9,-246 288.9,-240 288.9,-240 288.9,-228 288.9,-228 288.9,-222 294.9,-216 300.9,-216 300.9,-216 397.1,-216 397.1,-216 403.1,-216 409.1,-222 409.1,-228 409.1,-228 409.1,-240 409.1,-240 409.1,-246 403.1,-252 397.1,-252"></path>
<text text-anchor="middle" x="349" y="-229.8" font-family="Times,serif" font-size="14.00">Embedding Model</text>
</g>
<!-- Documents&#45;&gt;Document_Embedding_Model -->
<g id="edge3" class="edge">
<title>Documents-&gt;Document_Embedding_Model</title>
<path fill="none" stroke="black" d="M349,-292.45C349,-283.58 349,-272.56 349,-262.56"></path>
<polygon fill="black" stroke="black" points="352.5,-262.25 349,-252.25 345.5,-262.25 352.5,-262.25"></polygon>
</g>
<!-- Query_Embedding_Pooling -->
<g id="node4" class="node">
<title>Query_Embedding_Pooling</title>
<path fill="#ffc9c9" stroke="black" d="M214.41,-180C214.41,-180 27.59,-180 27.59,-180 21.59,-180 15.59,-174 15.59,-168 15.59,-168 15.59,-156 15.59,-156 15.59,-150 21.59,-144 27.59,-144 27.59,-144 214.41,-144 214.41,-144 220.41,-144 226.41,-150 226.41,-156 226.41,-156 226.41,-168 226.41,-168 226.41,-174 220.41,-180 214.41,-180"></path>
<text text-anchor="middle" x="121" y="-157.8" font-family="Times,serif" font-size="14.00">Embedding pooling (into 1 vector)</text>
</g>
<!-- Query_Embedding_Model&#45;&gt;Query_Embedding_Pooling -->
<g id="edge2" class="edge">
<title>Query_Embedding_Model-&gt;Query_Embedding_Pooling</title>
<path fill="none" stroke="black" d="M121,-215.7C121,-207.98 121,-198.71 121,-190.11"></path>
<polygon fill="black" stroke="black" points="124.5,-190.1 121,-180.1 117.5,-190.1 124.5,-190.1"></polygon>
</g>
<!-- Cosine_Similarity_Search -->
<g id="node7" class="node">
<title>Cosine_Similarity_Search</title>
<path fill="#b2f3bb" stroke="black" d="M298.8,-108C298.8,-108 171.2,-108 171.2,-108 165.2,-108 159.2,-102 159.2,-96 159.2,-96 159.2,-84 159.2,-84 159.2,-78 165.2,-72 171.2,-72 171.2,-72 298.8,-72 298.8,-72 304.8,-72 310.8,-78 310.8,-84 310.8,-84 310.8,-96 310.8,-96 310.8,-102 304.8,-108 298.8,-108"></path>
<text text-anchor="middle" x="235" y="-85.8" font-family="Times,serif" font-size="14.00">Cosine similarity search</text>
</g>
<!-- Query_Embedding_Pooling&#45;&gt;Cosine_Similarity_Search -->
<g id="edge5" class="edge">
<title>Query_Embedding_Pooling-&gt;Cosine_Similarity_Search</title>
<path fill="none" stroke="black" d="M148.89,-143.88C163.79,-134.72 182.33,-123.34 198.38,-113.48"></path>
<polygon fill="black" stroke="black" points="200.31,-116.41 207.01,-108.19 196.65,-110.44 200.31,-116.41"></polygon>
</g>
<!-- Document_Embedding_Pooling -->
<g id="node6" class="node">
<title>Document_Embedding_Pooling</title>
<path fill="#ffc9c9" stroke="black" d="M442.41,-180C442.41,-180 255.59,-180 255.59,-180 249.59,-180 243.59,-174 243.59,-168 243.59,-168 243.59,-156 243.59,-156 243.59,-150 249.59,-144 255.59,-144 255.59,-144 442.41,-144 442.41,-144 448.41,-144 454.41,-150 454.41,-156 454.41,-156 454.41,-168 454.41,-168 454.41,-174 448.41,-180 442.41,-180"></path>
<text text-anchor="middle" x="349" y="-157.8" font-family="Times,serif" font-size="14.00">Embedding pooling (into 1 vector)</text>
</g>
<!-- Document_Embedding_Model&#45;&gt;Document_Embedding_Pooling -->
<g id="edge4" class="edge">
<title>Document_Embedding_Model-&gt;Document_Embedding_Pooling</title>
<path fill="none" stroke="black" d="M349,-215.7C349,-207.98 349,-198.71 349,-190.11"></path>
<polygon fill="black" stroke="black" points="352.5,-190.1 349,-180.1 345.5,-190.1 352.5,-190.1"></polygon>
</g>
<!-- Document_Embedding_Pooling&#45;&gt;Cosine_Similarity_Search -->
<g id="edge6" class="edge">
<title>Document_Embedding_Pooling-&gt;Cosine_Similarity_Search</title>
<path fill="none" stroke="black" d="M321.11,-143.88C306.21,-134.72 287.67,-123.34 271.62,-113.48"></path>
<polygon fill="black" stroke="black" points="273.35,-110.44 262.99,-108.19 269.69,-116.41 273.35,-110.44"></polygon>
</g>
<!-- Results -->
<g id="node8" class="node">
<title>Results</title>
<path fill="#b2f3bb" stroke="black" d="M251.73,-36C251.73,-36 218.27,-36 218.27,-36 212.27,-36 206.27,-30 206.27,-24 206.27,-24 206.27,-12 206.27,-12 206.27,-6 212.27,0 218.27,0 218.27,0 251.73,0 251.73,0 257.73,0 263.73,-6 263.73,-12 263.73,-12 263.73,-24 263.73,-24 263.73,-30 257.73,-36 251.73,-36"></path>
<text text-anchor="middle" x="235" y="-13.8" font-family="Times,serif" font-size="14.00">Results</text>
</g>
<!-- Cosine_Similarity_Search&#45;&gt;Results -->
<g id="edge7" class="edge">
<title>Cosine_Similarity_Search-&gt;Results</title>
<path fill="none" stroke="black" d="M235,-71.7C235,-63.98 235,-54.71 235,-46.11"></path>
<polygon fill="black" stroke="black" points="238.5,-46.1 235,-36.1 231.5,-46.1 238.5,-46.1"></polygon>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li><div class="callout callout-style-default callout-note callout-titled" title="Code Example: Vector Search with NumPy">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Code Example: Vector Search with NumPy
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Demonstrates a basic RAG pipeline without a vector database, emphasizing simplicity.</li>
<li>Uses NumPy for cosine similarity search for demonstration purposes.</li>
</ul>
<div class="sourceCode" id="annotated-cell-2" style="background: #f1f3f5;"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><span id="annotated-cell-2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load the embedding model</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-2-2" class="code-annotation-target"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> sentence_transformers <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> SentenceTransformer</span>
<span id="annotated-cell-2-3">model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> SentenceTransformer(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Alibaba-NLP/gte-base-en-v1.5"</span>)</span>
<span id="annotated-cell-2-4"></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-2-5" class="code-annotation-target"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fetch some text content...</span></span>
<span id="annotated-cell-2-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> wikipediaapi <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Wikipedia</span>
<span id="annotated-cell-2-7">wiki <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> Wikipedia(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'RAGBot/0.0'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'en'</span>)</span>
<span id="annotated-cell-2-8">doc <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> wiki.page(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Hayao_Miyazaki'</span>).text</span>
<span id="annotated-cell-2-9">paragraphs <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> doc.split(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>)</span>
<span id="annotated-cell-2-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ...And embed it.</span></span>
<span id="annotated-cell-2-11">docs_embed <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model.encode(paragraphs, normalize_embeddings<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="annotated-cell-2-12"></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-2-13" class="code-annotation-target"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Embed the query</span></span>
<span id="annotated-cell-2-14">query <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"What was Studio Ghibli's first film?"</span></span>
<span id="annotated-cell-2-15">query_embed <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model.encode(query, normalize_embeddings<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="annotated-cell-2-16"></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-2-17" class="code-annotation-target"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Find the 3 closest paragraphs to the query</span></span>
<span id="annotated-cell-2-18"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="annotated-cell-2-19">similarities <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.dot(docs_embed, query_embed.T)</span>
<span id="annotated-cell-2-20">top_3_idx <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> similarities.topk(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>).indices.tolist()</span>
<span id="annotated-cell-2-21">most_similar_documents <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [paragraphs[idx] <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> idx <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> top_3_idx]</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="2,3" data-code-annotation="1">Load Bi-Encoder</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="5,6,7,8,9,10,11" data-code-annotation="2">Embed Documents</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="13,14,15" data-code-annotation="3">Embed Query</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="17,18,19,20,21" data-code-annotation="4">Cosine Similarity Search</span>
</dd>
</dl>
</div>
</div></li>
</ul>
</section>
<section id="understanding-bi-encoders-in-vector-search" class="level2">
<h2 class="anchored" data-anchor-id="understanding-bi-encoders-in-vector-search">Understanding Bi-Encoders in Vector Search</h2>
<ul>
<li><p><strong>Vector Databases: When and Why?</strong></p>
<ul>
<li>Useful for efficiently searching large document sets using Approximate Search techniques
<ul>
<li><strong>HNSW</strong>
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/1603.09320">Efficient and robust approximate nearest neighbor search using Hierarchical Navigable Small World graphs</a></li>
<li><strong>Article:</strong> <a href="https://www.pinecone.io/learn/series/faiss/hnsw/">Hierarchical Navigable Small Worlds (HNSW)</a></li>
</ul></li>
<li><strong>IVFPQ</strong>
<ul>
<li><strong>Article:</strong> <a href="https://www.pinecone.io/learn/series/faiss/product-quantization/">Product Quantization: Compressing high-dimensional vectors by 97%</a></li>
</ul></li>
</ul></li>
<li>Not necessary for small datasets (e.g., 500 documents)
<ul>
<li>Modern CPU can search through hundreds of vectors in milliseconds</li>
</ul></li>
</ul></li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="672" height="480" viewbox="0.00 0.00 478.00 351.80" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 347.8)">
<title>bencoder_approach</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-347.8 474,-347.8 474,4 -4,4"></polygon>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M20,-153.8C20,-153.8 450,-153.8 450,-153.8 456,-153.8 462,-159.8 462,-165.8 462,-165.8 462,-266.8 462,-266.8 462,-272.8 456,-278.8 450,-278.8 450,-278.8 20,-278.8 20,-278.8 14,-278.8 8,-272.8 8,-266.8 8,-266.8 8,-165.8 8,-165.8 8,-159.8 14,-153.8 20,-153.8"></path>
</g>
<!-- Query -->
<g id="node1" class="node">
<title>Query</title>
<path fill="#a4d8ff" stroke="black" d="M136,-343.8C136,-343.8 106,-343.8 106,-343.8 100,-343.8 94,-337.8 94,-331.8 94,-331.8 94,-319.8 94,-319.8 94,-313.8 100,-307.8 106,-307.8 106,-307.8 136,-307.8 136,-307.8 142,-307.8 148,-313.8 148,-319.8 148,-319.8 148,-331.8 148,-331.8 148,-337.8 142,-343.8 136,-343.8"></path>
<text text-anchor="middle" x="121" y="-321.6" font-family="Times,serif" font-size="14.00">Query</text>
</g>
<!-- Query_Embedding_Model -->
<g id="node3" class="node">
<title>Query_Embedding_Model</title>
<path fill="#fddde6" stroke="black" d="M169.1,-270.8C169.1,-270.8 72.9,-270.8 72.9,-270.8 66.9,-270.8 60.9,-264.8 60.9,-258.8 60.9,-258.8 60.9,-246.8 60.9,-246.8 60.9,-240.8 66.9,-234.8 72.9,-234.8 72.9,-234.8 169.1,-234.8 169.1,-234.8 175.1,-234.8 181.1,-240.8 181.1,-246.8 181.1,-246.8 181.1,-258.8 181.1,-258.8 181.1,-264.8 175.1,-270.8 169.1,-270.8"></path>
<text text-anchor="middle" x="121" y="-248.6" font-family="Times,serif" font-size="14.00">Embedding Model</text>
</g>
<!-- Query&#45;&gt;Query_Embedding_Model -->
<g id="edge1" class="edge">
<title>Query-&gt;Query_Embedding_Model</title>
<path fill="none" stroke="black" d="M121,-307.61C121,-299.59 121,-289.85 121,-280.87"></path>
<polygon fill="black" stroke="black" points="124.5,-280.83 121,-270.83 117.5,-280.83 124.5,-280.83"></polygon>
</g>
<!-- Documents -->
<g id="node2" class="node">
<title>Documents</title>
<path fill="#feec98" stroke="black" d="M376.77,-343.8C376.77,-343.8 321.23,-343.8 321.23,-343.8 315.23,-343.8 309.23,-337.8 309.23,-331.8 309.23,-331.8 309.23,-319.8 309.23,-319.8 309.23,-313.8 315.23,-307.8 321.23,-307.8 321.23,-307.8 376.77,-307.8 376.77,-307.8 382.77,-307.8 388.77,-313.8 388.77,-319.8 388.77,-319.8 388.77,-331.8 388.77,-331.8 388.77,-337.8 382.77,-343.8 376.77,-343.8"></path>
<text text-anchor="middle" x="349" y="-321.6" font-family="Times,serif" font-size="14.00">Documents</text>
</g>
<!-- Document_Embedding_Model -->
<g id="node5" class="node">
<title>Document_Embedding_Model</title>
<path fill="#fddde6" stroke="black" d="M397.1,-270.8C397.1,-270.8 300.9,-270.8 300.9,-270.8 294.9,-270.8 288.9,-264.8 288.9,-258.8 288.9,-258.8 288.9,-246.8 288.9,-246.8 288.9,-240.8 294.9,-234.8 300.9,-234.8 300.9,-234.8 397.1,-234.8 397.1,-234.8 403.1,-234.8 409.1,-240.8 409.1,-246.8 409.1,-246.8 409.1,-258.8 409.1,-258.8 409.1,-264.8 403.1,-270.8 397.1,-270.8"></path>
<text text-anchor="middle" x="349" y="-248.6" font-family="Times,serif" font-size="14.00">Embedding Model</text>
</g>
<!-- Documents&#45;&gt;Document_Embedding_Model -->
<g id="edge3" class="edge">
<title>Documents-&gt;Document_Embedding_Model</title>
<path fill="none" stroke="black" d="M349,-307.61C349,-299.59 349,-289.85 349,-280.87"></path>
<polygon fill="black" stroke="black" points="352.5,-280.83 349,-270.83 345.5,-280.83 352.5,-280.83"></polygon>
</g>
<!-- Query_Embedding_Pooling -->
<g id="node4" class="node">
<title>Query_Embedding_Pooling</title>
<path fill="#fddde6" stroke="black" d="M214.41,-197.8C214.41,-197.8 27.59,-197.8 27.59,-197.8 21.59,-197.8 15.59,-191.8 15.59,-185.8 15.59,-185.8 15.59,-173.8 15.59,-173.8 15.59,-167.8 21.59,-161.8 27.59,-161.8 27.59,-161.8 214.41,-161.8 214.41,-161.8 220.41,-161.8 226.41,-167.8 226.41,-173.8 226.41,-173.8 226.41,-185.8 226.41,-185.8 226.41,-191.8 220.41,-197.8 214.41,-197.8"></path>
<text text-anchor="middle" x="121" y="-175.6" font-family="Times,serif" font-size="14.00">Embedding pooling (into 1 vector)</text>
</g>
<!-- Query_Embedding_Model&#45;&gt;Query_Embedding_Pooling -->
<g id="edge2" class="edge">
<title>Query_Embedding_Model-&gt;Query_Embedding_Pooling</title>
<path fill="none" stroke="black" d="M121,-234.61C121,-226.59 121,-216.85 121,-207.87"></path>
<polygon fill="black" stroke="black" points="124.5,-207.83 121,-197.83 117.5,-207.83 124.5,-207.83"></polygon>
</g>
<!-- Cosine_Similarity_Search -->
<g id="node7" class="node">
<title>Cosine_Similarity_Search</title>
<path fill="#b2f3bb" stroke="black" d="M297.8,-109C297.8,-109 170.2,-109 170.2,-109 164.2,-109 158.2,-103 158.2,-97 158.2,-97 158.2,-85 158.2,-85 158.2,-79 164.2,-73 170.2,-73 170.2,-73 297.8,-73 297.8,-73 303.8,-73 309.8,-79 309.8,-85 309.8,-85 309.8,-97 309.8,-97 309.8,-103 303.8,-109 297.8,-109"></path>
<text text-anchor="middle" x="234" y="-86.8" font-family="Times,serif" font-size="14.00">Cosine similarity search</text>
</g>
<!-- Query_Embedding_Pooling&#45;&gt;Cosine_Similarity_Search -->
<g id="edge5" class="edge">
<title>Query_Embedding_Pooling-&gt;Cosine_Similarity_Search</title>
<path fill="none" stroke="black" d="M143.33,-161.65C160.58,-148.4 184.65,-129.91 203.66,-115.31"></path>
<polygon fill="black" stroke="black" points="205.92,-117.98 211.72,-109.11 201.66,-112.43 205.92,-117.98"></polygon>
</g>
<!-- Document_Embedding_Pooling -->
<g id="node6" class="node">
<title>Document_Embedding_Pooling</title>
<path fill="#fddde6" stroke="black" d="M442.41,-197.8C442.41,-197.8 255.59,-197.8 255.59,-197.8 249.59,-197.8 243.59,-191.8 243.59,-185.8 243.59,-185.8 243.59,-173.8 243.59,-173.8 243.59,-167.8 249.59,-161.8 255.59,-161.8 255.59,-161.8 442.41,-161.8 442.41,-161.8 448.41,-161.8 454.41,-167.8 454.41,-173.8 454.41,-173.8 454.41,-185.8 454.41,-185.8 454.41,-191.8 448.41,-197.8 442.41,-197.8"></path>
<text text-anchor="middle" x="349" y="-175.6" font-family="Times,serif" font-size="14.00">Embedding pooling (into 1 vector)</text>
</g>
<!-- Document_Embedding_Model&#45;&gt;Document_Embedding_Pooling -->
<g id="edge4" class="edge">
<title>Document_Embedding_Model-&gt;Document_Embedding_Pooling</title>
<path fill="none" stroke="black" d="M349,-234.61C349,-226.59 349,-216.85 349,-207.87"></path>
<polygon fill="black" stroke="black" points="352.5,-207.83 349,-197.83 345.5,-207.83 352.5,-207.83"></polygon>
</g>
<!-- Document_Embedding_Pooling&#45;&gt;Cosine_Similarity_Search -->
<g id="edge6" class="edge">
<title>Document_Embedding_Pooling-&gt;Cosine_Similarity_Search</title>
<path fill="none" stroke="black" d="M326.28,-161.65C308.72,-148.4 284.22,-129.91 264.88,-115.31"></path>
<polygon fill="black" stroke="black" points="266.76,-112.34 256.67,-109.11 262.55,-117.93 266.76,-112.34"></polygon>
<text text-anchor="middle" x="359.9" y="-131.2" font-family="Times,serif" font-size="14.00">Vector DB goes here</text>
</g>
<!-- Results -->
<g id="node8" class="node">
<title>Results</title>
<path fill="#b2f3bb" stroke="black" d="M250.73,-36C250.73,-36 217.27,-36 217.27,-36 211.27,-36 205.27,-30 205.27,-24 205.27,-24 205.27,-12 205.27,-12 205.27,-6 211.27,0 217.27,0 217.27,0 250.73,0 250.73,0 256.73,0 262.73,-6 262.73,-12 262.73,-12 262.73,-24 262.73,-24 262.73,-30 256.73,-36 250.73,-36"></path>
<text text-anchor="middle" x="234" y="-13.8" font-family="Times,serif" font-size="14.00">Results</text>
</g>
<!-- Cosine_Similarity_Search&#45;&gt;Results -->
<g id="edge7" class="edge">
<title>Cosine_Similarity_Search-&gt;Results</title>
<path fill="none" stroke="black" d="M234,-72.81C234,-64.79 234,-55.05 234,-46.07"></path>
<polygon fill="black" stroke="black" points="237.5,-46.03 234,-36.03 230.5,-46.03 237.5,-46.03"></polygon>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li><p><strong>Bi-Encoders: Separate Encoding for Queries and Documents</strong></p>
<ul>
<li>Encode documents and queries independently.</li>
<li>Pre-computed document representations allow for efficient inference, as only the query needs encoding at runtime.</li>
<li>Comes with retrieval performance tradeoffs</li>
</ul></li>
</ul>
</section>
<section id="improving-retrieval-with-re-ranking" class="level2">
<h2 class="anchored" data-anchor-id="improving-retrieval-with-re-ranking">Improving Retrieval with Re-ranking</h2>
<ul>
<li><strong>Bi-Encoder Limitations: Context Unawareness</strong>
<ul>
<li>Bi-encoders encode documents and queries separately, potentially missing nuanced relationships between them.</li>
</ul></li>
<li><strong>Cross-Encoders: Joint Encoding for Better Relevance Scoring</strong>
<ul>
<li>Encode query-document pairs together, allowing for a more context-aware relevance score.</li>
<li>Effectively a binary classifier
<ul>
<li>Uses the probability of being the positive class as the similarity score.</li>
</ul></li>
<li>Computationally expensive for large datasets.</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="672" height="480" viewbox="0.00 0.00 406.00 244.80" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 240.8)">
<title>bi_encoder</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-240.8 402,-240.8 402,4 -4,4"></polygon>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M20,-8C20,-8 378,-8 378,-8 384,-8 390,-14 390,-20 390,-20 390,-216.8 390,-216.8 390,-222.8 384,-228.8 378,-228.8 378,-228.8 20,-228.8 20,-228.8 14,-228.8 8,-222.8 8,-216.8 8,-216.8 8,-20 8,-20 8,-14 14,-8 20,-8"></path>
<text text-anchor="middle" x="199" y="-212.2" font-family="Times,serif" font-size="14.00">Bi-Encoder</text>
</g>
<!-- Query -->
<g id="node1" class="node">
<title>Query</title>
<path fill="#a4d8ff" stroke="black" d="M310,-196C310,-196 280,-196 280,-196 274,-196 268,-190 268,-184 268,-184 268,-172 268,-172 268,-166 274,-160 280,-160 280,-160 310,-160 310,-160 316,-160 322,-166 322,-172 322,-172 322,-184 322,-184 322,-190 316,-196 310,-196"></path>
<text text-anchor="middle" x="295" y="-173.8" font-family="Times,serif" font-size="14.00">Query</text>
</g>
<!-- Query_Bi_Encoder -->
<g id="node3" class="node">
<title>Query_Bi_Encoder</title>
<path fill="#fddde6" stroke="black" d="M369.58,-124C369.58,-124 220.42,-124 220.42,-124 214.42,-124 208.42,-118 208.42,-112 208.42,-112 208.42,-100 208.42,-100 208.42,-94 214.42,-88 220.42,-88 220.42,-88 369.58,-88 369.58,-88 375.58,-88 381.58,-94 381.58,-100 381.58,-100 381.58,-112 381.58,-112 381.58,-118 375.58,-124 369.58,-124"></path>
<text text-anchor="middle" x="295" y="-101.8" font-family="Times,serif" font-size="14.00">Bi-Encoder (Embed + Pool)</text>
</g>
<!-- Query&#45;&gt;Query_Bi_Encoder -->
<g id="edge1" class="edge">
<title>Query-&gt;Query_Bi_Encoder</title>
<path fill="none" stroke="black" d="M295,-159.7C295,-151.98 295,-142.71 295,-134.11"></path>
<polygon fill="black" stroke="black" points="298.5,-134.1 295,-124.1 291.5,-134.1 298.5,-134.1"></polygon>
</g>
<!-- Documents -->
<g id="node2" class="node">
<title>Documents</title>
<path fill="#feec98" stroke="black" d="M130.77,-196C130.77,-196 75.23,-196 75.23,-196 69.23,-196 63.23,-190 63.23,-184 63.23,-184 63.23,-172 63.23,-172 63.23,-166 69.23,-160 75.23,-160 75.23,-160 130.77,-160 130.77,-160 136.77,-160 142.77,-166 142.77,-172 142.77,-172 142.77,-184 142.77,-184 142.77,-190 136.77,-196 130.77,-196"></path>
<text text-anchor="middle" x="103" y="-173.8" font-family="Times,serif" font-size="14.00">Documents</text>
</g>
<!-- Document_Bi_Encoder -->
<g id="node4" class="node">
<title>Document_Bi_Encoder</title>
<path fill="#fddde6" stroke="black" d="M177.58,-124C177.58,-124 28.42,-124 28.42,-124 22.42,-124 16.42,-118 16.42,-112 16.42,-112 16.42,-100 16.42,-100 16.42,-94 22.42,-88 28.42,-88 28.42,-88 177.58,-88 177.58,-88 183.58,-88 189.58,-94 189.58,-100 189.58,-100 189.58,-112 189.58,-112 189.58,-118 183.58,-124 177.58,-124"></path>
<text text-anchor="middle" x="103" y="-101.8" font-family="Times,serif" font-size="14.00">Bi-Encoder (Embed + Pool)</text>
</g>
<!-- Documents&#45;&gt;Document_Bi_Encoder -->
<g id="edge2" class="edge">
<title>Documents-&gt;Document_Bi_Encoder</title>
<path fill="none" stroke="black" d="M103,-159.7C103,-151.98 103,-142.71 103,-134.11"></path>
<polygon fill="black" stroke="black" points="106.5,-134.1 103,-124.1 99.5,-134.1 106.5,-134.1"></polygon>
</g>
<!-- Cosine_Similarity_Search -->
<g id="node5" class="node">
<title>Cosine_Similarity_Search</title>
<path fill="#b2f3bb" stroke="black" d="M262.8,-52C262.8,-52 135.2,-52 135.2,-52 129.2,-52 123.2,-46 123.2,-40 123.2,-40 123.2,-28 123.2,-28 123.2,-22 129.2,-16 135.2,-16 135.2,-16 262.8,-16 262.8,-16 268.8,-16 274.8,-22 274.8,-28 274.8,-28 274.8,-40 274.8,-40 274.8,-46 268.8,-52 262.8,-52"></path>
<text text-anchor="middle" x="199" y="-29.8" font-family="Times,serif" font-size="14.00">Cosine similarity search</text>
</g>
<!-- Query_Bi_Encoder&#45;&gt;Cosine_Similarity_Search -->
<g id="edge3" class="edge">
<title>Query_Bi_Encoder-&gt;Cosine_Similarity_Search</title>
<path fill="none" stroke="black" d="M271.27,-87.7C259.06,-78.8 244.01,-67.82 230.82,-58.2"></path>
<polygon fill="black" stroke="black" points="232.6,-55.17 222.46,-52.1 228.48,-60.82 232.6,-55.17"></polygon>
</g>
<!-- Document_Bi_Encoder&#45;&gt;Cosine_Similarity_Search -->
<g id="edge4" class="edge">
<title>Document_Bi_Encoder-&gt;Cosine_Similarity_Search</title>
<path fill="none" stroke="black" d="M126.73,-87.7C138.94,-78.8 153.99,-67.82 167.18,-58.2"></path>
<polygon fill="black" stroke="black" points="169.52,-60.82 175.54,-52.1 165.4,-55.17 169.52,-60.82"></polygon>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="672" height="480" viewbox="0.00 0.00 192.00 244.80" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 240.8)">
<title>cross_encoder</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-240.8 188,-240.8 188,4 -4,4"></polygon>
<g id="clust1" class="cluster">
<title>cluster_1</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M20,-8C20,-8 164,-8 164,-8 170,-8 176,-14 176,-20 176,-20 176,-216.8 176,-216.8 176,-222.8 170,-228.8 164,-228.8 164,-228.8 20,-228.8 20,-228.8 14,-228.8 8,-222.8 8,-216.8 8,-216.8 8,-20 8,-20 8,-14 14,-8 20,-8"></path>
<text text-anchor="middle" x="92" y="-212.2" font-family="Times,serif" font-size="14.00">Cross-Encoder</text>
</g>
<!-- Query_2 -->
<g id="node1" class="node">
<title>Query_2</title>
<path fill="#a4d8ff" stroke="black" d="M156,-196C156,-196 126,-196 126,-196 120,-196 114,-190 114,-184 114,-184 114,-172 114,-172 114,-166 120,-160 126,-160 126,-160 156,-160 156,-160 162,-160 168,-166 168,-172 168,-172 168,-184 168,-184 168,-190 162,-196 156,-196"></path>
<text text-anchor="middle" x="141" y="-173.8" font-family="Times,serif" font-size="14.00">Query</text>
</g>
<!-- Cross_Encoder -->
<g id="node3" class="node">
<title>Cross_Encoder</title>
<path fill="#fed8a7" stroke="black" d="M129.7,-124C129.7,-124 54.3,-124 54.3,-124 48.3,-124 42.3,-118 42.3,-112 42.3,-112 42.3,-100 42.3,-100 42.3,-94 48.3,-88 54.3,-88 54.3,-88 129.7,-88 129.7,-88 135.7,-88 141.7,-94 141.7,-100 141.7,-100 141.7,-112 141.7,-112 141.7,-118 135.7,-124 129.7,-124"></path>
<text text-anchor="middle" x="92" y="-101.8" font-family="Times,serif" font-size="14.00">Cross-Encoder</text>
</g>
<!-- Query_2&#45;&gt;Cross_Encoder -->
<g id="edge1" class="edge">
<title>Query_2-&gt;Cross_Encoder</title>
<path fill="none" stroke="black" d="M128.89,-159.7C123.13,-151.47 116.14,-141.48 109.79,-132.42"></path>
<polygon fill="black" stroke="black" points="112.58,-130.29 103.97,-124.1 106.84,-134.3 112.58,-130.29"></polygon>
</g>
<!-- Documents_2 -->
<g id="node2" class="node">
<title>Documents_2</title>
<path fill="#feec98" stroke="black" d="M83.77,-196C83.77,-196 28.23,-196 28.23,-196 22.23,-196 16.23,-190 16.23,-184 16.23,-184 16.23,-172 16.23,-172 16.23,-166 22.23,-160 28.23,-160 28.23,-160 83.77,-160 83.77,-160 89.77,-160 95.77,-166 95.77,-172 95.77,-172 95.77,-184 95.77,-184 95.77,-190 89.77,-196 83.77,-196"></path>
<text text-anchor="middle" x="56" y="-173.8" font-family="Times,serif" font-size="14.00">Documents</text>
</g>
<!-- Documents_2&#45;&gt;Cross_Encoder -->
<g id="edge2" class="edge">
<title>Documents_2-&gt;Cross_Encoder</title>
<path fill="none" stroke="black" d="M64.9,-159.7C69,-151.73 73.95,-142.1 78.49,-133.26"></path>
<polygon fill="black" stroke="black" points="81.74,-134.6 83.2,-124.1 75.52,-131.4 81.74,-134.6"></polygon>
</g>
<!-- Similarity_Score -->
<g id="node4" class="node">
<title>Similarity_Score</title>
<path fill="#b2f3bb" stroke="black" d="M133.88,-52C133.88,-52 50.12,-52 50.12,-52 44.12,-52 38.12,-46 38.12,-40 38.12,-40 38.12,-28 38.12,-28 38.12,-22 44.12,-16 50.12,-16 50.12,-16 133.88,-16 133.88,-16 139.88,-16 145.88,-22 145.88,-28 145.88,-28 145.88,-40 145.88,-40 145.88,-46 139.88,-52 133.88,-52"></path>
<text text-anchor="middle" x="92" y="-29.8" font-family="Times,serif" font-size="14.00">Similarity Score</text>
</g>
<!-- Cross_Encoder&#45;&gt;Similarity_Score -->
<g id="edge3" class="edge">
<title>Cross_Encoder-&gt;Similarity_Score</title>
<path fill="none" stroke="black" d="M92,-87.7C92,-79.98 92,-70.71 92,-62.11"></path>
<polygon fill="black" stroke="black" points="95.5,-62.1 92,-52.1 88.5,-62.1 95.5,-62.1"></polygon>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li><p><strong>Re-ranking in Practice: Addressing Computational Costs</strong></p>
<ul>
<li>Leverage a powerful but computationally expensive model (like cross-encoders) to score a subset of your documents, previously retrieved by more efficient model</li>
<li><strong>Examples of other re-ranking approaches:</strong>
<ul>
<li><strong><a href="https://github.com/sunnweiwei/RankGPT">RankGPT</a>:</strong> LLMs as Re-Ranking Agent</li>
<li><strong><a href="https://github.com/castorini/rank_llm">RankLLM</a>:</strong> Repository for prompt-decoding using LLMs</li>
</ul></li>
</ul></li>
<li><p><strong><a href="https://github.com/AnswerDotAI/rerankers">rerankers</a>:</strong> A lightweight unified API for various reranking models.</p></li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="672" height="480" viewbox="0.00 0.00 406.00 372.80" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 368.8)">
<title>reranking</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-368.8 402,-368.8 402,4 -4,4"></polygon>
<text text-anchor="middle" x="199" y="-348.2" font-family="Times,serif" font-size="14.00">Compact Pipeline + Reranking</text>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M20,-208C20,-208 378,-208 378,-208 384,-208 390,-214 390,-220 390,-220 390,-248 390,-248 390,-254 384,-260 378,-260 378,-260 20,-260 20,-260 14,-260 8,-254 8,-248 8,-248 8,-220 8,-220 8,-214 14,-208 20,-208"></path>
</g>
<!-- Query -->
<g id="node1" class="node">
<title>Query</title>
<path fill="#a4d8ff" stroke="black" d="M118,-324C118,-324 88,-324 88,-324 82,-324 76,-318 76,-312 76,-312 76,-300 76,-300 76,-294 82,-288 88,-288 88,-288 118,-288 118,-288 124,-288 130,-294 130,-300 130,-300 130,-312 130,-312 130,-318 124,-324 118,-324"></path>
<text text-anchor="middle" x="103" y="-301.8" font-family="Times,serif" font-size="14.00">Query</text>
</g>
<!-- Query_Bi_Encoder -->
<g id="node3" class="node">
<title>Query_Bi_Encoder</title>
<path fill="#ffc9c9" stroke="black" d="M177.58,-252C177.58,-252 28.42,-252 28.42,-252 22.42,-252 16.42,-246 16.42,-240 16.42,-240 16.42,-228 16.42,-228 16.42,-222 22.42,-216 28.42,-216 28.42,-216 177.58,-216 177.58,-216 183.58,-216 189.58,-222 189.58,-228 189.58,-228 189.58,-240 189.58,-240 189.58,-246 183.58,-252 177.58,-252"></path>
<text text-anchor="middle" x="103" y="-229.8" font-family="Times,serif" font-size="14.00">Bi-Encoder (Embed + Pool)</text>
</g>
<!-- Query&#45;&gt;Query_Bi_Encoder -->
<g id="edge1" class="edge">
<title>Query-&gt;Query_Bi_Encoder</title>
<path fill="none" stroke="black" d="M103,-287.7C103,-279.98 103,-270.71 103,-262.11"></path>
<polygon fill="black" stroke="black" points="106.5,-262.1 103,-252.1 99.5,-262.1 106.5,-262.1"></polygon>
</g>
<!-- Documents -->
<g id="node2" class="node">
<title>Documents</title>
<path fill="#feec98" stroke="black" d="M322.77,-324C322.77,-324 267.23,-324 267.23,-324 261.23,-324 255.23,-318 255.23,-312 255.23,-312 255.23,-300 255.23,-300 255.23,-294 261.23,-288 267.23,-288 267.23,-288 322.77,-288 322.77,-288 328.77,-288 334.77,-294 334.77,-300 334.77,-300 334.77,-312 334.77,-312 334.77,-318 328.77,-324 322.77,-324"></path>
<text text-anchor="middle" x="295" y="-301.8" font-family="Times,serif" font-size="14.00">Documents</text>
</g>
<!-- Document_Bi_Encoder -->
<g id="node4" class="node">
<title>Document_Bi_Encoder</title>
<path fill="#ffc9c9" stroke="black" d="M369.58,-252C369.58,-252 220.42,-252 220.42,-252 214.42,-252 208.42,-246 208.42,-240 208.42,-240 208.42,-228 208.42,-228 208.42,-222 214.42,-216 220.42,-216 220.42,-216 369.58,-216 369.58,-216 375.58,-216 381.58,-222 381.58,-228 381.58,-228 381.58,-240 381.58,-240 381.58,-246 375.58,-252 369.58,-252"></path>
<text text-anchor="middle" x="295" y="-229.8" font-family="Times,serif" font-size="14.00">Bi-Encoder (Embed + Pool)</text>
</g>
<!-- Documents&#45;&gt;Document_Bi_Encoder -->
<g id="edge2" class="edge">
<title>Documents-&gt;Document_Bi_Encoder</title>
<path fill="none" stroke="black" d="M295,-287.7C295,-279.98 295,-270.71 295,-262.11"></path>
<polygon fill="black" stroke="black" points="298.5,-262.1 295,-252.1 291.5,-262.1 298.5,-262.1"></polygon>
</g>
<!-- Cosine_Similarity_Search -->
<g id="node5" class="node">
<title>Cosine_Similarity_Search</title>
<path fill="#b2f3bb" stroke="black" d="M262.8,-180C262.8,-180 135.2,-180 135.2,-180 129.2,-180 123.2,-174 123.2,-168 123.2,-168 123.2,-156 123.2,-156 123.2,-150 129.2,-144 135.2,-144 135.2,-144 262.8,-144 262.8,-144 268.8,-144 274.8,-150 274.8,-156 274.8,-156 274.8,-168 274.8,-168 274.8,-174 268.8,-180 262.8,-180"></path>
<text text-anchor="middle" x="199" y="-157.8" font-family="Times,serif" font-size="14.00">Cosine similarity search</text>
</g>
<!-- Query_Bi_Encoder&#45;&gt;Cosine_Similarity_Search -->
<g id="edge3" class="edge">
<title>Query_Bi_Encoder-&gt;Cosine_Similarity_Search</title>
<path fill="none" stroke="black" d="M126.73,-215.7C138.94,-206.8 153.99,-195.82 167.18,-186.2"></path>
<polygon fill="black" stroke="black" points="169.52,-188.82 175.54,-180.1 165.4,-183.17 169.52,-188.82"></polygon>
</g>
<!-- Document_Bi_Encoder&#45;&gt;Cosine_Similarity_Search -->
<g id="edge4" class="edge">
<title>Document_Bi_Encoder-&gt;Cosine_Similarity_Search</title>
<path fill="none" stroke="black" d="M271.27,-215.7C259.06,-206.8 244.01,-195.82 230.82,-186.2"></path>
<polygon fill="black" stroke="black" points="232.6,-183.17 222.46,-180.1 228.48,-188.82 232.6,-183.17"></polygon>
</g>
<!-- Reranking -->
<g id="node7" class="node">
<title>Reranking</title>
<path fill="#fed8a7" stroke="black" d="M224.32,-108C224.32,-108 173.68,-108 173.68,-108 167.68,-108 161.68,-102 161.68,-96 161.68,-96 161.68,-84 161.68,-84 161.68,-78 167.68,-72 173.68,-72 173.68,-72 224.32,-72 224.32,-72 230.32,-72 236.32,-78 236.32,-84 236.32,-84 236.32,-96 236.32,-96 236.32,-102 230.32,-108 224.32,-108"></path>
<text text-anchor="middle" x="199" y="-85.8" font-family="Times,serif" font-size="14.00">Reranking</text>
</g>
<!-- Cosine_Similarity_Search&#45;&gt;Reranking -->
<g id="edge5" class="edge">
<title>Cosine_Similarity_Search-&gt;Reranking</title>
<path fill="none" stroke="black" d="M199,-143.7C199,-135.98 199,-126.71 199,-118.11"></path>
<polygon fill="black" stroke="black" points="202.5,-118.1 199,-108.1 195.5,-118.1 202.5,-118.1"></polygon>
</g>
<!-- Results -->
<g id="node6" class="node">
<title>Results</title>
<path fill="#b2f3bb" stroke="black" d="M215.73,-36C215.73,-36 182.27,-36 182.27,-36 176.27,-36 170.27,-30 170.27,-24 170.27,-24 170.27,-12 170.27,-12 170.27,-6 176.27,0 182.27,0 182.27,0 215.73,0 215.73,0 221.73,0 227.73,-6 227.73,-12 227.73,-12 227.73,-24 227.73,-24 227.73,-30 221.73,-36 215.73,-36"></path>
<text text-anchor="middle" x="199" y="-13.8" font-family="Times,serif" font-size="14.00">Results</text>
</g>
<!-- Reranking&#45;&gt;Results -->
<g id="edge6" class="edge">
<title>Reranking-&gt;Results</title>
<path fill="none" stroke="black" d="M199,-71.7C199,-63.98 199,-54.71 199,-46.11"></path>
<polygon fill="black" stroke="black" points="202.5,-46.1 199,-36.1 195.5,-46.1 202.5,-46.1"></polygon>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="keyword-search" class="level2">
<h2 class="anchored" data-anchor-id="keyword-search">Keyword Search</h2>
<ul>
<li><p>Also called “full-text search”</p></li>
<li><p><strong>Embeddings Are Not Enough: Lossy Compression and Jargon</strong></p>
<ul>
<li>Embeddings compress information, potentially losing details crucial for accurate retrieval, especially with domain-specific jargon and acronyms.</li>
</ul></li>
<li><p><strong>TF-IDF and BM25</strong></p>
<ul>
<li>Emphasizes the importance of incorporating traditional keyword search alongside embedding-based methods.</li>
<li><strong>TF-IDF (Term Frequency-Inverse Document Frequency)</strong>
<ul>
<li>Assigns a weight to words or groups of words based on their rarity</li>
<li><strong>Stanford IR Book:</strong> <a href="https://nlp.stanford.edu/IR-book/html/htmledition/inverse-document-frequency-1.html">Inverse document frequency</a></li>
</ul></li>
<li><strong>BM25 (Best-Matching 25)</strong>
<ul>
<li><strong>Wikipedia:</strong> <a href="https://en.wikipedia.org/wiki/Okapi_BM25">Okapi BM25</a></li>
<li><strong>Stanford IR Book:</strong> <a href="https://nlp.stanford.edu/IR-book/html/htmledition/okapi-bm25-a-non-binary-model-1.html">Okapi BM25: a non-binary model</a></li>
</ul></li>
</ul></li>
<li><p><strong>BM25 Performance and Relevance in Modern Pipelines</strong></p>
<ul>
<li>Highlights BM25’s continued relevance and effectiveness, often outperforming or complementing more complex methods.
<ul>
<li><div class="callout callout-style-default callout-note callout-titled" title="Results Table">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Results Table
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div style="overflow-x:auto; max-height:500px">
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 4%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
</colgroup>
<thead>
<tr class="header">
<th>Model (→) Dataset (↓)</th>
<th>BM25</th>
<th>DeepCT</th>
<th>SPARTA</th>
<th>docT5query</th>
<th>DPR</th>
<th>ANCE</th>
<th>TAS-B</th>
<th>GenQ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>MS MARCO</td>
<td>0.228</td>
<td>0.296‡</td>
<td>0.351‡</td>
<td>0.338‡</td>
<td>0.177</td>
<td>0.388‡</td>
<td>0.408‡</td>
<td>0.408‡</td>
</tr>
<tr class="even">
<td>TREC-COVID</td>
<td>0.656</td>
<td>0.406</td>
<td>0.538</td>
<td>0.713</td>
<td>0.332</td>
<td>0.654</td>
<td>0.481</td>
<td>0.619</td>
</tr>
<tr class="odd">
<td>BioASQ</td>
<td>0.465</td>
<td>0.407</td>
<td>0.351</td>
<td>0.431</td>
<td>0.127</td>
<td>0.306</td>
<td>0.383</td>
<td>0.398</td>
</tr>
<tr class="even">
<td>NFCorpus</td>
<td>0.325</td>
<td>0.283</td>
<td>0.301</td>
<td>0.328</td>
<td>0.189</td>
<td>0.237</td>
<td>0.319</td>
<td>0.319</td>
</tr>
<tr class="odd">
<td>NQ</td>
<td>0.329</td>
<td>0.188</td>
<td>0.398</td>
<td>0.399</td>
<td>0.474‡</td>
<td>0.446</td>
<td>0.463</td>
<td>0.358</td>
</tr>
<tr class="even">
<td>HotpotQA</td>
<td>0.603</td>
<td>0.503</td>
<td>0.492</td>
<td>0.580</td>
<td>0.391</td>
<td>0.456</td>
<td>0.584</td>
<td>0.534</td>
</tr>
<tr class="odd">
<td>FiQA-2018</td>
<td>0.236</td>
<td>0.191</td>
<td>0.198</td>
<td>0.291</td>
<td>0.112</td>
<td>0.295</td>
<td>0.300</td>
<td>0.308</td>
</tr>
<tr class="even">
<td>Signal-1M (RT)</td>
<td>0.330</td>
<td>0.269</td>
<td>0.252</td>
<td>0.307</td>
<td>0.155</td>
<td>0.249</td>
<td>0.289</td>
<td>0.281</td>
</tr>
<tr class="odd">
<td>TREC-NEWS</td>
<td>0.398</td>
<td>0.220</td>
<td>0.258</td>
<td>0.420</td>
<td>0.161</td>
<td>0.382</td>
<td>0.377</td>
<td>0.396</td>
</tr>
<tr class="even">
<td>Robust04</td>
<td>0.408</td>
<td>0.287</td>
<td>0.276</td>
<td>0.437</td>
<td>0.252</td>
<td>0.392</td>
<td>0.427</td>
<td>0.362</td>
</tr>
<tr class="odd">
<td>ArguAna</td>
<td>0.315</td>
<td>0.309</td>
<td>0.279</td>
<td>0.349</td>
<td>0.175</td>
<td>0.415</td>
<td>0.429</td>
<td>0.493</td>
</tr>
<tr class="even">
<td>Touché-2020</td>
<td>0.367</td>
<td>0.156</td>
<td>0.175</td>
<td>0.347</td>
<td>0.131</td>
<td>0.240</td>
<td>0.162</td>
<td>0.182</td>
</tr>
<tr class="odd">
<td>CQADupStack</td>
<td>0.299</td>
<td>0.268</td>
<td>0.257</td>
<td>0.325</td>
<td>0.153</td>
<td>0.296</td>
<td>0.314</td>
<td>0.347</td>
</tr>
<tr class="even">
<td>Quora</td>
<td>0.789</td>
<td>0.691</td>
<td>0.630</td>
<td>0.802</td>
<td>0.248</td>
<td>0.852</td>
<td>0.835</td>
<td>0.830</td>
</tr>
<tr class="odd">
<td>DBPedia</td>
<td>0.313</td>
<td>0.177</td>
<td>0.314</td>
<td>0.331</td>
<td>0.263</td>
<td>0.281</td>
<td>0.384</td>
<td>0.328</td>
</tr>
<tr class="even">
<td>SCIDOCS</td>
<td>0.158</td>
<td>0.124</td>
<td>0.126</td>
<td>0.162</td>
<td>0.077</td>
<td>0.122</td>
<td>0.149</td>
<td>0.143</td>
</tr>
<tr class="odd">
<td>FEVER</td>
<td>0.753</td>
<td>0.353</td>
<td>0.596</td>
<td>0.714</td>
<td>0.562</td>
<td>0.669</td>
<td>0.700</td>
<td>0.669</td>
</tr>
<tr class="even">
<td>Climate-FEVER</td>
<td>0.213</td>
<td>0.066</td>
<td>0.082</td>
<td>0.201</td>
<td>0.148</td>
<td>0.198</td>
<td>0.228</td>
<td>0.175</td>
</tr>
<tr class="odd">
<td>SciFact</td>
<td>0.665</td>
<td>0.630</td>
<td>0.582</td>
<td>0.675</td>
<td>0.318</td>
<td>0.507</td>
<td>0.643</td>
<td>0.644</td>
</tr>
<tr class="even">
<td><strong>Avg. Performance vs.&nbsp;BM25</strong></td>
<td></td>
<td><strong>- 27.9%</strong></td>
<td><strong>- 20.3%</strong></td>
<td><strong>+ 1.6%</strong></td>
<td><strong>- 47.7%</strong></td>
<td><strong>- 7.4%</strong></td>
<td><strong>- 2.8%</strong></td>
<td><strong>- 3.6%</strong></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div></li>
<li><strong>Source:</strong> <a href="https://arxiv.org/abs/2104.08663">BEIR: A Heterogeneous Benchmark for Zero-shot Evaluation of Information Retrieval Models</a></li>
</ul></li>
<li>Especially powerful on longer documents and documents containing a lot of domain-specific jargon</li>
<li>Virtually unnoticeable inference-time compute overhead</li>
</ul></li>
</ul>
<section id="the-tf-idf-mvp" class="level3">
<h3 class="anchored" data-anchor-id="the-tf-idf-mvp">The TF-IDF MVP++</h3>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="672" height="480" viewbox="0.00 0.00 760.00 404.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 400)">
<title>tfidf_mvp_plusplus</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-400 756,-400 756,4 -4,4"></polygon>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M20,-280C20,-280 378,-280 378,-280 384,-280 390,-286 390,-292 390,-292 390,-320 390,-320 390,-326 384,-332 378,-332 378,-332 20,-332 20,-332 14,-332 8,-326 8,-320 8,-320 8,-292 8,-292 8,-286 14,-280 20,-280"></path>
</g>
<g id="clust2" class="cluster">
<title>cluster_1</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M410,-280C410,-280 732,-280 732,-280 738,-280 744,-286 744,-292 744,-292 744,-320 744,-320 744,-326 738,-332 732,-332 732,-332 410,-332 410,-332 404,-332 398,-326 398,-320 398,-320 398,-292 398,-292 398,-286 404,-280 410,-280"></path>
</g>
<!-- Query -->
<g id="node1" class="node">
<title>Query</title>
<path fill="#a4d8ff" stroke="black" d="M335,-396C335,-396 305,-396 305,-396 299,-396 293,-390 293,-384 293,-384 293,-372 293,-372 293,-366 299,-360 305,-360 305,-360 335,-360 335,-360 341,-360 347,-366 347,-372 347,-372 347,-384 347,-384 347,-390 341,-396 335,-396"></path>
<text text-anchor="middle" x="320" y="-373.8" font-family="Times,serif" font-size="14.00">Query</text>
</g>
<!-- Query_Bi_Encoder -->
<g id="node3" class="node">
<title>Query_Bi_Encoder</title>
<path fill="#ffc9c9" stroke="black" d="M177.58,-324C177.58,-324 28.42,-324 28.42,-324 22.42,-324 16.42,-318 16.42,-312 16.42,-312 16.42,-300 16.42,-300 16.42,-294 22.42,-288 28.42,-288 28.42,-288 177.58,-288 177.58,-288 183.58,-288 189.58,-294 189.58,-300 189.58,-300 189.58,-312 189.58,-312 189.58,-318 183.58,-324 177.58,-324"></path>
<text text-anchor="middle" x="103" y="-301.8" font-family="Times,serif" font-size="14.00">Bi-Encoder (Embed + Pool)</text>
</g>
<!-- Query&#45;&gt;Query_Bi_Encoder -->
<g id="edge1" class="edge">
<title>Query-&gt;Query_Bi_Encoder</title>
<path fill="none" stroke="black" d="M292.96,-368.28C261.23,-358.04 207.6,-340.74 165.41,-327.13"></path>
<polygon fill="black" stroke="black" points="166.36,-323.76 155.77,-324.02 164.21,-330.42 166.36,-323.76"></polygon>
</g>
<!-- Query_tfidf -->
<g id="node5" class="node">
<title>Query_tfidf</title>
<path fill="#cfbffe" stroke="black" d="M550.34,-324C550.34,-324 417.66,-324 417.66,-324 411.66,-324 405.66,-318 405.66,-312 405.66,-312 405.66,-300 405.66,-300 405.66,-294 411.66,-288 417.66,-288 417.66,-288 550.34,-288 550.34,-288 556.34,-288 562.34,-294 562.34,-300 562.34,-300 562.34,-312 562.34,-312 562.34,-318 556.34,-324 550.34,-324"></path>
<text text-anchor="middle" x="484" y="-301.8" font-family="Times,serif" font-size="14.00">tf-idf (weighted full text)</text>
</g>
<!-- Query&#45;&gt;Query_tfidf -->
<g id="edge3" class="edge">
<title>Query-&gt;Query_tfidf</title>
<path fill="none" stroke="black" d="M347.08,-365.44C370.79,-355.32 405.82,-340.37 434.52,-328.12"></path>
<polygon fill="black" stroke="black" points="436.16,-331.23 443.98,-324.08 433.41,-324.79 436.16,-331.23"></polygon>
</g>
<!-- Documents -->
<g id="node2" class="node">
<title>Documents</title>
<path fill="#feec98" stroke="black" d="M485.77,-396C485.77,-396 430.23,-396 430.23,-396 424.23,-396 418.23,-390 418.23,-384 418.23,-384 418.23,-372 418.23,-372 418.23,-366 424.23,-360 430.23,-360 430.23,-360 485.77,-360 485.77,-360 491.77,-360 497.77,-366 497.77,-372 497.77,-372 497.77,-384 497.77,-384 497.77,-390 491.77,-396 485.77,-396"></path>
<text text-anchor="middle" x="458" y="-373.8" font-family="Times,serif" font-size="14.00">Documents</text>
</g>
<!-- Document_Bi_Encoder -->
<g id="node4" class="node">
<title>Document_Bi_Encoder</title>
<path fill="#ffc9c9" stroke="black" d="M369.58,-324C369.58,-324 220.42,-324 220.42,-324 214.42,-324 208.42,-318 208.42,-312 208.42,-312 208.42,-300 208.42,-300 208.42,-294 214.42,-288 220.42,-288 220.42,-288 369.58,-288 369.58,-288 375.58,-288 381.58,-294 381.58,-300 381.58,-300 381.58,-312 381.58,-312 381.58,-318 375.58,-324 369.58,-324"></path>
<text text-anchor="middle" x="295" y="-301.8" font-family="Times,serif" font-size="14.00">Bi-Encoder (Embed + Pool)</text>
</g>
<!-- Documents&#45;&gt;Document_Bi_Encoder -->
<g id="edge2" class="edge">
<title>Documents-&gt;Document_Bi_Encoder</title>
<path fill="none" stroke="black" d="M418.13,-359.88C395.84,-350.31 367.88,-338.3 344.24,-328.15"></path>
<polygon fill="black" stroke="black" points="345.31,-324.8 334.74,-324.07 342.55,-331.23 345.31,-324.8"></polygon>
</g>
<!-- Document_tfidf -->
<g id="node6" class="node">
<title>Document_tfidf</title>
<path fill="#cfbffe" stroke="black" d="M724.34,-324C724.34,-324 591.66,-324 591.66,-324 585.66,-324 579.66,-318 579.66,-312 579.66,-312 579.66,-300 579.66,-300 579.66,-294 585.66,-288 591.66,-288 591.66,-288 724.34,-288 724.34,-288 730.34,-288 736.34,-294 736.34,-300 736.34,-300 736.34,-312 736.34,-312 736.34,-318 730.34,-324 724.34,-324"></path>
<text text-anchor="middle" x="658" y="-301.8" font-family="Times,serif" font-size="14.00">tf-idf (weighted full text)</text>
</g>
<!-- Documents&#45;&gt;Document_tfidf -->
<g id="edge4" class="edge">
<title>Documents-&gt;Document_tfidf</title>
<path fill="none" stroke="black" d="M497.99,-363C527.15,-352.8 567.1,-338.82 599.79,-327.37"></path>
<polygon fill="black" stroke="black" points="600.96,-330.67 609.24,-324.07 598.64,-324.07 600.96,-330.67"></polygon>
</g>
<!-- Cosine_Similarity_Search -->
<g id="node7" class="node">
<title>Cosine_Similarity_Search</title>
<path fill="#b2f3bb" stroke="black" d="M358.8,-252C358.8,-252 231.2,-252 231.2,-252 225.2,-252 219.2,-246 219.2,-240 219.2,-240 219.2,-228 219.2,-228 219.2,-222 225.2,-216 231.2,-216 231.2,-216 358.8,-216 358.8,-216 364.8,-216 370.8,-222 370.8,-228 370.8,-228 370.8,-240 370.8,-240 370.8,-246 364.8,-252 358.8,-252"></path>
<text text-anchor="middle" x="295" y="-229.8" font-family="Times,serif" font-size="14.00">Cosine similarity search</text>
</g>
<!-- Query_Bi_Encoder&#45;&gt;Cosine_Similarity_Search -->
<g id="edge5" class="edge">
<title>Query_Bi_Encoder-&gt;Cosine_Similarity_Search</title>
<path fill="none" stroke="black" d="M149.97,-287.88C176.68,-278.14 210.32,-265.87 238.47,-255.61"></path>
<polygon fill="black" stroke="black" points="239.99,-258.78 248.18,-252.07 237.59,-252.21 239.99,-258.78"></polygon>
</g>
<!-- Document_Bi_Encoder&#45;&gt;Cosine_Similarity_Search -->
<g id="edge6" class="edge">
<title>Document_Bi_Encoder-&gt;Cosine_Similarity_Search</title>
<path fill="none" stroke="black" d="M295,-287.7C295,-279.98 295,-270.71 295,-262.11"></path>
<polygon fill="black" stroke="black" points="298.5,-262.1 295,-252.1 291.5,-262.1 298.5,-262.1"></polygon>
</g>
<!-- BM25 -->
<g id="node10" class="node">
<title>BM25</title>
<path fill="#eebefa" stroke="black" d="M546.46,-252C546.46,-252 421.54,-252 421.54,-252 415.54,-252 409.54,-246 409.54,-240 409.54,-240 409.54,-228 409.54,-228 409.54,-222 415.54,-216 421.54,-216 421.54,-216 546.46,-216 546.46,-216 552.46,-216 558.46,-222 558.46,-228 558.46,-228 558.46,-240 558.46,-240 558.46,-246 552.46,-252 546.46,-252"></path>
<text text-anchor="middle" x="484" y="-229.8" font-family="Times,serif" font-size="14.00">BM25 (full-text) search</text>
</g>
<!-- Query_tfidf&#45;&gt;BM25 -->
<g id="edge8" class="edge">
<title>Query_tfidf-&gt;BM25</title>
<path fill="none" stroke="black" d="M484,-287.7C484,-279.98 484,-270.71 484,-262.11"></path>
<polygon fill="black" stroke="black" points="487.5,-262.1 484,-252.1 480.5,-262.1 487.5,-262.1"></polygon>
</g>
<!-- Document_tfidf&#45;&gt;BM25 -->
<g id="edge9" class="edge">
<title>Document_tfidf-&gt;BM25</title>
<path fill="none" stroke="black" d="M615.43,-287.88C591.44,-278.22 561.27,-266.09 535.9,-255.88"></path>
<polygon fill="black" stroke="black" points="537.01,-252.55 526.43,-252.07 534.4,-259.05 537.01,-252.55"></polygon>
</g>
<!-- Combine_Scores -->
<g id="node11" class="node">
<title>Combine_Scores</title>
<path fill="#95f2d7" stroke="black" d="M440.42,-180C440.42,-180 337.58,-180 337.58,-180 331.58,-180 325.58,-174 325.58,-168 325.58,-168 325.58,-156 325.58,-156 325.58,-150 331.58,-144 337.58,-144 337.58,-144 440.42,-144 440.42,-144 446.42,-144 452.42,-150 452.42,-156 452.42,-156 452.42,-168 452.42,-168 452.42,-174 446.42,-180 440.42,-180"></path>
<text text-anchor="middle" x="389" y="-157.8" font-family="Times,serif" font-size="14.00">Combine the scores</text>
</g>
<!-- Cosine_Similarity_Search&#45;&gt;Combine_Scores -->
<g id="edge11" class="edge">
<title>Cosine_Similarity_Search-&gt;Combine_Scores</title>
<path fill="none" stroke="black" d="M318.24,-215.7C330.19,-206.8 344.92,-195.82 357.85,-186.2"></path>
<polygon fill="black" stroke="black" points="360.1,-188.88 366.03,-180.1 355.92,-183.27 360.1,-188.88"></polygon>
</g>
<!-- Results -->
<g id="node8" class="node">
<title>Results</title>
<path fill="#b2f3bb" stroke="black" d="M405.73,-36C405.73,-36 372.27,-36 372.27,-36 366.27,-36 360.27,-30 360.27,-24 360.27,-24 360.27,-12 360.27,-12 360.27,-6 366.27,0 372.27,0 372.27,0 405.73,0 405.73,0 411.73,0 417.73,-6 417.73,-12 417.73,-12 417.73,-24 417.73,-24 417.73,-30 411.73,-36 405.73,-36"></path>
<text text-anchor="middle" x="389" y="-13.8" font-family="Times,serif" font-size="14.00">Results</text>
</g>
<!-- Reranking -->
<g id="node9" class="node">
<title>Reranking</title>
<path fill="#fed8a7" stroke="black" d="M414.32,-108C414.32,-108 363.68,-108 363.68,-108 357.68,-108 351.68,-102 351.68,-96 351.68,-96 351.68,-84 351.68,-84 351.68,-78 357.68,-72 363.68,-72 363.68,-72 414.32,-72 414.32,-72 420.32,-72 426.32,-78 426.32,-84 426.32,-84 426.32,-96 426.32,-96 426.32,-102 420.32,-108 414.32,-108"></path>
<text text-anchor="middle" x="389" y="-85.8" font-family="Times,serif" font-size="14.00">Reranking</text>
</g>
<!-- Reranking&#45;&gt;Results -->
<g id="edge7" class="edge">
<title>Reranking-&gt;Results</title>
<path fill="none" stroke="black" d="M389,-71.7C389,-63.98 389,-54.71 389,-46.11"></path>
<polygon fill="black" stroke="black" points="392.5,-46.1 389,-36.1 385.5,-46.1 392.5,-46.1"></polygon>
</g>
<!-- BM25&#45;&gt;Combine_Scores -->
<g id="edge10" class="edge">
<title>BM25-&gt;Combine_Scores</title>
<path fill="none" stroke="black" d="M460.52,-215.7C448.44,-206.8 433.55,-195.82 420.48,-186.2"></path>
<polygon fill="black" stroke="black" points="422.34,-183.22 412.21,-180.1 418.19,-188.85 422.34,-183.22"></polygon>
</g>
<!-- Combine_Scores&#45;&gt;Reranking -->
<g id="edge12" class="edge">
<title>Combine_Scores-&gt;Reranking</title>
<path fill="none" stroke="black" d="M389,-143.7C389,-135.98 389,-126.71 389,-118.11"></path>
<polygon fill="black" stroke="black" points="392.5,-118.1 389,-108.1 385.5,-118.1 392.5,-118.1"></polygon>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
</section>
<section id="leveraging-metadata-for-targeted-retrieval" class="level2">
<h2 class="anchored" data-anchor-id="leveraging-metadata-for-targeted-retrieval">Leveraging Metadata for Targeted Retrieval</h2>
<ul>
<li><strong>Real-World Data Has Context: Metadata Matters</strong>
<ul>
<li>Real-world documents often possess valuable metadata (e.g., author, date, department) that can significantly improve retrieval accuracy.</li>
<li>Pure Semantic or Keyword Search can struggle with metadata
<ul>
<li><strong>Example Query:</strong> “Can you get me the cruise division financial report for Q4 2022?”
<ul>
<li>Model must accurately represent all of “ﬁnancial report”, “cruise division”, “Q4” and “2022”, into a single vector
<ul>
<li>Otherwise it will fetch documents that look relevant but aren’t meeting one or more of those criteria.</li>
</ul></li>
<li>If the number of documents you search for (“k”) is set too high, you will be passing irrelevant ﬁnancial reports to your LLM</li>
</ul></li>
</ul></li>
</ul></li>
<li><strong>Entity Detection and Metadata Filtering: A Practical Example</strong>
<ul>
<li>Use entity detection models like GLiNER to automatically extract relevant metadata (e.g., document type, time period, department).</li>
<li><strong>GLiNER</strong>
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/2311.08526">GLiNER: Generalist Model for Named Entity Recognition using Bidirectional Transformer</a></li>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/urchade/GLiNER">GLiNER</a></li>
<li><strong>:hugs: Spaces Demo:</strong> <a href="https://huggingface.co/spaces/tomaarsen/gliner_medium-v2.1">GLiNER-medium-v2.1, zero-shot NER</a></li>
</ul></li>
<li>Filter documents based on extracted metadata to ensure relevance and reduce noise.</li>
</ul></li>
<li><strong>Storing and Using Metadata for Pre-filtering</strong>
<ul>
<li>Store metadata alongside documents in the database.</li>
<li>During retrieval, pre-filter documents based on query-specific metadata to narrow down the search space.</li>
</ul></li>
</ul>
</section>
<section id="putting-it-all-together-the-complete-mvp-pipeline" class="level2">
<h2 class="anchored" data-anchor-id="putting-it-all-together-the-complete-mvp-pipeline">Putting it All Together: The Complete MVP++ Pipeline</h2>
<section id="the-final-compact-mvp" class="level3">
<h3 class="anchored" data-anchor-id="the-final-compact-mvp">The Final Compact MVP++</h3>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="672" height="480" viewbox="0.00 0.00 760.00 476.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 472)">
<title>tfidf_mvp_plusplus</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-472 756,-472 756,4 -4,4"></polygon>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M20,-352C20,-352 378,-352 378,-352 384,-352 390,-358 390,-364 390,-364 390,-392 390,-392 390,-398 384,-404 378,-404 378,-404 20,-404 20,-404 14,-404 8,-398 8,-392 8,-392 8,-364 8,-364 8,-358 14,-352 20,-352"></path>
</g>
<g id="clust2" class="cluster">
<title>cluster_1</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M410,-352C410,-352 732,-352 732,-352 738,-352 744,-358 744,-364 744,-364 744,-392 744,-392 744,-398 738,-404 732,-404 732,-404 410,-404 410,-404 404,-404 398,-398 398,-392 398,-392 398,-364 398,-364 398,-358 404,-352 410,-352"></path>
</g>
<!-- Query -->
<g id="node1" class="node">
<title>Query</title>
<path fill="#a4d8ff" stroke="black" d="M335,-468C335,-468 305,-468 305,-468 299,-468 293,-462 293,-456 293,-456 293,-444 293,-444 293,-438 299,-432 305,-432 305,-432 335,-432 335,-432 341,-432 347,-438 347,-444 347,-444 347,-456 347,-456 347,-462 341,-468 335,-468"></path>
<text text-anchor="middle" x="320" y="-445.8" font-family="Times,serif" font-size="14.00">Query</text>
</g>
<!-- Query_Bi_Encoder -->
<g id="node3" class="node">
<title>Query_Bi_Encoder</title>
<path fill="#ffc9c9" stroke="black" d="M177.58,-396C177.58,-396 28.42,-396 28.42,-396 22.42,-396 16.42,-390 16.42,-384 16.42,-384 16.42,-372 16.42,-372 16.42,-366 22.42,-360 28.42,-360 28.42,-360 177.58,-360 177.58,-360 183.58,-360 189.58,-366 189.58,-372 189.58,-372 189.58,-384 189.58,-384 189.58,-390 183.58,-396 177.58,-396"></path>
<text text-anchor="middle" x="103" y="-373.8" font-family="Times,serif" font-size="14.00">Bi-Encoder (Embed + Pool)</text>
</g>
<!-- Query&#45;&gt;Query_Bi_Encoder -->
<g id="edge1" class="edge">
<title>Query-&gt;Query_Bi_Encoder</title>
<path fill="none" stroke="black" d="M292.96,-440.28C261.23,-430.04 207.6,-412.74 165.41,-399.13"></path>
<polygon fill="black" stroke="black" points="166.36,-395.76 155.77,-396.02 164.21,-402.42 166.36,-395.76"></polygon>
</g>
<!-- Query_tfidf -->
<g id="node5" class="node">
<title>Query_tfidf</title>
<path fill="#cfbffe" stroke="black" d="M550.34,-396C550.34,-396 417.66,-396 417.66,-396 411.66,-396 405.66,-390 405.66,-384 405.66,-384 405.66,-372 405.66,-372 405.66,-366 411.66,-360 417.66,-360 417.66,-360 550.34,-360 550.34,-360 556.34,-360 562.34,-366 562.34,-372 562.34,-372 562.34,-384 562.34,-384 562.34,-390 556.34,-396 550.34,-396"></path>
<text text-anchor="middle" x="484" y="-373.8" font-family="Times,serif" font-size="14.00">tf-idf (weighted full text)</text>
</g>
<!-- Query&#45;&gt;Query_tfidf -->
<g id="edge3" class="edge">
<title>Query-&gt;Query_tfidf</title>
<path fill="none" stroke="black" d="M347.08,-437.44C370.79,-427.32 405.82,-412.37 434.52,-400.12"></path>
<polygon fill="black" stroke="black" points="436.16,-403.23 443.98,-396.08 433.41,-396.79 436.16,-403.23"></polygon>
</g>
<!-- Documents -->
<g id="node2" class="node">
<title>Documents</title>
<path fill="#feec98" stroke="black" d="M485.77,-468C485.77,-468 430.23,-468 430.23,-468 424.23,-468 418.23,-462 418.23,-456 418.23,-456 418.23,-444 418.23,-444 418.23,-438 424.23,-432 430.23,-432 430.23,-432 485.77,-432 485.77,-432 491.77,-432 497.77,-438 497.77,-444 497.77,-444 497.77,-456 497.77,-456 497.77,-462 491.77,-468 485.77,-468"></path>
<text text-anchor="middle" x="458" y="-445.8" font-family="Times,serif" font-size="14.00">Documents</text>
</g>
<!-- Document_Bi_Encoder -->
<g id="node4" class="node">
<title>Document_Bi_Encoder</title>
<path fill="#ffc9c9" stroke="black" d="M369.58,-396C369.58,-396 220.42,-396 220.42,-396 214.42,-396 208.42,-390 208.42,-384 208.42,-384 208.42,-372 208.42,-372 208.42,-366 214.42,-360 220.42,-360 220.42,-360 369.58,-360 369.58,-360 375.58,-360 381.58,-366 381.58,-372 381.58,-372 381.58,-384 381.58,-384 381.58,-390 375.58,-396 369.58,-396"></path>
<text text-anchor="middle" x="295" y="-373.8" font-family="Times,serif" font-size="14.00">Bi-Encoder (Embed + Pool)</text>
</g>
<!-- Documents&#45;&gt;Document_Bi_Encoder -->
<g id="edge2" class="edge">
<title>Documents-&gt;Document_Bi_Encoder</title>
<path fill="none" stroke="black" d="M418.13,-431.88C395.84,-422.31 367.88,-410.3 344.24,-400.15"></path>
<polygon fill="black" stroke="black" points="345.31,-396.8 334.74,-396.07 342.55,-403.23 345.31,-396.8"></polygon>
</g>
<!-- Document_tfidf -->
<g id="node6" class="node">
<title>Document_tfidf</title>
<path fill="#cfbffe" stroke="black" d="M724.34,-396C724.34,-396 591.66,-396 591.66,-396 585.66,-396 579.66,-390 579.66,-384 579.66,-384 579.66,-372 579.66,-372 579.66,-366 585.66,-360 591.66,-360 591.66,-360 724.34,-360 724.34,-360 730.34,-360 736.34,-366 736.34,-372 736.34,-372 736.34,-384 736.34,-384 736.34,-390 730.34,-396 724.34,-396"></path>
<text text-anchor="middle" x="658" y="-373.8" font-family="Times,serif" font-size="14.00">tf-idf (weighted full text)</text>
</g>
<!-- Documents&#45;&gt;Document_tfidf -->
<g id="edge4" class="edge">
<title>Documents-&gt;Document_tfidf</title>
<path fill="none" stroke="black" d="M497.99,-435C527.15,-424.8 567.1,-410.82 599.79,-399.37"></path>
<polygon fill="black" stroke="black" points="600.96,-402.67 609.24,-396.07 598.64,-396.07 600.96,-402.67"></polygon>
</g>
<!-- Cosine_Similarity_Search -->
<g id="node9" class="node">
<title>Cosine_Similarity_Search</title>
<path fill="#b2f3bb" stroke="black" d="M358.8,-252C358.8,-252 231.2,-252 231.2,-252 225.2,-252 219.2,-246 219.2,-240 219.2,-240 219.2,-228 219.2,-228 219.2,-222 225.2,-216 231.2,-216 231.2,-216 358.8,-216 358.8,-216 364.8,-216 370.8,-222 370.8,-228 370.8,-228 370.8,-240 370.8,-240 370.8,-246 364.8,-252 358.8,-252"></path>
<text text-anchor="middle" x="295" y="-229.8" font-family="Times,serif" font-size="14.00">Cosine similarity search</text>
</g>
<!-- Query_Bi_Encoder&#45;&gt;Cosine_Similarity_Search -->
<g id="edge7" class="edge">
<title>Query_Bi_Encoder-&gt;Cosine_Similarity_Search</title>
<path fill="none" stroke="black" d="M118.05,-359.77C135.33,-340.66 165.15,-309.68 195,-288 211.23,-276.21 230.42,-265.4 247.63,-256.65"></path>
<polygon fill="black" stroke="black" points="249.56,-259.6 256.95,-252.02 246.44,-253.34 249.56,-259.6"></polygon>
</g>
<!-- Metadata_Filtering -->
<g id="node7" class="node">
<title>Metadata_Filtering</title>
<path fill="#d2bab0" stroke="black" d="M373.62,-324C373.62,-324 216.38,-324 216.38,-324 210.38,-324 204.38,-318 204.38,-312 204.38,-312 204.38,-300 204.38,-300 204.38,-294 210.38,-288 216.38,-288 216.38,-288 373.62,-288 373.62,-288 379.62,-288 385.62,-294 385.62,-300 385.62,-300 385.62,-312 385.62,-312 385.62,-318 379.62,-324 373.62,-324"></path>
<text text-anchor="middle" x="295" y="-301.8" font-family="Times,serif" font-size="14.00">Metadata Document Filtering</text>
</g>
<!-- Document_Bi_Encoder&#45;&gt;Metadata_Filtering -->
<g id="edge5" class="edge">
<title>Document_Bi_Encoder-&gt;Metadata_Filtering</title>
<path fill="none" stroke="black" d="M295,-359.7C295,-351.98 295,-342.71 295,-334.11"></path>
<polygon fill="black" stroke="black" points="298.5,-334.1 295,-324.1 291.5,-334.1 298.5,-334.1"></polygon>
</g>
<!-- BM25 -->
<g id="node12" class="node">
<title>BM25</title>
<path fill="#eebefa" stroke="black" d="M546.46,-252C546.46,-252 421.54,-252 421.54,-252 415.54,-252 409.54,-246 409.54,-240 409.54,-240 409.54,-228 409.54,-228 409.54,-222 415.54,-216 421.54,-216 421.54,-216 546.46,-216 546.46,-216 552.46,-216 558.46,-222 558.46,-228 558.46,-228 558.46,-240 558.46,-240 558.46,-246 552.46,-252 546.46,-252"></path>
<text text-anchor="middle" x="484" y="-229.8" font-family="Times,serif" font-size="14.00">BM25 (full-text) search</text>
</g>
<!-- Query_tfidf&#45;&gt;BM25 -->
<g id="edge10" class="edge">
<title>Query_tfidf-&gt;BM25</title>
<path fill="none" stroke="black" d="M484,-359.87C484,-335.67 484,-291.21 484,-262.39"></path>
<polygon fill="black" stroke="black" points="487.5,-262.19 484,-252.19 480.5,-262.19 487.5,-262.19"></polygon>
</g>
<!-- Metadata_Filtering_2 -->
<g id="node8" class="node">
<title>Metadata_Filtering_2</title>
<path fill="#d2bab0" stroke="black" d="M708.62,-324C708.62,-324 551.38,-324 551.38,-324 545.38,-324 539.38,-318 539.38,-312 539.38,-312 539.38,-300 539.38,-300 539.38,-294 545.38,-288 551.38,-288 551.38,-288 708.62,-288 708.62,-288 714.62,-288 720.62,-294 720.62,-300 720.62,-300 720.62,-312 720.62,-312 720.62,-318 714.62,-324 708.62,-324"></path>
<text text-anchor="middle" x="630" y="-301.8" font-family="Times,serif" font-size="14.00">Metadata Document Filtering</text>
</g>
<!-- Document_tfidf&#45;&gt;Metadata_Filtering_2 -->
<g id="edge6" class="edge">
<title>Document_tfidf-&gt;Metadata_Filtering_2</title>
<path fill="none" stroke="black" d="M651.08,-359.7C647.93,-351.81 644.12,-342.3 640.62,-333.55"></path>
<polygon fill="black" stroke="black" points="643.81,-332.09 636.84,-324.1 637.31,-334.69 643.81,-332.09"></polygon>
</g>
<!-- Metadata_Filtering&#45;&gt;Cosine_Similarity_Search -->
<g id="edge8" class="edge">
<title>Metadata_Filtering-&gt;Cosine_Similarity_Search</title>
<path fill="none" stroke="black" d="M295,-287.7C295,-279.98 295,-270.71 295,-262.11"></path>
<polygon fill="black" stroke="black" points="298.5,-262.1 295,-252.1 291.5,-262.1 298.5,-262.1"></polygon>
</g>
<!-- Metadata_Filtering_2&#45;&gt;BM25 -->
<g id="edge11" class="edge">
<title>Metadata_Filtering_2-&gt;BM25</title>
<path fill="none" stroke="black" d="M594.28,-287.88C574.5,-278.39 549.73,-266.51 528.67,-256.42"></path>
<polygon fill="black" stroke="black" points="530.13,-253.24 519.6,-252.07 527.1,-259.55 530.13,-253.24"></polygon>
</g>
<!-- Combine_Scores -->
<g id="node13" class="node">
<title>Combine_Scores</title>
<path fill="#95f2d7" stroke="black" d="M440.42,-180C440.42,-180 337.58,-180 337.58,-180 331.58,-180 325.58,-174 325.58,-168 325.58,-168 325.58,-156 325.58,-156 325.58,-150 331.58,-144 337.58,-144 337.58,-144 440.42,-144 440.42,-144 446.42,-144 452.42,-150 452.42,-156 452.42,-156 452.42,-168 452.42,-168 452.42,-174 446.42,-180 440.42,-180"></path>
<text text-anchor="middle" x="389" y="-157.8" font-family="Times,serif" font-size="14.00">Combine the scores</text>
</g>
<!-- Cosine_Similarity_Search&#45;&gt;Combine_Scores -->
<g id="edge13" class="edge">
<title>Cosine_Similarity_Search-&gt;Combine_Scores</title>
<path fill="none" stroke="black" d="M318.24,-215.7C330.19,-206.8 344.92,-195.82 357.85,-186.2"></path>
<polygon fill="black" stroke="black" points="360.1,-188.88 366.03,-180.1 355.92,-183.27 360.1,-188.88"></polygon>
</g>
<!-- Results -->
<g id="node10" class="node">
<title>Results</title>
<path fill="#b2f3bb" stroke="black" d="M405.73,-36C405.73,-36 372.27,-36 372.27,-36 366.27,-36 360.27,-30 360.27,-24 360.27,-24 360.27,-12 360.27,-12 360.27,-6 366.27,0 372.27,0 372.27,0 405.73,0 405.73,0 411.73,0 417.73,-6 417.73,-12 417.73,-12 417.73,-24 417.73,-24 417.73,-30 411.73,-36 405.73,-36"></path>
<text text-anchor="middle" x="389" y="-13.8" font-family="Times,serif" font-size="14.00">Results</text>
</g>
<!-- Reranking -->
<g id="node11" class="node">
<title>Reranking</title>
<path fill="#fed8a7" stroke="black" d="M414.32,-108C414.32,-108 363.68,-108 363.68,-108 357.68,-108 351.68,-102 351.68,-96 351.68,-96 351.68,-84 351.68,-84 351.68,-78 357.68,-72 363.68,-72 363.68,-72 414.32,-72 414.32,-72 420.32,-72 426.32,-78 426.32,-84 426.32,-84 426.32,-96 426.32,-96 426.32,-102 420.32,-108 414.32,-108"></path>
<text text-anchor="middle" x="389" y="-85.8" font-family="Times,serif" font-size="14.00">Reranking</text>
</g>
<!-- Reranking&#45;&gt;Results -->
<g id="edge9" class="edge">
<title>Reranking-&gt;Results</title>
<path fill="none" stroke="black" d="M389,-71.7C389,-63.98 389,-54.71 389,-46.11"></path>
<polygon fill="black" stroke="black" points="392.5,-46.1 389,-36.1 385.5,-46.1 392.5,-46.1"></polygon>
</g>
<!-- BM25&#45;&gt;Combine_Scores -->
<g id="edge12" class="edge">
<title>BM25-&gt;Combine_Scores</title>
<path fill="none" stroke="black" d="M460.52,-215.7C448.44,-206.8 433.55,-195.82 420.48,-186.2"></path>
<polygon fill="black" stroke="black" points="422.34,-183.22 412.21,-180.1 418.19,-188.85 422.34,-183.22"></polygon>
</g>
<!-- Combine_Scores&#45;&gt;Reranking -->
<g id="edge14" class="edge">
<title>Combine_Scores-&gt;Reranking</title>
<path fill="none" stroke="black" d="M389,-143.7C389,-135.98 389,-126.71 389,-118.11"></path>
<polygon fill="black" stroke="black" points="392.5,-118.1 389,-108.1 385.5,-118.1 392.5,-118.1"></polygon>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="code-example-implementing-the-mvp-with-lancedb" class="level3">
<h3 class="anchored" data-anchor-id="code-example-implementing-the-mvp-with-lancedb">Code Example: Implementing the MVP++ with LanceDB</h3>
<ul>
<li>Uses LanceDB for its ease of use and built-in components.</li>
<li><strong>Vector Databases</strong>
<ul>
<li><a href="https://lancedb.com/">LanceDB</a></li>
<li><a href="https://weaviate.io/">Weaviate</a></li>
<li><a href="https://www.trychroma.com/">Chroma</a></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fetch some text content in two different categories</span></span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> wikipediaapi <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Wikipedia</span>
<span id="cb1-3">wiki <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> Wikipedia(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'RAGBot/0.0'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'en'</span>)</span>
<span id="cb1-4">docs <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [{<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>: x,</span>
<span id="cb1-5">         <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"category"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"person"</span>}</span>
<span id="cb1-6">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> x <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> wiki.page(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Hayao_Miyazaki'</span>).text.split(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>)]</span>
<span id="cb1-7">docs <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+=</span> [{<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>: x,</span>
<span id="cb1-8">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"category"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"film"</span>}</span>
<span id="cb1-9">         <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> x <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> wiki.page(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Spirited_Away'</span>).text.split(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>)]</span>
<span id="cb1-10"></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Enter LanceDB</span></span>
<span id="cb1-12"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> lancedb</span>
<span id="cb1-13"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> lancedb.pydantic <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> LanceModel, Vector</span>
<span id="cb1-14"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> lancedb.embedding <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> get_registry</span>
<span id="cb1-15"></span>
<span id="cb1-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Initialise the embedding model</span></span>
<span id="cb1-17">model_registry <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_registry().get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sentence-transformers"</span>)</span>
<span id="cb1-18">model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model_registry.create(name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BAAI/bge-small-en-v1.5"</span>)</span>
<span id="cb1-19"></span>
<span id="cb1-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create a Model to store attributes for filtering</span></span>
<span id="cb1-21"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">class</span> Document(LanceModel):                    </span>
<span id="cb1-22">    text: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model.SourceField()</span>
<span id="cb1-23">    vector: Vector(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">384</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model.VectorField()</span>
<span id="cb1-24">    category: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span></span>
<span id="cb1-25"></span>
<span id="cb1-26">db <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> lancedb.<span class="ex" style="color: null;
background-color: null;
font-style: inherit;">connect</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".my_db"</span>)</span>
<span id="cb1-27">tbl <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> db.create_table(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"my_table"</span>, schema<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>Document)</span>
<span id="cb1-28"></span>
<span id="cb1-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Embed the documents and store them in the database</span></span>
<span id="cb1-30">tbl.add(docs)                                        </span>
<span id="cb1-31"></span>
<span id="cb1-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate the full-text (tf-idf) search index</span></span>
<span id="cb1-33">tbl.create_fts_index(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>)                         </span>
<span id="cb1-34"></span>
<span id="cb1-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Initialise a reranker -- here, Cohere's API one</span></span>
<span id="cb1-36"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> lancedb.rerankers <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> CohereReranker</span>
<span id="cb1-37"></span>
<span id="cb1-38">reranker <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> CohereReranker()                        </span>
<span id="cb1-39"></span>
<span id="cb1-40">query <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"What is Chihiro's new name given to her by the witch?"</span></span>
<span id="cb1-41"></span>
<span id="cb1-42">results <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (tbl.search(query, query_type<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hybrid"</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Hybrid means text + vector</span></span>
<span id="cb1-43">           .where(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"category = 'film'"</span>, prefilter<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Restrict to only docs in the 'film' category</span></span>
<span id="cb1-44">           .limit(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Get 10 results from first-pass retrieval</span></span>
<span id="cb1-45">           .rerank(reranker<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>reranker) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># For the reranker to compute the final ranking</span></span>
<span id="cb1-46">          )</span></code></pre></div>
</section>
</section>
<section id="beyond-the-basics-future-exploration-and-resources" class="level2">
<h2 class="anchored" data-anchor-id="beyond-the-basics-future-exploration-and-resources">Beyond the Basics: Future Exploration and Resources</h2>
<ul>
<li><strong><a href="https://github.com/AnswerDotAI/RAGatouille">RAGatouille</a>:</strong> Easily use and train state of the art late-interaction retrieval methods (ColBERT) in any RAG pipeline.</li>
<li><strong><a href="https://github.com/AnswerDotAI/rerankers">rerankers</a>:</strong> A lightweight unified API for various reranking models.</li>
<li><strong>Video Tutorial:</strong> <a href="https://www.youtube.com/watch?v=jkrNMKz9pWU">A Hackers’ Guide to Language Models</a></li>
<li><strong>ColBERT</strong>
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/2004.12832">ColBERT: Efficient and Effective Passage Search via Contextualized Late Interaction over BERT</a></li>
<li><strong>HuggingFace Hub:</strong> <a href="https://huggingface.co/colbert-ir/colbertv2.0">colbert-ir/colbertv2.0</a></li>
</ul></li>
<li><strong>Sparse Vectors:</strong> <a href="https://docs.pinecone.io/guides/data/understanding-hybrid-search">Understanding hybrid search</a></li>
<li><strong>Multi-vector Retrievers:</strong> <a href="https://blog.langchain.dev/semi-structured-multi-modal-rag/">Multi-Vector Retriever for RAG on tables, text, and images</a></li>
</ul>
</section>
<section id="qa-session" class="level2">
<h2 class="anchored" data-anchor-id="qa-session">Q&amp;A Session</h2>
<section id="fine-tuning-bi-encoders-and-cross-encoders" class="level3">
<h3 class="anchored" data-anchor-id="fine-tuning-bi-encoders-and-cross-encoders">Fine-tuning Bi-Encoders and Cross-Encoders</h3>
<ul>
<li><p><strong>Q:</strong> Does the fine-tuning approach for bi-encoder models impact the fine-tuning of cross-encoder models and vice versa?</p></li>
<li><p><strong>A:</strong> While domain-specific, generally aim for complementarity. Fine-tune bi-encoders for broader retrieval, capturing potential candidates. Rely on cross-encoders (re-rankers) for precise filtering and ranking.</p></li>
</ul>
</section>
<section id="combining-bi-encoder-and-tf-idf-scores" class="level3">
<h3 class="anchored" data-anchor-id="combining-bi-encoder-and-tf-idf-scores">Combining Bi-Encoder and TF-IDF Scores</h3>
<ul>
<li><p><strong>Q:</strong> What are the advantages and disadvantages of using a weighted average of bi-encoder and TF-IDF scores for selecting re-ranker questions compared to taking the top X from each ranker?</p></li>
<li><p><strong>A:</strong> Both methods are valid and depend on the data. Weighted averages can be effective, but in domains like biomedicine, where document specificity is crucial, taking the top X from both ensures representation for potentially poorly embedded queries.</p></li>
</ul>
</section>
<section id="rags-future-with-million-token-context-lengths" class="level3">
<h3 class="anchored" data-anchor-id="rags-future-with-million-token-context-lengths">RAG’s Future with Million-Token Context Lengths</h3>
<ul>
<li><p><strong>Q:</strong> How will the emergence of million-token context lengths impact the relevance of RAG in the future?</p></li>
<li><p><strong>A:</strong> RAG remains relevant even with extended context windows. Just as RAM doesn’t replace hard drives, large context windows won’t replace the need for efficient retrieval from vast external knowledge stores. Long context windows provide more flexibility in retrieval speed and allow for incorporating longer documents.</p></li>
</ul>
</section>
<section id="chunking-strategies" class="level3">
<h3 class="anchored" data-anchor-id="chunking-strategies">Chunking Strategies</h3>
<ul>
<li><p><strong>Q:</strong> What are your thoughts on different chunking strategies?</p></li>
<li><p><strong>A:</strong> While LLMs for pre-chunking are promising but currently immature, maintaining semantic continuity within chunks is vital. The recommended approach is 300 tokens per chunk, avoiding sentence interruptions and including overlapping context (50 tokens) between consecutive chunks.</p></li>
</ul>
</section>
<section id="fine-tuning-bi-encoders" class="level3">
<h3 class="anchored" data-anchor-id="fine-tuning-bi-encoders">Fine-tuning Bi-Encoders</h3>
<ul>
<li><p><strong>Q:</strong> Should bi-encoders always be fine-tuned with labeled data or is it acceptable to use them off-the-shelf and rely on a re-ranker?</p></li>
<li><p><strong>A:</strong> Fine-tuning encoders (both bi- and cross-) with labeled data consistently improves results. If data and resources are available, fine-tuning is highly recommended. However, for MVPs with limited resources, leveraging pre-trained models with re-ranking is a viable option.</p></li>
</ul>
</section>
<section id="colbert-clarification-and-discussion" class="level3">
<h3 class="anchored" data-anchor-id="colbert-clarification-and-discussion">Colbert Clarification and Discussion</h3>
<ul>
<li><p><strong>Discussion:</strong> Clarifying the role of ColBERT in RAG pipelines.</p>
<ul>
<li><p><strong>ColBERT as a First-Stage Retriever:</strong> Ideally replaces the bi-encoder in new pipelines, not used as a re-ranker.</p></li>
<li><p><strong>ColBERT as a Re-Ranker:</strong> Can be used when pipeline changes are not feasible, but less optimal.</p></li>
<li><p><strong>ColBERT Overview:</strong> A bi-encoder variant where documents and queries are represented as bags of embeddings (one per token). This approach enhances out-of-domain performance due to its multi-vector representation, capturing more granular information.</p></li>
</ul></li>
</ul>
</section>
<section id="tools-for-fine-tuning-embeddings" class="level3">
<h3 class="anchored" data-anchor-id="tools-for-fine-tuning-embeddings">Tools for Fine-tuning Embeddings</h3>
<ul>
<li><p><strong>Q:</strong> Recommendations for tools to fine-tune embeddings for retrieval.</p></li>
<li><p><strong>A:</strong> <a href="https://sbert.net/">Sentence Transformers</a>, particularly version 3.0, is highly recommended for its user-friendliness and comprehensive implementation of essential features.</p></li>
</ul>
</section>
<section id="fine-tuning-embeddings-workflow" class="level3">
<h3 class="anchored" data-anchor-id="fine-tuning-embeddings-workflow">Fine-tuning Embeddings Workflow</h3>
<ul>
<li><p><strong>Q:</strong> Can you describe the workflow for fine-tuning an embedding model?</p></li>
<li><p><strong>A:</strong></p>
<ol type="1">
<li><strong>Gather Data:</strong> Obtain queries and their corresponding relevant and non-relevant documents.</li>
<li><strong>Define Loss Function:</strong> Use a suitable loss function like <a href="https://doordash.engineering/2021/09/08/using-twin-neural-networks-to-train-catalog-item-embeddings/">triplet loss</a>, which leverages positive and negative examples to guide the model.</li>
<li><strong>Consider Hard Negatives:</strong> Enhance training by retrieving hard negatives—documents similar to positive examples but irrelevant to the query.</li>
<li><strong>Data Analysis and Generation:</strong> Thoroughly analyze existing queries or generate synthetic ones using LLMs to augment training data.</li>
</ol></li>
</ul>
</section>
<section id="impact-of-long-context-windows-on-rag" class="level3">
<h3 class="anchored" data-anchor-id="impact-of-long-context-windows-on-rag">Impact of Long Context Windows on RAG</h3>
<ul>
<li><p><strong>Q:</strong> How do long context windows change the strategies and possibilities within RAG?</p></li>
<li><p><strong>A:</strong> Long context windows enable:</p>
<ul>
<li><p><strong>Longer Documents:</strong> Incorporating longer documents or concatenated chunks into the context.</p></li>
<li><p><strong>Reduced Retrieval Overhead:</strong> Relaxing the reliance on highly precise retrieval (e.g., Recall@3) as more documents can fit within the context window. This allows for faster, less resource-intensive retrieval methods.</p></li>
</ul></li>
</ul>
</section>
<section id="fine-tuning-encoder-tutorials" class="level3">
<h3 class="anchored" data-anchor-id="fine-tuning-encoder-tutorials">Fine-tuning Encoder Tutorials</h3>
<ul>
<li><p><strong>Q:</strong> Recommendations for tutorials on fine-tuning encoders.</p></li>
<li><p><strong>A:</strong> The <a href="https://www.sbert.net/docs/sentence_transformer/training_overview.html">Sentence Transformers documentation</a> is a valuable resource but can be challenging for beginners.</p></li>
</ul>
</section>
<section id="go-to-embedding-models" class="level3">
<h3 class="anchored" data-anchor-id="go-to-embedding-models">Go-to Embedding Models</h3>
<ul>
<li><p><strong>Q:</strong> Go-to embedding models for different scenarios.</p></li>
<li><p><strong>A:</strong></p>
<ul>
<li><p><strong>Demos:</strong> <a href="https://cohere.com/">Cohere</a>’s embedding models due to their API accessibility, performance, and affordability.</p></li>
<li><p><strong>Production:</strong> Multi-vector models like ColBERT are preferred.</p></li>
</ul></li>
<li><p><strong>General Recommendations:</strong></p>
<ul>
<li><p><strong>Model Size:</strong> Stick to models with parameters between 100 million and 1 billion; larger LLMs as encoders often have unfavorable latency-performance trade-offs.</p></li>
<li><p><strong>Avoid Overly Large Models:</strong> Using excessively large LLMs for embedding can lead to diminishing returns in performance and increased latency.</p></li>
</ul></li>
</ul>
</section>
<section id="using-elasticsearch-for-rag" class="level3">
<h3 class="anchored" data-anchor-id="using-elasticsearch-for-rag">Using Elasticsearch for RAG</h3>
<ul>
<li><p><strong>Q:</strong> Can Elasticsearch, a widely used search engine, be integrated into RAG pipelines, especially for organizations already invested in it?</p></li>
<li><p><strong>A:</strong></p>
<ul>
<li><p><strong>Hybrid Approach:</strong> Use Elasticsearch’s BM25 capabilities for initial retrieval and integrate a separate re-ranking pipeline (potentially using a cross-encoder).</p></li>
<li><p><strong>Vector Database Integration:</strong> Leverage Elasticsearch’s vector database offerings to incorporate semantic search capabilities.</p></li>
</ul></li>
</ul>
</section>
<section id="bm25-score-in-re-ranking" class="level3">
<h3 class="anchored" data-anchor-id="bm25-score-in-re-ranking">BM25 Score in Re-ranking</h3>
<ul>
<li><p><strong>Q:</strong> Is it beneficial to incorporate BM25 similarity scores during the re-ranking stage?</p></li>
<li><p><strong>A:</strong> No, BM25 scores are primarily used for candidate retrieval and are not typically required by cross-encoders during re-ranking.</p></li>
</ul>
</section>
<section id="strategies-for-chunks-exceeding-context-window" class="level3">
<h3 class="anchored" data-anchor-id="strategies-for-chunks-exceeding-context-window">Strategies for Chunks Exceeding Context Window</h3>
<ul>
<li><p><strong>Q:</strong> Strategies for handling situations where document chunks exceed the context window size.</p></li>
<li><p><strong>A:</strong> Solutions depend on the specific constraints:</p>
<ul>
<li><p><strong>Latency Tolerance:</strong> User experience dictates acceptable processing time.</p></li>
<li><p><strong>Document Length and Diversity Requirements:</strong></p></li>
<li><p><strong>Precomputed Summaries:</strong> Maintain a separate database mapping documents to their summaries, generated offline. Retrieve relevant chunks and feed summaries into the context window to provide concise context.</p></li>
</ul></li>
</ul>


</section>
</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-014/</guid>
  <pubDate>Fri, 02 Aug 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Conference Talk 13: When to Fine-Tune with Paige Bailey</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-013/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<ul>
<li>Google AI Landscape and Gemini</li>
<li>Understanding Context Windows</li>
<li>Fine-tuning vs.&nbsp;Prompting vs.&nbsp;Retrieval</li>
<li>Prompting Strategies and Examples</li>
<li>Retrieval Augmented Generation</li>
<li>Fine-tuning Considerations and Gemma</li>
</ul>
<section id="google-ai-landscape-and-gemini" class="level2">
<h2 class="anchored" data-anchor-id="google-ai-landscape-and-gemini">Google AI Landscape and Gemini</h2>
<ul>
<li><p><strong>Vertex AI:</strong></p>
<ul>
<li><strong><a href="https://cloud.google.com/vertex-ai?hl=en">Vertex AI</a>:</strong> Collection of APIs, compute infrastructure, model deployment tools available through Google Cloud, geared towards enterprise use. Comparable to Azure Open AI services.</li>
<li><strong><a href="https://ai.google.dev/">Gemini Developer API</a> (through <a href="https://ai.google.dev/aistudio">AI Studio</a>):</strong> Easier path for rapid prototyping and personal projects. Comparable to OpenAI APIs.</li>
</ul></li>
<li><p><strong>Gemini Flash Fine-Tuning:</strong></p>
<ul>
<li><strong><a href="https://deepmind.google/technologies/gemini/flash/">Gemini 1.5 Flash</a>:</strong> Google’s most performant, efficient, and cost-effective model, boasting a 1 million token context window (and growing).</li>
<li>Supports fine-tuning and is part of an early tester program.</li>
</ul></li>
<li><p><strong>Gemini Nano &amp; Gemma:</strong></p>
<ul>
<li><strong><a href="https://deepmind.google/technologies/gemini/nano/">Gemini Nano</a>:</strong> Brief mention of its planned integration into Chrome and Pixel/Android devices (details deferred).</li>
<li><strong><a href="https://ai.google.dev/gemma">Gemma</a>:</strong>
<ul>
<li>Open-source versions of Gemini, available on Hugging Face, Kaggle, and Ollama, making local experimentation easy.</li>
<li>Kaggle hosts checkpoints, code samples, and runnable notebooks.</li>
</ul></li>
</ul></li>
</ul>
<section id="generative-ai-and-google" class="level3">
<h3 class="anchored" data-anchor-id="generative-ai-and-google">Generative AI and Google</h3>
<ul>
<li>Google’s history in machine learning: TensorFlow, transformer models (BERT, AlphaFold, AlphaStar, AlphaGo, T5), and now Gemini.</li>
<li>Generative AI extends beyond text and code, mentioning:
<ul>
<li><strong><a href="https://deepmind.google/technologies/imagen-2/">Imagen 2</a>:</strong> Detailed image generation.</li>
<li><strong><a href="https://cloud.google.com/speech-to-text/v2/docs/chirp-model">Chirp</a>:</strong> Speech-to-text with multilingual capabilities and a small model footprint.</li>
</ul></li>
<li><strong>Gemini:</strong> Google’s flagship model (currently on version 1.5)</li>
</ul>
</section>
<section id="gemini-model-features" class="level3">
<h3 class="anchored" data-anchor-id="gemini-model-features">Gemini Model Features</h3>
<ul>
<li><strong>Multimodal Understanding:</strong> Processes images, audio, text, code, video, and more simultaneously.</li>
<li><strong>State-of-the-art Performance:</strong> Excels across various tasks, though reliant on academic benchmarks (discussed later).</li>
<li><strong>Embedded Reasoning:</strong> Strong capabilities in chain-of-thought and step-by-step reasoning.</li>
<li><strong>Scalable Deployment:</strong> Optimized for both large-scale (Google products) and small-scale (edge devices) use cases.</li>
<li><strong>Efficiency and Privacy:</strong> Focus on cost-effective token analysis, reduced inference compute, and on-device processing for privacy preservation.</li>
<li><strong>Model Options:</strong>
<ul>
<li><strong><a href="https://blog.google/technology/ai/google-gemini-next-generation-model-february-2024/">Gemini 1.5 Pro</a>:</strong> High-performance, efficient model.</li>
<li><strong>Gemini Nano:</strong> Ultra-small model for edge deployments.</li>
<li><strong>Gemma:</strong> Open-sourced models (2B and 7B parameters)</li>
</ul></li>
<li>Key considerations for integration: user experience, performance, and cost trade-offs.</li>
<li><strong>Available Options:</strong>
<ul>
<li><strong>Gemini 1.5 Flash:</strong> Fast, 1 million token context window.</li>
<li><strong>Gemini 1.5 Pro:</strong> 2 million token context window</li>
</ul></li>
<li><strong>Gemini Flash for Code:</strong>
<ul>
<li>Performs well for code generation and structured outputs like JSON out-of-the-box.</li>
<li>Fine-tuning and using code examples in the context window further enhance results.</li>
<li>Applicable to code generation, translation, debugging, code review, etc.</li>
</ul></li>
</ul>
</section>
</section>
<section id="understanding-context-windows" class="level2">
<h2 class="anchored" data-anchor-id="understanding-context-windows">Understanding Context Windows</h2>
<ul>
<li><strong>Importance of Context Window Size:</strong>
<ul>
<li>Historically limited to 2,000-8,000 tokens, hindering model capability.</li>
<li>Current models: GPT-4 Turbo (128,000+), Claude (2,000), Gemini (2 million).</li>
</ul></li>
<li><strong>Impact of Larger Context Windows:</strong>
<ul>
<li>Can handle massive amounts of data (emails, texts, videos, codebases, research papers).</li>
<li>Reduces the need for fine-tuning, as more information can be provided at inference time.</li>
<li>Allows for more complex and nuanced outputs.</li>
</ul></li>
</ul>
</section>
<section id="fine-tuning-vs.-prompting-vs.-retrieval" class="level2">
<h2 class="anchored" data-anchor-id="fine-tuning-vs.-prompting-vs.-retrieval">Fine-tuning vs.&nbsp;Prompting vs.&nbsp;Retrieval</h2>
<section id="common-questions-trade-offs" class="level3">
<h3 class="anchored" data-anchor-id="common-questions-trade-offs">Common Questions &amp; Trade-offs</h3>
<ul>
<li>Key decision points when working with large language models.</li>
<li><strong>Considerations:</strong>
<ul>
<li><strong>Prompt Design:</strong> Simple, cost-effective, but may require detailed prompts.</li>
<li><strong>Fine-Tuning:</strong>
<ul>
<li>Increasingly difficult to justify due to maintenance overhead and rapid release of new open-source models.</li>
<li>Recommended only when other options fail or for on-premise/local data requirements.</li>
</ul></li>
</ul></li>
<li><strong>Recommendations:</strong>
<ul>
<li><strong>Start with Closed-Source APIs:</strong> Rapid iteration, prove product-market fit, focus on UX.</li>
<li><strong>Hire ML Team When Necessary:</strong> If highly specialized fine-tuning becomes essential.</li>
</ul></li>
</ul>
</section>
<section id="model-evaluation-its-importance" class="level3">
<h3 class="anchored" data-anchor-id="model-evaluation-its-importance">Model Evaluation &amp; Its Importance</h3>
<ul>
<li><strong>Limitations of Academic Benchmarks:</strong>
<ul>
<li><strong>Example:</strong> <a href="https://huggingface.co/datasets/openai/openai_humaneval">HumanEval</a>
<ul>
<li>Often misinterpreted as involving human evaluation (it doesn’t).</li>
<li>Tests a narrow scope of Python function completion with simplistic tasks.</li>
<li>Not representative of real-world software engineering or other programming languages.</li>
</ul></li>
</ul></li>
<li><strong><a href="https://huggingface.co/datasets/THUDM/humaneval-x">HumanEval X</a>:</strong> Created to address some limitations of HumanEval, but still has limitations.</li>
<li><strong>Key Takeaways:</strong>
<ul>
<li>Carefully consider the relevance and limitations of evaluation metrics.</li>
<li>Prioritize custom evaluations tailored to your specific use case and business needs.</li>
</ul></li>
</ul>
</section>
</section>
<section id="prompting-strategies-and-examples" class="level2">
<h2 class="anchored" data-anchor-id="prompting-strategies-and-examples">Prompting Strategies and Examples</h2>
<section id="power-of-prompting-video-understanding" class="level3">
<h3 class="anchored" data-anchor-id="power-of-prompting-video-understanding">Power of Prompting &amp; Video Understanding</h3>
<ul>
<li><strong>Detailed Example:</strong>
<ul>
<li>Using Gemini in AI Studio to analyze a 44-minute video.</li>
<li>Asking the model to find a specific event (paper removed from a pocket), identify information on the paper, and provide the timestamp.</li>
<li>Demonstrates the ability to understand and extract information from lengthy video content, potentially revolutionizing video analysis workflows.</li>
</ul></li>
<li><strong>Implications:</strong>
<ul>
<li>Transforms how we interact with video content, making it searchable and analyzable at scale.</li>
<li>Also applicable to large text documents (PDFs with images, graphs, code) for summarization, analysis, and research.</li>
</ul></li>
<li><strong>Prefix Caching:</strong>
<ul>
<li>Optimizes API calls for repeated analysis of the same codebase or repository.</li>
<li>Improves latency and grounds responses within a consistent context.</li>
</ul></li>
</ul>
</section>
<section id="ai-studio-overview-examples" class="level3">
<h3 class="anchored" data-anchor-id="ai-studio-overview-examples">AI Studio Overview &amp; Examples</h3>
<ul>
<li><strong>Key Features:</strong>
<ul>
<li>Adjust stop sequences, top-k configurations, and temperature.</li>
<li>Toggle between Gemini models (Pro, Flash, etc.).</li>
<li>Access prompt gallery, cookbook, and getting started resources.</li>
<li>View past prompts and outputs.</li>
</ul></li>
<li><strong>Examples:</strong>
<ul>
<li>Scraping GitHub issues and Stack Overflow questions for analysis.</li>
<li>Converting COBOL code to Java with specific instructions and architecture preferences.</li>
</ul></li>
<li><strong>Key Takeaway:</strong> With detailed instructions, models can achieve impressive results, much like a skilled contractor team.</li>
</ul>
</section>
</section>
<section id="retrieval-augmented-generation" class="level2">
<h2 class="anchored" data-anchor-id="retrieval-augmented-generation">Retrieval Augmented Generation</h2>
<section id="retrieval-in-google-products" class="level3">
<h3 class="anchored" data-anchor-id="retrieval-in-google-products">Retrieval in Google Products</h3>
<ul>
<li><strong><a href="https://gemini.google.com/app">gemini.google.com</a> (formerly Bard):</strong>
<ul>
<li>Example: Querying for information about the San Francisco Ferry Building and requesting recommendations.</li>
<li>Results are grounded in Google Search, with an option to view source citations and confidence levels.</li>
</ul></li>
<li><strong>Personalized Retrieval:</strong> The concept can be extended to internal corporate data and codebases.</li>
</ul>
</section>
</section>
<section id="fine-tuning-considerations-and-gemma" class="level2">
<h2 class="anchored" data-anchor-id="fine-tuning-considerations-and-gemma">Fine-tuning Considerations and Gemma</h2>
<ul>
<li><strong>Fine-Tuning:</strong>
<ul>
<li>Should be approached with caution and a clear understanding of the maintenance commitment.</li>
<li>Consider the rapid evolution of open-source models.</li>
</ul></li>
<li><strong>Gemma Family:</strong>
<ul>
<li>Solid starting point for open-source fine-tuning.</li>
<li>Available in 2B and 7B parameter sizes, with both instruction-tuned and non-instruction-tuned variants.</li>
<li><strong><a href="https://huggingface.co/blog/codegemma">CodeGemma</a>:</strong> For code-related tasks.</li>
<li><strong>RecurrentGemma:</strong> For sequential data.
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/2404.07839">RecurrentGemma: Moving Past Transformers for Efficient Open Language Models</a></li>
<li><strong>HuggingFace Hub:</strong> <a href="google/recurrentgemma-2b-it">google/recurrentgemma-2b-it</a></li>
</ul></li>
<li><strong>PaliGemma:</strong> Open-vision language model.
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/2407.07726">PaliGemma: A versatile 3B VLM for transfer</a></li>
<li><strong>Blog Post:</strong> <a href="https://huggingface.co/blog/paligemma">PaliGemma – Google’s Cutting-Edge Open Vision Language Model</a></li>
</ul></li>
</ul></li>
<li><strong>Resources:</strong>
<ul>
<li><a href="https://cloud.google.com/model-garden?hl=en">Model Garden on Vertex AI</a></li>
<li><a href="https://huggingface.co/google">HuggingFace Hub</a></li>
</ul></li>
<li><strong>Deployment:</strong> Easy one-click deployment to Google Cloud.</li>
<li><strong>Model Builders:</strong> Provides automatic comparisons and prompt management.</li>
</ul>


</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-013/</guid>
  <pubDate>Thu, 25 Jul 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Conference Talk 12: Slaying OOMs with PyTorch FSDP and torchao</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-012/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<ul>
<li>Introduction</li>
<li>Understanding Model Memory</li>
<li>Optimizing Memory Usage</li>
<li>Model Parallelism with FSDP</li>
<li>Benchmarking FSDP2</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled" title="Presentation Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Presentation Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="https://drive.google.com/drive/u/0/folders/1HmGNC4v4L5nXhtdDMVCpUBrme1ELp-2C">Slaying OOMs</a></li>
</ul>
</div>
</div>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<ul>
<li>OOM errors are a common challenge when working with large PyTorch models.</li>
<li>Traditional solutions like reducing batch size or model size are limited in effectiveness.</li>
</ul>
</section>
<section id="understanding-model-memory" class="level2">
<h2 class="anchored" data-anchor-id="understanding-model-memory">Understanding Model Memory</h2>
<ul>
<li><strong>VRAM Constraint:</strong> Modern GPUs have limited VRAM (e.g., 24GB for 3090s and 4090s), leading to challenges when training large models.</li>
<li><strong>Model Memory Components:</strong>
<ul>
<li><strong>Parameters:</strong> Model weights, typically stored in FP16 (2 bytes per parameter). For a 7B parameter LLaMa model, this translates to 14GB.</li>
<li><strong>Gradients:</strong> Calculated during backpropagation, require the same storage size as parameters (another 14GB for LLaMa 7B).</li>
<li><strong>Optimizer State:</strong> Optimizers like Adam store additional information, often twice the size of parameters (28GB for LLaMa 7B).</li>
<li><strong>Activations:</strong> Intermediate outputs of model layers.
<ul>
<li>The size is harder to estimate and depends on factors like batch size and context length.</li>
<li>Activations tend to dominate memory usage at larger batch sizes and context lengths.</li>
</ul></li>
</ul></li>
<li><strong>Example:</strong> A full fine-tuning of a 7B parameter LLaMa model can easily exceed 56GB (14GB parameters + 14GB gradients + 28GB optimizer state), exceeding the VRAM capacity of most consumer GPUs.</li>
<li><strong>Forum Post:</strong> <a href="https://dev-discuss.pytorch.org/t/how-to-measure-memory-usage-from-your-model-without-running-it/2024/1">How to measure memory usage from your model without running it?</a></li>
</ul>
</section>
<section id="optimizing-memory-usage" class="level2">
<h2 class="anchored" data-anchor-id="optimizing-memory-usage">Optimizing Memory Usage</h2>
<section id="optimizer-memory" class="level3">
<h3 class="anchored" data-anchor-id="optimizer-memory">Optimizer Memory</h3>
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/1412.6980">Adam: A Method for Stochastic Optimization</a></li>
<li>While alternative optimizers like SGD might seem appealing due to their lower memory overhead, Adam remains dominant in practice due to its effectiveness.</li>
<li>Replacing Adam is challenging and might not yield significant memory savings.</li>
</ul>
</section>
<section id="parameter-quantization" class="level3">
<h3 class="anchored" data-anchor-id="parameter-quantization">Parameter Quantization</h3>
<ul>
<li><p><strong>4-bit Quantization:</strong> Reduces the precision of model parameters from FP16 to INT4 (half a byte per parameter).</p></li>
<li><p>This technique can significantly reduce memory footprint, for example, bringing the size of a 7B parameter LLaMa model down from 14GB to 3.5GB.</p></li>
<li><p><strong>Torch Compile:</strong> This tool can be leveraged to create efficient quantization kernels directly from Python code, eliminating the need for custom CUDA kernels.</p>
<ul>
<li><p>Decorate <code>quantize_tensor</code> and <code>dequantize_tensor</code> functions with <code>@torch.compile()</code></p></li>
<li><div class="callout callout-style-default callout-note callout-titled" title="Example:">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example:
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb1-2">os.environ[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"TORCH_LOGS"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"output_code"</span></span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> torch</span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@torch.compile</span>()</span>
<span id="cb1-6"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> quantize_tensor(x_fp32):</span>
<span id="cb1-7">    absmax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> torch.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">max</span>(torch.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">abs</span>(x_fp32))</span>
<span id="cb1-8">    c <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">127.0</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> absmax</span>
<span id="cb1-9">    x_int8 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> torch.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">round</span>(c <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x_fp32).to(torch.int8)</span>
<span id="cb1-10">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> x_int8, c</span>
<span id="cb1-11"></span>
<span id="cb1-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@torch.compile</span>()</span>
<span id="cb1-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> dequantize_tensor(x_int8, c):</span>
<span id="cb1-14">    x_fp32 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> x_int8.to(torch.float32) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> c</span>
<span id="cb1-15">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> x_fp32</span>
<span id="cb1-16"></span>
<span id="cb1-17">x_int8, c <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> quantize_tensor(torch.randn(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, device<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cuda"</span>))</span>
<span id="cb1-18">x_fp32 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> dequantize_tensor(x_int8, c)</span></code></pre></div>
</div>
</div></li>
<li><p><strong>Docs:</strong> <a href="https://pytorch.org/docs/stable/generated/torch.compile.html">https://pytorch.org/docs/stable/generated/torch.compile.html</a></p></li>
<li><p><strong>Tutorial:</strong> <a href="https://pytorch.org/tutorials/intermediate/torch_compile_tutorial.html">Introduction to <code>torch.compile</code></a></p></li>
</ul></li>
</ul>
</section>
<section id="gradient-optimization-with-lora" class="level3">
<h3 class="anchored" data-anchor-id="gradient-optimization-with-lora">Gradient Optimization with LoRA</h3>
<ul>
<li>Directly quantizing gradients to 4-bit negatively impacts convergence.</li>
<li><strong>Low-Rank Adaptation (LoRA):</strong> Circumvents this issue by training only a small subset of parameters (adapters) while keeping the majority frozen.</li>
<li><strong>QLoRA:</strong> This technique combines LoRA with parameter quantization to achieve significant memory savings without compromising accuracy.</li>
</ul>
</section>
<section id="challenges-and-solutions-with-qlora" class="level3">
<h3 class="anchored" data-anchor-id="challenges-and-solutions-with-qlora">Challenges and Solutions with QLoRA</h3>
<ul>
<li><p>QLoRA implementation can be complex, often requiring custom CUDA kernels (e.g., the original implementation by Tim Detmers consists of 4,000 lines of CUDA code).</p>
<ul>
<li>Weights aren’t in int4 but NF4 which is closer to a normal distribution</li>
<li>Can’t matrix multiply NF4 tensors
<ul>
<li>need to dequantize and matmul</li>
</ul></li>
<li>Can’t use the same max for everything otherwise you’re too sensitive to outliers</li>
<li>Quantization typically done in blocks with independent scales</li>
<li>QLoRA quantizes the scales (double quantization)</li>
</ul></li>
<li><p><strong>Simplified Implementation with Torch Compile:</strong> <a href="https://github.com/drisspg">Driss Guessous</a>, a PyTorch developer, implemented QLoRA in approximately 900 lines of Python code using Torch Compile.</p>
<ul>
<li><strong>Code:</strong> <a href="https://www.github.com/torchao/dtypes/nf4tensor.py">torchao/dtypes/nf4tensor.py</a></li>
</ul></li>
<li><p><strong>Tensor Subclasses:</strong> PyTorch’s tensor subclassing feature enables the creation of custom data types like NF4 (used in QLoRA), allowing for more efficient representation and manipulation of quantized tensors.</p>
<ul>
<li><div class="callout callout-style-default callout-note callout-titled" title="Example:">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example:
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> F.linear(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span>, weight.to(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span>.dtype))</span></code></pre></div>
</div>
</div></li>
<li><p><strong>Docs:</strong> <a href="https://pytorch.org/docs/stable/tensors.html"><code>torch.Tensor</code></a></p></li>
<li><p><strong><a href="https://github.com/albanD/subclass_zoo/">subclass_zoo</a>:</strong> Contains a number of examples of Tensor subclasses in PyTorch</p></li>
</ul></li>
</ul>
</section>
</section>
<section id="model-parallelism-with-fsdp" class="level2">
<h2 class="anchored" data-anchor-id="model-parallelism-with-fsdp">Model Parallelism with FSDP</h2>
<section id="data-parallism" class="level3">
<h3 class="anchored" data-anchor-id="data-parallism">Data Parallism</h3>
<ul>
<li><strong>Data parallelism:</strong> Split batches across multipls devices and keep a copy of the gradients, model params, and optimizer state on each device</li>
<li>Data parallelism alone, while helpful, might not be sufficient for extremely large models.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-012/images/oom-with-data-parallelism.png" class="img-fluid figure-img"></p>
<figcaption>OOM With Data Parallelism - Slaying OOMs: Slide 19</figcaption>
</figure>
</div>
</section>
<section id="fsdp" class="level3">
<h3 class="anchored" data-anchor-id="fsdp">FSDP</h3>
<ul>
<li><strong>Fully Sharded Data Parallel (FSDP):</strong> Distributes model parameters (and by consequence the gradients, and optimizer states) across multiple GPUs, allowing for training models that exceed the memory capacity of a single device.
<ul>
<li>Memory corresponding to the layer getting processed will be freed when the layer is done.</li>
</ul></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-012/images/fsdp-memory-step.png" class="img-fluid figure-img"></p>
<figcaption>FSDP Memory - Slaying OOMs: Slide 21</figcaption>
</figure>
</div>
<ul>
<li><p><strong>Sharding:</strong> Dividing model components into smaller chunks (shards) that can be placed on different GPUs.</p></li>
<li><p><strong>All Gather Operations:</strong> Used to gather necessary data from different GPUs during model training.</p></li>
<li><p><strong>Layers</strong>:</p>
<ul>
<li>Every PyTorch <code>nn</code> module is a tree of more <code>nn</code> modules.</li>
<li>The user’s wrapping policy determines what gets treated as its own “layer”.</li>
<li>What you decided to wrap influences memory usage
<ul>
<li>Smaller blobs = less memory needs to be all-gathered at a time.</li>
</ul></li>
</ul></li>
<li><p><strong>CPU Offloading:</strong></p>
<ul>
<li><p>Can keep parameters on the CPU and move them to the GPU when computing forward + backward.</p></li>
<li><p>The optimizer update will be done on CPU, so the optim state lives there too.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-012/images/fsdp-memory-step-cpu-offloading.png" class="img-fluid figure-img"></p>
<figcaption>FSDP CPU Offloading - Slaying OOMs: Slide 25</figcaption>
</figure>
</div></li>
</ul></li>
</ul>
</section>
<section id="fsdp1-vs.-fsdp2" class="level3">
<h3 class="anchored" data-anchor-id="fsdp1-vs.-fsdp2">FSDP1 vs.&nbsp;FSDP2</h3>
<ul>
<li><p><strong>Goal:</strong> Make all-gather efficient</p></li>
<li><p><strong>Constraint:</strong> <a href="https://developer.nvidia.com/nccl">NCCL</a> (NVIDIA Collective Communications Library) requires each GPU contribute same-size Tensors</p></li>
<li><p><strong>FSDP1:</strong></p>
<ul>
<li><p>Flattens and concatenates all tensors before sharding, potentially leading to type and metadata conflicts.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-012/images/flatparam-fsdp-1.png" class="img-fluid figure-img"></p>
<figcaption>FlatParam FSDP - Slaying OOMs: Slide 28</figcaption>
</figure>
</div>
<ul>
<li><code>t1</code> and the first part of <code>t2</code> get combined into a single tensor</li>
<li>The second part of <code>t2</code> gets combined with <code>t3</code> into a single tensor</li>
<li><code>t2</code> gets split between GPUs</li>
<li>Forces <code>t1</code>, <code>t2</code>, and <code>t3</code> to all have the same d-type and other metadata</li>
</ul></li>
<li><p>Can lead to non-deterministic memory spikes, making memory management challenging.</p></li>
</ul></li>
<li><p><strong>FSDP2 (Per-Parameter FSDP):</strong></p>
<ul>
<li><p>Introduces distributed tensors (D-tensors) that allow for sharding individual tensors, preserving their original data types and metadata.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-012/images/per-parameter-fsdp-2.png" class="img-fluid figure-img"></p>
<figcaption>Per-Parameter FSDP - Slaying OOMs: Slide 30</figcaption>
</figure>
</div></li>
<li><p>Offers better memory determinism, ensuring more predictable and manageable memory usage.</p></li>
<li><p>Enables more flexible and efficient training scenarios, especially when combined with techniques like QLoRA.</p></li>
<li><p>Requires extra copies during all-gather compared to FSDP1</p></li>
<li><p><strong>Forum Post:</strong> <a href="https://dev-discuss.pytorch.org/t/fsdp-cudacachingallocator-an-outsider-newb-perspective/1486/1">FSDP &amp; CUDACachingAllocator: an outsider newb perspective</a></p></li>
</ul></li>
</ul>
</section>
<section id="cpu-offloading" class="level3">
<h3 class="anchored" data-anchor-id="cpu-offloading">CPU Offloading</h3>
<ul>
<li>Leverages CPU memory to store parameters and optimizer states, further reducing the memory load on GPUs.</li>
<li>Offloads the optimizer step to the CPU, allowing GPUs to focus on computationally intensive forward and backward passes.</li>
</ul>
</section>
</section>
<section id="benchmarking-fsdp2" class="level2">
<h2 class="anchored" data-anchor-id="benchmarking-fsdp2">Benchmarking FSDP2</h2>
<section id="benchmarking-plan" class="level3">
<h3 class="anchored" data-anchor-id="benchmarking-plan">Benchmarking Plan</h3>
<ul>
<li><strong>Goal:</strong> Run benchmarks, identify performance gaps between FSDP2 and the baseline (FSDP1 &amp; bnb), and explore ways to improve FSDP2’s speed.</li>
<li><strong>Hardware:</strong> Two NVIDIA 3090 GPUs (consumer-grade, 24GB VRAM each) acquired from Vast AI.</li>
<li><strong>Baseline:</strong> Answer.ai’s train.py with FSDP1 and bnb, using a batch size of 8.</li>
</ul>
</section>
<section id="initial-benchmarking-and-discrepancies" class="level3">
<h3 class="anchored" data-anchor-id="initial-benchmarking-and-discrepancies">Initial Benchmarking and Discrepancies</h3>
<ul>
<li><p><strong>Benchmarking Environments:</strong></p>
<ul>
<li><p><a href="https://github.com/AnswerDotAI/fsdp_qLoRA/blob/main/train.py">Answer.ai’s train.py</a> (command-line configuration)</p>
<ul>
<li><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python</span> train.py <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--model_name</span> meta-llama/Llama-2-7b-hf <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--batch_size</span> 8 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--context_length</span> 2048 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--train_type</span></span>
<span id="cb3-2">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">qLoRA</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--use_gradient_checkpointing</span> True <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--reentrant_checkpointing</span> True <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--dataset</span> dummy <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--dataset_samples</span></span>
<span id="cb3-3">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">48</span></span></code></pre></div></li>
</ul></li>
<li><p><a href="https://github.com/pytorch/torchtune/blob/1fa1f04baf124c074dcd93831fa38c8b657af1e9/recipes/configs/dev/llama2/7B_qLoRA_fsdp2.yaml">TorchTune recipe</a> (YAML configuration)</p></li>
</ul></li>
<li><p><strong>Initial Findings:</strong></p>
<ul>
<li><table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th>batch size</th>
<th>peak memory</th>
<th>runtime for a step</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>train.py</td>
<td>8</td>
<td>12.88 GiB</td>
<td>14.0s</td>
</tr>
<tr class="even">
<td>torchtune</td>
<td>8</td>
<td>12.60 GiB</td>
<td>16.5s</td>
</tr>
</tbody>
</table></li>
<li><p>FSDP2 showed better peak memory usage.</p></li>
<li><p>FSDP2 was slower in runtime.</p></li>
</ul></li>
<li><p><strong>Tracing Analysis (Perfetto):</strong></p>
<ul>
<li><strong>Blog Posts:</strong>
<ul>
<li><a href="https://pytorch.org/blog/understanding-gpu-memory-1/">Understanding GPU Memory 1: Visualizing All Allocations over Time</a></li>
<li><a href="https://pytorch.org/blog/understanding-gpu-memory-2/">Understanding GPU Memory 2: Finding and Removing Reference Cycles</a></li>
</ul></li>
<li><strong>Traces:</strong>
<ul>
<li><strong>Google Drive:</strong> <a href="https://drive.google.com/file/d/1ObfUUySBwuaCSLMXRxFiM1w7XYMebxvB/view">answer.ai train.py</a></li>
<li><strong>Google Drive:</strong> <a href="https://drive.google.com/file/d/1BpdlZZ55746IHcifho2u2okJQ1ihr8dY/view">torchtune</a></li>
</ul></li>
<li><strong><a href="https://ui.perfetto.dev/">Perfetto</a>:</strong> A production-grade open-source stack for performance instrumentation and trace analysis</li>
<li><strong>Significant difference in the number of optimizer steps:</strong> The optimizer took much longer in FSDP2.</li>
<li><strong>Double the number of operations:</strong> Indicating FSDP2 might be training on more parameters than the baseline.</li>
</ul></li>
</ul>
</section>
<section id="identifying-the-root-causes" class="level3">
<h3 class="anchored" data-anchor-id="identifying-the-root-causes">Identifying the Root Causes</h3>
<ul>
<li><strong>Root Cause 1: Configuration Discrepancy</strong>
<ul>
<li>TorchTune recipe LoRA-fied to the output projection (adding two low rank adapters per layer), resulting in 64 additional parameters compared to train.py.</li>
</ul></li>
<li><strong>Root Cause 2: Tensor Subclass Dispatch Overhead</strong>
<ul>
<li>Distributed tensors (D-tensors) introduce overhead due to metadata unwrapping during kernel calls.</li>
<li>This overhead was amplified by the increased number of parameters, making the optimizer step significantly slower in FSDP2.</li>
</ul></li>
</ul>
</section>
<section id="addressing-the-discrepancies-and-further-benchmarking" class="level3">
<h3 class="anchored" data-anchor-id="addressing-the-discrepancies-and-further-benchmarking">Addressing the Discrepancies and Further Benchmarking</h3>
<ul>
<li><strong>Ensuring Apples-to-Apples Comparison:</strong>
<ul>
<li>Standardized the dataset, parameter count, and wrapping policy across benchmarks.</li>
</ul></li>
<li><strong>Results After Standardization:</strong>
<ul>
<li>Still slower runtime for FSDP2.</li>
<li>Significantly improved peak memory usage.</li>
</ul></li>
<li><strong>Further Analysis:</strong>
<ul>
<li>Focused on forward pass, backward pass, and optimizer as the main culprits for the remaining performance gap.</li>
</ul></li>
</ul>
</section>
<section id="deep-dive-into-performance-gaps" class="level3">
<h3 class="anchored" data-anchor-id="deep-dive-into-performance-gaps">Deep Dive into Performance Gaps</h3>
<ul>
<li><strong>Gap 1: Optimizer Step Slowdown</strong>
<ul>
<li><strong>Problem:</strong> D-tensor overhead resulted in a 3x slower optimizer step.</li>
<li><strong>Solution:</strong> Collaborated with Intel to develop a fused Adam optimizer kernel for single dispatch and vectorization, leading to an 8x speedup.</li>
</ul></li>
<li><strong>Gap 2: Larger All Gather Operations</strong>
<ul>
<li><strong>Problem 1:</strong> FSDP2 packed more data (scalars and quantization factors) into the all gather operation, unlike the baseline.</li>
<li><strong>Problem 2:</strong> Output projection wasn’t quantized in FSDP2 when opting out of LoRA, leading to a 4x larger size compared to the baseline.</li>
<li><strong>Solution:</strong>
<ul>
<li>Problem 1 is expected behavior.</li>
<li>Problem 2 will be addressed by TorchTune in future releases.</li>
</ul></li>
</ul></li>
<li><strong>Gap 3: Overhead from Dequantization</strong>
<ul>
<li><strong>Problem:</strong> FSDP2’s dequantization process from NF4 to BF16 for CUDA kernels was less efficient than the specialized implementation used in the baseline.</li>
<li><strong>Solution:</strong> Explore using Torch Compile, custom Torch kernels, or Triton kernels for faster dequantization.</li>
</ul></li>
<li><strong>Gap 4: Different Rope Algorithms</strong>
<ul>
<li><strong>Problem:</strong> TorchTune and the baseline employed different Rope algorithms, leading to different operations before the SDPA.</li>
<li><strong>Solution:</strong> TorchTune to offer a wider selection of Rope algorithms.</li>
</ul></li>
<li><strong>Gap 5: Overlapping Communication and Computation</strong>
<ul>
<li><strong>Problem:</strong> FSDP2’s stricter memory management exposed inefficiencies in overlapping CPU offloading with computation. The computation tasks were much smaller than the communication tasks, leading to idle time.</li>
<li><strong>Solution:</strong> Adjusted the wrapping policy to group layers differently, enabling better overlap and reducing idle time. This solution is only feasible with FSDP2 due to its ability to handle mixed precision within a layer.</li>
</ul></li>
</ul>


</section>
</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-012/</guid>
  <pubDate>Wed, 24 Jul 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Conference Talk 10: Systematically Improving RAG Applications</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-010/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<ul>
<li>The RAG Playbook</li>
<li>Identifying and Addressing Issues</li>
<li>Real-Time Monitoring and Classifiers</li>
<li>Low-Hanging Fruit and Synthetic Data Generation</li>
<li>Importance of Full Text Search and Metadata</li>
<li>Conclusion</li>
<li>Q&amp;A Session</li>
</ul>
<section id="the-rag-playbook" class="level2">
<h2 class="anchored" data-anchor-id="the-rag-playbook">The RAG Playbook</h2>
<ul>
<li><strong>Blog Posts:</strong> <a href="https://jxnl.co/writing/category/rag/">Jason Liu RAG</a></li>
</ul>
<section id="importance-of-feedback-mechanisms" class="level3">
<h3 class="anchored" data-anchor-id="importance-of-feedback-mechanisms">Importance of Feedback Mechanisms</h3>
<ul>
<li>Define clear objectives for your RAG application. What user behavior are you trying to drive?</li>
<li>Don’t try to improve everything at once. Focus on specific areas identified through data analysis.</li>
</ul>
</section>
<section id="capturing-feedback-user-satisfaction" class="level3">
<h3 class="anchored" data-anchor-id="capturing-feedback-user-satisfaction">Capturing Feedback: User Satisfaction</h3>
<ul>
<li>Implement simple feedback mechanisms like thumbs up/thumbs down buttons.</li>
<li>Carefully choose the copy for feedback prompts to ensure you’re measuring the intended metric (e.g., answer correctness vs.&nbsp;overall experience).</li>
<li>Example: Changing feedback prompt from “How did we do?” to “Did we answer your question?” led to a 5x increase in feedback volume and improved data quality.</li>
</ul>
</section>
<section id="measuring-relevancy-cosine-and-re-ranker-scores" class="level3">
<h3 class="anchored" data-anchor-id="measuring-relevancy-cosine-and-re-ranker-scores">Measuring Relevancy: Cosine and Re-ranker Scores</h3>
<ul>
<li>Track objective relevancy metrics alongside user feedback.</li>
<li>Use cosine similarity of embedding scores and re-ranker scores as cost-effective measures of relevancy.</li>
<li><strong>reranker:</strong> A type of model that, given a query and document pair, will output a similarity score.</li>
<li><strong>Tool:</strong>
<ul>
<li><strong><a href="https://github.com/AnswerDotAI/rerankers">rerankers</a>:</strong> A lightweight unified API for various reranking models.</li>
</ul></li>
</ul>
</section>
<section id="unsupervised-learning-for-topic-clustering" class="level3">
<h3 class="anchored" data-anchor-id="unsupervised-learning-for-topic-clustering">Unsupervised Learning for Topic Clustering</h3>
<ul>
<li>Employ unsupervised learning techniques like LDA or BERTopic to group similar queries into topics.
<ul>
<li><strong>LDA:</strong>
<ul>
<li><strong>Paper:</strong> <a href="https://ai.stanford.edu/~ang/papers/jair03-lda.pdf">Latent Dirichlet Allocation</a></li>
</ul></li>
<li><strong>BERTopic:</strong>
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/2203.05794">BERTopic: Neural topic modeling with a class-based TF-IDF procedure</a></li>
<li><strong>Documentation:</strong> <a href="https://maartengr.github.io/BERTopic/index.html">BERTopic</a></li>
</ul></li>
</ul></li>
<li>Analyze topic clusters based on:
<ul>
<li>Number of questions within the topic</li>
<li>Mean cosine similarity score</li>
<li>Mean user satisfaction score</li>
</ul></li>
</ul>
</section>
<section id="prioritizing-improvement-based-on-topic-analysis" class="level3">
<h3 class="anchored" data-anchor-id="prioritizing-improvement-based-on-topic-analysis">Prioritizing Improvement Based on Topic Analysis</h3>
<ul>
<li>Prioritize topics with:
<ul>
<li>High volume (many questions)</li>
<li>Low relevancy scores</li>
<li>Low user satisfaction scores</li>
</ul></li>
<li>Consider deprioritizing or explicitly excluding topics with low volume, low relevancy, and low satisfaction.</li>
<li>Different combinations of volume, relevancy, and satisfaction provide insights into different types of issues requiring specific solutions.</li>
</ul>
</section>
</section>
<section id="identifying-and-addressing-issues" class="level2">
<h2 class="anchored" data-anchor-id="identifying-and-addressing-issues">Identifying and Addressing Issues</h2>
<section id="content-vs.-capability-topics" class="level3">
<h3 class="anchored" data-anchor-id="content-vs.-capability-topics">Content vs.&nbsp;Capability Topics</h3>
<ul>
<li><strong>Content topics:</strong> Issues stem from insufficient or inadequate content in the knowledge base.
<ul>
<li>Example: Users asking about pricing, but not enough pricing documents available.</li>
</ul></li>
<li><strong>Capability topics:</strong> Issues relate to limitations in the system’s functionality.
<ul>
<li>Example: Users asking for the last modified date of a document, but this information is not available to the language model.</li>
</ul></li>
</ul>
</section>
<section id="examples-of-capability-topics-and-solutions" class="level3">
<h3 class="anchored" data-anchor-id="examples-of-capability-topics-and-solutions">Examples of Capability Topics and Solutions</h3>
<ul>
<li><strong>Modified dates:</strong> Include last modified date metadata in text chunks.</li>
<li><strong>Comparing and contrasting:</strong> Implement parallel search functionality.</li>
<li><strong>Recency and latency:</strong> Add date range filtering capabilities.</li>
<li><strong>Financial year variations:</strong> Account for industry-specific fiscal year definitions.</li>
</ul>
</section>
<section id="addressing-inventory-issues-and-building-rules" class="level3">
<h3 class="anchored" data-anchor-id="addressing-inventory-issues-and-building-rules">Addressing Inventory Issues and Building Rules</h3>
<ul>
<li><strong>Address content topics by:</strong>
<ul>
<li>Identifying and filling inventory gaps.</li>
</ul></li>
<li><strong>Build rules to:</strong>
<ul>
<li>Alert content management teams when questions frequently lack relevant documents.</li>
<li>Inform users when insufficient data is available to answer their query.</li>
</ul></li>
</ul>
</section>
</section>
<section id="real-time-monitoring-and-classifiers" class="level2">
<h2 class="anchored" data-anchor-id="real-time-monitoring-and-classifiers">Real-Time Monitoring and Classifiers</h2>
<section id="building-classifiers-for-real-time-question-categorization" class="level3">
<h3 class="anchored" data-anchor-id="building-classifiers-for-real-time-question-categorization">Building Classifiers for Real-Time Question Categorization</h3>
<ul>
<li>Develop classifiers to categorize new questions into previously identified topics and capability clusters in real-time.</li>
</ul>
</section>
<section id="monitoring-question-distribution-and-prioritization-over-time" class="level3">
<h3 class="anchored" data-anchor-id="monitoring-question-distribution-and-prioritization-over-time">Monitoring Question Distribution and Prioritization Over Time</h3>
<ul>
<li>Use tools like Amplitude or Datadog to monitor the distribution of question types over time.
<ul>
<li><strong>Amplitude:</strong> <a href="https://amplitude.com/">https://amplitude.com/</a></li>
<li><strong>Datadog:</strong> <a href="https://www.datadoghq.com/">https://www.datadoghq.com/</a></li>
</ul></li>
<li>Identify shifts in user needs and adjust prioritization accordingly.</li>
<li><strong>Example:</strong> Onboarding a new client significantly increases the volume of “comparing and contrasting” questions, highlighting the need to prioritize that capability.</li>
</ul>
</section>
</section>
<section id="low-hanging-fruit-and-synthetic-data-generation" class="level2">
<h2 class="anchored" data-anchor-id="low-hanging-fruit-and-synthetic-data-generation">Low-Hanging Fruit and Synthetic Data Generation</h2>
<section id="focusing-on-specific-improvements" class="level3">
<h3 class="anchored" data-anchor-id="focusing-on-specific-improvements">Focusing on Specific Improvements</h3>
<ul>
<li>Translate ambiguous goals like “improving RAG” into concrete, measurable objectives (e.g., “improving datetime filtering”).</li>
<li>Break down large improvements into smaller, manageable experiments.</li>
</ul>
</section>
<section id="synthetic-data-generation-for-baseline-evaluation" class="level3">
<h3 class="anchored" data-anchor-id="synthetic-data-generation-for-baseline-evaluation">Synthetic Data Generation for Baseline Evaluation</h3>
<ul>
<li>Generate synthetic data for specific topics to:
<ul>
<li>Establish baselines for evaluating the impact of system changes.</li>
<li>Test the effectiveness of new datasets or models.</li>
</ul></li>
</ul>
</section>
</section>
<section id="importance-of-full-text-search-and-metadata" class="level2">
<h2 class="anchored" data-anchor-id="importance-of-full-text-search-and-metadata">Importance of Full Text Search and Metadata</h2>
<section id="benefits-of-full-text-search-and-re-rankers" class="level3">
<h3 class="anchored" data-anchor-id="benefits-of-full-text-search-and-re-rankers">Benefits of Full Text Search and Re-Rankers</h3>
<ul>
<li>Incorporate full text search capabilities for robust retrieval.</li>
<li>Utilize re-ranker models to improve the ranking of retrieved results.</li>
</ul>
</section>
<section id="importance-of-metadata-filtering" class="level3">
<h3 class="anchored" data-anchor-id="importance-of-metadata-filtering">Importance of Metadata Filtering</h3>
<ul>
<li>Include relevant metadata (e.g., author, date, document type) to enable granular filtering.</li>
<li>Example: “Show me the latest pricing document for Fortune 500 companies” requires filtering by date, document type, and client category.</li>
</ul>
</section>
<section id="measuring-impact-and-driving-business-outcomes" class="level3">
<h3 class="anchored" data-anchor-id="measuring-impact-and-driving-business-outcomes">Measuring Impact and Driving Business Outcomes</h3>
<ul>
<li>Track relevant metrics (e.g., character length, latency) and correlate them with business outcomes (e.g., user conversion, engagement).</li>
</ul>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<ul>
<li>The key to improving RAG applications is to adopt a systematic, data-driven approach.</li>
<li>By analyzing user feedback, clustering queries, and monitoring question distribution, developers can identify and prioritize areas for improvement.</li>
<li>Focusing on specific, measurable goals and utilizing synthetic data generation enables efficient testing and iteration.</li>
</ul>
</section>
<section id="qa-session" class="level2">
<h2 class="anchored" data-anchor-id="qa-session">Q&amp;A Session</h2>
<section id="how-much-data-is-needed-for-these-techniques-to-be-worthwhile" class="level3">
<h3 class="anchored" data-anchor-id="how-much-data-is-needed-for-these-techniques-to-be-worthwhile">How much data is needed for these techniques to be worthwhile?</h3>
<ul>
<li>Even with small datasets (e.g., 100 queries), clustering techniques can reveal patterns and differences in query types (e.g., time-sensitive queries).</li>
<li>Clustering enables focusing on specific query groups and tailoring optimization efforts.</li>
<li>Early clustering allows for proactive identification of potential issues and areas for improvement.</li>
</ul>
</section>
<section id="how-to-build-a-data-ingestion-pipeline-for-complex-data" class="level3">
<h3 class="anchored" data-anchor-id="how-to-build-a-data-ingestion-pipeline-for-complex-data">How to build a data ingestion pipeline for complex data?</h3>
<ul>
<li><strong>Understand user questions:</strong> Determine how users interact with different data types (e.g., extracting specific information from images or answering questions about charts).</li>
<li><strong>Generate text summaries:</strong> Create text representations of images, charts, and tables to enable text-based search and retrieval.</li>
<li><strong>Use specialized libraries:</strong> Leverage libraries for extracting structured data like tables from PDFs, addressing potential challenges like nested headers.</li>
</ul>
</section>
<section id="how-to-handle-tables-in-rag-applications" class="level3">
<h3 class="anchored" data-anchor-id="how-to-handle-tables-in-rag-applications">How to handle tables in RAG applications?</h3>
<ul>
<li><strong>Understand query intent:</strong> Determine whether users seek aggregate statistics or specific rows within tables.</li>
<li><strong>Choose appropriate processing:</strong> Utilize Text-to-SQL engines for aggregate queries or chunk tables strategically for row-based searches.</li>
<li><strong>Consider table size and complexity:</strong> Large tables may necessitate alternative approaches like using SQLite or optimized search techniques.</li>
</ul>
</section>
<section id="how-to-capture-feedback-when-rag-is-hidden-from-the-user" class="level3">
<h3 class="anchored" data-anchor-id="how-to-capture-feedback-when-rag-is-hidden-from-the-user">How to capture feedback when RAG is hidden from the user?</h3>
<ul>
<li><strong>Analyze user interactions:</strong> Track edits to report fields to identify areas requiring frequent corrections.</li>
<li><strong>Monitor internal RAG metrics:</strong> Analyze cosine distances and re-ranker scores across different fields to pinpoint areas for improvement.</li>
<li><strong>Design for feedback:</strong> Ensure reports allow for user feedback and facilitate mapping feedback to specific report elements.</li>
</ul>
</section>
<section id="how-to-capture-feedback-and-iterate-quickly" class="level3">
<h3 class="anchored" data-anchor-id="how-to-capture-feedback-and-iterate-quickly">How to capture feedback and iterate quickly?</h3>
<ul>
<li><strong>Write assertions for extractable facts:</strong> Create tests to verify the accuracy of extracted information against ground truth, enabling rapid iteration without deploying the system.</li>
<li><strong>Use automated testing:</strong> Automate the evaluation process to speed up development and identify regressions.</li>
</ul>
</section>
<section id="why-use-cosine-distance-as-a-metric-when-its-relative" class="level3">
<h3 class="anchored" data-anchor-id="why-use-cosine-distance-as-a-metric-when-its-relative">Why use cosine distance as a metric when it’s relative?</h3>
<ul>
<li><strong>Provides a quantifiable measure:</strong> Cosine distance offers a numerical representation of relevance, even if relative, allowing for comparisons and tracking progress.</li>
<li><strong>Available for every request:</strong> Unlike user feedback, which can be sparse, cosine distance can be calculated for every query, providing more data points for analysis.</li>
<li><strong>Useful for relative comparisons:</strong> Focus on the relative differences in cosine distances between queries and text chunks to identify areas for improvement.</li>
</ul>
</section>
<section id="how-to-incorporate-metadata-filtering-in-rag" class="level3">
<h3 class="anchored" data-anchor-id="how-to-incorporate-metadata-filtering-in-rag">How to incorporate metadata filtering in RAG?</h3>
<ul>
<li><strong>Use language models for structured outputs:</strong> Utilize models like Instructor to generate structured representations of queries, including metadata filters like date ranges and allowed domains.</li>
<li><strong>Customize metadata extraction:</strong> Define custom metadata fields based on the specific data and user needs.</li>
<li><strong>Leverage metadata in search:</strong> Integrate metadata filters into the search process to narrow down relevant documents and improve accuracy.</li>
</ul>
</section>
<section id="how-to-use-language-models-for-metadata-creation" class="level3">
<h3 class="anchored" data-anchor-id="how-to-use-language-models-for-metadata-creation">How to use language models for metadata creation?</h3>
<ul>
<li><strong>Extract specific information:</strong> Use language models to extract relevant metadata from documents, such as converting financial reporting periods based on industry-specific rules.</li>
<li><strong>Generate synthetic queries from complex content:</strong> Extract complex diagrams and tables, then use language models to generate related questions, embedding those questions as metadata for improved retrieval.</li>
</ul>
</section>
<section id="favorite-platforms-for-building-rag-systems" class="level3">
<h3 class="anchored" data-anchor-id="favorite-platforms-for-building-rag-systems">Favorite platforms for building RAG systems?</h3>
<ul>
<li><strong>LanceDB:</strong> Favored for its ability to combine full-text search, SQL, and vector search in a single database, simplifying the development process.
<ul>
<li><strong><a href="https://lancedb.com/">LanceDB</a>:</strong> The Database for Multimodal AI</li>
</ul></li>
<li><strong>Custom solutions:</strong> Building custom query engines and processors provides greater control and flexibility, especially for handling specific data structures and complex search requirements.</li>
</ul>
</section>
<section id="how-to-develop-intuition-for-user-questions-at-the-start-of-a-project" class="level3">
<h3 class="anchored" data-anchor-id="how-to-develop-intuition-for-user-questions-at-the-start-of-a-project">How to develop intuition for user questions at the start of a project?</h3>
<ul>
<li><strong>Generate synthetic queries:</strong> Utilize language models to generate synthetic queries from the data, revealing potential search challenges and guiding UI design.</li>
<li><strong>Start with a hypothesis:</strong> Base initial development on assumptions about user questions, then refine based on real-world data and feedback.</li>
<li><strong>Iterate based on feedback:</strong> Continuously analyze user queries, identify gaps in the system’s understanding, and adapt the system accordingly.</li>
</ul>
</section>
<section id="when-does-bm25-outperform-semantic-search" class="level3">
<h3 class="anchored" data-anchor-id="when-does-bm25-outperform-semantic-search">When does BM25 outperform semantic search?</h3>
<ul>
<li><strong>Wikipedia:</strong> <a href="https://en.wikipedia.org/wiki/Okapi_BM25">Okapi BM25</a></li>
<li><strong>Stanford IR Book:</strong> <a href="https://nlp.stanford.edu/IR-book/html/htmledition/okapi-bm25-a-non-binary-model-1.html">Okapi BM25: a non-binary model</a></li>
<li><strong>Document search:</strong> When users are searching for specific documents they authored or are familiar with, BM25 excels due to its keyword-matching approach.</li>
<li><strong>Exact word matches:</strong> BM25 performs well when users use the same terminology as the document authors, common when searching personal notes or transcripts.</li>
</ul>
</section>
<section id="how-to-design-a-good-ux-for-report-editing-in-rag-applications" class="level3">
<h3 class="anchored" data-anchor-id="how-to-design-a-good-ux-for-report-editing-in-rag-applications">How to design a good UX for report editing in RAG applications?</h3>
<ul>
<li><strong>Utilize structured outputs:</strong> Structure report data using keys and values to enable granular editing and facilitate attributing edits to specific report elements.</li>
<li><strong>Avoid monolithic markdown outputs:</strong> Markdown, while seemingly structured, poses challenges in tracking edits and associating them with underlying data.</li>
</ul>
</section>
<section id="how-to-implement-citations-in-rag-systems" class="level3">
<h3 class="anchored" data-anchor-id="how-to-implement-citations-in-rag-systems">How to implement citations in RAG systems?</h3>
<ul>
<li><strong>Cite entire text chunks:</strong> Include text chunk IDs as citations within the generated response.</li>
<li><strong>Leverage markdown formatting:</strong> Format citations as markdown URLs for improved readability and potential integration with UI elements for displaying cited text.</li>
</ul>
</section>
<section id="high-dimension-embedding-models-vs.-cross-encoder-models-for-re-ranking" class="level3">
<h3 class="anchored" data-anchor-id="high-dimension-embedding-models-vs.-cross-encoder-models-for-re-ranking">High-dimension embedding models vs.&nbsp;cross-encoder models for re-ranking?</h3>
<ul>
<li><strong>Use both:</strong> Employ a multi-stage re-ranking approach using both vector databases and cross-encoders to balance speed and accuracy.</li>
<li><strong>Prioritize speed with vector databases:</strong> Utilize vector databases for fast initial retrieval, narrowing down the candidate pool for the more computationally expensive cross-encoder.</li>
<li><strong>Leverage cross-encoders for nuanced relevance:</strong> Employ cross-encoders to capture subtle semantic similarities and differences that vector databases might miss.</li>
</ul>
</section>
<section id="thoughts-on-hierarchical-retrievers-and-fine-tuning-embeddings" class="level3">
<h3 class="anchored" data-anchor-id="thoughts-on-hierarchical-retrievers-and-fine-tuning-embeddings">Thoughts on hierarchical retrievers and fine-tuning embeddings?</h3>
<ul>
<li><strong>Hierarchical retrievers:</strong> Potentially less crucial with increasing context lengths in language models, but still valuable for ensuring retrieval of related information across chunks.</li>
<li><strong>Fine-tuning embeddings:</strong> Crucial for improving relevance in domain-specific applications, outperforming generic embedding models, especially with sufficient training data.</li>
</ul>
</section>
<section id="tips-for-improving-data-extraction-from-tables-and-pdfs" class="level3">
<h3 class="anchored" data-anchor-id="tips-for-improving-data-extraction-from-tables-and-pdfs">Tips for improving data extraction from tables and PDFs?</h3>
<ul>
<li><strong>Utilize specialized tools:</strong> Leverage tools like LlamaParse, which combine language models and traditional text extraction techniques for improved accuracy.
<ul>
<li><strong>LlamaParse:</strong> <a href="https://docs.llamaindex.ai/en/stable/llama_cloud/llama_parse/">Documentation</a></li>
</ul></li>
<li><strong>Experiment with output formats:</strong> Consider requesting markdown table outputs from language models instead of CSVs, as markdown often handles complex table structures better.</li>
<li><strong>Leverage advanced language models:</strong> Utilize models like GPT-4.0 or Opus to process images of tables and generate structured outputs like markdown tables.</li>
</ul>
</section>
<section id="guidelines-for-metrics-and-telemetry-in-rag-systems" class="level3">
<h3 class="anchored" data-anchor-id="guidelines-for-metrics-and-telemetry-in-rag-systems">Guidelines for metrics and telemetry in RAG systems?</h3>
<ul>
<li><strong>Treat RAG like recommendation systems:</strong> Instrument RAG systems similarly to recommendation systems, tracking user interactions, retrieval metrics, and feedback.</li>
<li><strong>Log relevant data:</strong> Capture data on user queries, retrieved text chunks, citations, and user feedback for analysis and model improvement.</li>
<li><strong>Utilize micro-interactions for feedback:</strong> Treat interactions like citations as implicit feedback, leveraging it to fine-tune embedding models and improve retrieval relevance.</li>
</ul>
</section>
<section id="recommendations-for-picking-embedding-models" class="level3">
<h3 class="anchored" data-anchor-id="recommendations-for-picking-embedding-models">Recommendations for picking embedding models?</h3>
<ul>
<li><strong>Evaluate with synthetic data:</strong> Create synthetic datasets with question-answer pairs and evaluate different embedding models to determine which performs best for the specific task.</li>
<li><strong>Fine-tune with real data:</strong> Once sufficient real-world data is available, fine-tune embedding models to further enhance relevance and outperform generic models.</li>
</ul>
</section>
<section id="balancing-upfront-data-inspection-with-adaptation-over-time" class="level3">
<h3 class="anchored" data-anchor-id="balancing-upfront-data-inspection-with-adaptation-over-time">Balancing upfront data inspection with adaptation over time?</h3>
<ul>
<li><strong>Iterative approach:</strong> Combine upfront data analysis with ongoing monitoring and adaptation.</li>
<li><strong>Clustering and labeling:</strong> Cluster initial datasets to understand query patterns and create labels for different query types.</li>
<li><strong>Monitor for drift:</strong> Regularly monitor the percentage of uncategorized queries (“other”) to identify shifts in user behavior and adapt the system accordingly.</li>
</ul>
</section>
<section id="how-to-teach-clients-to-analyze-data-for-rag-applications" class="level3">
<h3 class="anchored" data-anchor-id="how-to-teach-clients-to-analyze-data-for-rag-applications">How to teach clients to analyze data for RAG applications?</h3>
<ul>
<li><strong>Focus on the scientific method:</strong> Guide clients through a process of hypothesis generation, data collection, experimentation, and iteration.</li>
<li><strong>Provide clear visualizations and reports:</strong> Present data analysis results in an easily understandable format to facilitate decision-making and identify areas for improvement.</li>
</ul>
</section>
<section id="choosing-between-vector-databases-and-cross-encoders" class="level3">
<h3 class="anchored" data-anchor-id="choosing-between-vector-databases-and-cross-encoders">Choosing between vector databases and cross-encoders?</h3>
<ul>
<li><strong>Consider both evaluation results and latency constraints:</strong> Balance the trade-off between accuracy (often favoring cross-encoders) and speed (favoring vector databases).</li>
<li><strong>Prioritize business outcomes:</strong> Ultimately, the choice should align with achieving desired business outcomes, considering factors like user experience and cost.</li>
</ul>
</section>
<section id="how-to-handle-frequently-occurring-statements-in-rag" class="level3">
<h3 class="anchored" data-anchor-id="how-to-handle-frequently-occurring-statements-in-rag">How to handle frequently occurring statements in RAG?</h3>
<ul>
<li><strong>Create dedicated text chunks:</strong> If a specific statement appears frequently and holds significance for users, create dedicated text chunks containing variations of that statement to ensure retrieval.</li>
<li><strong>Augment the dataset:</strong> Use language models to extract relevant clauses and statements from documents, creating augmented text chunks to improve retrieval of specific information.</li>
</ul>
</section>
<section id="recommendations-for-vector-stores-and-metadata" class="level3">
<h3 class="anchored" data-anchor-id="recommendations-for-vector-stores-and-metadata">Recommendations for vector stores and metadata?</h3>
<ul>
<li><strong>Think beyond vector stores:</strong> View the problem as building a search engine, considering various components like BM25, SQL, and vector search, not just vector stores in isolation.</li>
<li><strong>Choose tools based on specific needs:</strong> Select technologies and approaches that best suit the project’s requirements, data characteristics, and available resources.</li>
</ul>
</section>
<section id="finding-early-customers-for-rag-consulting" class="level3">
<h3 class="anchored" data-anchor-id="finding-early-customers-for-rag-consulting">Finding early customers for RAG consulting?</h3>
<ul>
<li><strong>Leverage experience from recommendation systems:</strong> Position RAG expertise by drawing parallels to recommendation systems, highlighting transferable skills in data analysis, model development, and system optimization.</li>
<li><strong>Target businesses with similar workflows:</strong> Focus on businesses where users interact with information similarly to recommendation systems, such as those requiring information retrieval and synthesis based on user requests.</li>
</ul>


</section>
</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-010/</guid>
  <pubDate>Sat, 20 Jul 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Conference Talk 9: Why Fine-Tuning is Dead</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-009/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<ul>
<li>Trends in Machine Learning</li>
<li>Performance Observations: Fine-tuning vs.&nbsp;RAG</li>
<li>The Moving Target: Fine-tuning and Frontier Models</li>
<li>The Difficulty of Fine-tuning: Prioritizing Fundamentals</li>
<li>Extrapolating Trends: Context Size, Price, and Latency</li>
<li>Conclusion</li>
<li>Q&amp;A Session</li>
</ul>
<section id="trends-in-machine-learning" class="level2">
<h2 class="anchored" data-anchor-id="trends-in-machine-learning">Trends in Machine Learning</h2>
<ul>
<li><strong>Focus on fundamentals:</strong> Throughout ML history, focusing on “boring” fundamentals like data quality and SQL queries often yielded better results than chasing the latest “cool” technology.
<ul>
<li><strong>2009:</strong> Data analysis and SQL were more impactful than training ML models.</li>
<li><strong>2012-2014:</strong> XGBoost outperformed deep learning for many tasks.</li>
<li><strong>2015:</strong> Data cleaning and error correction were more effective than inventing new loss functions.</li>
<li><strong>2023:</strong> Prompting and RAG often outperform fine-tuning.</li>
</ul></li>
<li><strong>Fine-tuning’s uncertain future:</strong> While fine-tuning became popular with the rise of pre-trained models like ResNet and BERT, LLMs might be shifting the paradigm again towards prompt-based and RAG-augmented approaches.</li>
</ul>
<section id="qa-on-trends-and-embedding-models" class="level3">
<h3 class="anchored" data-anchor-id="qa-on-trends-and-embedding-models">Q&amp;A on Trends and Embedding Models</h3>
<ul>
<li><strong>Fine-tuning’s future relevance:</strong> Fine-tuning might still become more valuable in the future, just like deep learning did after an initial period of limited practical use.</li>
<li><strong>Embedding models:</strong> While LLMs are currently the focus of improvement, embedding models might also see advancements that reduce the need for fine-tuning. However, domain-specific applications might still require fine-tuning or hybrid approaches like combining keyword search with embedding search.</li>
<li><strong>Domain-specific ranking and retrieval:</strong> RAG, combined with techniques like query expansion driven by LLMs, might be able to address the need for domain-specific ranking and retrieval without fine-tuning embedding models.</li>
<li><strong>Benchmarking prompting vs.&nbsp;fine-tuning:</strong> Limited data exists comparing prompting and RAG to fine-tuning, but existing research suggests RAG often outperforms fine-tuning.</li>
</ul>
</section>
</section>
<section id="performance-observations-fine-tuning-vs.-rag" class="level2">
<h2 class="anchored" data-anchor-id="performance-observations-fine-tuning-vs.-rag">Performance Observations: Fine-tuning vs.&nbsp;RAG</h2>
<ul>
<li><strong>RAG often outperforms fine-tuning:</strong> Several studies indicate that RAG, even without fine-tuning, often achieves comparable or better performance than fine-tuning alone, especially for larger models and knowledge-based tasks.
<ul>
<li><strong>Forum Post:</strong> <a href="https://community.openai.com/t/fine-tuning-vs-context-injection-rag/550286/1">Fine-tuning vs Context-Injection (RAG)</a></li>
</ul></li>
<li><strong>Prioritization over “versus”:</strong> While combining RAG and fine-tuning can yield incremental improvements, prioritizing RAG is crucial due to its efficiency and effectiveness.
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/2403.01432">Fine Tuning vs.&nbsp;Retrieval Augmented Generation for Less Popular Knowledge</a></li>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/2312.05934">Fine-Tuning or Retrieval? Comparing Knowledge Injection in LLMs</a></li>
</ul></li>
<li><strong>Fine-tuning for style, not knowledge:</strong> Fine-tuning might be less suitable for incorporating domain knowledge into a model compared to RAG, which directly provides relevant context.
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/2401.08406">RAG vs Fine-tuning: Pipelines, Tradeoffs, and a Case Study on Agriculture</a></li>
</ul></li>
<li><strong>The evolving definition of “knowledge”:</strong> Distinguishing between “knowledge” and “style” in LLMs is complex and changes with each model generation. What previously required fine-tuning (e.g., writing style) might be achievable through prompting in newer models.</li>
</ul>
<section id="qa-on-fine-tuning-rag-and-knowledge" class="level3">
<h3 class="anchored" data-anchor-id="qa-on-fine-tuning-rag-and-knowledge">Q&amp;A on Fine-tuning, RAG, and Knowledge</h3>
<ul>
<li><strong>Fine-tuning effectiveness and model size:</strong> Fine-tuning might be more beneficial for smaller models compared to larger ones, which are already more capable of learning from context.</li>
<li><strong>Domain-specific knowledge and RAG:</strong> Even for smaller models, RAG remains crucial for tasks involving domain-specific knowledge.</li>
<li><strong>Evaluating fine-tuning success:</strong> The choice of evaluation metric significantly impacts the perceived effectiveness of fine-tuning. For tasks like style adherence, fine-tuning might appear more beneficial than RAG.</li>
<li><strong>The blurry line between style and content:</strong> The distinction between “style” and “content” can be ambiguous, making it difficult to definitively determine when fine-tuning is beneficial.</li>
</ul>
</section>
<section id="audience-questions-and-examples-of-fine-tuning-success" class="level3">
<h3 class="anchored" data-anchor-id="audience-questions-and-examples-of-fine-tuning-success">Audience Questions and Examples of Fine-tuning Success</h3>
<ul>
<li><strong>Complex knowledge bases and fine-tuning:</strong> When dealing with large, curated knowledge bases, it’s crucial to evaluate whether the next generation of LLMs, combined with RAG, might be sufficient without fine-tuning.</li>
<li><strong>Adding knowledge via prompting and RAG:</strong> In many cases, adding knowledge to the model can be achieved through prompting, RAG, or a combination of both, eliminating the need for fine-tuning.</li>
<li><strong>Fine-tuning for multilingual models:</strong> Fine-tuning might be beneficial for improving the performance of multilingual models on languages with limited training data, as it leverages the model’s existing understanding of language mapping.</li>
<li><strong>Fine-tuning for code generation:</strong> While fine-tuning can be used to adapt code generation models to specific styles and conventions, RAG remains highly effective for providing codebase context.</li>
<li><strong>Contextual learning vs.&nbsp;fine-tuning:</strong> LLMs are demonstrating impressive abilities to learn from context, potentially replacing the need for fine-tuning in scenarios where sufficient context can be provided.</li>
</ul>
</section>
</section>
<section id="the-moving-target-fine-tuning-and-frontier-models" class="level2">
<h2 class="anchored" data-anchor-id="the-moving-target-fine-tuning-and-frontier-models">The Moving Target: Fine-tuning and Frontier Models</h2>
<ul>
<li><strong>Rapid LLM advancements:</strong> The rapid pace of LLM development makes fine-tuning a moving target, as newer models often surpass the performance of previously fine-tuned models.</li>
<li><strong>Bloomberg GPT example:</strong> Bloomberg GPT, a large language model pre-trained on financial data, initially outperformed existing models on financial tasks. However, its performance was subsequently surpassed by newer models like GPT-4.
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/2303.17564">BloombergGPT: A Large Language Model for Finance</a></li>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/2305.05862">Are ChatGPT and GPT-4 General-Purpose Solvers for Financial Text Analytics? A Study on Several Typical Tasks</a></li>
</ul></li>
<li><strong>The cost of keeping up:</strong> Continuously fine-tuning on new model releases can be prohibitively expensive, especially for large datasets. Prompt-based and RAG-based pipelines offer more flexibility and cost-effectiveness.</li>
<li><strong>Fine-tuning effectiveness and model scale:</strong> Fine-tuning might become less effective as models grow larger and more capable.</li>
</ul>
</section>
<section id="the-difficulty-of-fine-tuning-prioritizing-fundamentals" class="level2">
<h2 class="anchored" data-anchor-id="the-difficulty-of-fine-tuning-prioritizing-fundamentals">The Difficulty of Fine-tuning: Prioritizing Fundamentals</h2>
<ul>
<li><strong>The 80/20 rule of ML:</strong> Similar to traditional ML, most effort in LLM development should be dedicated to data work (80%), followed by engineering (18%), debugging (2%), and architecture research (0%).</li>
<li><strong>Fine-tuning as a last resort:</strong> Fine-tuning should only be considered after thoroughly addressing fundamentals like data quality, evaluation, prompting, and RAG.</li>
<li><strong>Hierarchy of needs:</strong> Prioritize building a solid ML system with robust evaluation, prompting, and RAG before attempting to fine-tune.
<ul>
<li><strong>Book:</strong> <a href="https://www.mlpowered.com/book/">Building Machine Learning Powered Applications: Going from Idea to Product</a></li>
<li><strong>Continuous Integration</strong>
<ul>
<li>Model Backtesting</li>
<li>Model Evaluation</li>
<li>Experimentation Framework</li>
</ul></li>
<li><strong>Application Logic</strong>
<ul>
<li>Input Validation → Filtering Logic → Model Code → Output Validation → Displaying Logic</li>
</ul></li>
<li><strong>Monitoring</strong>
<ul>
<li>Monitoring Input Distribution</li>
<li>Monitoring Latency</li>
<li>Monitoring Output Distribution</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="extrapolating-trends-context-size-price-and-latency" class="level2">
<h2 class="anchored" data-anchor-id="extrapolating-trends-context-size-price-and-latency">Extrapolating Trends: Context Size, Price, and Latency</h2>
<ul>
<li><strong>Decreasing costs and increasing capabilities:</strong> LLM costs are rapidly decreasing, while context windows and processing speeds are increasing.</li>
<li><strong>The impact of future trends:</strong> If these trends continue, providing sufficient context to highly capable LLMs might become more efficient than fine-tuning for many use cases.</li>
<li><strong>Context window limitations:</strong> Fine-tuning might still be necessary for applications requiring context exceeding the limits of available LLMs. However, techniques like prefix caching could mitigate this need.</li>
</ul>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<ul>
<li><strong>Finetuning is:</strong>
<ul>
<li>expensive and complex</li>
<li>has become less valuable</li>
<li>often underperforms simpler approaches</li>
</ul></li>
<li><strong>Models are continuously becoming:</strong>
<ul>
<li>cheaper</li>
<li>smarter</li>
<li>faster</li>
<li>longer context</li>
</ul></li>
<li><strong>Always start with:</strong>
<ul>
<li>prompting</li>
<li>making a train/test set</li>
<li>RAG</li>
</ul></li>
<li><strong>Treat finetuning as a niche/last resort solution</strong>
<ul>
<li>like cloud vs on prem</li>
</ul></li>
</ul>
</section>
<section id="qa-session" class="level2">
<h2 class="anchored" data-anchor-id="qa-session">Q&amp;A Session</h2>
<section id="question-1" class="level3">
<h3 class="anchored" data-anchor-id="question-1">Question #1</h3>
<ul>
<li><strong>Context window size and computational cost:</strong> Passing large amounts of context through an LLM for every request can be computationally expensive. However, increasing LLM efficiency and advancements like prefix caching could mitigate this cost.</li>
<li><strong>Fine-tuning complexity:</strong> Fine-tuning increasingly complex and larger LLMs might become more challenging, potentially outweighing the benefits compared to context-based approaches.</li>
</ul>
</section>
<section id="question-2" class="level3">
<h3 class="anchored" data-anchor-id="question-2">Question #2</h3>
<ul>
<li><strong>Dynamic few-shot learning:</strong> Dynamically selecting and providing relevant few-shot examples from a database is a powerful technique for improving LLM performance without fine-tuning.</li>
<li><strong>Iterative prompt and example improvement:</strong> Invest time in iteratively refining prompts and curating effective few-shot examples before considering fine-tuning.</li>
</ul>


</section>
</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-009/</guid>
  <pubDate>Fri, 19 Jul 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Conference Talk 8: Creating, curating, and cleaning data for LLMs</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-008/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<ul>
<li>Reusing Existing Datasets</li>
<li>Creating Your Own Dataset</li>
<li>Common Dataset Genres</li>
<li>Synthetic Data</li>
<li>Improving Data</li>
<li>Human Annotation</li>
<li>Example Datasets</li>
<li>Case Study: LLM Summarizer</li>
<li>Resources</li>
<li>Q&amp;A</li>
</ul>
<section id="reusing-existing-datasets" class="level2">
<h2 class="anchored" data-anchor-id="reusing-existing-datasets">Reusing Existing Datasets</h2>
<ul>
<li><strong>🤗 Datasets:</strong> <a href="https://huggingface.co/datasets">https://huggingface.co/datasets</a></li>
<li><strong>What kind of existing dataset?</strong>
<ul>
<li><strong>Consider the use case:</strong> Datasets like <code>fineweb</code> are designed for pre-training, not fine-tuning.
<ul>
<li><strong>🤗 Dataset:</strong> <a href="HuggingFaceFW/fineweb">HuggingFaceFW/fineweb</a></li>
</ul></li>
<li><strong>Look beyond research datasets:</strong> Community-contributed datasets can offer unique and valuable data.</li>
</ul></li>
<li><strong>Browsing datasets</strong>
<ul>
<li><strong>Use tags:</strong> Filter datasets based on specific formats or tasks (e.g., DPO datasets).
<ul>
<li><a href="https://huggingface.co/datasets?other=dpo">🤗 DPO Datasets</a></li>
</ul></li>
</ul></li>
<li><strong>Searching for datasets</strong>
<ul>
<li><strong>Full-text search:</strong> Useful if dataset names are not descriptive enough.</li>
</ul></li>
<li><strong>Reviewing if a dataset is suitable: Vibe checks</strong>
<ul>
<li><strong>Dataset viewer:</strong> Provides a preview of the data, including metadata and example rows.</li>
<li><strong>Analyze conversation length and content:</strong> Assess if the dataset aligns with your target application.</li>
</ul></li>
</ul>
</section>
<section id="creating-your-own-dataset" class="level2">
<h2 class="anchored" data-anchor-id="creating-your-own-dataset">Creating Your Own Dataset</h2>
<ul>
<li><strong>Adapt existing NLP datasets:</strong> Restructure data from classic NLP tasks for LLM fine-tuning.</li>
<li><strong>Leverage user feedback:</strong> Analyze existing user interactions (e.g., thumbs up/down) for preference data.</li>
<li><strong>Synthetic data:</strong> A powerful method for jumpstarting dataset creation.</li>
<li><strong>Getting data?</strong>
<ul>
<li><strong>Data format:</strong> Ensure the data format closely resembles the intended use case for the LLM.</li>
<li><strong>Preprocessing:</strong> The effort invested in data preparation will benefit the deployment stage.</li>
</ul></li>
<li><strong>What kind of dataset do you need for fine-tuning</strong>
<ul>
<li><strong>Specificity over diversity:</strong> Focus on data relevant to your specific use case, even if it means the model loses some general abilities.</li>
<li><strong>Data diversity should reflect the target application:</strong> Don’t aim for broad diversity if your application is narrow.</li>
</ul></li>
</ul>
</section>
<section id="common-dataset-genres" class="level2">
<h2 class="anchored" data-anchor-id="common-dataset-genres">Common Dataset Genres</h2>
<ul>
<li><strong>SFT (Supervised Fine Tuning)</strong>
<ul>
<li><strong>Structure:</strong> Question and answer pairs.</li>
</ul></li>
<li><strong>RLHF (Reinforcement Learning by Human Feedback)</strong>
<ul>
<li><strong>Structure:</strong> Similar to SFT, but with additional preference information.</li>
</ul></li>
<li><strong>DPO (Direct Preference Optimization)</strong>
<ul>
<li><strong>Structure:</strong> Input, chosen response, and rejected response.</li>
<li><strong>Flexibility:</strong> “Chosen” and “rejected” can be generated creatively (e.g., using human-written text as “chosen” and model-generated text as “rejected”).</li>
</ul></li>
<li><strong>KTO (Kahneman-Tversky Optimization)</strong>
<ul>
<li><strong>argilla’s Collections:</strong> <a href="https://huggingface.co/collections/argilla/preference-datasets-for-kto-65f98314d7c1b04ab54d41a7">Preference Datasets for KTO</a></li>
<li><strong>Structure:</strong> Model response and a binary preference (thumbs up/down).</li>
<li><strong>Easy to collect:</strong> Users can readily provide simple preference feedback.</li>
</ul></li>
<li><strong>SPIN/ORPO</strong>
<ul>
<li><strong>HuggingFaceH4’s Collections:</strong> <a href="https://huggingface.co/collections/HuggingFaceH4/awesome-sft-datasets-65788b571bf8e371c4e4241a">Awesome SFT datasets</a></li>
<li><strong>SPIN:</strong> Iterative approach to reduce data requirements by synthetically generating responses.</li>
<li><strong>ORPO:</strong> Similar to DPO but doesn’t require a separate supervised fine-tuning step, making it more efficient.</li>
</ul></li>
</ul>
</section>
<section id="synthetic-data" class="level2">
<h2 class="anchored" data-anchor-id="synthetic-data">Synthetic Data</h2>
<ul>
<li><strong>Definition:</strong> Data generated by LLMs, often used for fine-tuning other LLMs.</li>
<li><strong>Methods:</strong>
<ul>
<li>Generating prompts and completions from scratch.</li>
<li>Rephrasing existing prompts to improve quality and diversity.</li>
<li>AI feedback: Using LLMs to judge the quality of other LLM outputs.</li>
</ul></li>
</ul>
<section id="basic-taxonomy-of-synthetic-data-uses" class="level3">
<h3 class="anchored" data-anchor-id="basic-taxonomy-of-synthetic-data-uses">Basic Taxonomy of Synthetic Data Uses</h3>
<ul>
<li><p><strong>Blog Post:</strong> <a href="https://www.interconnects.ai/p/llm-synthetic-data">Synthetic data: Anthropic’s CAI, from fine-tuning to pretraining, OpenAI’s Superalignment, tips, types, and open examples</a></p></li>
<li><p><strong>Instructions</strong></p>
<ul>
<li><strong>Generated text for SFT / IFT</strong></li>
<li><strong>Completions</strong>
<ul>
<li><code>Prompt</code> ➡️ :robot: ➡️ <code>instruction</code></li>
</ul></li>
</ul></li>
<li><p><strong>Self-Instruct Bootstrapping</strong></p>
<ul>
<li><strong>Process</strong>
<ul>
<li><code>Prompt</code> ➡️ :robot: ➡️ <code>More prompts</code> ➡️ :robot: ➡️ <code>instruction</code> :arrow_right: Filtering :repeat:</li>
</ul></li>
</ul></li>
<li><p><strong>Using LLM to Generate Corrected Sample</strong></p>
<ul>
<li><strong>Process</strong>
<ul>
<li><code>principles</code> + <code>instruction</code> ➡️ :robot: ➡️ <code>corrected instruction</code> :arrow_right: Repeat to filter :repeat:</li>
</ul></li>
</ul></li>
<li><p><strong>Preferences</strong></p>
<ul>
<li><strong>Scoring / Choosing Response for RM / RLHF Training</strong>
<ul>
<li><code>instruction-1</code>…<code>instruction-N</code> :arrow_right: :robot: ➡️ <code>scores</code> or <code>chosen/rejected</code> :arrow_right: Filtering :repeat:</li>
</ul></li>
</ul></li>
<li><p><strong>Critiques</strong></p>
<ul>
<li><strong>Initial Instruction</strong>
<ul>
<li>(rejected response)</li>
</ul></li>
<li><strong>Using LLM Principles to Generate Pairwise Completions</strong>
<ul>
<li><code>initial instruction</code> + <code>principles</code> ➡️ :robot: ➡️ <code>corrected instruction</code> (chosen response) :arrow_right: Filtering :repeat:</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="challenges" class="level3">
<h3 class="anchored" data-anchor-id="challenges">Challenges</h3>
<ul>
<li><strong>Alpaca 7B model:</strong> Trained on synthetic data generated by prompting a language model with instructions.
<ul>
<li><strong>Blog Post:</strong> <a href="https://crfm.stanford.edu/2023/03/13/alpaca.html">Alpaca: A Strong, Replicable Instruction-Following Model</a></li>
<li><strong>Challenges:</strong> Synthetic data can contain hallucinations, toxicity, and biases inherited from the generating model.
<ul>
<li><strong>Example:</strong> Alpaca 7B exhibiting hallucinations and inaccurate claims.</li>
</ul></li>
</ul></li>
<li><strong>Ultrafeedback paper:</strong> Used multiple models and GPT-4 for judging synthetic data quality based on multiple criteria.
<ul>
<li><strong>Paper:</strong> UltraFeedback: Boosting Language Models with Scaled AI Feedback</li>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/OpenBMB/UltraFeedback">https://github.com/OpenBMB/UltraFeedback</a></li>
<li><strong>Challenges:</strong> Coding errors, API failures, and data handling issues can severely impact data quality, even with advanced models.
<ul>
<li><strong>Example:</strong> Errors in the Ultrafeedback dataset highlighted the importance of human review and data cleaning.</li>
</ul></li>
</ul></li>
<li><strong>Scaling challenges:</strong> Generating high-quality synthetic data at scale requires careful consideration of cost, vendor lock-in, and data quality.</li>
</ul>
</section>
<section id="tools" class="level3">
<h3 class="anchored" data-anchor-id="tools">Tools</h3>
<ul>
<li><strong>Outlines:</strong>
<ul>
<li>Enables structured text generation in various formats (JSON, Regex, etc.) by modifying token sampling.</li>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/outlines-dev/outlines">https://github.com/outlines-dev/outlines</a></li>
</ul></li>
<li><strong>DSPy:</strong>
<ul>
<li>Focuses on “programming” LLM behavior through a defined signature, optimizing prompts and fine-tuning for specific tasks.</li>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/stanfordnlp/dspy">https://github.com/stanfordnlp/dspy</a></li>
<li><strong>Blog Post:</strong> <a href="https://hamel.dev/blog/posts/prompt/index.html">Fuck You, Show Me The Prompt.</a></li>
</ul></li>
<li><strong>distilabel:</strong>
<ul>
<li>A pipeline framework for synthetic data generation and AI feedback, emphasizing scalability and dataset engineer workflows.</li>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/argilla-io/distilabel">https://github.com/argilla-io/distilabel</a></li>
</ul></li>
</ul>
</section>
</section>
<section id="improving-data" class="level2">
<h2 class="anchored" data-anchor-id="improving-data">Improving Data</h2>
<section id="ensuring-sufficient-quantity" class="level3">
<h3 class="anchored" data-anchor-id="ensuring-sufficient-quantity">Ensuring sufficient quantity</h3>
<ul>
<li>More ≠ better</li>
<li>Be okay with “throwing away” annotations and data</li>
<li><strong>Data Requirements</strong> (based on paper reported numbers)
<ul>
<li><strong>SFT:</strong> <code>10K</code></li>
<li><strong>ORPO:</strong> <code>7K</code></li>
<li><strong>DPO:</strong> <code>3K</code></li>
<li><strong>SPIN:</strong> <code>2K</code></li>
</ul></li>
<li>Data requirements will be higher for more diverse inputs + outputs (would you have used BERT a few years ago to do this task?)</li>
<li><strong>Blog Post:</strong> https://argilla.io/blog/mantisnlp-rlhf-part-9/</li>
</ul>
</section>
<section id="deduplication" class="level3">
<h3 class="anchored" data-anchor-id="deduplication">Deduplication</h3>
<ul>
<li><strong>Blog Post:</strong> <a href="https://huggingface.co/spaces/HuggingFaceFW/blogpost-fineweb-v1">FineWeb: decanting the web for the finest text data at scale</a></li>
<li><strong>Challenges:</strong> Deduplication pipelines are often not reproducible or well-documented.</li>
<li><strong>Approaches:</strong>
<ul>
<li>Intuitive rules and metadata filtering.</li>
<li>Topic-wise deduplication.</li>
<li>Custom metadata and feature engineering.</li>
<li>Embedding similarity and exemplar selection.</li>
</ul></li>
</ul>
</section>
<section id="rule-based" class="level3">
<h3 class="anchored" data-anchor-id="rule-based">Rule based</h3>
<ul>
<li><strong>Regex:</strong> Useful for simple rule-based cleaning (e.g., removing unwanted phrases or patterns).</li>
</ul>
</section>
<section id="quality" class="level3">
<h3 class="anchored" data-anchor-id="quality">Quality</h3>
<ul>
<li><strong>Tutorial:</strong> <a href="https://hlasse.github.io/TextDescriptives/tutorials/filter_corpus_using_quality.html">Filtering corpora using Quality</a></li>
<li><strong>Techniques:</strong>
<ul>
<li>Basic heuristics</li>
<li>Topic modeling</li>
<li>Embeddings</li>
<li>Classifiers (don’t dismiss these even if you have $$$)
<ul>
<li><strong>Model:</strong> <a href="https://huggingface.co/MoritzLaurer/deberta-v3-large-zeroshot-v2.0">MoritzLaurer/deberta-v3-large-zeroshot-v2.0</a></li>
<li><strong>Model:</strong> <a href="https://huggingface.co/HuggingFaceFW/fineweb-edu-classifier">HuggingFaceFW/fineweb-edu-classifier</a></li>
</ul></li>
<li>LLM as judge/juries/rationalizers</li>
<li>Human annotation</li>
</ul></li>
</ul>
</section>
</section>
<section id="human-annotation" class="level2">
<h2 class="anchored" data-anchor-id="human-annotation">Human Annotation</h2>
<ul>
<li><strong>Finding the right balance:</strong> Choose tools and approaches that fit your needs and budget, from simple spreadsheets to fully customized solutions.</li>
<li><strong>Custom</strong>
<ul>
<li><strong>Example:</strong> Vincent D. Warmerdon’s bulk annotation tool using Bokeh and Pandas for interactive data exploration and annotation.
<ul>
<li><strong>GitHub Repository:</strong> <a href="koaning/bulk">koaning/bulk</a></li>
</ul></li>
</ul></li>
<li><strong>Notebooks</strong>
<ul>
<li><strong>Example:</strong> ipyannotations for in-notebook annotation with customizable callbacks for post-processing and active learning.
<ul>
<li><strong>Documentation:</strong> <a href="https://ipyannotations.readthedocs.io/en/latest/">ipyannotations</a></li>
</ul></li>
</ul></li>
<li><strong>Apps</strong>
<ul>
<li><strong>Example:</strong> Gradio, Streamlit, and Shiny for building custom web apps with intuitive UIs for annotation tasks.</li>
</ul></li>
<li><strong>Lilac</strong>
<ul>
<li><strong>Website:</strong> <a href="https://www.lilacml.com/">https://www.lilacml.com/</a></li>
<li><strong>Features:</strong> Dataset overview, semantic search, and integrated annotation tools.</li>
</ul></li>
<li><strong>Argilla</strong>
<ul>
<li><strong>Website:</strong> <a href="https://argilla.io/">https://argilla.io/</a></li>
<li><strong>Features:</strong> Similar to Lilac, with a focus on dataset management and annotation workflows.</li>
</ul></li>
</ul>
</section>
<section id="example-datasets" class="level2">
<h2 class="anchored" data-anchor-id="example-datasets">Example Datasets</h2>
<ul>
<li><p><strong>distilabel Orca Pairs for DPO</strong></p>
<ul>
<li><strong>Dataset:</strong> <a href="argilla/distilabel-intel-orca-dpo-pairs">argilla/distilabel-intel-orca-dpo-pairs</a></li>
<li><strong>Why it’s cool and what you can learn:</strong>
<ul>
<li>Filtering: less is more</li>
<li>Choosing the “stronger” model as always chosen doesn’t always work</li>
<li>Doing some data focused work using humans can make a big impact on model performance</li>
</ul></li>
</ul></li>
<li><p><strong>Gutenberg DPO</strong></p>
<ul>
<li><strong>Dataset:</strong> <a href="jondurbin/gutenberg-dpo-v0.1">jondurbin/gutenberg-dpo-v0.1</a></li>
<li><strong>Approach:</strong> Uses human-written books and LLM-generated summaries to create a DPO dataset for improving LLM writing ability.</li>
</ul></li>
<li><p><strong>PlatVR KTO Dataset</strong></p>
<ul>
<li><strong>Dataset:</strong> <a href="ITG/PlatVR-kto">ITG/PlatVR-kto</a></li>
<li><strong>Approach:</strong> Collects thumbs up/down ratings on model outputs to create a KTO dataset for a vision-language task.</li>
<li><strong>Why it’s cool and what you can learn:</strong>
<ul>
<li>Example of how KTO datasets can work well as a data flywheel</li>
<li>Users submit a prompt. They get a response they 👍/👎 that response</li>
<li>Cheap to collect and can be useful data even if you don’t end up using KTO</li>
</ul></li>
<li><strong>Disclaimer:</strong> The creation process was done using a crowdsourcing methodology. Therefore, the preferences in the data align with the user group that participated in the process (i.e., these are real preference data).</li>
</ul></li>
</ul>
</section>
<section id="case-study-llm-summarizer" class="level2">
<h2 class="anchored" data-anchor-id="case-study-llm-summarizer">Case Study: LLM Summarizer</h2>
<ul>
<li><strong>Goal:</strong> Build an LLM-based summarizer for data set cards on Hugging Face.</li>
<li><strong>Approach:</strong> Uses a Distilabel pipeline to generate and judge summaries, incorporating both model and human feedback.</li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="672" height="480" viewbox="0.00 0.00 293.81 399.20" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 395.2)">
<title>LLM Summarizer</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-395.2 289.81,-395.2 289.81,4 -4,4"></polygon>
<!-- Load dataset card in markdown format -->
<g id="node1" class="node">
<title>Load dataset card in markdown format</title>
<polygon fill="none" stroke="black" points="259.71,-391.2 26.1,-391.2 26.1,-355.2 259.71,-355.2 259.71,-391.2"></polygon>
<text text-anchor="middle" x="142.9" y="-369" font-family="Times,serif" font-size="14.00">Load dataset card in markdown format</text>
</g>
<!-- Parse out YAML and remove unwanted content -->
<g id="node2" class="node">
<title>Parse out YAML and remove unwanted content</title>
<polygon fill="none" stroke="black" points="285.17,-302.4 0.64,-302.4 0.64,-266.4 285.17,-266.4 285.17,-302.4"></polygon>
<text text-anchor="middle" x="142.9" y="-280.2" font-family="Times,serif" font-size="14.00">Parse out YAML and remove unwanted content</text>
</g>
<!-- Load dataset card in markdown format&#45;&gt;Parse out YAML and remove unwanted content -->
<g id="edge1" class="edge">
<title>Load dataset card in markdown format-&gt;Parse out YAML and remove unwanted content</title>
<path fill="none" stroke="black" d="M142.9,-355.05C142.9,-342.92 142.9,-326.42 142.9,-312.52"></path>
<polygon fill="black" stroke="black" points="146.4,-312.51 142.9,-302.51 139.4,-312.51 146.4,-312.51"></polygon>
<text text-anchor="middle" x="160.6" y="-324.6" font-family="Times,serif" font-size="14.00">Step 1</text>
</g>
<!-- Pass reduced text to LLM -->
<g id="node3" class="node">
<title>Pass reduced text to LLM</title>
<polygon fill="none" stroke="black" points="223.04,-213.6 62.77,-213.6 62.77,-177.6 223.04,-177.6 223.04,-213.6"></polygon>
<text text-anchor="middle" x="142.9" y="-191.4" font-family="Times,serif" font-size="14.00">Pass reduced text to LLM</text>
</g>
<!-- Parse out YAML and remove unwanted content&#45;&gt;Pass reduced text to LLM -->
<g id="edge2" class="edge">
<title>Parse out YAML and remove unwanted content-&gt;Pass reduced text to LLM</title>
<path fill="none" stroke="black" d="M142.9,-266.25C142.9,-254.12 142.9,-237.62 142.9,-223.72"></path>
<polygon fill="black" stroke="black" points="146.4,-223.71 142.9,-213.71 139.4,-223.71 146.4,-223.71"></polygon>
<text text-anchor="middle" x="160.6" y="-235.8" font-family="Times,serif" font-size="14.00">Step 2</text>
</g>
<!-- Get summary of dataset card -->
<g id="node4" class="node">
<title>Get summary of dataset card</title>
<polygon fill="none" stroke="black" points="231.34,-124.8 54.47,-124.8 54.47,-88.8 231.34,-88.8 231.34,-124.8"></polygon>
<text text-anchor="middle" x="142.9" y="-102.6" font-family="Times,serif" font-size="14.00">Get summary of dataset card</text>
</g>
<!-- Pass reduced text to LLM&#45;&gt;Get summary of dataset card -->
<g id="edge3" class="edge">
<title>Pass reduced text to LLM-&gt;Get summary of dataset card</title>
<path fill="none" stroke="black" d="M142.9,-177.45C142.9,-165.32 142.9,-148.82 142.9,-134.92"></path>
<polygon fill="black" stroke="black" points="146.4,-134.91 142.9,-124.91 139.4,-134.91 146.4,-134.91"></polygon>
<text text-anchor="middle" x="160.6" y="-147" font-family="Times,serif" font-size="14.00">Step 3</text>
</g>
<!-- Get feedback from users about summary quality -->
<g id="node5" class="node">
<title>Get feedback from users about summary quality</title>
<polygon fill="none" stroke="black" points="285.71,-36 0.1,-36 0.1,0 285.71,0 285.71,-36"></polygon>
<text text-anchor="middle" x="142.9" y="-13.8" font-family="Times,serif" font-size="14.00">Get feedback from users about summary quality</text>
</g>
<!-- Get summary of dataset card&#45;&gt;Get feedback from users about summary quality -->
<g id="edge4" class="edge">
<title>Get summary of dataset card-&gt;Get feedback from users about summary quality</title>
<path fill="none" stroke="black" d="M142.9,-88.65C142.9,-76.52 142.9,-60.02 142.9,-46.12"></path>
<polygon fill="black" stroke="black" points="146.4,-46.11 142.9,-36.11 139.4,-46.11 146.4,-46.11"></polygon>
<text text-anchor="middle" x="160.6" y="-58.2" font-family="Times,serif" font-size="14.00">Step 4</text>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<section id="the-distilabel-pipeline" class="level3">
<h3 class="anchored" data-anchor-id="the-distilabel-pipeline">The distilabel pipeline</h3>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="672" height="480" viewbox="0.00 0.00 693.68 742.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 738)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-738 689.68,-738 689.68,4 -4,4"></polygon>
<!-- llama_summary -->
<g id="node1" class="node">
<title>llama_summary</title>
<polygon fill="lightblue" stroke="black" points="269.47,-408 92.33,-408 92.33,-370 269.47,-370 269.47,-408"></polygon>
<text text-anchor="middle" x="180.9" y="-381.5" font-family="sans-serif:bold" font-size="25.00">llama_summary</text>
</g>
<!-- combine_columns -->
<g id="node13" class="node">
<title>combine_columns</title>
<path fill="none" stroke="black" d="M374.7,-334C374.7,-334 199.1,-334 199.1,-334 193.1,-334 187.1,-328 187.1,-322 187.1,-322 187.1,-308 187.1,-308 187.1,-302 193.1,-296 199.1,-296 199.1,-296 374.7,-296 374.7,-296 380.7,-296 386.7,-302 386.7,-308 386.7,-308 386.7,-322 386.7,-322 386.7,-328 380.7,-334 374.7,-334"></path>
<text text-anchor="middle" x="286.9" y="-307.5" font-family="sans-serif:bold" font-size="25.00">combine_columns</text>
</g>
<!-- llama_summary&#45;&gt;combine_columns -->
<g id="edge9" class="edge">
<title>llama_summary-&gt;combine_columns</title>
<path fill="none" stroke="black" d="M207.65,-369.83C220.96,-360.79 237.22,-349.75 251.54,-340.02"></path>
<polygon fill="black" stroke="black" points="253.86,-342.68 260.16,-334.16 249.92,-336.89 253.86,-342.68"></polygon>
</g>
<!-- mistral_summary -->
<g id="node2" class="node">
<title>mistral_summary</title>
<polygon fill="lightpink" stroke="black" points="478.38,-408 287.42,-408 287.42,-370 478.38,-370 478.38,-408"></polygon>
<text text-anchor="middle" x="382.9" y="-381.5" font-family="sans-serif:bold" font-size="25.00">mistral_summary</text>
</g>
<!-- mistral_summary&#45;&gt;combine_columns -->
<g id="edge10" class="edge">
<title>mistral_summary-&gt;combine_columns</title>
<path fill="none" stroke="black" d="M358.68,-369.83C346.74,-360.88 332.17,-349.96 319.29,-340.3"></path>
<polygon fill="black" stroke="black" points="321.22,-337.36 311.12,-334.16 317.02,-342.96 321.22,-337.36"></polygon>
</g>
<!-- zephyr_summary -->
<g id="node3" class="node">
<title>zephyr_summary</title>
<polygon fill="lightgreen" stroke="black" points="685.46,-408 496.34,-408 496.34,-370 685.46,-370 685.46,-408"></polygon>
<text text-anchor="middle" x="590.9" y="-381.5" font-family="sans-serif:bold" font-size="25.00">zephyr_summary</text>
</g>
<!-- zephyr_summary&#45;&gt;combine_columns -->
<g id="edge11" class="edge">
<title>zephyr_summary-&gt;combine_columns</title>
<path fill="none" stroke="black" d="M514.58,-369.92C471.49,-359.72 417.52,-346.94 372.93,-336.38"></path>
<polygon fill="black" stroke="black" points="373.53,-332.92 362.99,-334.02 371.91,-339.73 373.53,-332.92"></polygon>
</g>
<!-- llama_3_70_b -->
<g id="node4" class="node">
<title>llama_3_70_b</title>
<polygon fill="lightblue" stroke="black" points="198.08,-512 47.72,-512 47.72,-444 198.08,-444 198.08,-512"></polygon>
<text text-anchor="middle" x="122.9" y="-485.5" font-family="sans-serif:bold" font-size="25.00">llama-3-70-B</text>
<text text-anchor="middle" x="122.9" y="-455.5" font-family="sans-serif:bold" font-size="25.00">Instruct</text>
</g>
<!-- llama_3_70_b&#45;&gt;llama_summary -->
<g id="edge7" class="edge">
<title>llama_3_70_b-&gt;llama_summary</title>
<path fill="none" stroke="black" d="M145.16,-443.61C151.13,-434.65 157.51,-425.08 163.2,-416.55"></path>
<polygon fill="black" stroke="black" points="166.2,-418.35 168.84,-408.09 160.38,-414.47 166.2,-418.35"></polygon>
</g>
<!-- ultrafeedback -->
<g id="node5" class="node">
<title>ultrafeedback</title>
<polygon fill="lightblue" stroke="black" points="203.92,-260 51.88,-260 51.88,-222 203.92,-222 203.92,-260"></polygon>
<text text-anchor="middle" x="127.9" y="-233.5" font-family="sans-serif:bold" font-size="25.00">ultrafeedback</text>
</g>
<!-- llama_3_70_b&#45;&gt;ultrafeedback -->
<g id="edge8" class="edge">
<title>llama_3_70_b-&gt;ultrafeedback</title>
<path fill="none" stroke="black" d="M98.97,-443.83C92.44,-432.94 86.24,-420.44 82.9,-408 69.77,-359.18 93.69,-302.34 111.39,-269.43"></path>
<polygon fill="black" stroke="black" points="114.6,-270.86 116.41,-260.42 108.49,-267.45 114.6,-270.86"></polygon>
</g>
<!-- remove_bad_ratings -->
<g id="node14" class="node">
<title>remove_bad_ratings</title>
<path fill="none" stroke="black" d="M226,-186C226,-186 29.8,-186 29.8,-186 23.8,-186 17.8,-180 17.8,-174 17.8,-174 17.8,-160 17.8,-160 17.8,-154 23.8,-148 29.8,-148 29.8,-148 226,-148 226,-148 232,-148 238,-154 238,-160 238,-160 238,-174 238,-174 238,-180 232,-186 226,-186"></path>
<text text-anchor="middle" x="127.9" y="-159.5" font-family="sans-serif:bold" font-size="25.00">remove_bad_ratings</text>
</g>
<!-- ultrafeedback&#45;&gt;remove_bad_ratings -->
<g id="edge13" class="edge">
<title>ultrafeedback-&gt;remove_bad_ratings</title>
<path fill="none" stroke="black" d="M127.9,-221.83C127.9,-214.13 127.9,-204.97 127.9,-196.42"></path>
<polygon fill="black" stroke="black" points="131.4,-196.41 127.9,-186.41 124.4,-196.41 131.4,-196.41"></polygon>
</g>
<!-- to_argilla -->
<g id="node6" class="node">
<title>to_argilla</title>
<polygon fill="white" stroke="black" points="111.7,-112 0.1,-112 0.1,-74 111.7,-74 111.7,-112"></polygon>
<text text-anchor="middle" x="55.9" y="-85.5" font-family="sans-serif:bold" font-size="25.00">to_argilla</text>
</g>
<!-- end -->
<g id="node9" class="node">
<title>end</title>
<text text-anchor="middle" x="127.9" y="-11.5" font-family="sans-serif:bold" font-size="25.00">🤗</text>
</g>
<!-- to_argilla&#45;&gt;end -->
<g id="edge17" class="edge">
<title>to_argilla-&gt;end</title>
<path fill="none" stroke="black" d="M74.07,-73.83C82.62,-65.28 92.96,-54.94 102.28,-45.62"></path>
<polygon fill="black" stroke="black" points="104.89,-47.96 109.49,-38.41 99.94,-43.01 104.89,-47.96"></polygon>
</g>
<!-- push_to_hub -->
<g id="node7" class="node">
<title>push_to_hub</title>
<polygon fill="white" stroke="black" points="269.53,-112 130.27,-112 130.27,-74 269.53,-74 269.53,-112"></polygon>
<text text-anchor="middle" x="199.9" y="-85.5" font-family="sans-serif:bold" font-size="25.00">Push to Hub</text>
</g>
<!-- push_to_hub&#45;&gt;end -->
<g id="edge16" class="edge">
<title>push_to_hub-&gt;end</title>
<path fill="none" stroke="black" d="M181.73,-73.83C173.19,-65.28 162.84,-54.94 153.52,-45.62"></path>
<polygon fill="black" stroke="black" points="155.86,-43.01 146.31,-38.41 150.91,-47.96 155.86,-43.01"></polygon>
</g>
<!-- start -->
<g id="node8" class="node">
<title>start</title>
<text text-anchor="middle" x="382.9" y="-707.5" font-family="sans-serif:bold" font-size="25.00">🤗</text>
</g>
<!-- load_dataset -->
<g id="node10" class="node">
<title>load_dataset</title>
<path fill="none" stroke="black" d="M441.35,-660C441.35,-660 324.45,-660 324.45,-660 318.45,-660 312.45,-654 312.45,-648 312.45,-648 312.45,-634 312.45,-634 312.45,-628 318.45,-622 324.45,-622 324.45,-622 441.35,-622 441.35,-622 447.35,-622 453.35,-628 453.35,-634 453.35,-634 453.35,-648 453.35,-648 453.35,-654 447.35,-660 441.35,-660"></path>
<text text-anchor="middle" x="382.9" y="-633.5" font-family="sans-serif:bold" font-size="25.00">load_dataset</text>
</g>
<!-- start&#45;&gt;load_dataset -->
<g id="edge1" class="edge">
<title>start-&gt;load_dataset</title>
<path fill="none" stroke="black" d="M382.9,-695.83C382.9,-688.13 382.9,-678.97 382.9,-670.42"></path>
<polygon fill="black" stroke="black" points="386.4,-670.41 382.9,-660.41 379.4,-670.41 386.4,-670.41"></polygon>
</g>
<!-- card_filter -->
<g id="node11" class="node">
<title>card_filter</title>
<path fill="none" stroke="black" d="M431,-586C431,-586 334.8,-586 334.8,-586 328.8,-586 322.8,-580 322.8,-574 322.8,-574 322.8,-560 322.8,-560 322.8,-554 328.8,-548 334.8,-548 334.8,-548 431,-548 431,-548 437,-548 443,-554 443,-560 443,-560 443,-574 443,-574 443,-580 437,-586 431,-586"></path>
<text text-anchor="middle" x="382.9" y="-559.5" font-family="sans-serif:bold" font-size="25.00">card_filter</text>
</g>
<!-- load_dataset&#45;&gt;card_filter -->
<g id="edge2" class="edge">
<title>load_dataset-&gt;card_filter</title>
<path fill="none" stroke="black" d="M382.9,-621.83C382.9,-614.13 382.9,-604.97 382.9,-596.42"></path>
<polygon fill="black" stroke="black" points="386.4,-596.41 382.9,-586.41 379.4,-596.41 386.4,-596.41"></polygon>
</g>
<!-- format_input_card -->
<g id="node12" class="node">
<title>format_input_card</title>
<path fill="none" stroke="black" d="M471.95,-497C471.95,-497 293.85,-497 293.85,-497 287.85,-497 281.85,-491 281.85,-485 281.85,-485 281.85,-471 281.85,-471 281.85,-465 287.85,-459 293.85,-459 293.85,-459 471.95,-459 471.95,-459 477.95,-459 483.95,-465 483.95,-471 483.95,-471 483.95,-485 483.95,-485 483.95,-491 477.95,-497 471.95,-497"></path>
<text text-anchor="middle" x="382.9" y="-470.5" font-family="sans-serif:bold" font-size="25.00">format_input_card</text>
</g>
<!-- card_filter&#45;&gt;format_input_card -->
<g id="edge3" class="edge">
<title>card_filter-&gt;format_input_card</title>
<path fill="none" stroke="black" d="M382.9,-547.97C382.9,-536.19 382.9,-520.56 382.9,-507.16"></path>
<polygon fill="black" stroke="black" points="386.4,-507 382.9,-497 379.4,-507 386.4,-507"></polygon>
</g>
<!-- format_input_card&#45;&gt;llama_summary -->
<g id="edge4" class="edge">
<title>format_input_card-&gt;llama_summary</title>
<path fill="none" stroke="black" d="M341.05,-458.97C309.36,-445.33 265.67,-426.51 231.94,-411.98"></path>
<polygon fill="black" stroke="black" points="233.27,-408.74 222.7,-408 230.5,-415.17 233.27,-408.74"></polygon>
</g>
<!-- format_input_card&#45;&gt;mistral_summary -->
<g id="edge5" class="edge">
<title>format_input_card-&gt;mistral_summary</title>
<path fill="none" stroke="black" d="M382.9,-458.97C382.9,-447.19 382.9,-431.56 382.9,-418.16"></path>
<polygon fill="black" stroke="black" points="386.4,-418 382.9,-408 379.4,-418 386.4,-418"></polygon>
</g>
<!-- format_input_card&#45;&gt;zephyr_summary -->
<g id="edge6" class="edge">
<title>format_input_card-&gt;zephyr_summary</title>
<path fill="none" stroke="black" d="M426,-458.97C458.63,-445.33 503.61,-426.51 538.35,-411.98"></path>
<polygon fill="black" stroke="black" points="539.98,-415.09 547.86,-408 537.28,-408.63 539.98,-415.09"></polygon>
</g>
<!-- combine_columns&#45;&gt;ultrafeedback -->
<g id="edge12" class="edge">
<title>combine_columns-&gt;ultrafeedback</title>
<path fill="none" stroke="black" d="M246.78,-295.83C225.61,-286.24 199.45,-274.4 177.07,-264.27"></path>
<polygon fill="black" stroke="black" points="178.29,-260.97 167.73,-260.04 175.4,-267.35 178.29,-260.97"></polygon>
</g>
<!-- remove_bad_ratings&#45;&gt;to_argilla -->
<g id="edge14" class="edge">
<title>remove_bad_ratings-&gt;to_argilla</title>
<path fill="none" stroke="black" d="M109.73,-147.83C101.19,-139.28 90.84,-128.94 81.52,-119.62"></path>
<polygon fill="black" stroke="black" points="83.86,-117.01 74.31,-112.41 78.91,-121.96 83.86,-117.01"></polygon>
</g>
<!-- remove_bad_ratings&#45;&gt;push_to_hub -->
<g id="edge15" class="edge">
<title>remove_bad_ratings-&gt;push_to_hub</title>
<path fill="none" stroke="black" d="M146.07,-147.83C154.62,-139.28 164.96,-128.94 174.28,-119.62"></path>
<polygon fill="black" stroke="black" points="176.89,-121.96 181.49,-112.41 171.94,-117.01 176.89,-121.96"></polygon>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li><strong>Key steps:</strong>
<ul>
<li>Data loading and filtering.</li>
<li>Prompt formatting.</li>
<li>Summary generation using multiple models.</li>
<li>LLM-based judging using Ultrafeedback and Lama three.</li>
<li>Human review and annotation using Argilla.</li>
</ul></li>
<li><strong>Iterative process:</strong> Experiment with different prompts, models, and judging criteria to optimize the pipeline.</li>
</ul>
</section>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<ul>
<li><strong>GitHub repository:</strong> <a href="davanstrien/data-for-fine-tuning-llms">davanstrien/data-for-fine-tuning-llms</a>
<ul>
<li>Contains notebooks with code examples for deduplication, data checks, and synthetic data generation.</li>
</ul></li>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/davanstrien/awesome-synthetic-datasets">davanstrien/awesome-synthetic-datasets</a>
<ul>
<li>Organizes resources focused on helping people get started with building synthetic datasets.</li>
</ul></li>
</ul>
</section>
<section id="qa" class="level2">
<h2 class="anchored" data-anchor-id="qa">Q&amp;A</h2>
<ul>
<li><strong>Question:</strong> How to generate synthetic data when fine-tuning on proprietary data and human annotation is expensive?</li>
<li><strong>Answer:</strong> The decision to use synthetic data vs.&nbsp;proprietary data involves trade-offs related to data ownership, privacy, and control over the model.</li>
</ul>


</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-008/</guid>
  <pubDate>Thu, 18 Jul 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Conference Talk 7: Best Practices For Fine Tuning Mistral</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-007/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<ul>
<li>Mistral Overview</li>
<li>Customization</li>
<li>Demos</li>
</ul>
<section id="mistral-overview" class="level2">
<h2 class="anchored" data-anchor-id="mistral-overview">Mistral Overview</h2>
<ul>
<li><strong><a href="https://mistral.ai/">Mistral AI</a>:</strong> Paris-based team (50+ people) specializing in large language models (LLMs).</li>
<li><strong>Model Timeline:</strong>
<ul>
<li><strong>Sept 2023:</strong> Mistral 7b released
<ul>
<li><strong>Blog Post:</strong> <a href="https://mistral.ai/news/announcing-mistral-7b/">Mistral 7B</a></li>
</ul></li>
<li><strong>Dec 2023:</strong> Mistral 8x7b, Mistral Medium (commercial), API platform launched
<ul>
<li><strong>Blog Post:</strong> <a href="https://mistral.ai/news/mixtral-of-experts/">Mixtral of experts</a></li>
</ul></li>
<li><strong>Feb 2024:</strong> Mistral Small and Mistral Large (flagship) released
<ul>
<li><strong>Blog Post:</strong> <a href="https://mistral.ai/news/mistral-large/">Au Large</a></li>
</ul></li>
<li><strong>Feb 2024:</strong> Le Chat - free conversational AI interface launched
<ul>
<li><strong>Blog Post:</strong> <a href="https://mistral.ai/news/le-chat-mistral/">Le Chat</a></li>
</ul></li>
<li><strong>Apr 2024:</strong> Open-source 8x22b model released
<ul>
<li><strong>Blog Post:</strong> <a href="https://mistral.ai/news/mixtral-8x22b/">Cheaper, Better, Faster, Stronger</a></li>
</ul></li>
<li><strong>May 2024:</strong> Codestral - specialized model for code generation (80+ languages)
<ul>
<li><strong>Blog Post:</strong> <a href="https://mistral.ai/news/codestral/">Codestral: Hello, World!</a></li>
<li><strong>LangChain Tutorial:</strong> <a href="https://www.youtube.com/watch?v=zXFxmI9f06M">Self-correcting code assistants with Codestral</a></li>
</ul></li>
</ul></li>
<li><strong>Model Offerings:</strong>
<ul>
<li><strong>Open-source (Apache 2 License):</strong> Mistral 7b, 8x7b, 8x22b
<ul>
<li><strong>Homepage:</strong> <a href="https://mistral.ai/technology/#models">Open source models</a></li>
<li><strong>Docs:</strong> <a href="https://docs.mistral.ai/getting-started/open_weight_models/">Open-weight models</a></li>
</ul></li>
<li><strong>Enterprise-Grade:</strong> Mistral Small, Mistral Large (supports fine-tuning)</li>
<li><strong>Specialized:</strong> Codestral for coding, Embedding model</li>
</ul></li>
<li><strong>Fine-Tuning:</strong>
<ul>
<li><strong>Blog Post:</strong> <a href="https://mistral.ai/news/customization/">My Tailor is Mistral</a></li>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/mistralai/mistral-finetune">mistral-finetune</a></li>
</ul></li>
</ul>
</section>
<section id="customization" class="level2">
<h2 class="anchored" data-anchor-id="customization">Customization</h2>
<ul>
<li><strong>Blog Post:</strong> <a href="https://mistral.ai/news/customization/">My Tailor is Mistral</a></li>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/mistralai/mistral-finetune">mistral-finetune</a></li>
<li><strong>Documentation:</strong> <a href="https://docs.mistral.ai/getting-started/customization/">Model customization</a></li>
<li><strong>Developer Examples:</strong> <a href="https://docs.mistral.ai/getting-started/stories/">Model customization</a></li>
</ul>
<section id="benefits-of-prompting" class="level3">
<h3 class="anchored" data-anchor-id="benefits-of-prompting">Benefits of Prompting</h3>
<ul>
<li><strong>Documentation:</strong> <a href="https://docs.mistral.ai/guides/prompting_capabilities/">Prompting Capabilities</a></li>
<li><strong>Out-of-the-box functionality:</strong> No data or training required.</li>
<li><strong>Easy updates:</strong> Adaptable to new workflows and prototyping.</li>
</ul>
</section>
<section id="benefits-of-fine-tuning" class="level3">
<h3 class="anchored" data-anchor-id="benefits-of-fine-tuning">Benefits of Fine-Tuning</h3>
<ul>
<li><strong>Guide:</strong> <a href="https://docs.mistral.ai/guides/finetuning/">Fine-tuning</a></li>
<li><strong>Performance:</strong> Often outperforms prompting and even larger models.</li>
<li><strong>Efficiency:</strong> Faster and cheaper than using large prompts.</li>
<li><strong>Task Alignment:</strong> Tailored to specific tasks and behaviors.</li>
<li><strong>Knowledge Integration:</strong> Ability to teach new facts and information.</li>
</ul>
</section>
</section>
<section id="demos" class="level2">
<h2 class="anchored" data-anchor-id="demos">Demos</h2>
<ul>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/mistralai/cookbook">Mistral Cookbook</a></li>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/mistralai/mistral-inference">Mistral Inference</a></li>
</ul>
<section id="mistral-api" class="level3">
<h3 class="anchored" data-anchor-id="mistral-api">Mistral API</h3>
<ul>
<li><p><strong>GitHub Repository:</strong> <a href="https://github.com/mistralai/client-python">mistralai/client-python</a></p></li>
<li><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-U</span> mistral-api<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>=0.4.2</span></code></pre></div></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Model Name Structure">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Model Name Structure
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Fine-tuned model names have a specific structure:</p>
<ul>
<li><pre class="text"><code>  ft:open-mistral-7b:b6e34a5e:20240531:a29e61db</code></pre></li>
</ul></li>
<li><p><code>ft</code>: Indicates a fine-tuned model.</p></li>
<li><p><code>open-mistral-7b</code>: Specifies the base model used.</p></li>
<li><p><code>b6e34a5e:20240531:a29e61db</code>: Represents the specific fine-tuned version.</p></li>
</ul>
</div>
</div>
</section>
<section id="abstract-generator-demo" class="level3">
<h3 class="anchored" data-anchor-id="abstract-generator-demo">Abstract Generator Demo</h3>
<ul>
<li><p>Generates abstracts based on inputted research paper titles.</p></li>
<li><p>It was trained on title-abstract pairs from <a href="https://arxiv.org/">arxiv.org</a>.</p></li>
<li><p>Highlights how effective fine-tuning can be for specific tasks.</p></li>
<li><div class="callout callout-style-default callout-note callout-titled" title="Example">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">client.chat(</span>
<span id="cb3-2">  model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ft:mistral-small-latest:8e2706f0:20240604:d861257a'</span>,</span>
<span id="cb3-3">  messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb3-4">    {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fine-tuning is all you need"</span>}</span>
<span id="cb3-5">  ],</span>
<span id="cb3-6">  temperature<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>,</span>
<span id="cb3-7">).choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message.content</span></code></pre></div>
<pre class="text"><code>'Fine-tuning is a common practice in deep learning, where a pre-trained model is fine-tuned on a downstream task.\nIn this paper, we show that fine-tuning is all you need for a wide range of tasks.\nWe propose a simple yet effective fine-tuning recipe that works well for both vision and language tasks.\nOur recipe includes a learning rate warmup stage, a cosine learning rate decay schedule, and a stochastic weight averaging (SWA) stage.\nWe show that our recipe can significantly improve the performance of fine-tuning on a wide range of tasks, including image classification, object detection, instance segmentation, semantic segmentation, and language understanding.\nWe also show that our recipe can improve the performance of fine-tuning on small datasets, where the performance of fine-tuning is usually worse than training from scratch.\nOur recipe is simple and easy to implement, and we hope it will be useful for the deep learning community.'</code></pre>
</div>
</div></li>
</ul>
</section>
<section id="medical-chatbot-demo" class="level3">
<h3 class="anchored" data-anchor-id="medical-chatbot-demo">Medical Chatbot Demo</h3>
<ul>
<li>Trained on the HuggingFace dataset for AI medical chatbots.
<ul>
<li><strong>HuggingFace Dataset:</strong> <a href="https://huggingface.co/datasets/ruslanmv/ai-medical-chatbot">ruslanmv/ai-medical-chatbot</a></li>
</ul></li>
<li><div class="callout callout-style-default callout-note callout-titled" title="Example:">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example:
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1">client.chat(</span>
<span id="cb5-2">  model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ft:open-mistral-7b:b6e34a5e:20240531:a29e61db'</span>,</span>
<span id="cb5-3">  messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb5-4">    {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hello doctor, My reverse elbow armpits have developed a darker (my skin color is fair) pigmentation. This pigmentation has also affected the whole of my ..."</span>}</span>
<span id="cb5-5">  ],</span>
<span id="cb5-6">  temperature<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>,</span>
<span id="cb5-7">).choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message.content</span></code></pre></div>
<pre class="text"><code>'Hi, It seems that you might be having some fungal infection. Apply clotrimazole cream locally. Take tablet fluconazole 150 mg once a week for three weeks. Keep local part clean and dry. Avoid oily and spicy food. Ok and take care.'</code></pre>
</div>
</div></li>
</ul>
</section>
<section id="news-article-stylist-economist-style-guide-demo" class="level3">
<h3 class="anchored" data-anchor-id="news-article-stylist-economist-style-guide-demo">News Article Stylist (Economist Style Guide) Demo</h3>
<ul>
<li><p>Showcases how to generate training data using a larger model (e.g., Mistral Large) when you don’t have an existing dataset.</p></li>
<li><p><strong>Process:</strong></p>
<ol type="1">
<li><p><strong>Define Prompt:</strong> “You are a news article stylist following the Economist style guide.”</p></li>
<li><p><strong>Generate Data:</strong> Use Mistral Large to rewrite news articles in the Economist style, providing guidelines and examples.</p></li>
<li><p><strong>Fine-tune:</strong> Train a smaller model (e.g., Mistral 7B) on the generated data.</p></li>
</ol></li>
<li><div class="callout callout-style-default callout-note callout-titled" title="Example">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1">news <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Incoming Florida Senate President Bill Galvano named the Naples Republican the Senate's majority leader for the upcoming legislative session. Kathleen Passidomo was unimpressed ..."</span></span>
<span id="cb7-2">response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.chat(</span>
<span id="cb7-3">  model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ft:mistral-small-latest:b6e34a5e:20240604:ee1ab18b'</span>,</span>
<span id="cb7-4">  messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb7-5">    {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: news}</span>
<span id="cb7-6">  ],</span>
<span id="cb7-7">  temperature<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>,</span>
<span id="cb7-8">)</span>
<span id="cb7-9"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(response.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message.content)</span></code></pre></div>
<pre class="text"><code>Kathleen Passidomo, a Naples Republican, has been named the Senate's majority leader for the upcoming legislative session by incoming Florida Senate President Bill Galvano. Passidomo was impressed with the appointment because of her good rapport with both Senate Republicans and Democrats and her ability to build consensus. Passidomo agrees that her people skills will be key in shaping the Senate agenda for the coming session, which begins on March 5. Committee meetings will start on December 11. Although the legislative priorities will be the same as last year, including water quality and mental health. In a message to other senators, Galvano praised Passidomo's ability to not only extract favorable consideration from other senators but to maintain the respect of the members. Committee chairmen recognize leadership's ability to guide the Senate to a top spot now sets Passidomo up for even greater things in the future. Assuming she keeps her seat in the 2022 election and Republicans maintain control of the Senate in ...</code></pre>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1">prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Please carefully review the provided news article and identify all stylistic issues that detract from its clarity, precision, and sophistication. To ensure the accuracy of your analysis, quote the specific text and explain the reason for your suggested improvement."</span></span>
<span id="cb9-2">response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.chat(</span>
<span id="cb9-3">  model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ft:mistral-small-latest:b6e34a5e:20240604:ee1ab18b'</span>,</span>
<span id="cb9-4">  messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb9-5">    {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>news}</span>
<span id="cb9-6">  ],</span>
<span id="cb9-7">  temperature<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>,</span>
<span id="cb9-8">)</span>
<span id="cb9-9"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(response.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message.content)</span></code></pre></div>
<pre class="text"><code>1. The article starts with a repetitive sentence, "Incoming Florida Senate President Bill Galvano named the Naples Republican the Senate's majority leader for the upcoming legislative session." This can be simplified to avoid repetition.
2. The use of informal language, such as "you can put my office in the men's room for all I care," detracts from the article's professional tone.
3. The article uses indirect speech in some instances, such as "What he was saying is that he was naming her senate majority leader," which can be replaced with direct speech for clarity and conciseness.
4. The sentence "Galvano says he picked Passidomo for the post because she has a good rapport with both Senate Republicans and Democrats and is a consensus builder" can be rephrased to avoid redundancy.
5. The use of parentheses in the sentence "Most of it (the job) is member relations, helping members get their bills heard" can be avoided by rephrasing the sentence.
6. The sentence "The Senate majority leader only gets one vote, just like other senators, so what's the upside for constituents?" can be rephrased to avoid the use of a question and make it more assertive.
7. The sentence "That table includes the Senate president, president pro tempore, in this case Sen. David Simmons, Passidomo as majority leader and perhaps one or two others" can be rephrased for clarity.
8. The sentence "Traditionally, legislators in leadership positions don't file as many bills as rank and file members" can be rephrased to avoid the use of "don't" and make it more assertive.
9. The sentence "Some recent predecessors in the post haven't filed any" can be rephrased to avoid the use of "haven't" and make it more assertive.
10. The sentence "In a message to other senators, Galvano praised Passidomo's efforts on the latter" can be rephrased to avoid the use of "the latter" and make it more precise.
11. The sentence "The role of the Senate majority leader isn't to extract favorable consideration from other senators" can be rephrased to avoid the use of "isn't" and make it more assertive.
12. The sentence "Being named to a top spot now sets Passidomo up for even greater things in the future" can be rephrased to avoid the use of "sets up" and make it more assertive.
13. The sentence "Assuming she keeps her seat in the 2022 election and Republicans maintain control of the Senate in 2022 and beyond, she could be Senate president herself in the session that follows" can be rephrased for clarity and conciseness.
14. The sentence "Passidomo said she was taken by surprise by her sudden promotion" can be rephrased to avoid the use of "was taken by surprise" and make it more assertive.
15. The sentence "Third floor, to be exact" can be avoided as it does not add any significant information to the article.</code></pre>
</div>
</div></li>
</ul>
</section>
<section id="mistral-fine-tune-api-walkthrough" class="level3">
<h3 class="anchored" data-anchor-id="mistral-fine-tune-api-walkthrough">Mistral Fine-tune API Walkthrough</h3>
<ul>
<li><strong>Documentation:</strong> <a href="https://docs.mistral.ai/guides/finetuning/">https://docs.mistral.ai/guides/finetuning/</a></li>
<li><strong>Jupyter Notebook:</strong> <a href="https://github.com/mistralai/cookbook/blob/main/mistral/fine_tune/mistral_finetune_api.ipynb">mistral/fine_tune/mistral_finetune_api.ipynb</a></li>
</ul>
<ol type="1">
<li><strong>Data Preparation:</strong>
<ul>
<li><strong>Format:</strong> Data should be in JSON format.
<ul>
<li><strong>Size Limits:</strong>
<ul>
<li>Training data: Each file &lt;= 512 MB (multiple files allowed).</li>
<li>Evaluation data: Total size &lt;= 1 MB.</li>
</ul></li>
</ul></li>
<li><strong>Reformatting:</strong> Use provided scripts to adapt data from sources like HuggingFace.
<ul>
<li><strong>GitHub:</strong> <a href="https://github.com/mistralai/mistral-finetune/blob/main/utils/reformat_data.py">mistral-finetune/utils/reformat_data.py</a></li>
</ul></li>
<li><strong>Validation:</strong> The <code>mistral-finetune</code> repository includes a data validation script.
<ul>
<li><strong>GitHub:</strong> <a href="https://github.com/mistralai/mistral-finetune/blob/main/utils/validate_data.py">mistral-finetune/utils/validate_data.py</a></li>
</ul></li>
</ul></li>
<li><strong>Uploading Data:</strong>
<ul>
<li><strong>Documentation:</strong> <a href="https://docs.mistral.ai/guides/finetuning/#upload-dataset">Upload dataset</a></li>
<li>Use the <code>files.create</code> function, specifying file name and purpose (“fine-tune”).</li>
</ul></li>
<li><strong>Creating a Fine-tuning Job:</strong>
<ul>
<li>Provide file IDs for training and evaluation data.</li>
<li>Choose the base model (Mistral 7B or Mistral Small).</li>
<li>Set hyperparameters (e.g., learning rate, number of steps).</li>
</ul></li>
<li><strong>Monitoring Progress:</strong>
<ul>
<li>Retrieve job status and metrics using the job ID.</li>
</ul></li>
<li><strong>Using the Fine-tuned Model:</strong>
<ul>
<li>Access the fine-tuned model using the provided model name (retrieved from the completed job).</li>
</ul></li>
<li><strong>Weight &amp; Biases Integration (Optional)</strong>:
<ul>
<li>Configure API key for tracking metrics and visualizations.</li>
</ul></li>
</ol>
</section>
<section id="getting-started-fine-tuning-mistral-7b-local" class="level3">
<h3 class="anchored" data-anchor-id="getting-started-fine-tuning-mistral-7b-local">Getting Started Fine-Tuning Mistral 7B (Local)</h3>
<ul>
<li><p><strong>Jupyter Notebook:</strong> <a href="https://github.com/mistralai/mistral-finetune/blob/main/tutorials/mistral_finetune_7b.ipynb">tutorials/mistral_finetune_7b.ipynb</a></p></li>
<li><p>Covers fine-tuning Mistral 7B</p></li>
</ul>
<p><strong>Steps:</strong></p>
<ol type="1">
<li><strong>Clone Repository:</strong> <code>git clone https://github.com/mistralai/mistral-finetune.git</code></li>
<li><strong>Install Dependencies:</strong> Follow <a href="https://github.com/mistralai/mistral-finetune?tab=readme-ov-file#mistral-finetune">instructions</a> in the repository.</li>
<li><strong>Download Model:</strong> Download the desired Mistral model (e.g., 7Bv3).</li>
<li><strong>Prepare Data:</strong> Similar to the API walkthrough.</li>
<li><strong>Configure Training:</strong>
<ul>
<li>Use a configuration file (<code>.yaml</code>) to specify data paths, model parameters, and hyperparameters.</li>
<li>Adjust sequence length based on available GPU memory.</li>
</ul></li>
<li><strong>Start Training:</strong> Execute the training script.</li>
<li><strong>Inference:</strong>
<ul>
<li><p>Utilize the <code>mistral-inference</code> package.</p>
<ul>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/mistralai/mistral-inference">mistral-inference</a></li>
<li><div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb11-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install mistral-inference</span></code></pre></div></li>
</ul></li>
<li><p>Load the tokenizer, base model, and fine-tuned LoRA weights.</p></li>
<li><p>Generate text.</p></li>
</ul></li>
</ol>


</section>
</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-007/</guid>
  <pubDate>Thu, 18 Jul 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Workshop 4: Instrumenting &amp; Evaluating LLMs</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/workshop-004/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<ul>
<li>Serving Overview</li>
<li>Model Deployment Patterns</li>
<li>Case Study: Honeycomb - Replicate</li>
<li>Deploying Large Language Models</li>
<li>Lessons from Building A Serverless Platform - Predibase</li>
<li>Batch vs Real Time and Modal</li>
<li>Q&amp;A Session</li>
</ul>
<section id="serving-overview" class="level2">
<h2 class="anchored" data-anchor-id="serving-overview">Serving Overview</h2>
<section id="recap-on-loras" class="level3">
<h3 class="anchored" data-anchor-id="recap-on-loras">Recap on LoRAs</h3>
<ul>
<li><strong>LoRA (Low-Rank Adaptation)</strong>: A parameter-efficient fine-tuning technique that introduces small adapter matrices into the model’s layers, significantly reducing the number of trainable parameters compared to full fine-tuning.</li>
<li><strong>Benefits of LoRA</strong>: Reduced memory requirements during training and deployment, enabling fine-tuning on consumer-grade hardware and efficient serving of multiple adapters.</li>
<li><strong>Deployment Options</strong>:
<ul>
<li><strong>Keep LoRA separate</strong>: Store LoRA weights in a separate file and load them during inference.</li>
<li><strong>Merge LoRA with base model</strong>: Combine the learned LoRA weights with the original model weights into a single file.</li>
<li><strong>Hot-swapping adapters</strong>: Dynamically load and unload adapters on demand, sharing the base model among multiple adapters.</li>
</ul></li>
</ul>
</section>
<section id="performance-vs-costs" class="level3">
<h3 class="anchored" data-anchor-id="performance-vs-costs">Performance vs Costs</h3>
<ul>
<li><strong>Key Trade-off</strong>: Balancing performance (latency and throughput) with cost (GPU usage and idle time).</li>
<li><strong>Factors Influencing Performance and Cost</strong>:
<ul>
<li><strong>GPU speed:</strong> More powerful GPUs offer lower latency but are more expensive.</li>
<li><strong>Model size:</strong> Larger models generally perform better but require more resources and time.</li>
<li><strong>Engineering optimizations:</strong> Platform-level optimizations can improve efficiency.</li>
<li><strong>Cold start vs.&nbsp;idle time:</strong> Loading models onto GPUs takes time (cold start), but keeping them loaded incurs idle time cost.</li>
</ul></li>
<li><strong>Hot-swapping adapters</strong>: A strategy to mitigate the cold start vs.&nbsp;idle time trade-off by serving multiple LoRAs on the same GPU, ensuring consistent traffic and reducing idle time.</li>
</ul>
</section>
<section id="many-applications-arent-real-time" class="level3">
<h3 class="anchored" data-anchor-id="many-applications-arent-real-time">Many Applications Aren’t Real-Time</h3>
<ul>
<li><strong>Real-time vs.&nbsp;batch/offline processing</strong>: Many LLM applications do not require real-time responses, allowing for batch processing and reducing cost by scaling down GPUs when not in use.</li>
<li><strong>Examples of batch/offline use cases</strong>:
<ul>
<li>Generating alt text for images</li>
<li>Extracting information from documents</li>
<li>Editing text</li>
<li>Analytics tools</li>
</ul></li>
</ul>
</section>
<section id="real-time-vs-batchoffline" class="level3">
<h3 class="anchored" data-anchor-id="real-time-vs-batchoffline">Real-Time vs Batch/Offline</h3>
<ul>
<li><strong>Real-time use cases</strong>: Applications like chatbots and code assistants require low latency responses.</li>
<li><strong>Batch/offline use cases</strong>: Tasks like data analysis, text summarization, and content generation can be processed in batches.</li>
</ul>
</section>
<section id="merging-lora-to-base" class="level3">
<h3 class="anchored" data-anchor-id="merging-lora-to-base">Merging LoRA to Base</h3>
<ul>
<li><p><strong>Workflow example</strong>:</p>
<ol type="1">
<li><p>Train a LoRA model and save the adapter weights.</p></li>
<li><p>Merge the LoRA weights with the base model weights into a single file (potentially sharded for large models).</p>
<ul>
<li><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">root@724562262aec:/workspace/demo#</span> ls outputs/qlora-out/</span>
<span id="cb1-2">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">README.md</span>         checkpoint-1         checkpoint-4         tokenizer.json</span>
<span id="cb1-3">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">adapter_config.json</span>    checkpoint-2         config.json          tokenizer_config.json</span>
<span id="cb1-4">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">adapter_model.bin</span>     checkpoint-3         special_tokens_map.json</span></code></pre></div>
<ul>
<li><code>adapter_model.bin</code> size: 168 MB</li>
</ul></li>
<li><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">root@724562262aec:/workspace/demo#</span> python3 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> axolotl.cli.merge_lora ./qlora.yml <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--dora_model_dir</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"./outputs/qlora-out"</span></span></code></pre></div></li>
<li><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">root@724562262aec:/workspace/demo#</span> ls outputs/qlora-out/merged</span>
<span id="cb3-2">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">config.json</span>             pytorch_model-00003-of-00004.bin   tokenizer.json</span>
<span id="cb3-3">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">generation_config.json</span>        pytorch_model-00004-of-00004.bin   tokenizer_config.json</span>
<span id="cb3-4">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pytorch_model-00001-of-00004.bin</span>   pytorch_model.bin.index.json</span>
<span id="cb3-5">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pytorch_model-00002-of-00004.bin</span>   special_tokens_map.json        </span></code></pre></div>
<ul>
<li>merged <code>.bin</code> files: 16 GB</li>
</ul></li>
</ul></li>
<li><p>Push the merged model files to a platform like HuggingFace Hub.</p></li>
</ol></li>
</ul>
</section>
<section id="push-model-files-to-hf-hub" class="level3">
<h3 class="anchored" data-anchor-id="push-model-files-to-hf-hub">Push Model Files to HF Hub</h3>
<ul>
<li><strong>HuggingFace inference endpoints</strong>: A platform for serving models with options for automatic scaling and GPU selection.</li>
<li><strong>Workflow example</strong>:
<ol type="1">
<li><p>Create a HuggingFace repository.</p>
<ul>
<li><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb4-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-U</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"huggingface_hub[cli]"</span></span>
<span id="cb4-2">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">huggingface-cli</span> repo create conference-demo</span></code></pre></div></li>
</ul></li>
<li><p>Copy the merged model files to the repository.</p>
<ul>
<li><div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb5-1">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cp</span> ./outputs/qlora-out/merged/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span> conference-demo</span></code></pre></div></li>
</ul></li>
<li><p>Use Git LFS to track large files.</p>
<ul>
<li><div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb6-1">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> lfs track <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.bin"</span></span></code></pre></div></li>
</ul></li>
<li><p>Push the repository to HuggingFace Hub.</p>
<ul>
<li><div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb7-1">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> add <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span></span></code></pre></div></li>
</ul></li>
<li><p>Deploy the model using HuggingFace inference endpoints, choosing appropriate scaling and GPU options.</p>
<ul>
<li><div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb8-1">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> commit <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-am</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Push merged files"</span></span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> push origin main</span></code></pre></div></li>
<li><strong>HuggingFace Hub:</strong> <a href="https://huggingface.co/dansbecker/conference-demo/tree/main">dansbecker/conference-demo</a></li>
</ul></li>
</ol></li>
</ul>
</section>
</section>
<section id="model-deployment-patterns" class="level2">
<h2 class="anchored" data-anchor-id="model-deployment-patterns">Model Deployment Patterns</h2>
<ul>
<li><strong>Blog Post:</strong> <a href="https://outerbounds.com/blog/the-many-ways-to-deploy-a-model/">The Many Ways to Deploy a Model</a></li>
</ul>
<section id="the-many-faces-of-deployments" class="level3">
<h3 class="anchored" data-anchor-id="the-many-faces-of-deployments">The Many Faces of Deployments</h3>
<ul>
<li><table class="caption-top table">
<colgroup>
<col style="width: 19%">
<col style="width: 40%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th>Factors</th>
<th>Simple, lots of tools</th>
<th>Some tools, customization may be needed</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Speed (time to response)</strong></td>
<td>Slow: Results needed in minutes e.g.&nbsp;portfolio optimization</td>
<td>Fast: Results needed in milliseconds e.g.&nbsp;high-frequency trading</td>
</tr>
<tr class="even">
<td><strong>Scale (requests/second)</strong></td>
<td>Low: 10 request/sec or less e.g.&nbsp;an internal dashboard</td>
<td>High: 10k requests / sec or more e.g.&nbsp;a popular e-commerce site</td>
</tr>
<tr class="odd">
<td><strong>Pace of improvement</strong></td>
<td>Low: Updates infrequently e.g.&nbsp;a stable, marginal model</td>
<td>High: Constant iteration needed e.g.&nbsp;an innovative, important model</td>
</tr>
<tr class="even">
<td><strong>Real-time inputs needed?</strong></td>
<td>No real-time inputs e.g.&nbsp;analyze past data</td>
<td>Yes, real-time inputs e.g.&nbsp;targeted travel ads</td>
</tr>
<tr class="odd">
<td><strong>Reliability requirement</strong></td>
<td>Low: Ok to fail occasionally e.g.&nbsp;a proof of concept</td>
<td>High: Must not fail e.g.&nbsp;a fraud detection model</td>
</tr>
<tr class="even">
<td><strong>Model complexity</strong></td>
<td>Simple models e.g.&nbsp;linear regression</td>
<td>Complex models e.g.&nbsp;LLMs</td>
</tr>
</tbody>
</table></li>
</ul>
</section>
<section id="simple-model-serving" class="level3">
<h3 class="anchored" data-anchor-id="simple-model-serving">Simple Model Serving</h3>
<ul>
<li><strong>Direct interface with model library</strong>: Using frameworks like <a href="https://fastapi.tiangolo.com/">FastAPI</a> to serve models with minimal overhead.</li>
<li><strong>Suitable for</strong>: Proof of concepts, small-scale applications with low performance demands.</li>
</ul>
</section>
<section id="advanced-model-serving" class="level3">
<h3 class="anchored" data-anchor-id="advanced-model-serving">Advanced Model Serving</h3>
<ul>
<li><strong>Complex architectures</strong>: Auto-scaling clusters, load balancers, specialized components for pre- and post-processing.</li>
<li><strong>Example</strong>: <a href="https://kubernetes.io/">Kubernetes</a> with <a href="https://docs.nvidia.com/deeplearning/triton-inference-server/user-guide/docs/index.html">Triton Inference Server</a> and <a href="https://github.com/NVIDIA/TensorRT-LLM">TensorRT-LLM</a>.</li>
</ul>
</section>
<section id="kinds-of-model-serving" class="level3">
<h3 class="anchored" data-anchor-id="kinds-of-model-serving">Kinds of Model Serving</h3>
<ul>
<li><strong>Decision Tree</strong>:</li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="672" height="480" viewbox="0.00 0.00 793.93 732.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 728)">
<title>Decision Tree</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-728 789.93,-728 789.93,4 -4,4"></polygon>
<!-- A -->
<g id="node1" class="node">
<title>A</title>
<path fill="ghostwhite" stroke="ghostwhite" d="M295.35,-724C295.35,-724 12.22,-724 12.22,-724 6.22,-724 0.22,-718 0.22,-712 0.22,-712 0.22,-668 0.22,-668 0.22,-662 6.22,-656 12.22,-656 12.22,-656 295.35,-656 295.35,-656 301.35,-656 307.35,-662 307.35,-668 307.35,-668 307.35,-712 307.35,-712 307.35,-718 301.35,-724 295.35,-724"></path>
<text text-anchor="middle" x="153.78" y="-697.5" font-family="sans-serif:bold" font-size="25.00">Is there a finite enough set of</text>
<text text-anchor="middle" x="153.78" y="-667.5" font-family="sans-serif:bold" font-size="25.00">inputs known in advance?</text>
</g>
<!-- B -->
<g id="node2" class="node">
<title>B</title>
<path fill="#9bcd9b" stroke="#9bcd9b" d="M178.69,-590C178.69,-590 66.87,-590 66.87,-590 60.87,-590 54.87,-584 54.87,-578 54.87,-578 54.87,-534 54.87,-534 54.87,-528 60.87,-522 66.87,-522 66.87,-522 178.69,-522 178.69,-522 184.69,-522 190.69,-528 190.69,-534 190.69,-534 190.69,-578 190.69,-578 190.69,-584 184.69,-590 178.69,-590"></path>
<text text-anchor="middle" x="122.78" y="-563.5" font-family="sans-serif:bold" font-size="25.00">Precompute</text>
<text text-anchor="middle" x="122.78" y="-533.5" font-family="sans-serif:bold" font-size="25.00">responses</text>
</g>
<!-- A&#45;&gt;B -->
<g id="edge1" class="edge">
<title>A-&gt;B</title>
<path fill="none" stroke="black" d="M145.96,-655.69C141.26,-635.68 135.3,-610.31 130.6,-590.3"></path>
<text text-anchor="middle" x="161.22" y="-615.5" font-family="sans-serif:bold" font-size="25.00">Yes</text>
</g>
<!-- C -->
<g id="node3" class="node">
<title>C</title>
<path fill="ghostwhite" stroke="ghostwhite" d="M491.41,-590C491.41,-590 220.16,-590 220.16,-590 214.16,-590 208.16,-584 208.16,-578 208.16,-578 208.16,-534 208.16,-534 208.16,-528 214.16,-522 220.16,-522 220.16,-522 491.41,-522 491.41,-522 497.41,-522 503.41,-528 503.41,-534 503.41,-534 503.41,-578 503.41,-578 503.41,-584 497.41,-590 491.41,-590"></path>
<text text-anchor="middle" x="355.78" y="-563.5" font-family="sans-serif:bold" font-size="25.00">Is it ok to return responses</text>
<text text-anchor="middle" x="355.78" y="-533.5" font-family="sans-serif:bold" font-size="25.00">asynchronously in minutes?</text>
</g>
<!-- A&#45;&gt;C -->
<g id="edge2" class="edge">
<title>A-&gt;C</title>
<path fill="none" stroke="black" d="M204.49,-655.86C235.23,-635.78 274.31,-610.24 305.05,-590.15"></path>
<text text-anchor="middle" x="289.06" y="-615.5" font-family="sans-serif:bold" font-size="25.00">No</text>
</g>
<!-- D -->
<g id="node4" class="node">
<title>D</title>
<path fill="#9bcd9b" stroke="#9bcd9b" d="M385.74,-441C385.74,-441 171.82,-441 171.82,-441 165.82,-441 159.82,-435 159.82,-429 159.82,-429 159.82,-385 159.82,-385 159.82,-379 165.82,-373 171.82,-373 171.82,-373 385.74,-373 385.74,-373 391.74,-373 397.74,-379 397.74,-385 397.74,-385 397.74,-429 397.74,-429 397.74,-435 391.74,-441 385.74,-441"></path>
<text text-anchor="middle" x="278.78" y="-414.5" font-family="sans-serif:bold" font-size="25.00">Trigger a workflow to</text>
<text text-anchor="middle" x="278.78" y="-384.5" font-family="sans-serif:bold" font-size="25.00">compute responses</text>
</g>
<!-- C&#45;&gt;D -->
<g id="edge3" class="edge">
<title>C-&gt;D</title>
<path fill="none" stroke="black" d="M338.31,-521.64C325.71,-497.59 308.77,-465.25 296.19,-441.22"></path>
<text text-anchor="middle" x="348.22" y="-481.5" font-family="sans-serif:bold" font-size="25.00">Yes</text>
</g>
<!-- E -->
<g id="node5" class="node">
<title>E</title>
<path fill="gold" stroke="gold" d="M628.03,-456C628.03,-456 427.53,-456 427.53,-456 421.53,-456 415.53,-450 415.53,-444 415.53,-444 415.53,-370 415.53,-370 415.53,-364 421.53,-358 427.53,-358 427.53,-358 628.03,-358 628.03,-358 634.03,-358 640.03,-364 640.03,-370 640.03,-370 640.03,-444 640.03,-444 640.03,-450 634.03,-456 628.03,-456"></path>
<text text-anchor="middle" x="527.78" y="-429.5" font-family="sans-serif:bold" font-size="25.00">Are you comfortable</text>
<text text-anchor="middle" x="527.78" y="-399.5" font-family="sans-serif:bold" font-size="25.00">operating services</text>
<text text-anchor="middle" x="527.78" y="-369.5" font-family="sans-serif:bold" font-size="25.00">by yourself?</text>
</g>
<!-- C&#45;&gt;E -->
<g id="edge4" class="edge">
<title>C-&gt;E</title>
<path fill="none" stroke="black" d="M394.81,-521.64C417.41,-502.33 446.25,-477.68 471.29,-456.28"></path>
<text text-anchor="middle" x="463.06" y="-481.5" font-family="sans-serif:bold" font-size="25.00">No</text>
</g>
<!-- F -->
<g id="node6" class="node">
<title>F</title>
<path fill="gold" stroke="gold" d="M429.55,-262C429.55,-262 174.01,-262 174.01,-262 168.01,-262 162.01,-256 162.01,-250 162.01,-250 162.01,-206 162.01,-206 162.01,-200 168.01,-194 174.01,-194 174.01,-194 429.55,-194 429.55,-194 435.55,-194 441.55,-200 441.55,-206 441.55,-206 441.55,-250 441.55,-250 441.55,-256 435.55,-262 429.55,-262"></path>
<text text-anchor="middle" x="301.78" y="-235.5" font-family="sans-serif:bold" font-size="25.00">Do you require large scale</text>
<text text-anchor="middle" x="301.78" y="-205.5" font-family="sans-serif:bold" font-size="25.00">or low latency?</text>
</g>
<!-- E&#45;&gt;F -->
<g id="edge5" class="edge">
<title>E-&gt;F</title>
<path fill="none" stroke="black" d="M466.33,-357.87C427.5,-327.46 378.36,-288.97 343.92,-262"></path>
<text text-anchor="middle" x="461.22" y="-317.5" font-family="sans-serif:bold" font-size="25.00">Yes</text>
</g>
<!-- I -->
<g id="node9" class="node">
<title>I</title>
<path fill="#9bcd9b" stroke="#9bcd9b" d="M774.09,-292C774.09,-292 471.48,-292 471.48,-292 465.48,-292 459.48,-286 459.48,-280 459.48,-280 459.48,-176 459.48,-176 459.48,-170 465.48,-164 471.48,-164 471.48,-164 774.09,-164 774.09,-164 780.09,-164 786.09,-170 786.09,-176 786.09,-176 786.09,-280 786.09,-280 786.09,-286 780.09,-292 774.09,-292"></path>
<text text-anchor="middle" x="622.78" y="-265.5" font-family="sans-serif:bold" font-size="25.00">Use a managed model</text>
<text text-anchor="middle" x="622.78" y="-235.5" font-family="sans-serif:bold" font-size="25.00">hosting service:</text>
<text text-anchor="middle" x="622.78" y="-175.5" font-family="sans-serif:bold" font-size="25.00">Amazon SageMaker, Anyscale</text>
</g>
<!-- E&#45;&gt;I -->
<g id="edge6" class="edge">
<title>E-&gt;I</title>
<path fill="none" stroke="black" d="M553.74,-357.63C564.56,-337.47 577.28,-313.78 588.83,-292.26"></path>
<text text-anchor="middle" x="594.06" y="-317.5" font-family="sans-serif:bold" font-size="25.00">No</text>
</g>
<!-- G -->
<g id="node7" class="node">
<title>G</title>
<path fill="#9bcd9b" stroke="#9bcd9b" d="M285.92,-98C285.92,-98 25.64,-98 25.64,-98 19.64,-98 13.64,-92 13.64,-86 13.64,-86 13.64,-12 13.64,-12 13.64,-6 19.64,0 25.64,0 25.64,0 285.92,0 285.92,0 291.92,0 297.92,-6 297.92,-12 297.92,-12 297.92,-86 297.92,-86 297.92,-92 291.92,-98 285.92,-98"></path>
<text text-anchor="middle" x="155.78" y="-71.5" font-family="sans-serif:bold" font-size="25.00">Deploy an advanced stack:</text>
<text text-anchor="middle" x="155.78" y="-11.5" font-family="sans-serif:bold" font-size="25.00">NVIDIA</text>
</g>
<!-- F&#45;&gt;G -->
<g id="edge7" class="edge">
<title>F-&gt;G</title>
<path fill="none" stroke="black" d="M274.32,-193.71C252.1,-166.77 220.51,-128.47 195.53,-98.18"></path>
<text text-anchor="middle" x="253.22" y="-123.5" font-family="sans-serif:bold" font-size="25.00">Yes</text>
</g>
<!-- H -->
<g id="node8" class="node">
<title>H</title>
<path fill="#9bcd9b" stroke="#9bcd9b" d="M567.62,-83C567.62,-83 327.94,-83 327.94,-83 321.94,-83 315.94,-77 315.94,-71 315.94,-71 315.94,-27 315.94,-27 315.94,-21 321.94,-15 327.94,-15 327.94,-15 567.62,-15 567.62,-15 573.62,-15 579.62,-21 579.62,-27 579.62,-27 579.62,-71 579.62,-71 579.62,-77 573.62,-83 567.62,-83"></path>
<text text-anchor="middle" x="447.78" y="-56.5" font-family="sans-serif:bold" font-size="25.00">Deploy a simple service:</text>
<text text-anchor="middle" x="447.78" y="-26.5" font-family="sans-serif:bold" font-size="25.00">OpenLLM, FastAPI</text>
</g>
<!-- F&#45;&gt;H -->
<g id="edge8" class="edge">
<title>F-&gt;H</title>
<path fill="none" stroke="black" d="M329.24,-193.71C355.35,-162.06 394.38,-114.74 420.44,-83.14"></path>
<text text-anchor="middle" x="408.06" y="-123.5" font-family="sans-serif:bold" font-size="25.00">No</text>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="gpu-poor-benchmark-wrong-but-useful" class="level3">
<h3 class="anchored" data-anchor-id="gpu-poor-benchmark-wrong-but-useful">GPU Poor Benchmark (Wrong, but useful)</h3>
<ul>
<li><strong>Benchmarking inference servers</strong>: Experiment with different servers to find the best fit for your use case.</li>
<li><strong>Observations</strong>:
<ul>
<li><a href="https://github.com/vllm-project/vllm">vLLM</a>: Easy to use, good performance trade-offs.</li>
<li>NVIDIA stack (<a href="https://docs.nvidia.com/deeplearning/triton-inference-server/user-guide/docs/index.html">Triton + TensorRT</a>): High performance but complex to use.</li>
<li><strong>Quantization</strong>: Can significantly impact performance, but evaluate quality trade-offs.</li>
</ul></li>
</ul>
</section>
</section>
<section id="case-study-honeycomb---replicate" class="level2">
<h2 class="anchored" data-anchor-id="case-study-honeycomb---replicate">Case Study: Honeycomb - Replicate</h2>
<ul>
<li><p><strong><a href="https://replicate.com/">Replicate</a>:</strong> Run AI with an API</p></li>
<li><p><a href="https://replicate.com/hamelsmu/honeycomb-4-awq">hamelsmu/honeycomb-4-awq</a>: Honeycomb NLQ Generator hosted with vLLM + AWQ Quantized</p></li>
<li><p><strong>HoneyComb Model:</strong> <a href="https://huggingface.co/parlance-labs/hc-mistral-alpaca-merged-awq">parlance-labs/hc-mistral-alpaca-merged-awq</a></p></li>
</ul>
<section id="why-replicate" class="level3">
<h3 class="anchored" data-anchor-id="why-replicate">Why Replicate?</h3>
<ul>
<li><strong>Real-time Use Case:</strong> The Honeycomb example demands real-time responses within the Honeycomb interface, making a platform like Replicate ideal.</li>
<li><strong>User-Friendly Playground:</strong> Replicate provides a playground environment with structured input, beneficial for non-technical users to interact with the model.</li>
<li><strong>Permalink Functionality:</strong> Replicate generates permalinks for predictions, which simplifies debugging and sharing specific scenarios with collaborators.</li>
<li><strong>Built-in Documentation and API:</strong> Replicate automatically generates documentation and API endpoints for easy integration and sharing.</li>
<li><strong>Example Saving:</strong> The platform allows users to save specific examples for future reference and testing.</li>
</ul>
</section>
<section id="show-me-the-code" class="level3">
<h3 class="anchored" data-anchor-id="show-me-the-code">Show Me the Code</h3>
<ul>
<li><strong>GitHub:</strong> <a href="https://github.com/parlance-labs/ftcourse/tree/master/replicate-examples/mistral-vllm-awq">ftcourse/replicate-examples/mistral-vllm-awq</a></li>
<li><strong><a href="https://cog.run/">Cog</a>:</strong> Containers for machine learning</li>
</ul>
<p><strong>Files:</strong></p>
<ul>
<li><code>cog.yaml</code>: Defines the Docker environment and specifies the entry point (<code>predict.py</code>).</li>
<li><code>predict.py</code>: Contains the model loading, setup, and prediction logic.</li>
</ul>
<p><strong>Steps:</strong> 1. <strong>Environment Setup:</strong> - Install Cog (a Docker wrapper that simplifies CUDA management). - Download the model weights from Hugging Face Hub (optional, for local testing). 2. <strong>Code Structure:</strong> - <code>cog.yaml</code>: - Specifies the base Docker image and dependencies. - Defines the <code>predict.py</code> file as the entry point. - ```yaml # Configuration for Cog ⚙️ # Reference: https://github.com/replicate/cog/blob/main/docs/yaml.md</p>
<pre><code>      build:
       # set to true if your model requires a GPU
       gpu: true
       cuda: "12.1"
      
       # python version in the form '3.8' or '3.8.12'
       python_version: "3.11"
      
       # a list of packages in the format &lt;package-name&gt;==&lt;version&gt;
       python_packages:
        - "hf_transfer==0.1.4"
        - "aiohttp[speedups]"
        - "torch==2.1.2"
      
       # commands run after the environment is setup
       run:
        - pip install "pydantic&lt;2.0.0"
        - CUDA_HOME=/usr/local/cuda pip install --ignore-installed vllm==0.3.0
        - pip install https://r2.drysys.workers.dev/tmp/cog-0.10.0a6-py3-none-any.whl
        - bash -c 'ln -s /usr/local/lib/python3.11/site-packages/torch/lib/lib{nv,cu}* /usr/lib'
        - pip install scipy==1.11.4 sentencepiece==0.1.99 protobuf==4.23.4
        - ln -sf $(which echo) $(which pip)
      
      predict: "predict.py:Predictor"
      ```
- `predict.py`:
    - **Prompt Template:** Sets the structure for interacting with the LLM.
    - **Setup:**
        - Defines a `Predictor` class.
        - Loads the quantized model from Hugging Face Hub during initialization.
    - **Predict Function:**
        - Takes the natural language query and schema as input.
        - Processes the input through the LLM using vLLM.
        - Returns the generated Honeycomb query.
    
    - ```python
        import os
        os.environ["HF_HUB_ENABLE_HF_TRANSFER"] = "1"
        import torch
        from cog import BasePredictor
        from vllm import LLM, SamplingParams
        
        
        MODEL_ID = 'parlance-labs/hc-mistral-alpaca-merged-awq'
        MAX_TOKENS=2500
        
        PROMPT_TEMPLATE = """Honeycomb is an observability platform that allows you to write queries to inspect trace data. You are an assistant that takes a natural language query (NLQ) and a list of valid columns and produce a Honeycomb query.
        
        ### Instruction:
        
        NLQ: "{nlq}"
        
        Columns: {cols}
        
        ### Response:
        """
        
        class Predictor(BasePredictor):
            
          def setup(self):
            n_gpus = torch.cuda.device_count()
            self.sampling_params = SamplingParams(stop_token_ids=[2], temperature=0, ignore_eos=True, max_tokens=2500)
        
            self.llm = LLM(model='parlance-labs/hc-mistral-alpaca-merged-awq', 
                    tensor_parallel_size=n_gpus, quantization="AWQ")
        
          def predict(self, nlq: str, cols: str) -&gt; str:    
            _p = PROMPT_TEMPLATE.format(nlq=nlq, cols=cols)
            out = self.llm.generate(_p, sampling_params=self.sampling_params, use_tqdm=False)
            return out[0].outputs[0].text.strip().strip('"')
        ```</code></pre>
<ol start="3" type="1">
<li><strong>Local Testing:</strong>
<ul>
<li><strong>Run Cog Server:</strong> <code>cog run</code> starts a local web server for interacting with the model.
<ul>
<li><div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb10-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">cog</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> CUDA_VISIBLE_DEVICES=0 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> 5000 python <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> cog.server.http</span></code></pre></div></li>
</ul></li>
<li><strong>Direct Prediction:</strong> <code>cog predict -i input1=value1 input2=value2</code> allows for direct prediction using command-line arguments.
<ul>
<li><div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb11-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">cog</span> predict <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> CUDA_VISIBLE_DEVICES=0 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-i</span> nlq=<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"EMISSING slowest traces"</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-i</span> cols=<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"['sli.latency', 'duration_ms', 'net.transport', 'http.method', 'error', 'http.target', 'http.route', 'rpc.method', 'ip', 'http.request_content_length', 'rpc.service', 'apdex', 'name', 'message.type', 'http.host', 'service.name', 'rpc.system', 'http.scheme', 'sli.platform-time', 'type', 'http.flavor', 'span.kind', 'dc.platform-time', 'library.version', 'status_code', 'net.host.port', 'net.host.ip', 'app.request_id', 'bucket_duration_ms', 'library.name', 'sli_product', 'message.uncompressed_size', 'rpc.grpc.status_code', 'net.peer.port', 'log10_duration_ms', 'http.status_code', 'status_message', 'http.user_agent', 'net.host.name', 'span.num_links', 'message.id', 'parent_name', 'app.cart_total', 'num_products', 'product_availability', 'revenue_at_risk', 'trace.trace_id', 'trace.span_id', 'ingest_timestamp', 'http.server_name', 'trace.parent_id']"</span></span></code></pre></div></li>
</ul></li>
</ul></li>
<li><strong>Deployment to Replicate:</strong>
<ul>
<li><strong>Create a Model on Replicate:</strong>
<ul>
<li>Choose a descriptive name.</li>
<li>Select appropriate hardware based on memory and GPU requirements.</li>
<li>Choose “Custom Cog Model” as the model type.</li>
</ul></li>
<li><strong>Login to Cog:</strong> <code>cog login</code></li>
<li><strong>Push to Replicate:</strong> <code>cog push r8.im/hamelsmu/honeycomb-4-awq</code></li>
</ul></li>
</ol>
</section>
</section>
<section id="deploying-large-language-models" class="level2">
<h2 class="anchored" data-anchor-id="deploying-large-language-models">Deploying Large Language Models</h2>
<section id="deploying-llms" class="level3">
<h3 class="anchored" data-anchor-id="deploying-llms">Deploying LLMs</h3>
<ul>
<li>Deploying LLMs is challenging, even in 2024, due to the multidimensional and zero-sum nature of performance optimization and the constant evolution of technology.</li>
</ul>
<section id="challenges-in-deploying-llms" class="level4">
<h4 class="anchored" data-anchor-id="challenges-in-deploying-llms">Challenges in Deploying LLMs</h4>
<ul>
<li><strong>Multidimensional and Zero-Sum Performance:</strong> LLM performance involves trade-offs between various factors like speed, cost, and accuracy. Prioritizing one dimension often negatively impacts others.
<ul>
<li><strong>Example:</strong> Increasing batch size improves throughput (total tokens per second) but reduces single-stream performance (tokens per second for a single request), impacting user experience.</li>
</ul></li>
<li><strong>Rapid Technology Evolution:</strong> The field is constantly evolving with new serving frameworks and optimization techniques emerging frequently. Keeping up with these changes while maintaining a performant and cost-effective deployment is demanding.</li>
</ul>
</section>
<section id="llm-performance-bottlenecks" class="level4">
<h4 class="anchored" data-anchor-id="llm-performance-bottlenecks">LLM Performance Bottlenecks</h4>
<p>Two primary factors contribute to slow LLM inference:</p>
<ul>
<li><strong>Memory Bandwidth:</strong> Transformers require frequent data transfers between slow device memory and faster memory caches on GPUs.</li>
<li><strong>Software Overhead:</strong> Launching and scheduling each operation in a model’s forward pass involves communication between CPU and GPU, creating overhead.</li>
</ul>
</section>
<section id="techniques-for-optimizing-llm-performance" class="level4">
<h4 class="anchored" data-anchor-id="techniques-for-optimizing-llm-performance">Techniques for Optimizing LLM Performance</h4>
<ul>
<li><strong>Memory Bandwidth Optimization:</strong>
<ul>
<li><strong>CUDA Kernel Optimization:</strong> Techniques like kernel fusion aim to minimize data transfer by combining multiple kernels into one.</li>
<li><strong>Flash Attention:</strong> Improves efficiency by minimizing data movement during attention calculations.</li>
<li><strong>Paged Attention:</strong> Optimizes data storage and transfer for increased efficiency.</li>
<li><strong>Quantization:</strong> Reduces model size by using lower-precision data types, allowing for faster data transfer.</li>
<li><strong>Speculative Decoding:</strong> Generates multiple tokens in parallel, discarding incorrect ones, to potentially reduce latency.
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/2405.19325">Nearest Neighbor Speculative Decoding for LLM Generation and Attribution</a></li>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/feifeibear/LLMSpeculativeSampling">feifeibear/LLMSpeculativeSampling</a></li>
</ul></li>
</ul></li>
<li><strong>Software Overhead Reduction:</strong>
<ul>
<li><strong>CUDA Kernel Optimization:</strong> Fewer, more efficient kernels lead to fewer kernel launches.</li>
<li><strong>CUDA Graphs:</strong> Traces and combines all kernel launches in a forward pass into a single unit, reducing CPU-GPU communication.</li>
</ul></li>
<li><strong>Runtime Optimizations:</strong>
<ul>
<li><strong>Continuous Batching:</strong> Enables efficient processing of requests with varying lengths by continuously adding and removing them from batches during inference.</li>
<li><strong>KV Caching:</strong> Stores key-value embeddings during inference, avoiding redundant calculations for repeated inputs.</li>
<li><strong>Hardware Upgrades:</strong> Using more powerful GPUs directly improves performance.</li>
<li><strong>Input/Output Length Optimization:</strong> Shorter inputs and outputs reduce the number of tokens processed, potentially improving latency.</li>
</ul></li>
</ul>
</section>
<section id="continuous-batching" class="level4">
<h4 class="anchored" data-anchor-id="continuous-batching">Continuous Batching</h4>
<ul>
<li><p>Continuous batching is a significant advancement in LLM serving that addresses limitations of traditional micro-batching.</p></li>
<li><p><strong>Blog Post:</strong> <a href="https://www.anyscale.com/blog/continuous-batching-llm-inference">How continuous batching enables 23x throughput in LLM inference while reducing p50 latency</a></p></li>
<li><p><strong>How it Works:</strong> Processes requests as a stream of individual token generation steps, allowing for dynamic addition and removal of requests within a batch.</p></li>
<li><p><strong>Benefits:</strong></p>
<ul>
<li>Eliminates the need to wait for a complete batch before processing, reducing latency.</li>
<li>Enables efficient handling of requests with varying lengths.</li>
</ul></li>
<li><p><strong>Consequences:</strong></p>
<ul>
<li>Results in dynamic batch sizes, making performance less predictable.</li>
<li>Requires careful consideration of performance SLAs and user experience.</li>
</ul></li>
</ul>
</section>
<section id="inference-servers" class="level4">
<h4 class="anchored" data-anchor-id="inference-servers">Inference Servers</h4>
<p>Various inference servers are available, each with its own strengths and weaknesses:</p>
<ul>
<li><strong>Examples:</strong> <a href="https://github.com/vllm-project/vllm">vLLM</a>, <a href="https://huggingface.co/docs/text-generation-inference/en/index">TGI</a>, <a href="https://fastgen.com/">FastGen</a>, <a href="https://github.com/NVIDIA/TensorRT-LLM">TensorRT-LLM</a>, <a href="https://github.com/sgl-project/sglang">SGLang</a>, <a href="https://ollama.com/">Ollama</a>, <a href="https://github.com/ggerganov/llama.cpp">Llama.cpp</a>, <a href="https://github.com/turboderp/exllama">Exllama</a>, <a href="https://github.com/mlc-ai/mlc-llm">MLC</a>, <a href="https://github.com/predibase/lorax">LoRAX</a></li>
<li><strong>Common Features:</strong> Continuous batching, specialized kernels, support for different optimization techniques.</li>
</ul>
</section>
<section id="performance-tuning" class="level4">
<h4 class="anchored" data-anchor-id="performance-tuning">Performance Tuning</h4>
<p>Understanding and tuning for different performance metrics is crucial:</p>
<ul>
<li><strong>Total Tokens Per Second (Throughput):</strong> Measures the overall token generation rate across all requests.</li>
<li><strong>Single Stream Tokens Per Second (Latency):</strong> Measures the token generation rate for a single request, reflecting user experience.</li>
<li><strong>Requests Per Second:</strong> Measures how many requests can be completed per second.</li>
</ul>
<p><strong>Key Considerations:</strong></p>
<ul>
<li>Increasing batch size generally improves throughput but reduces single-stream performance.</li>
<li>Finding the right balance between these metrics depends on the specific use case and desired user experience.</li>
<li>Clearly define performance SLOs and consider both throughput and latency when evaluating performance.</li>
</ul>
</section>
</section>
<section id="simplifying-llm-deployment" class="level3">
<h3 class="anchored" data-anchor-id="simplifying-llm-deployment">Simplifying LLM Deployment</h3>
<section id="prioritize-modularity" class="level4">
<h4 class="anchored" data-anchor-id="prioritize-modularity">Prioritize Modularity</h4>
<p>Building a modular LLM serving stack is essential for navigating the challenges of the rapidly evolving technology landscape.</p>
<ul>
<li><strong>Benefits of Modularity:</strong>
<ul>
<li><strong>Flexibility:</strong> Easily switch between different serving frameworks as needed to leverage new features or optimizations.</li>
<li><strong>Experimentation:</strong> Enables efficient testing and comparison of different frameworks and configurations.</li>
</ul></li>
<li><strong>Challenges:</strong>
<ul>
<li><strong>Compatibility Issues:</strong> Features and optimizations from different frameworks may not always work together seamlessly.</li>
<li><strong>Lack of Documentation:</strong> New features and their interactions may not be well-documented, requiring experimentation and debugging.</li>
</ul></li>
</ul>
</section>
</section>
<section id="simplify-llm-deployment-with-replicate" class="level3">
<h3 class="anchored" data-anchor-id="simplify-llm-deployment-with-replicate">Simplify LLM Deployment with Replicate</h3>
<p>Replicate is a serverless infrastructure that aims to simplify LLM deployment and experimentation.</p>
<section id="replicate-features-and-workflow" class="level4">
<h4 class="anchored" data-anchor-id="replicate-features-and-workflow">Replicate Features and Workflow</h4>
<ul>
<li><strong><a href="https://cog.run/">COG</a>:</strong> Open-source tool for packaging models and serving code, providing control over the serving framework.
<ul>
<li><a href="https://github.com/replicate/cog-vllm">Cog-vLLM</a>: Run vLLM on Replicate</li>
</ul></li>
<li><strong>Hugging Face Integration:</strong> Streamlined workflow for pulling and deploying models from Hugging Face.</li>
<li><strong>Performance Optimizations:</strong> Caching mechanisms and other optimizations to improve model download and cold boot times.</li>
<li><strong>Open Source Approach:</strong> Replicate’s model serving infrastructure is open source, allowing for customization and contributions.</li>
</ul>
<p><strong>Workflow Example:</strong></p>
<ol type="1">
<li><strong>Create a Training:</strong> Specify the model, Hugging Face ID, and other configurations through Replicate’s web interface.</li>
<li><strong>Transfer Weights:</strong> Replicate downloads weights from Hugging Face and pushes them to its optimized storage.</li>
<li><strong>Deploy and Access Model:</strong> Once the training is complete, the model is deployed and accessible through Replicate’s API or client libraries.</li>
<li><strong>Customize with COG:</strong> Utilize COG to customize the serving environment, experiment with different frameworks, and add features.</li>
</ol>
<p><strong>Key Advantages:</strong></p>
<ul>
<li><strong>Simplified Deployment:</strong> Replicate abstracts away infrastructure complexities, making it easy to deploy and serve models.</li>
<li><strong>Framework Flexibility:</strong> Supports multiple serving frameworks like vLLM and TRT-LLM, allowing for experimentation and optimization.</li>
<li><strong>Open Source and Customizable:</strong> Provides transparency and control over the serving environment.</li>
</ul>
</section>
</section>
</section>
<section id="lessons-from-building-a-serverless-platform---predibase" class="level2">
<h2 class="anchored" data-anchor-id="lessons-from-building-a-serverless-platform---predibase">Lessons from Building A Serverless Platform - Predibase</h2>
<section id="predibase-overview" class="level3">
<h3 class="anchored" data-anchor-id="predibase-overview">Predibase Overview</h3>
<ul>
<li><a href="https://predibase.com/">Predibase</a> is a managed platform for fine-tuning and serving LLMs.</li>
<li>It offers an end-to-end solution for prompting, fine-tuning, and deploying LLMs serverlessly or in dedicated environments.</li>
</ul>
</section>
<section id="the-case-for-fine-tuned-llms" class="level3">
<h3 class="anchored" data-anchor-id="the-case-for-fine-tuned-llms">The Case for Fine-Tuned LLMs</h3>
<ul>
<li><strong>General Intelligence vs.&nbsp;Task Specificity:</strong> General-purpose LLMs like ChatGPT are powerful but inefficient for specific tasks. Fine-tuning allows for models tailored to specific business needs, reducing cost and latency.</li>
<li><strong>Cost of Serving Multiple Models:</strong> Serving numerous fine-tuned models on dedicated deployments becomes expensive.</li>
<li><strong><a href="https://github.com/predibase/lorax">LoRAX</a> - A Solution for Efficient Serving:</strong>
<ul>
<li>Lorax is an open-source framework built on HuggingFace’s TGI, designed for efficient fine-tuned LLM inference.</li>
<li>It enables serving multiple fine-tuned models concurrently on a single deployment by sharing base model parameters and using heterogeneous batching of LoRA adapters.</li>
<li>This approach results in significant cost savings compared to dedicated deployments or fine-tuning via OpenAI’s API.</li>
</ul></li>
</ul>
</section>
<section id="deploying-your-fine-tuned-model-practical-considerations" class="level3">
<h3 class="anchored" data-anchor-id="deploying-your-fine-tuned-model-practical-considerations">Deploying Your Fine-Tuned Model: Practical Considerations</h3>
<section id="merging-adapters-pros-and-cons" class="level4">
<h4 class="anchored" data-anchor-id="merging-adapters-pros-and-cons">Merging Adapters: Pros and Cons</h4>
<ul>
<li><strong>Merging:</strong>
<ul>
<li><strong>Pros:</strong> Better baseline performance by eliminating the overhead of processing LoRA layers at runtime.</li>
<li><strong>Cons:</strong> Limits flexibility in serving multiple fine-tunes, incompatibility with certain adapters (e.g., DORA, speculative decoding), potential quantization challenges, increased disk space.</li>
</ul></li>
<li><strong>Not Merging:</strong>
<ul>
<li><strong>Pros:</strong> Allows serving multiple fine-tuned models and the base model on a single deployment, facilitates A/B testing and rapid iteration, compatibility with various adapter types.</li>
<li><strong>Cons:</strong> Potential performance overhead due to processing LoRA layers at runtime.</li>
</ul></li>
<li><strong>Decision:</strong> Whether to merge depends on individual needs and constraints.</li>
</ul>
</section>
<section id="quantization-for-training-and-inference" class="level4">
<h4 class="anchored" data-anchor-id="quantization-for-training-and-inference">Quantization for Training and Inference</h4>
<ul>
<li><strong>Challenge:</strong> Models trained with QLoRA (quantized) often show performance degradation when served using FP16 (full precision). Serving with QLoRA is slow.</li>
<li><strong>Solution:</strong> Dequantize the QLoRA weights to FP16 for inference. This maintains numerical equivalence with the quantized weights while enabling faster inference.</li>
</ul>
</section>
</section>
<section id="performance-tuning-1" class="level3">
<h3 class="anchored" data-anchor-id="performance-tuning-1">Performance Tuning</h3>
<section id="gathering-requirements" class="level4">
<h4 class="anchored" data-anchor-id="gathering-requirements">Gathering Requirements</h4>
<ul>
<li><strong>Factors:</strong> Queries per second, input/output token distribution, number of adapters.</li>
<li><strong>Impact:</strong> These factors influence ideal batch size, target throughput, and latency.</li>
<li><strong>SLOs:</strong> Define service level objectives for peak throughput, latency, and cost.</li>
</ul>
</section>
<section id="deployment-requirements" class="level4">
<h4 class="anchored" data-anchor-id="deployment-requirements">Deployment Requirements</h4>
<ul>
<li><strong>VRAM Estimation:</strong> Allocate at least 1.5x the model weights for serving, considering activations, adapters, and KV cache.</li>
</ul>
</section>
<section id="key-questions-for-choosing-deployment-options" class="level4">
<h4 class="anchored" data-anchor-id="key-questions-for-choosing-deployment-options">Key Questions for Choosing Deployment Options</h4>
<ul>
<li>VRAM needs</li>
<li>Requests per second</li>
<li>Request distribution</li>
<li>Maximum acceptable latency</li>
<li>Willingness to sacrifice quality for cost</li>
<li>Number of tasks</li>
</ul>
</section>
<section id="serverless-vs.-dedicated-deployment" class="level4">
<h4 class="anchored" data-anchor-id="serverless-vs.-dedicated-deployment">Serverless vs.&nbsp;Dedicated Deployment</h4>
<ul>
<li><strong>Serverless:</strong> Suitable for low to medium, uniformly distributed requests with latency tolerance on the order of seconds.</li>
<li><strong>Dedicated:</strong> More appropriate for high, spiky request volumes, batch processing, or when strict latency and throughput SLOs are critical.</li>
</ul>
</section>
</section>
<section id="fine-tuning-for-throughput" class="level3">
<h3 class="anchored" data-anchor-id="fine-tuning-for-throughput">Fine-Tuning for Throughput</h3>
<ul>
<li><strong>Shifting the Paradigm:</strong> Move beyond focusing solely on quality and leverage fine-tuning for performance improvements.</li>
</ul>
<section id="addressing-performance-differences" class="level4">
<h4 class="anchored" data-anchor-id="addressing-performance-differences">Addressing Performance Differences:</h4>
<ul>
<li>Fine-tuned models with adapters often show slower throughput compared to base models.</li>
</ul>
</section>
<section id="speculative-decoding---the-medusa-approach" class="level4">
<h4 class="anchored" data-anchor-id="speculative-decoding---the-medusa-approach">Speculative Decoding - The Medusa Approach:</h4>
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/2401.10774">MEDUSA: Simple LLM Inference Acceleration Framework with Multiple Decoding Heads</a></li>
<li>Fine-tune additional projections to predict future tokens, improving throughput by reducing the number of forward passes.</li>
<li>Implement verification steps to ensure only correct tokens are accepted.</li>
</ul>
</section>
<section id="combining-quality-and-performance-with-lookahead-lora" class="level4">
<h4 class="anchored" data-anchor-id="combining-quality-and-performance-with-lookahead-lora">Combining Quality and Performance with Lookahead LoRA:</h4>
<ul>
<li>Fine-tune adapters to predict multiple tokens ahead (lookahead) while maintaining task-specific accuracy.</li>
<li>This approach has shown significant throughput improvements (2-3x) compared to base models and standard LoRA adapters.</li>
</ul>
</section>
</section>
<section id="demonstration" class="level3">
<h3 class="anchored" data-anchor-id="demonstration">Demonstration</h3>
<ul>
<li>A live demo showcased the throughput differences between a base Medusa model, a fine-tuned Medusa model, and a model using lookahead LoRA for a code generation task.</li>
<li>The lookahead LoRA model achieved significantly higher throughput, highlighting the potential of this technique.</li>
</ul>
</section>
</section>
<section id="batch-vs-real-time-and-modal" class="level2">
<h2 class="anchored" data-anchor-id="batch-vs-real-time-and-modal">Batch vs Real Time and Modal</h2>
<section id="throughput-vs.-latency" class="level3">
<h3 class="anchored" data-anchor-id="throughput-vs.-latency">Throughput vs.&nbsp;Latency</h3>
<ul>
<li><strong>Defining “Slow”</strong>: A system can be slow due to low throughput (handling few requests per unit time) or high latency (taking long to process a single request).</li>
<li><strong>Throughput</strong>: Measured in requests completed per unit time.
<ul>
<li>Relevant for batch tasks like recommendation systems, evaluations, and CI/CD.</li>
<li>Constraints often stem from upstream/downstream systems.</li>
</ul></li>
<li><strong>Latency</strong>: Measured in time taken to complete a single request.
<ul>
<li>Crucial for real-time applications like chatbots, copilots, and guardrails.</li>
<li>Human perception is the primary constraint (target ~200ms total system latency).</li>
</ul></li>
<li><strong>Cost</strong>: The hidden factor influencing throughput and latency. More resources generally improve both but at a cost.</li>
</ul>
</section>
<section id="latency-lags-throughput" class="level3">
<h3 class="anchored" data-anchor-id="latency-lags-throughput">Latency Lags Throughput</h3>
<ul>
<li><strong>Paper:</strong> <a href="https://dl.acm.org/doi/pdf/10.1145/1022594.1022596">Latency Lags Bandwidth</a></li>
<li><strong>Latency Improvements Are Hard</strong>: Historically, improving bandwidth has been easier than reducing latency due to fundamental engineering and physical limitations (e.g., speed of light).
<ul>
<li><strong>GPUs Exemplify This</strong>: GPUs are optimized for throughput with large areas dedicated to processing, while CPUs prioritize latency with a focus on caching and control flow.</li>
</ul></li>
</ul>
<section id="gpus-are-inherently-throughput-oriented." class="level4">
<h4 class="anchored" data-anchor-id="gpus-are-inherently-throughput-oriented.">GPUs are inherently throughput-oriented.</h4>
<ul>
<li><strong>Textbook:</strong> <a href="https://www.amazon.com/Programming-Massively-Parallel-Processors-Hands/dp/0323912311/">Programming Massively Parallel Processors: A Hands-on Approach</a></li>
<li>GPUs have much larger areas dedicated to processing units (ALUs) compared to CPUs, which prioritize caching and control flow for lower latency.</li>
<li>This design difference allows GPUs to achieve significantly higher memory throughput, making them suitable for high-throughput tasks like LLM inference.</li>
</ul>
</section>
<section id="llm-inference-challenges" class="level4">
<h4 class="anchored" data-anchor-id="llm-inference-challenges">LLM Inference Challenges</h4>
<ul>
<li><strong>Throughput</strong>: Easily scalable by increasing batch size (with some latency tradeoffs).</li>
<li><strong>Latency</strong>: Much harder to optimize.
<ul>
<li><strong>Techniques for Improvement</strong>: Quantization, model distillation, truncation, faster hardware, and highly optimized software (e.g., CUDA kernels).</li>
<li><strong>Extreme Latency Optimization</strong>: Running models entirely on cache memory (SRAM), as done by <a href="https://wow.groq.com/lpu-inference-engine/">Groq’s LPU</a>, significantly reduces latency but may impact throughput per dollar.</li>
</ul></li>
</ul>
</section>
</section>
<section id="costs-are-high-but-falling." class="level3">
<h3 class="anchored" data-anchor-id="costs-are-high-but-falling.">Costs are high but falling.</h3>
<ul>
<li><strong>Good News</strong>: LLM inference costs are decreasing faster than Moore’s law due to hardware, algorithmic, and R&amp;D advancements.
<ul>
<li><strong>Cognitive Capability for Fixed Price</strong>: $20/megatoken now buys GPT-4 level output, significantly higher capability than what was possible a year ago.</li>
<li><strong>Falling Costs for Fixed Capability</strong>: Achieving chatGPT-level performance is now possible at a fraction of the cost compared to two years ago.</li>
</ul></li>
<li><strong>Implication</strong>: Holding onto a fixed budget and waiting for capabilities to improve is a viable strategy.</li>
</ul>
</section>
<section id="deploying-llms-on-modal" class="level3">
<h3 class="anchored" data-anchor-id="deploying-llms-on-modal">Deploying LLMs on Modal</h3>
<ul>
<li><strong>Modal’s Value Proposition</strong>:
<ul>
<li><strong>High Throughput</strong>: Easy scaling to hundreds of A100s for large-scale fine-tuning and batch inference.</li>
<li><strong>Manageable Latency</strong>: Balancing latency and cost is achievable for models up to 13B parameters, suitable for certain latency-sensitive applications.</li>
<li><strong>Competitive Cost</strong>: Offers competitive GPU pricing with potential for high utilization savings, especially for spiky workloads.</li>
</ul></li>
<li><strong>Beyond GPUs</strong>: Modal provides a complete serverless runtime with storage, compute, and web service capabilities, enabling tasks beyond just LLM inference.</li>
</ul>
</section>
<section id="modal-is-for-more-than-gpus" class="level3">
<h3 class="anchored" data-anchor-id="modal-is-for-more-than-gpus">Modal is for more than GPUs</h3>
<ul>
<li>Modal is not just a serverless GPU platform; it’s a complete runtime environment.</li>
<li><strong>Key Features</strong>:
<ul>
<li><strong>Storage</strong>: Distributed file system, queues, dictionaries, and the ability to mount local and web data.</li>
<li><strong>Compute</strong>: Functions, GPU acceleration, and other serverless compute options.</li>
<li><strong>Web Services</strong>: Web endpoints and server capabilities for deploying applications.</li>
</ul></li>
</ul>
</section>
<section id="demos" class="level3">
<h3 class="anchored" data-anchor-id="demos">Demos</h3>
<ul>
<li><strong>Code:</strong> <a href="https://modal.com/docs/examples">https://modal.com/docs/examples</a></li>
<li><strong>Abliteration LLM</strong>: Demonstrated an LLM modified to remove certain responses (e.g., refusing harmful requests). This demo encountered technical difficulties.
<ul>
<li><strong>Blog Post:</strong> <a href="https://huggingface.co/blog/mlabonne/abliteration">Uncensor any LLM with abliteration</a></li>
</ul></li>
<li><strong>Batch Inference with TRT LLM</strong>: Showcased running batch inference on Llama-3 8B using TRT LLM, achieving high throughput.</li>
<li><strong>Hot Reloading Development Server</strong>: Demonstrated the ability to make code changes locally and have them automatically redeployed on Modal.</li>
<li><strong>OpenAI Compatible Endpoint</strong>: Showcased running an OpenAI compatible endpoint on Modal using vLLM, allowing integration with tools like Instructor.</li>
</ul>
</section>
</section>
<section id="qa-session" class="level2">
<h2 class="anchored" data-anchor-id="qa-session">Q&amp;A Session</h2>
<section id="awq-in-honeycomb-example" class="level3">
<h3 class="anchored" data-anchor-id="awq-in-honeycomb-example">AWQ in Honeycomb Example</h3>
<ul>
<li><strong>Question:</strong> Clarification sought on the mention of AWQ in the Honeycomb example.</li>
<li><strong>Answer:</strong> AWQ (quantization technique) is highlighted as a tool for model quantization, compatible and easily integrable with vLLM. The speaker shares their preference for using default or documented settings for quantization without delving into extensive customization.
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/2306.00978">AWQ: Activation-aware Weight Quantization for LLM Compression and Acceleration</a></li>
</ul></li>
</ul>
</section>
<section id="pricing-fine-tuning-projects-for-enterprises" class="level3">
<h3 class="anchored" data-anchor-id="pricing-fine-tuning-projects-for-enterprises">Pricing Fine-Tuning Projects for Enterprises</h3>
<ul>
<li><strong>Question:</strong> Advice sought on determining pricing for enterprise fine-tuning projects.</li>
<li><strong>Answer:</strong> Advises against hourly rates and recommends a value-based approach, which involves:
<ul>
<li>Understanding the client’s problem and its importance.</li>
<li>Identifying key metrics the client aims to improve.</li>
<li>Collaborating to determine the project’s value to the client.
<ul>
<li>If the client does not know, should probably not take the project</li>
</ul></li>
<li>Proposing a reasonable fraction of that value as the price.</li>
</ul></li>
</ul>
</section>
<section id="gpu-optimization-in-modal-with-vllms-async-engine" class="level3">
<h3 class="anchored" data-anchor-id="gpu-optimization-in-modal-with-vllms-async-engine">GPU Optimization in Modal with vLLM’s Async Engine</h3>
<ul>
<li><strong>Question:</strong> Inquiry about optimizing GPU usage in Modal when using vLLM’s asynchronous engine and limiting concurrent requests instead of batch size.</li>
<li><strong>Answer:</strong> Charles Frye emphasizes the importance of measuring actual GPU behavior:
<ul>
<li><strong>CUDA Kernel Utilization:</strong> Monitor using tools like NVIDIA SMI to understand GPU activity.</li>
<li><strong>FLOPs Utilization:</strong> Measure and compare the achieved floating-point operations per second against the system’s theoretical maximum.</li>
<li><strong>Wattage Consumption:</strong> Observe GPU power draw as a proxy for actual workload and potential bottlenecks.</li>
</ul></li>
</ul>
</section>
<section id="hiding-api-endpoints-in-model-serving-web-apps" class="level3">
<h3 class="anchored" data-anchor-id="hiding-api-endpoints-in-model-serving-web-apps">Hiding API Endpoints in Model-Serving Web Apps</h3>
<ul>
<li><strong>Question:</strong> Strategies sought for concealing API endpoints in a web application to prevent exposure through browser inspection tools.</li>
<li><strong>Answer:</strong>
<ul>
<li><strong>Proxy Server:</strong> Routing requests through a proxy to mask internal endpoints and implement protections.</li>
<li><strong>Accepting Limitations:</strong> Recognizing that completely hiding data flow from the client-side is challenging.</li>
</ul></li>
</ul>
</section>
<section id="impact-of-input-prompt-size-on-speed" class="level3">
<h3 class="anchored" data-anchor-id="impact-of-input-prompt-size-on-speed">Impact of Input Prompt Size on Speed</h3>
<ul>
<li><strong>Question:</strong> Clarification sought on how reducing input prompt size affects processing speed, given that the entire prompt is read at once.</li>
<li><strong>Answer:</strong>
<ul>
<li><strong>Prefill Impact:</strong> Smaller prompts reduce the initial encoding time (prefill), which can be significant for very large inputs.</li>
<li><strong>Attention Calculation:</strong> Shorter sequences lead to faster attention calculations due to the quadratic complexity of attention mechanisms.</li>
<li><strong>Practical Considerations:</strong> The impact might be negligible for moderately sized prompts but becomes increasingly relevant for very large inputs like books or lengthy PDFs.</li>
</ul></li>
</ul>
</section>
<section id="resources-for-learning-continuous-batching" class="level3">
<h3 class="anchored" data-anchor-id="resources-for-learning-continuous-batching">Resources for Learning Continuous Batching</h3>
<ul>
<li><strong>Question:</strong> Recommendation requested for resources to learn about continuous batching.</li>
<li><strong>Answer:</strong>
<ul>
<li><strong>Orca Paper:</strong> Referring to the original research paper on continuous batching.</li>
<li><strong>AnyScale Blog Post:</strong> <a href="https://www.anyscale.com/blog/continuous-batching-llm-inference">How continuous batching enables 23x throughput in LLM inference while reducing p50 latency</a></li>
<li><strong>Practical Experimentation:</strong> Emphasizing the value of hands-on experience, benchmarking, and analyzing performance variations.</li>
</ul></li>
</ul>
</section>
<section id="request-caching-layer-in-hugging-face-and-modal" class="level3">
<h3 class="anchored" data-anchor-id="request-caching-layer-in-hugging-face-and-modal">Request Caching Layer in Hugging Face and Modal</h3>
<ul>
<li><strong>Question:</strong> Inquiry about the availability of a request caching layer in Hugging Face and Modal.</li>
<li><strong>Answer:</strong>
<ul>
<li><strong>KV Caching:</strong> The speakers clarify that some frameworks, like TRT-LLM and vLLM, offer KV caching, which can improve performance for requests sharing similar prefixes or chat history.</li>
<li><strong>Higher-Level Caching:</strong> Expanding on the concept, they discuss the possibility of centralized KV cache databases and even caching complete requests and responses for deterministic scenarios.</li>
<li><strong>Replicate’s Approach:</strong> Joe Hoover states that Replicate doesn’t currently provide explicit features for request caching but acknowledges it as a potential future consideration.</li>
</ul></li>
</ul>


</section>
</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/workshop-004/</guid>
  <pubDate>Wed, 17 Jul 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Conference Talk 6: Train Almost Any LLM Model Using 🤗 autotrain</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-006/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<ul>
<li>Introduction to AutoTrain</li>
<li>Getting Started with AutoTrain</li>
<li>Fine-tuning LLMs with AutoTrain</li>
<li>Training Your Model</li>
<li>Config Files and Advanced Options</li>
<li>Additional Features and Considerations</li>
<li>Q&amp;A Session</li>
</ul>
<section id="introduction-to-autotrain" class="level2">
<h2 class="anchored" data-anchor-id="introduction-to-autotrain">Introduction to AutoTrain</h2>
<ul>
<li><strong>Homepage:</strong> <a href="https://huggingface.co/autotrain">https://huggingface.co/autotrain</a></li>
<li><strong>Documentation:</strong> <a href="https://huggingface.co/docs/autotrain/index">https://huggingface.co/docs/autotrain/index</a></li>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/huggingface/autotrain-advanced">autotrain-advanced</a></li>
<li>Simplifies model training and fine-tuning for users with varying levels of expertise, from beginners to experienced data scientists.</li>
<li><strong>Supported Tasks:</strong>
<ul>
<li><strong>NLP:</strong> Token classification, text classification, LLM tasks (e.g., SFT, R4, DPO, reward tuning), sentence transformer fine-tuning, etc.</li>
<li><strong>Computer Vision:</strong> Image classification, Object Detection</li>
<li><strong>Tabular Data:</strong> Classification, Regression</li>
</ul></li>
<li>Leverages the Hugging Face ecosystem, including transformers, datasets, diffusers, and Accelerate, ensuring compatibility with the latest models and tools.</li>
</ul>
</section>
<section id="getting-started-with-autotrain" class="level2">
<h2 class="anchored" data-anchor-id="getting-started-with-autotrain">Getting Started with AutoTrain</h2>
<ul>
<li><strong>Create a new project:</strong>
<ul>
<li><strong>Link:</strong> <a href="https://huggingface.co/login?next=%2Fspaces%2Fautotrain-projects%2Fautotrain-advanced%3Fduplicate%3Dtrue"><code>Create new project</code></a></li>
<li>Optionally specify an organization and attach hardware (local or Hugging Face spaces).</li>
<li>Choose the desired task (e.g., LLM SFT).</li>
</ul></li>
<li><strong>User-Friendly Interface:</strong>
<ul>
<li>Select a task.</li>
<li>Upload your data or use a dataset from the Hugging Face Hub.</li>
<li>Configure parameters or use default settings.</li>
<li>Monitor training progress and logs.</li>
</ul></li>
<li><strong>Documentation:</strong> <a href="https://huggingface.co/docs/autotrain/quickstart_spaces#creating-a-new-autotrain-space">Creating a New AutoTrain Space</a></li>
</ul>
</section>
<section id="fine-tuning-llms-with-autotrain" class="level2">
<h2 class="anchored" data-anchor-id="fine-tuning-llms-with-autotrain">Fine-tuning LLMs with AutoTrain</h2>
<section id="supervised-fine-tuning-sft-and-generic-fine-tuning" class="level3">
<h3 class="anchored" data-anchor-id="supervised-fine-tuning-sft-and-generic-fine-tuning">Supervised Fine-tuning (SFT) and Generic Fine-tuning</h3>
<ul>
<li><strong>Documentation:</strong> <a href="https://huggingface.co/docs/trl/main/en/sft_trainer">Supervised Fine-tuning Trainer</a></li>
<li>Both trainers are similar, but SFT uses the TRL library’s SFT trainer.
<ul>
<li><strong>Documentation:</strong> <a href="https://huggingface.co/docs/trl/main/en/index">TRL - Transformer Reinforcement Learning</a></li>
</ul></li>
<li>Requires a “text” column in your dataset (can be mapped from a different column name).</li>
<li>Supports chat template formatting (chatML, Sapphire, tokenizer’s template).</li>
<li><strong>Example datasets:</strong>
<ul>
<li><a href="Salesforce/wikitext">Salesforce/wikitext</a>: plain text format</li>
<li>Chat format with “content” and “role” fields (requires chat template).</li>
</ul></li>
</ul>
</section>
<section id="reward-modeling" class="level3">
<h3 class="anchored" data-anchor-id="reward-modeling">Reward Modeling</h3>
<ul>
<li><strong>Documentation:</strong> <a href="https://huggingface.co/docs/trl/main/en/reward_trainer">Reward Modeling</a></li>
<li>Trains a custom reward model for sequence classification.</li>
<li>Dataset requires “chosen” and “rejected” text columns.</li>
</ul>
</section>
<section id="dpo-and-orpo" class="level3">
<h3 class="anchored" data-anchor-id="dpo-and-orpo">DPO and ORPO</h3>
<ul>
<li><strong>DPO - Direct Preference Optimization</strong>
<ul>
<li><strong>Documentation:</strong> <a href="https://huggingface.co/docs/trl/main/en/dpo_trainer">DPO Trainer</a></li>
</ul></li>
<li><strong>ORPO - Odds Ratio Preference Optimization</strong>
<ul>
<li><strong>Documentation:</strong> <a href="https://huggingface.co/docs/trl/main/en/orpo_trainer">ORPO Trainer</a></li>
</ul></li>
<li>ORPO is recommended over DPO as it requires less memory and compute.</li>
<li>Dataset requires “prompt,” “chosen,” and “rejected” columns (all conversations).</li>
<li>Supports chat templates.</li>
</ul>
</section>
</section>
<section id="training-your-model" class="level2">
<h2 class="anchored" data-anchor-id="training-your-model">Training Your Model</h2>
<section id="data-format" class="level3">
<h3 class="anchored" data-anchor-id="data-format">Data Format</h3>
<ul>
<li>Use CSV or JSON Lines (JSONL) format
<ul>
<li>JSONL preferred for readability and ease of use.</li>
</ul></li>
<li><strong>Format examples:</strong>
<ul>
<li>Alpaca dataset: Single “text” field with formatted text (no chat template needed).</li>
<li>Chat format: Requires chat template or offline conversion to plain text.</li>
</ul></li>
</ul>
</section>
<section id="training-locally" class="level3">
<h3 class="anchored" data-anchor-id="training-locally">Training Locally</h3>
<ul>
<li><p><strong>Documentation:</strong> <a href="https://huggingface.co/docs/autotrain/quickstart">Quickstart</a></p></li>
<li><p>Set Hugging Face token:</p>
<ul>
<li><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">HF_TOKEN</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=&lt;</span>your_token<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span></code></pre></div></li>
</ul></li>
<li><p>Run the AutoTrain app: <code>autotrain app</code></p>
<ul>
<li><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">autotrain</span> app <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--port</span> 8080 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--host</span> 127.0.0.1</span></code></pre></div></li>
</ul></li>
<li><p>Alternatively, use config files or CLI commands.</p>
<ul>
<li><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">autotrain</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--config</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>path_to_config_file<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span></code></pre></div></li>
</ul></li>
</ul>
<section id="local-installation" class="level4">
<h4 class="anchored" data-anchor-id="local-installation">Local Installation</h4>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" aria-controls="tabset-1-1" aria-selected="true">PIP</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" aria-controls="tabset-1-2" aria-selected="false">Conda</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" aria-labelledby="tabset-1-1-tab">
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install autotrain-advanced</span></code></pre></div>
</div>
<div id="tabset-1-2" class="tab-pane" aria-labelledby="tabset-1-2-tab">
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">conda</span> create <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-n</span> autotrain python=3.10</span>
<span id="cb5-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">conda</span> activate autotrain</span>
<span id="cb5-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install autotrain-advanced</span>
<span id="cb5-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">conda</span> install pytorch torchvision torchaudio pytorch-cuda=12.1 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> pytorch <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> nvidia</span>
<span id="cb5-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">conda</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nvidia/label/cuda-12.1.0"</span> cuda-nvcc</span></code></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="training-on-other-platforms" class="level3">
<h3 class="anchored" data-anchor-id="training-on-other-platforms">Training on Other Platforms</h3>
<ul>
<li><strong><a href="https://jarvislabs.ai/">Jarvis Labs</a>:</strong> Provides AutoTrain templates for easy setup and training.</li>
<li><strong><a href="https://www.nvidia.com/en-us/data-center/dgx-cloud/">DGX Cloud</a>:</strong> Rent high-performance GPUs for training large models.</li>
<li><strong><a href="https://colab.research.google.com/">Google Colab</a>:</strong> Run AutoTrain directly in Colab using provided notebooks and UI.</li>
</ul>
</section>
</section>
<section id="config-files-and-advanced-options" class="level2">
<h2 class="anchored" data-anchor-id="config-files-and-advanced-options">Config Files and Advanced Options</h2>
<ul>
<li><strong>Documentation:</strong> <a href="https://huggingface.co/docs/autotrain/config">AutoTrain Configs</a></li>
<li>Config files offer more flexibility and control over training parameters.</li>
<li>Define task, base model, data paths, column mapping, hyperparameters, logging, and more.</li>
<li>Access example config files in the AutoTrain GitHub repository.
<ul>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/huggingface/autotrain-advanced/tree/main/configs">autotrain-advanced/configs</a></li>
</ul></li>
</ul>
</section>
<section id="additional-features-and-considerations" class="level2">
<h2 class="anchored" data-anchor-id="additional-features-and-considerations">Additional Features and Considerations</h2>
<ul>
<li>AutoTrain automatically handles multi-GPU training using DeepSpeed or distributed data parallel.</li>
<li>QLORA is supported on DeepSpeed for efficient training.</li>
<li>Sentence Transformer fine-tuning is available for tasks like improving RAG models.</li>
</ul>
</section>
<section id="qa-session" class="level2">
<h2 class="anchored" data-anchor-id="qa-session">Q&amp;A Session</h2>
<ul>
<li><strong>Logging:</strong> Supports Weights &amp; Biases (W&amp;B) logging when using config files.</li>
<li><strong>Mixed Precision:</strong> Supports BF16 and FP16, but not FP8.</li>
<li><strong>Parameter Compatibility:</strong> AutoTrain ensures parameter compatibility based on the chosen base model.</li>
<li><strong>Hyperparameter Optimization:</strong> Not currently supported for LLMs due to long training times.</li>
<li><strong>CPU Training:</strong> Possible, but may come with performance limitations.</li>
<li><strong>Custom Chat Templates:</strong> Can be added by modifying the <code>tokenizer_config.json</code> file of a cloned model.</li>
<li><strong>Synthetic Data Generation:</strong> Not currently supported, but users can generate their own.</li>
</ul>


</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-006/</guid>
  <pubDate>Fri, 12 Jul 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Office Hours 6: Johno Whitaker</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/office-hours-006/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<section id="key-takeaways" class="level2">
<h2 class="anchored" data-anchor-id="key-takeaways">Key takeaways</h2>
<ul>
<li><strong>Striking a balance between GPU utilization and cache:</strong> While maximizing GPU utilization seems ideal, leaving some headroom for caching can actually improve performance.</li>
<li><strong>The economics of cloud GPU pricing:</strong> Faster, more expensive GPUs often end up being cost-effective due to reduced training time.</li>
<li><strong>Prioritizing alternative customization methods before fine-tuning:</strong> Consider techniques like prompt engineering and context injection before resorting to fine-tuning.</li>
<li><strong>The importance of quick iteration cycles in research:</strong> Start with smaller models and datasets to test ideas rapidly before scaling up.</li>
<li><strong>The value of understanding the tools and digging deeper:</strong> While off-the-shelf libraries are convenient, having a deeper understanding of the underlying code can be crucial for research and debugging.</li>
<li><strong>The potential of alternative hardware and algorithms:</strong> While GPUs and deep learning dominate the current landscape, there is hope for innovation with new programming paradigms and architectures.</li>
<li><strong>Focusing on practical skills and real-world applications:</strong> Building projects and gaining hands-on experience are invaluable, even if specific technologies become obsolete.</li>
<li><strong>The evolving role of LLMs in research:</strong> LLMs are becoming increasingly useful for tasks like paper retrieval and summarization, with the potential for even greater impact in the future.</li>
<li><strong>The importance of exploring diverse research directions:</strong> While chasing the latest trends can be tempting, exploring less crowded research areas can lead to novel and impactful contributions.</li>
</ul>
</section>
<section id="gpu-utilization-and-batch-size" class="level2">
<h2 class="anchored" data-anchor-id="gpu-utilization-and-batch-size">GPU Utilization and Batch Size</h2>
<ul>
<li>Increasing batch size generally improves performance, especially when memory bandwidth is a bottleneck.</li>
<li>However, pushing GPU memory utilization too close to 100% can hinder performance by limiting space for caching.</li>
<li>It’s crucial to leave some headroom for pre-caching layers and avoiding out-of-memory errors during evaluation or unexpected events.</li>
<li>Find the largest comfortable batch size with reasonable memory utilization.</li>
</ul>
</section>
<section id="balancing-compute-and-io-costs" class="level2">
<h2 class="anchored" data-anchor-id="balancing-compute-and-io-costs">Balancing Compute and IO Costs</h2>
<ul>
<li>While using more GPUs increases cost per hour, it also significantly reduces training time.</li>
<li>Cloud GPU pricing often reflects this trade-off, making faster GPUs cost-effective overall.</li>
<li>Consider the time cost of experimentation when choosing between more or fewer GPUs.</li>
<li>For multi-node setups, prioritize data parallelism across nodes and leverage memory-saving techniques within each node to minimize communication overhead.</li>
</ul>
</section>
<section id="hyperparameter-tuning" class="level2">
<h2 class="anchored" data-anchor-id="hyperparameter-tuning">Hyperparameter Tuning</h2>
<ul>
<li>Fine-tuning is not always necessary, as many models perform well with default settings or prompt engineering.</li>
<li>Focus on finding a model and basic configuration that learns effectively before extensively optimizing hyperparameters.</li>
<li>Consider the specific requirements of the application; stylistic formatting may benefit from fine-tuning, while direct knowledge integration might be better served by context injection.</li>
</ul>
</section>
<section id="fine-tuning-vs.-alternative-customization-methods" class="level2">
<h2 class="anchored" data-anchor-id="fine-tuning-vs.-alternative-customization-methods">Fine-tuning vs.&nbsp;Alternative Customization Methods</h2>
<ul>
<li>Fine-tuning can be useful for customizing model behavior, but it’s not the only or always the best approach.</li>
<li>Explore alternative methods like prompt engineering, context injection, and retrieval-augmented generation.</li>
<li>Consider the trade-offs between fine-tuning efficiency, context length limitations, and the ability to incorporate external knowledge.</li>
</ul>
</section>
<section id="tpus-and-other-accelerators" class="level2">
<h2 class="anchored" data-anchor-id="tpus-and-other-accelerators">TPUs and Other Accelerators</h2>
<ul>
<li>TPUs offer high-speed memory access and interconnects, making them suitable for large-scale training.</li>
<li>The principles of memory management and optimization still apply, but the specific considerations might differ.</li>
<li>As dedicated hardware evolves, the lines between GPUs and other accelerators are blurring, with a focus on faster interconnects and larger memory pools.</li>
</ul>
</section>
<section id="optimizing-memory-usage-for-llama-models" class="level2">
<h2 class="anchored" data-anchor-id="optimizing-memory-usage-for-llama-models">Optimizing Memory Usage for LLaMa Models</h2>
<ul>
<li>Quantization (e.g., QLoRA) can significantly reduce memory footprint without major performance degradation.</li>
<li>Consider using 4-bit quantization for base weights to free up memory.</li>
<li>Adjust batch size and gradient accumulation steps to accommodate longer sequences.</li>
<li>Be mindful of the memory overhead associated with larger vocabularies and embedding layers.</li>
</ul>
</section>
<section id="understanding-sequence-length-and-memory-usage" class="level2">
<h2 class="anchored" data-anchor-id="understanding-sequence-length-and-memory-usage">Understanding Sequence Length and Memory Usage</h2>
<ul>
<li>Sequence length during training often represents a maximum value, and actual memory usage depends on the length of individual samples in a batch.</li>
<li>Padding to the maximum sequence length can waste compute resources.</li>
<li>Consider techniques like packing short sequences together or prioritizing longer sequences to optimize memory utilization.</li>
<li>Be aware of how truncating sequences during training might impact the model’s ability to learn effectively.</li>
</ul>
</section>
<section id="tips-for-quick-iteration-cycles" class="level2">
<h2 class="anchored" data-anchor-id="tips-for-quick-iteration-cycles">Tips for Quick Iteration Cycles</h2>
<ul>
<li>Start with smaller models and datasets to test code and ideas quickly.</li>
<li>Gradually increase model size and data complexity as needed.</li>
<li>Prioritize being able to evaluate results quickly, ideally within seconds or minutes.</li>
<li>Develop a workflow that allows for rapid testing and debugging without long waiting times.</li>
</ul>
</section>
<section id="choosing-the-right-tools-for-the-job" class="level2">
<h2 class="anchored" data-anchor-id="choosing-the-right-tools-for-the-job">Choosing the Right Tools for the Job</h2>
<ul>
<li>Off-the-shelf libraries like Axolotl and HuggingFace Trainer are convenient for standard training tasks.</li>
<li>For research and deeper understanding, consider using simpler training loops and libraries that provide more transparency and control.</li>
<li>Strive for a balance between ease of use and the ability to inspect and debug the underlying code.</li>
</ul>
</section>
<section id="cpu-offloading-and-gpu-memory-management" class="level2">
<h2 class="anchored" data-anchor-id="cpu-offloading-and-gpu-memory-management">CPU Offloading and GPU Memory Management</h2>
<ul>
<li>While CPU offloading exists, it’s often slow due to the speed difference between CPU and GPU RAM.</li>
<li>Explicitly manage CPU offloading rather than relying on automatic mechanisms.</li>
<li>Consider CPU offloading when dealing with very long sequences that exceed GPU memory capacity, even with quantization.</li>
</ul>
</section>
<section id="exploring-cpu-offloading-for-long-sequences" class="level2">
<h2 class="anchored" data-anchor-id="exploring-cpu-offloading-for-long-sequences">Exploring CPU Offloading for Long Sequences</h2>
<ul>
<li>CPU offloading might become more attractive as longer context lengths become increasingly important.</li>
<li>By storing weights on the CPU and transferring them to the GPU as needed, larger batches and longer sequences can be processed.</li>
<li>This approach trades off increased transfer time for the ability to handle more data within the GPU memory constraints.</li>
</ul>
</section>
<section id="curating-information-and-staying-up-to-date" class="level2">
<h2 class="anchored" data-anchor-id="curating-information-and-staying-up-to-date">Curating Information and Staying Up-to-Date</h2>
<ul>
<li>Develop a system for filtering and prioritizing information from various sources, such as colleagues, Twitter, and research papers.</li>
<li>Focus on areas of personal interest and relevance to current projects.</li>
<li>Actively seek out information that can be applied to real-world problems and experiments.</li>
</ul>
</section>
<section id="the-importance-and-joy-of-teaching" class="level2">
<h2 class="anchored" data-anchor-id="the-importance-and-joy-of-teaching">The Importance and Joy of Teaching</h2>
<ul>
<li>Teaching is a rewarding way to learn, solidify understanding, and contribute to the community.</li>
<li>Sharing knowledge through blog posts, tutorials, and presentations can benefit both the teacher and the audience.</li>
<li>Engaging with questions and feedback from learners can spark new ideas and research directions.</li>
</ul>
</section>
<section id="the-hardware-lottery-and-future-of-ai" class="level2">
<h2 class="anchored" data-anchor-id="the-hardware-lottery-and-future-of-ai">The Hardware Lottery and Future of AI</h2>
<ul>
<li>The dominance of GPUs and deep learning might be partly due to historical coincidence rather than inherent superiority.</li>
<li>The significant investment in GPU-optimized hardware and software creates inertia.</li>
<li>Breaking free from this paradigm requires making alternative approaches more accessible and efficient.</li>
<li>Innovations in GPU programming, new hardware architectures, and a willingness to explore unconventional ideas offer hope for a more diverse AI landscape.</li>
</ul>
</section>
<section id="balancing-research-and-practical-skills" class="level2">
<h2 class="anchored" data-anchor-id="balancing-research-and-practical-skills">Balancing Research and Practical Skills</h2>
<ul>
<li>Pursuing purely novel research and building practical applications are distinct but valuable pursuits.</li>
<li>For practical impact, focus on solving current problems, learning industry-standard tools, and gaining experience with real-world data.</li>
<li>For research breakthroughs, explore less crowded areas, challenge assumptions, and develop a deep understanding of the fundamentals.</li>
</ul>
</section>
<section id="choosing-projects-for-skill-development" class="level2">
<h2 class="anchored" data-anchor-id="choosing-projects-for-skill-development">Choosing Projects for Skill Development</h2>
<ul>
<li>Engaging in projects, even if they become less relevant with time, provides valuable learning experiences and demonstrates technical skills.</li>
<li>Focus on projects that allow you to learn transferable skills like data processing, model evaluation, and problem-solving.</li>
<li>Stay adaptable and continuously update your skillset as the field evolves.</li>
</ul>
</section>
<section id="llms-impacting-research" class="level2">
<h2 class="anchored" data-anchor-id="llms-impacting-research">LLMs Impacting Research</h2>
<ul>
<li>LLMs are already proving useful for tasks like paper retrieval, summarization, and knowledge extraction.</li>
<li>Tools like undermind.ai showcase the potential of LLMs for improving research workflows.
<ul>
<li><strong><a href="https://undermind.ai/home/">undermind.ai</a>:</strong> During each search, undermind.ai examines results in stages, and uses language models to make key decisions, such as recognizing crucial information and adapting the search strategy.</li>
</ul></li>
<li>Future research directions include exploring more sophisticated applications of LLMs for tasks like knowledge synthesis, hypothesis generation, and experimental design.
<ul>
<li><strong><a href="https://sakana.ai/">sakana.ai</a>:</strong> On a quest to create a new kind of foundation model based on nature-inspired intelligence.
<ul>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/SakanaAI/evolutionary-model-merge">Evolutionary Optimization of Model Merging Recipes</a></li>
<li><strong>Blog Post:</strong> <a href="https://sakana.ai/llm-squared/">Can LLMs invent better ways to train LLMs?</a>:</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="rapid-fire-qa-highlights" class="level2">
<h2 class="anchored" data-anchor-id="rapid-fire-qa-highlights">Rapid-Fire Q&amp;A Highlights</h2>
<section id="research-interests-and-coding-style" class="level3">
<h3 class="anchored" data-anchor-id="research-interests-and-coding-style">Research Interests and Coding Style</h3>
<ul>
<li><strong>Current Focus:</strong> While still interested in GANs and diffusion models, Johno’s primary focus has shifted to LLMs.</li>
<li><strong>Coding Style:</strong>
<ul>
<li>Uses tools like Copilot for boilerplate code.</li>
<li>Emphasizes clear, tutorial-like code for better Copilot integration and beginner comprehension.</li>
<li>Values explicitness over extreme code compression, especially when teaching.</li>
<li>Adopts a mix of notebooks (VS Code, Cursor, Jupyter Classic) and scripts depending on the project.
<ul>
<li><strong><a href="https://www.cursor.com/">Cursor</a>:</strong> The AI code editor</li>
</ul></li>
<li>Leverages keyboard shortcuts and learns from colleagues like Jeremy Howard for efficiency.</li>
</ul></li>
</ul>
</section>
<section id="quantization-and-long-context" class="level3">
<h3 class="anchored" data-anchor-id="quantization-and-long-context">Quantization and Long Context</h3>
<ul>
<li><strong>Quantization Overhead:</strong> While quantization methods like QLoRA reduce memory footprint, they introduce computational overhead due to decompression, sometimes impacting performance.</li>
<li><strong>Long Context Challenges:</strong> Initially, QLoRA faced memory efficiency issues with long context lengths compared to LoRA, potentially due to gradient checkpointing implementations.
<ul>
<li>This has been addressed to some extent.</li>
</ul></li>
<li><strong>Unexpected Behavior:</strong> Practical implementations often reveal unexpected behavior compared to theoretical calculations.
<ul>
<li>Bugs, precision errors, and data duplication can arise.</li>
</ul></li>
</ul>
</section>
<section id="bit-llms-and-hybrid-approaches" class="level3">
<h3 class="anchored" data-anchor-id="bit-llms-and-hybrid-approaches">1.58-bit LLMs and Hybrid Approaches</h3>
<ul>
<li><strong>1-bit and 1.58-bit LLMs:</strong> Microsoft’s research explored extreme weight compression using 1-bit (-1, 0, 1) representation, achieving workable but diminished performance.
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/2402.17764">The Era of 1-bit LLMs: All Large Language Models are in 1.58 Bits</a></li>
</ul></li>
<li><strong>Hybrid Approach Potential:</strong> Whitaker believes combining extreme quantization with techniques like LoRA adapters could offer a sweet spot between memory efficiency, speed, and accuracy.
<ul>
<li>Base weights in 1-bit or 2-bit.</li>
<li>LoRA adapters for fine-tuning and accuracy recovery.</li>
<li>Hardware-efficient kernels for low-bit operations.</li>
</ul></li>
<li><strong>Mobius Labs:</strong> Highlighted for their work on efficient kernels and proof-of-concept implementations of hybrid approaches.
<ul>
<li><strong>Homepage:</strong> <a href="https://www.mobiuslabs.com/">Mobius Labs</a>: Multimodal AI for the world’s scale.</li>
<li><strong>Blog Post:</strong> <a href="https://mobiusml.github.io/hqq_blog/">Half-Quadratic Quantization of Large Machine Learning Models</a></li>
</ul></li>
</ul>
</section>
<section id="alternative-architectures" class="level3">
<h3 class="anchored" data-anchor-id="alternative-architectures">Alternative Architectures</h3>
<ul>
<li><strong>Exploring Alternatives:</strong> While transformers dominate, alternative architectures like KAN, state-space models (SSMs), and recurrent models offer benefits in specific areas.
<ul>
<li><strong>State-Space Models:</strong>
<ul>
<li><strong>Paper:</strong> <a href="https://arxiv.org/abs/2312.00752">Mamba: Linear-Time Sequence Modeling with Selective State Spaces</a></li>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/state-spaces/mamba">mamba</a></li>
</ul></li>
<li><strong>KAN: Kolmogorov Arnold Networks:</strong>
<ul>
<li><strong>Paper: KAN:</strong> <a href="https://arxiv.org/abs/2404.19756">Kolmogorov-Arnold Networks</a></li>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/KindXiaoming/pykan">pykan</a></li>
</ul></li>
</ul></li>
<li><strong>SSMs and Long Sequences:</strong> SSMs show promise for tasks involving long sequences, such as text-to-speech and DNA analysis.</li>
<li><strong>Practical Implications:</strong> The emergence of viable alternatives provides practitioners with more tools. The core focus remains on performance and benchmark results.</li>
</ul>


</section>
</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/office-hours-006/</guid>
  <pubDate>Thu, 11 Jul 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Conference Talk 5: Napkin Math For Fine Tuning with Johno Whitaker</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-005/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<ul>
<li>Introduction</li>
<li>Good News &amp; Bad News</li>
<li>Training Neural Networks</li>
<li>Why are we copying data around?</li>
<li>Goal: Keep the GPU Fed</li>
<li>Napkin Math: Understanding Memory Usage</li>
<li>Napkin Math Code Demo</li>
<li>Optimizing LLM Training for Different Hardware</li>
<li>Q&amp;A Session</li>
<li>Recap</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled" title="Presentation Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Presentation Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Slides:</strong> <a href="https://docs.google.com/presentation/d/1Ye_6zeatCWkq-fx8A--yK34uwU8oC2YQtMSTV1DgkSI/">Napkin Math For Finetuning</a></li>
</ul>
</div>
</div>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<ul>
<li><strong>Goal:</strong> To provide insights into the factors influencing fine-tuning performance, enabling better decision-making in training models.</li>
<li><strong>Target audience:</strong> Individuals new to training models, particularly by fine-tuning existing large language models.</li>
<li><strong>Key questions addressed:</strong>
<ul>
<li>Factors affecting model performance.</li>
<li>Strategies for improving performance.</li>
<li>Reasons for memory limitations and slow training times.</li>
<li>Understanding and adjusting various parameters in configuration files.</li>
</ul></li>
<li><strong>Approach:</strong> Utilizing a “napkin math” approach to provide a general understanding of the concepts without delving into intricate mathematical details.</li>
<li><strong>Disclaimer:</strong> Emphasizes that the information presented is simplified for clarity and may not be entirely accurate due to the constantly evolving nature of AI implementations.</li>
</ul>
</section>
<section id="good-news-bad-news" class="level2">
<h2 class="anchored" data-anchor-id="good-news-bad-news">Good News &amp; Bad News</h2>
<ul>
<li><strong>Good news:</strong> The mathematical operations underlying model training are well-understood, enabling analysis and experimentation.</li>
<li><strong>Bad news:</strong>
<ul>
<li>Discrepancies can exist between research papers, code implementations, and framework-specific implementations.</li>
<li>The complexity of the underlying processes can be daunting.</li>
<li>Keeping track of all the details and nuances is challenging.</li>
<li>Multi-GPU setups introduce additional complexity</li>
</ul></li>
<li><strong>Key takeaway:</strong> While a simplified approach can be helpful, acknowledging the inherent complexities is essential for accurate analysis and problem-solving.</li>
</ul>
</section>
<section id="training-neural-networks" class="level2">
<h2 class="anchored" data-anchor-id="training-neural-networks">Training Neural Networks</h2>
<section id="training-loop" class="level4">
<h4 class="anchored" data-anchor-id="training-loop">Training Loop</h4>
<ul>
<li><strong>The core cycle:</strong> Load data, feed it through the model, generate an answer, evaluate its quality, and update the model accordingly.</li>
<li><strong>Language model context:</strong> The correct answer typically refers to the next word in a sequence, and predictions are represented as probabilities for potential next words.</li>
<li><strong>Fine-tuning data:</strong> Datasets used for fine-tuning contain instruction-response pairs, allowing the model to learn from desired output patterns.</li>
</ul>
</section>
<section id="on-computers" class="level4">
<h4 class="anchored" data-anchor-id="on-computers">On Computers</h4>
<ul>
<li><strong>Hardware components:</strong> Understanding the roles of CPU, GPU, RAM, and their interconnectivity is crucial for performance analysis.</li>
<li><strong>Memory hierarchy:</strong> Different memory types (e.g., CPU cache, RAM, hard drive) have varying access speeds, influencing data transfer times.</li>
</ul>
</section>
<section id="training-neural-networks-1" class="level4">
<h4 class="anchored" data-anchor-id="training-neural-networks-1">Training Neural Networks</h4>
<ul>
<li><strong>Factors affecting performance:</strong>
<ul>
<li><strong>Data loading:</strong> Reading data from storage.</li>
<li><strong>Model computation:</strong> Performing mathematical operations within the model’s layers.</li>
<li><strong>Parameter storage:</strong> Memory required to store model parameters (weights and biases).</li>
<li><strong>Gradient calculation and storage:</strong> Computing and storing gradients for model updates.</li>
<li><strong>Optimizer operations:</strong> Additional storage and computations for parameter optimization.</li>
</ul></li>
<li><strong>Key takeaway:</strong> Each step in the training loop incurs computational costs and memory demands, understanding these factors is crucial for optimization.</li>
</ul>
</section>
<section id="what-takes-up-time" class="level4">
<h4 class="anchored" data-anchor-id="what-takes-up-time">What takes up time?</h4>
<ul>
<li><strong>Computation:</strong> The number of mathematical operations performed.</li>
<li><strong>Memory management:</strong> Data transfer and storage within the memory hierarchy.</li>
</ul>
</section>
</section>
<section id="why-are-we-copying-data-around" class="level2">
<h2 class="anchored" data-anchor-id="why-are-we-copying-data-around">Why are we copying data around?</h2>
<ul>
<li><strong>Memory hierarchy and data transfer:</strong>
<ul>
<li><strong>Different memory types:</strong> CPU cache, RAM, GPU RAM, hard drives, etc., have varying speeds.</li>
<li><strong>Data movement:</strong> Copying data between these memory locations consumes time, impacting performance.</li>
</ul></li>
<li><strong>Optimizing data flow:</strong> Minimizing unnecessary data transfers and utilizing faster memory options are crucial for optimization.</li>
<li><strong>Multi-GPU and distributed training:</strong>
<ul>
<li><strong>Inter-GPU communication:</strong> Sharing data between GPUs can introduce latency.</li>
<li><strong>Network communication:</strong> In multi-node setups, communication over the network becomes a bottleneck.</li>
</ul></li>
</ul>
</section>
<section id="goal-keep-the-gpu-fed" class="level2">
<h2 class="anchored" data-anchor-id="goal-keep-the-gpu-fed">Goal: Keep the GPU Fed</h2>
<ul>
<li><strong>Goal:</strong> Continuously provide the GPU with data and instructions to avoid downtime.</li>
<li><strong>Ideal:</strong> Fit the entire model and data within the GPU RAM for fastest processing.</li>
<li><strong>Bottleneck:</strong> Large models and limited GPU memory can cause frequent data loading from slower memory, slowing down the training process.</li>
</ul>
<section id="tricks-to-improve-memory-efficiency" class="level3">
<h3 class="anchored" data-anchor-id="tricks-to-improve-memory-efficiency">Tricks to improve memory efficiency</h3>
<ul>
<li><strong>Techniques for keeping data closer to the GPU:</strong>
<ul>
<li><strong>Flash Attention and Fused Kernels:</strong> These reduce memory footprints and data transfers by changing how computations are performed.</li>
<li><strong>Gradient Checkpointing (Activation Checkpointing):</strong> Trades a small increase in compute time for significant memory savings by selectively recomputing activations during backpropagation.</li>
<li><strong>CPU Offloading:</strong> Leverages larger CPU RAM by temporarily storing parts of the model or data that are not actively being used on the GPU.</li>
<li><strong>LoRA (Low-Rank Adaptation):</strong>
<ul>
<li>Freeze most model parameters and train only a small set of adapter parameters.</li>
<li>Reduces memory requirements for gradients and optimizer states.</li>
</ul></li>
<li><strong>Quantization:</strong>
<ul>
<li>Represent model weights using fewer bits (e.g., 8-bit instead of 32-bit).</li>
<li>Reduces memory footprint, allowing for larger models or larger batch sizes.</li>
<li>Needs a little computation to dequantize</li>
</ul></li>
</ul></li>
</ul>
</section>
</section>
<section id="napkin-math-understanding-memory-usage" class="level2">
<h2 class="anchored" data-anchor-id="napkin-math-understanding-memory-usage">Napkin Math: Understanding Memory Usage</h2>
<section id="full-fine-tuning" class="level3">
<h3 class="anchored" data-anchor-id="full-fine-tuning">Full Fine-Tuning</h3>
<ul>
<li><strong>Problem:</strong> Full fine-tuning requires storing model parameters, gradients, and optimizer states, leading to high memory consumption.</li>
<li><strong>Explanation:</strong>
<ul>
<li>Each parameter in a model requires multiple bits (e.g., 32 bits) to represent its numeric value.</li>
<li>Gradients for each parameter are stored during training, consuming the same amount of memory as the parameters.</li>
<li>Optimizers like Adam store additional states (e.g., momentum), further increasing memory usage.</li>
</ul></li>
<li><strong>Example:</strong> A model with 100 million parameters using 32 bits per parameter consumes 400MB.
<ul>
<li>Considering gradients and optimizer states, the total memory usage can be 1.2GB or higher.</li>
</ul></li>
</ul>
</section>
<section id="lora-low-rank-adaptation" class="level3">
<h3 class="anchored" data-anchor-id="lora-low-rank-adaptation">LoRA (Low-Rank Adaptation)</h3>
<ul>
<li><strong>Solution:</strong> LoRA reduces memory usage by only training a small subset of parameters while keeping the rest frozen.
<ul>
<li><strong>Example:</strong> For every <code>1000 x 1000</code> matrix, add a <code>1000 x 32</code> matrix</li>
</ul></li>
<li><strong>Explanation:</strong>
<ul>
<li>Only trainable parameters require gradients and optimizer state storage.</li>
<li>LoRA adds a small number of trainable parameters (e.g., 1% of the model size) to each large matrix in the model.</li>
</ul></li>
<li><strong>Benefit:</strong> LoRA significantly reduces memory requirements, enabling training on larger models without fitting the entire model and its associated data into GPU memory.</li>
</ul>
</section>
<section id="quantization" class="level3">
<h3 class="anchored" data-anchor-id="quantization">Quantization</h3>
<ul>
<li><strong>Solution:</strong> Quantization reduces memory usage by representing model parameters with fewer bits.</li>
<li><strong>Explanation:</strong>
<ul>
<li>Instead of using 32 bits, quantization uses 8 bits or even 4 bits per parameter.</li>
</ul></li>
<li><strong>Benefit:</strong> Quantization shrinks the memory footprint of the model, allowing for larger model training or fitting on memory-constrained devices.</li>
<li><strong>Combination with LoRA (QLoRA):</strong> Quantize the frozen base model weights while keeping the LoRA parameters in higher precision for accurate training.</li>
</ul>
</section>
<section id="cpu-offloading-illustration" class="level3">
<h3 class="anchored" data-anchor-id="cpu-offloading-illustration">CPU Offloading Illustration</h3>
<ul>
<li><strong>Solution:</strong> Utilize CPU RAM to store model components and offload computations when GPU memory is insufficient.</li>
<li><strong>Explanation:</strong> Load and process one layer of the model on the GPU at a time, storing the remaining layers and intermediate data in CPU memory.</li>
<li><strong>Trade-off:</strong> While enabling larger model training, CPU offloading introduces latency due to data transfer between CPU and GPU.</li>
</ul>
</section>
<section id="llm-context-length-considerations" class="level3">
<h3 class="anchored" data-anchor-id="llm-context-length-considerations">LLM Context Length Considerations</h3>
<ul>
<li><strong>Problem:</strong> Large context lengths lead to increased memory consumption for storing activations.</li>
<li><strong>Explanation:</strong>
<ul>
<li>Each layer’s output activations need to be stored for gradient calculations, and these activations accumulate with longer input sequences.</li>
</ul></li>
<li><strong>Impact:</strong> Training LLMs with long context lengths requires careful memory management and might necessitate techniques like gradient checkpointing to reduce activation memory footprint.</li>
</ul>
</section>
</section>
<section id="napkin-math-code-demo" class="level2">
<h2 class="anchored" data-anchor-id="napkin-math-code-demo">Napkin Math Code Demo</h2>
<ul>
<li>Demonstrates using PyTorch’s memory tracking tools to analyze memory usage during training.</li>
</ul>
<section id="measuring-memory" class="level3">
<h3 class="anchored" data-anchor-id="measuring-memory">Measuring Memory</h3>
<ul>
<li><strong>Challenge:</strong> Limited GPU RAM restricts the size of models and batch sizes during training.</li>
<li><strong>Solution:</strong> Use PyTorch’s memory tracking capabilities to understand and optimize memory consumption.
<ul>
<li><a href="https://pytorch.org/docs/stable/generated/torch.cuda.max_memory_allocated.html"><code>torch.cuda.max_memory_allocated</code></a>: Provides a more accurate measure of actively used memory.</li>
<li><a href="https://pytorch.org/docs/stable/generated/torch.cuda.max_memory_reserved.html"><code>torch.cuda.max_memory_reserved</code></a>: Reflects total memory held by PyTorch, including pre-allocated space.</li>
</ul></li>
<li><strong>Key Takeaway:</strong> Actively monitor memory usage to make informed decisions about model size, batch size, and other hyperparameters.</li>
</ul>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> torch, gc, inspect, transformers</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> transformers <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> AutoModelForCausalLM, BitsAndBytesConfig</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> accelerate.utils <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> set_seed</span>
<span id="cb1-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> peft <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> prepare_model_for_kbit_training</span>
<span id="cb1-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> peft <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> LoraConfig, get_peft_model</span>
<span id="cb1-6"></span>
<span id="cb1-7">transformers.logging.set_verbosity_warning()</span></code></pre></div>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1">device <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cuda"</span></span></code></pre></div>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> cleanup():</span>
<span id="cb3-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""Free up memory and reset stats"""</span></span>
<span id="cb3-3">    gc.collect()</span>
<span id="cb3-4">    torch.cuda.empty_cache()</span>
<span id="cb3-5">    torch.cuda.reset_peak_memory_stats(device)</span>
<span id="cb3-6">cleanup()</span></code></pre></div>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> print_memory_stats():</span>
<span id="cb4-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""Print two different measures of GPU memory usage"""</span></span>
<span id="cb4-3">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Max memory allocated: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>torch<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>cuda<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>max_memory_allocated(device)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e9</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.2f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">GB"</span>)</span>
<span id="cb4-4">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># reserved (aka 'max_memory_cached') is ~the allocated memory plus pre-cached memory</span></span>
<span id="cb4-5">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Max memory reserved: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>torch<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>cuda<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>max_memory_reserved(device)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e9</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.2f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">GB"</span>) </span>
<span id="cb4-6">print_memory_stats()</span></code></pre></div>
<pre class="text"><code>Max memory allocated: 0.00GB
Max memory reserved: 0.00GB</code></pre>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># QLoRA Forward + Backward pass</span></span>
<span id="cb6-2"></span>
<span id="cb6-3">cleanup() <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Clean slate each time</span></span>
<span id="cb6-4"></span>
<span id="cb6-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Quantization config for QLoRA versions</span></span>
<span id="cb6-6">bnb_config <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> BitsAndBytesConfig(</span>
<span id="cb6-7">    load_in_4bit<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>,</span>
<span id="cb6-8">    bnb_4bit_compute_dtype<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>torch.bfloat16</span>
<span id="cb6-9">)</span>
<span id="cb6-10"></span>
<span id="cb6-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load the model</span></span>
<span id="cb6-12">model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> AutoModelForCausalLM.from_pretrained(</span>
<span id="cb6-13">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"TinyLlama/TinyLlama-1.1B-Chat-v1.0"</span>,</span>
<span id="cb6-14">    low_cpu_mem_usage<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>,</span>
<span id="cb6-15">    quantization_config<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>bnb_config,</span>
<span id="cb6-16">    use_cache<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb6-17">)</span>
<span id="cb6-18"></span>
<span id="cb6-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># This function has caused me lots of pain!</span></span>
<span id="cb6-20">model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> prepare_model_for_kbit_training(model)</span>
<span id="cb6-21"></span>
<span id="cb6-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add LoRA</span></span>
<span id="cb6-23">config <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> LoraConfig(</span>
<span id="cb6-24">    r<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>,</span>
<span id="cb6-25">    lora_alpha<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span>,</span>
<span id="cb6-26">    lora_dropout<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>,</span>
<span id="cb6-27">    bias<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>,</span>
<span id="cb6-28">    task_type<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CAUSAL_LM"</span></span>
<span id="cb6-29">)</span>
<span id="cb6-30">model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_peft_model(model, config)</span>
<span id="cb6-31"></span>
<span id="cb6-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Move to GPU</span></span>
<span id="cb6-33">model.to(device)</span>
<span id="cb6-34"></span>
<span id="cb6-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Prepare the data</span></span>
<span id="cb6-36">bs, ctx <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1200</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># batch size and context length</span></span>
<span id="cb6-37">data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> torch.randint(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10000</span>, (bs, ctx), device<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>device)</span>
<span id="cb6-38"></span>
<span id="cb6-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Forward pass</span></span>
<span id="cb6-40">output <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model(data, labels<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>data)</span>
<span id="cb6-41"></span>
<span id="cb6-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Backward pass</span></span>
<span id="cb6-43">output.loss.backward()</span>
<span id="cb6-44"></span>
<span id="cb6-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Print max memory stats</span></span>
<span id="cb6-46">print_memory_stats()</span>
<span id="cb6-47"></span>
<span id="cb6-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cleanup</span></span>
<span id="cb6-49"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">del</span> model, output, data</span>
<span id="cb6-50">cleanup()</span></code></pre></div>
<pre class="text"><code>Max memory allocated: 6.42GB
Max memory reserved: 7.09GB</code></pre>
</section>
<section id="memory-history" class="level3">
<h3 class="anchored" data-anchor-id="memory-history">Memory History</h3>
<ul>
<li><strong>Challenge:</strong> Identifying specific memory bottlenecks within the training process.</li>
<li><strong>Solution:</strong> PyTorch’s <code>record_memory_history</code> function helps visualize memory usage over time.</li>
<li><strong>Tool:</strong> Upload the generated pickle file to Pytorch’s Memory Visualizer for a detailed graphical representation.
<ul>
<li><strong>Link:</strong> <a href="https://pytorch.org/memory_viz">https://pytorch.org/memory_viz</a></li>
</ul></li>
<li><strong>Documentation:</strong> <a href="https://pytorch.org/docs/stable/torch_cuda_memory.html">Understanding CUDA Memory Usage</a></li>
<li><strong>Tutorial:</strong> <a href="https://pytorch.org/tutorials/intermediate/optimizer_step_in_backward_tutorial.html">How to save memory by fusing the optimizer step into the backward pass</a></li>
</ul>
<section id="benefits-of-memory-history-analysis" class="level4">
<h4 class="anchored" data-anchor-id="benefits-of-memory-history-analysis">Benefits of Memory History Analysis:</h4>
<ul>
<li><strong>Identify memory spikes:</strong> pinpoint operations causing significant memory increases.</li>
<li><strong>Understand memory allocation patterns:</strong> Visualize how memory usage evolves throughout the training process (forward pass, backward pass, gradient updates).</li>
<li><strong>Evaluate optimization strategies:</strong> Observe the impact of techniques like gradient checkpointing and quantization on memory consumption.</li>
</ul>
</section>
<section id="real-world-examples" class="level4">
<h4 class="anchored" data-anchor-id="real-world-examples">Real-World Examples</h4>
<ul>
<li><strong>Bug Detection:</strong> Unusually high memory spikes revealed incorrect implementations or unintended use of trainable parameters.</li>
<li><strong>Memory Leak Identification:</strong> Gradual memory escalation over multiple training steps pointed to issues with gradient or loss clearing.</li>
<li><strong>Kernel Optimization:</strong> Analysis highlighted inefficiencies in HuggingFace’s Transformers library, prompting a switch back to a more memory-efficient attention kernel.</li>
</ul>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1">cleanup()</span>
<span id="cb8-2"></span>
<span id="cb8-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load the model</span></span>
<span id="cb8-4">model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> AutoModelForCausalLM.from_pretrained(</span>
<span id="cb8-5">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"TinyLlama/TinyLlama-1.1B-Chat-v1.0"</span>,</span>
<span id="cb8-6">    low_cpu_mem_usage<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>,</span>
<span id="cb8-7">    quantization_config<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>bnb_config,</span>
<span id="cb8-8">    use_cache<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb8-9">)</span>
<span id="cb8-10">model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> prepare_model_for_kbit_training(model)</span>
<span id="cb8-11">model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_peft_model(model, config)</span>
<span id="cb8-12">model.to(device)</span>
<span id="cb8-13"></span>
<span id="cb8-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Prep the data</span></span>
<span id="cb8-15">data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> torch.randint(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10000</span>, (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>), device<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>device)</span>
<span id="cb8-16"></span>
<span id="cb8-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Start recording</span></span>
<span id="cb8-18">torch.cuda.memory._record_memory_history()</span>
<span id="cb8-19"></span>
<span id="cb8-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># FOrward and backwards pass</span></span>
<span id="cb8-21">output <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model(data, labels<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>data)</span>
<span id="cb8-22">output.loss.backward()</span>
<span id="cb8-23"></span>
<span id="cb8-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Save the snapshot and stop recording</span></span>
<span id="cb8-25">torch.cuda.memory._dump_snapshot(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"memory_snapshot.pickle"</span>)</span>
<span id="cb8-26">torch.cuda.memory._record_memory_history(enabled<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>) </span>
<span id="cb8-27"></span>
<span id="cb8-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Clean up</span></span>
<span id="cb8-29"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">del</span> model, output, data</span>
<span id="cb8-30">cleanup()</span></code></pre></div>
<p>Results viewed in <a href="https://pytorch.org/memory_viz">https://pytorch.org/memory_viz</a>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-005/images/image.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
</section>
</section>
<section id="optimizing-llm-training-for-different-hardware" class="level2">
<h2 class="anchored" data-anchor-id="optimizing-llm-training-for-different-hardware">Optimizing LLM Training for Different Hardware</h2>
<div class="callout callout-style-default callout-note callout-titled" title="Benchmarking QLoRA+FSDP">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Benchmarking QLoRA+FSDP
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Case Study:</strong> <a href="https://github.com/AnswerDotAI/fsdp_qlora/blob/main/benchmarks_03_2024.md">A Dual 3090 ‘Basement Rig’</a></li>
</ul>
</div>
</div>
<section id="gpu-limitations-data-transfer-bottleneck" class="level3">
<h3 class="anchored" data-anchor-id="gpu-limitations-data-transfer-bottleneck">GPU Limitations &amp; Data Transfer Bottleneck</h3>
<ul>
<li>Training LLMs often involves frequent data transfers between CPU memory and GPU memory.</li>
<li>In systems with limited GPU memory or slow interconnects, these transfers become a significant bottleneck.</li>
<li>Each layer of the model might require loading weights onto the GPU, performing computations, and then repeating the process for the next layer.</li>
</ul>
</section>
<section id="optimizing-for-memory-bound-scenarios" class="level3">
<h3 class="anchored" data-anchor-id="optimizing-for-memory-bound-scenarios">Optimizing for Memory-Bound Scenarios</h3>
<ul>
<li><strong>Goal:</strong> Minimize data transfer cycles by maximizing computation done per load.
<ul>
<li><strong>Example:</strong> Using a larger batch size allows processing more samples per load, reducing the total number of loads required.</li>
</ul></li>
<li><strong>Techniques:</strong>
<ul>
<li><strong>Quantization:</strong> Reduces the precision of model weights, making them faster to transfer and process.</li>
<li><strong>QLoRa:</strong> A memory-efficient training method that further reduces memory footprint compared to standard LoRa.</li>
</ul></li>
<li><strong>Example:</strong> The “3090 basement rig” showed significant speed improvements when using these techniques due to a larger achievable batch size.</li>
</ul>
</section>
<section id="impact-of-hardware-on-optimization-strategies" class="level3">
<h3 class="anchored" data-anchor-id="impact-of-hardware-on-optimization-strategies">Impact of Hardware on Optimization Strategies</h3>
<ul>
<li><p><strong>Memory Bandwidth Constraints:</strong> On slower machines or those with limited interconnect bandwidth, optimizing for memory bandwidth is crucial. Techniques like quantization and larger batch sizes yield significant gains.</p></li>
<li><p><strong>High-End Systems:</strong></p>
<ul>
<li>Systems like the H100 with fast NVLink interconnects and ample GPU memory minimize the data transfer bottleneck.</li>
<li>Model weights can reside in fast GPU memory, even across multiple GPUs, allowing for rapid loading.</li>
<li>Computation becomes the limiting factor, not memory bandwidth.</li>
</ul></li>
<li><p><strong>Example:</strong> In tests on an H100, increasing batch size or using quantization didn’t significantly impact runtime. The bottleneck was compute speed, not data transfer.</p></li>
</ul>
</section>
<section id="adapting-to-hardware-limitations" class="level3">
<h3 class="anchored" data-anchor-id="adapting-to-hardware-limitations">Adapting to Hardware Limitations</h3>
<ul>
<li><strong>Understand Your Hardware:</strong> Identify whether your system is memory-bound or compute-bound.</li>
<li><strong>Optimize Accordingly:</strong>
<ul>
<li><strong>Memory-Bound:</strong> Prioritize techniques like quantization, QLoRa, and increasing batch size to minimize data transfer.</li>
<li><strong>Compute-Bound:</strong> Focus on maximizing computational efficiency, as data transfer is less of a concern.</li>
</ul></li>
</ul>
</section>
</section>
<section id="qa-session" class="level2">
<h2 class="anchored" data-anchor-id="qa-session">Q&amp;A Session</h2>
<section id="cpu-offloading" class="level3">
<h3 class="anchored" data-anchor-id="cpu-offloading">CPU Offloading</h3>
<ul>
<li><p><strong>Question:</strong> Is CPU offloading useful for training or just inference?</p></li>
<li><p><strong>Answer:</strong> CPU offloading can be beneficial for training large models that exceed single GPU memory, even with multiple GPUs. It allows for larger batch sizes by storing model weights on the CPU and copying them to the GPU as needed. However, it’s less effective with smaller models or abundant GPU memory.</p></li>
<li><p><strong>Recommendation:</strong> Start with default settings and gradually introduce optimizations like quantization, batch size increases, data parallelism, and sharding, evaluating performance gains at each step.</p></li>
</ul>
</section>
<section id="quantization-sweet-spot" class="level3">
<h3 class="anchored" data-anchor-id="quantization-sweet-spot">Quantization Sweet Spot</h3>
<ul>
<li><p><strong>Question:</strong> How to find the optimal balance between compression and accuracy with quantization?</p></li>
<li><p><strong>Answer:</strong> Quantization below 4 bits can negatively impact accuracy. Combining 4-bit quantization with LoRA (adapters) often maintains performance comparable to no quantization.</p></li>
<li><p><strong>Recommendation:</strong> Use 4-bit quantization with LoRA as a starting point. Keep the LoRA in higher precision.</p></li>
</ul>
</section>
<section id="gradient-accumulation" class="level3">
<h3 class="anchored" data-anchor-id="gradient-accumulation">Gradient Accumulation</h3>
<ul>
<li><p><strong>Question:</strong> Clarification on gradient accumulation and micro batch size.</p></li>
<li><p><strong>Answer:</strong> Gradient accumulation simulates larger batch sizes by accumulating gradients over multiple smaller “micro batches” before updating model weights. This is useful when target batch sizes exceed GPU memory.</p></li>
<li><p><strong>Example:</strong> To achieve an effective batch size of 32 with a GPU limited to 8 samples, run 4 micro batches of 8 samples each before updating.</p></li>
<li><p><strong>Recommendation:</strong> Use gradient accumulation to reach a reasonable effective batch size (16, 32, 64), particularly when training with small batch sizes (1 or 2).</p></li>
</ul>
</section>
<section id="multiple-loras" class="level3">
<h3 class="anchored" data-anchor-id="multiple-loras">Multiple LoRAs</h3>
<ul>
<li><p><strong>Question:</strong> Do multiple LoRAs update the same or different model parameters?</p></li>
<li><p><strong>Answer:</strong> Typically, multiple LoRAs update the same weights. Each LoRA targets specific layers defined in its configuration.</p></li>
</ul>
</section>
</section>
<section id="recap" class="level2">
<h2 class="anchored" data-anchor-id="recap">Recap</h2>
<ul>
<li><strong>Balancing Act:</strong> Fine-tuning involves minimizing data movement and maximizing computation efficiency.</li>
<li><strong>Memory Management:</strong>
<ul>
<li><strong>LoRA:</strong> Reduces memory by training a smaller set of parameters.</li>
<li><strong>Quantization:</strong> Stores weights using fewer bits.</li>
<li><strong>Experimentation:</strong> Key to finding the right trade-offs between memory, speed, and accuracy.</li>
</ul></li>
<li><strong>Memory Allocation:</strong>
<ul>
<li><strong>Model Size:</strong> Larger models require more memory for weights and gradients.</li>
<li><strong>Batch Size and Context Length:</strong> Increasing either requires more memory for activations and intermediate values.</li>
</ul></li>
<li><strong>Memory Optimization Strategies:</strong>
<ul>
<li>Reduce context length if possible.</li>
<li>Quantize weights.</li>
<li>Offload to CPU.</li>
</ul></li>
<li><strong>Practical Estimation:</strong> Instead of complex formulas, estimate memory requirements based on measurements from a single layer and extrapolate for the entire model.</li>
</ul>


</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-005/</guid>
  <pubDate>Sun, 07 Jul 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Office Hours 5: LangChain/LangSmith</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/office-hours-005/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<section id="langsmiths-position-in-the-observability-market" class="level2">
<h2 class="anchored" data-anchor-id="langsmiths-position-in-the-observability-market">LangSmith’s Position in the Observability Market</h2>
<ul>
<li><strong>Question:</strong> How does LangSmith differentiate itself from other observability tools in the market?</li>
<li><strong>Answer:</strong>
<ul>
<li><strong>LLM Application Focus:</strong> LangSmith is specifically designed for LLM applications, offering specialized features like message and document visualization for debugging.
<ul>
<li><strong>Guide:</strong> <a href="https://docs.smith.langchain.com/how_to_guides/tracing/log_retriever_trace">Log retriever traces</a></li>
</ul></li>
<li><strong>Chains of LLM Calls:</strong> It emphasizes visualizing and analyzing entire chains of LLM calls and retrieval steps, which is crucial for complex applications.
<ul>
<li><strong>Tutorial:</strong> <a href="https://docs.smith.langchain.com/tutorials/Developers/observability">Add observability to your LLM application</a></li>
</ul></li>
<li><strong>Human-in-the-Loop Features:</strong> LangSmith prioritizes human interaction with features like:
<ul>
<li>Data visualization</li>
<li>Annotation queues for collaboration with subject matter experts</li>
<li>Side-by-side comparisons for evaluating improvements</li>
<li>Alignment of evaluators with human preferences</li>
<li><strong>How-to guides:</strong> <a href="https://docs.smith.langchain.com/how_to_guides/human_feedback">Human feedback</a></li>
</ul></li>
<li><strong>Pairwise Evaluation:</strong> LangSmith enables pairwise evaluation of models, leading to more stable results.
<ul>
<li><strong>Guide:</strong> <a href="https://docs.smith.langchain.com/how_to_guides/evaluation/evaluate_pairwise">Run pairwise evaluations</a></li>
</ul></li>
<li><strong>Strong Support and Openness:</strong> LangSmith is praised for its excellent support, responsive team, and open APIs that allow integration with other tools.</li>
</ul></li>
</ul>
</section>
<section id="langsmiths-support-for-human-annotation-and-action-items" class="level2">
<h2 class="anchored" data-anchor-id="langsmiths-support-for-human-annotation-and-action-items">LangSmith’s Support for Human Annotation and Action Items</h2>
<ul>
<li><strong>Question:</strong> What support does LangSmith offer for human annotation, annotation queues, and taking action on user feedback?</li>
<li><strong>Answer:</strong>
<ul>
<li><strong>Annotation Queues:</strong>
<ul>
<li>Data can be sent to annotation queues programmatically (e.g., based on user thumbs down) or manually.</li>
<li>Annotators can provide feedback, edit outputs, and add corrected examples to datasets.</li>
<li><strong>Guide:</strong> <a href="https://docs.smith.langchain.com/how_to_guides/human_feedback/annotation_queues">Use annotation queues</a></li>
</ul></li>
<li><strong>Datasets for Improvement:</strong> Corrected examples in datasets can be used for testing and future model improvement.
<ul>
<li><strong>Concept:</strong> <a href="https://docs.smith.langchain.com/concepts/evaluation#datasets-and-examples">Evaluation</a></li>
</ul></li>
<li><strong>Few-Shot Learning:</strong> LangSmith aims to be a platform for gathering few-shot example datasets, which can be used for personalization by pulling down the most similar examples during runtime.</li>
</ul></li>
</ul>
</section>
<section id="understanding-the-langchain-lang-namespace" class="level2">
<h2 class="anchored" data-anchor-id="understanding-the-langchain-lang-namespace">Understanding the LangChain “Lang” Namespace</h2>
<ul>
<li><strong>Question:</strong> What’s the difference between Langchain, Langsmith, Langgraph, Langflow, and Langserve?</li>
<li><strong>Answer:</strong>
<ul>
<li><strong><a href="https://www.langchain.com/">LangChain</a>:</strong> The foundational open-source package for building LLM apps, offering a runtime, abstractions, integrations, and off-the-shelf chains.</li>
<li><strong><a href="https://www.langflow.org/">LangFlow</a> (Not Langchain Company):</strong> A low-code/no-code UI built on top of LangChain.</li>
<li><strong><a href="https://python.langchain.com/v0.2/docs/langserve/">LangServe</a>:</strong> Simplifies deploying LangChain applications by exposing them as <a href="https://fastapi.tiangolo.com/">FastAPI</a> endpoints.</li>
<li><strong><a href="https://langchain-ai.github.io/langgraph/">LangGraph</a>:</strong> An extension of LangChain specifically designed for building and managing highly controllable agent-based workflows.</li>
<li><strong><a href="https://www.langchain.com/langsmith">LangSmith</a>:</strong> A standalone observability and testing tool for LLM apps, usable with or without LangChain.</li>
</ul></li>
</ul>
</section>
<section id="when-to-use-langchain-vs.-langgraph" class="level2">
<h2 class="anchored" data-anchor-id="when-to-use-langchain-vs.-langgraph">When to Use LangChain vs.&nbsp;LangGraph</h2>
<ul>
<li><strong>Question:</strong> When would you choose LangChain, and when is LangGraph the better option?</li>
<li><strong>Answer:</strong>
<ul>
<li><strong>LangChain:</strong> Ideal for beginners and for rapidly prototyping simple LLM applications with single LLM calls.</li>
<li><strong>LangGraph:</strong> Suited for advanced teams building complex, agentic workflows that require:
<ul>
<li>Cyclical agent execution</li>
<li>Fine-grained control</li>
<li>Built-in persistence</li>
<li>Streaming and background modes</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="popularity-of-typescript-vs.-python-in-llm-tools" class="level2">
<h2 class="anchored" data-anchor-id="popularity-of-typescript-vs.-python-in-llm-tools">Popularity of TypeScript vs.&nbsp;Python in LLM Tools</h2>
<ul>
<li><strong>Question:</strong> How does the usage of TypeScript APIs compare to Python APIs in LangChain and related tools?</li>
<li><strong>Answer:</strong>
<ul>
<li><strong>Python Dominates:</strong> Python remains more popular overall, possibly due to:
<ul>
<li>A larger community focused on LLM application prototyping.</li>
<li>Stronger ecosystem for data engineering tasks related to retrieval.</li>
</ul></li>
<li><strong>TypeScript for Generative UI:</strong> TypeScript is gaining traction, especially for applications involving generative UI, which is more challenging to implement in Python.</li>
</ul></li>
</ul>
</section>
<section id="generative-ui-explained" class="level2">
<h2 class="anchored" data-anchor-id="generative-ui-explained">Generative UI Explained</h2>
<ul>
<li><strong>Question:</strong> What is generative UI, and how does it work?</li>
<li><strong>Answer:</strong>
<ul>
<li><strong>Beyond Simple Chat:</strong> Generative UI enables LLMs to return more than text; they send UI components to create richer interfaces.</li>
<li><strong>Example:</strong> Instead of a list of weather data, an LLM might return a dynamic graph component with zoom and interaction capabilities.</li>
<li><strong>Vercel AI SDK Integration:</strong> LangChain now integrates with Vercel’s AI SDK for easier development of generative UI experiences.
<ul>
<li><strong><a href="https://sdk.vercel.ai/docs/introduction">Vercel AI SDK</a>:</strong> TypeScript toolkit designed to help developers build AI-powered applications with React, Next.js, Vue, Svelte, Node.js, and more.</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="defining-agentic-in-the-context-of-llms" class="level2">
<h2 class="anchored" data-anchor-id="defining-agentic-in-the-context-of-llms">Defining “Agentic” in the Context of LLMs</h2>
<ul>
<li><strong>Question:</strong> What does “agentic” mean in the context of LLMs, and is it a significant distinction?</li>
<li><strong>Answer:</strong>
<ul>
<li><strong>LLM in Control:</strong> An agentic system is one where the LLM controls the application’s control flow and decision-making process.</li>
<li><strong>More Than Function Calling:</strong> While related to function calling, agentic systems go further by enabling LLMs to loop, adapt, and make dynamic decisions about the next steps.</li>
<li><strong>Implications for Development:</strong> This distinction introduces new challenges and considerations in UX design, observability, and testing.</li>
</ul></li>
</ul>
</section>
<section id="langchainlangsmith-features-for-agentic-workflows" class="level2">
<h2 class="anchored" data-anchor-id="langchainlangsmith-features-for-agentic-workflows">LangChain/LangSmith Features for Agentic Workflows</h2>
<ul>
<li><strong>Question:</strong> What features in LangChain/LangSmith specifically aid in developing and managing agentic workflows?</li>
<li><strong>Answer:</strong>
<ul>
<li><strong>LangGraph’s Strengths:</strong>
<ul>
<li><strong>Controllability:</strong> LangGraph’s low-level design provides a high degree of control, which is essential for managing complex agents.</li>
<li><strong>Persistence and Human-in-the-Loop:</strong> Built-in persistence and easy access to execution history enable checkpointing, resuming from specific states, and human intervention when needed.</li>
</ul></li>
<li><strong>LangSmith’s Role:</strong> While not agent-specific, LangSmith’s observability features are particularly valuable for debugging and understanding complex, agentic applications.</li>
</ul></li>
</ul>
</section>
<section id="multiple-llm-collaboration-in-practice" class="level2">
<h2 class="anchored" data-anchor-id="multiple-llm-collaboration-in-practice">Multiple LLM Collaboration in Practice</h2>
<ul>
<li><strong>Question:</strong> Is the idea of using multiple LLMs with different strengths in a single application realistic?</li>
<li><strong>Answer:</strong>
<ul>
<li><strong>Planning and Execution:</strong> A common pattern involves a powerful LLM (e.g., GPT-4) for high-level planning and decision-making, while specialized or more cost-effective models (e.g., specialized code generation models) handle specific tasks.</li>
</ul></li>
</ul>
</section>
<section id="building-evaluation-sets-with-langsmith" class="level2">
<h2 class="anchored" data-anchor-id="building-evaluation-sets-with-langsmith">Building Evaluation Sets with LangSmith</h2>
<ul>
<li><strong>Question:</strong> What’s the most effective way to use LangSmith for creating evaluation sets?</li>
<li><strong>Answer:</strong>
<ol type="1">
<li><strong>Manual Seeding:</strong> Begin with a small set (5-10) of manually crafted examples.</li>
<li><strong>Production Feedback Loop:</strong> Integrate with production logs to capture real-user interactions and identify edge cases.</li>
<li><strong>Iterative Refinement:</strong>
<ul>
<li>Manually add challenging or interesting cases to the dataset.</li>
<li>Encourage user feedback and incorporate relevant examples.</li>
<li>Consider synthetic data generation to expand the dataset, but prioritize human review and labeling.</li>
</ul></li>
</ol></li>
<li><strong>Concepts:</strong> <a href="https://docs.smith.langchain.com/concepts/evaluation">Evaluation</a></li>
<li><strong>How-to guides:</strong> <a href="https://docs.smith.langchain.com/how_to_guides/evaluation">Evaluation</a></li>
<li><strong>Tutorial:</strong> <a href="https://docs.smith.langchain.com/tutorials/Developers/evaluation">Evaluate your LLM application</a></li>
</ul>
</section>
<section id="recommended-stack-for-full-stack-ml-engineers" class="level2">
<h2 class="anchored" data-anchor-id="recommended-stack-for-full-stack-ml-engineers">Recommended Stack for Full-Stack ML Engineers</h2>
<ul>
<li><strong>Question:</strong> What’s a good technology stack for Python-centric ML engineers who want to build and ship full-stack applications?</li>
<li><strong>Answer:</strong>
<ul>
<li><strong>Python-First Options:</strong>
<ul>
<li><strong><a href="https://streamlit.io/">Streamlit</a>/<a href="https://www.gradio.app/">Gradio</a>:</strong> Excellent for rapid prototyping and simpler applications.</li>
<li><strong><a href="https://python.langchain.com/v0.2/docs/templates/">LangChain Templates</a>:</strong> Explore and adapt existing LangChain repositories with Python backends.</li>
<li><strong><a href="https://github.com/langchain-ai/langserve">LangServe</a>:</strong> Easily deploy LangChain apps.</li>
</ul></li>
<li><strong>Long-Term Goal:</strong> Aim to become proficient in 2-3 languages (Python, JavaScript/TypeScript, SQL) for greater flexibility and control over the entire application stack.</li>
<li><strong>Tips:</strong>
<ul>
<li>Leverage LLMs (like ChatGPT) to assist with JavaScript/TypeScript code generation and understanding.</li>
<li>Don’t shy away from forking and modifying existing repositories to learn and adapt.</li>
</ul></li>
</ul></li>
</ul>


</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/office-hours-005/</guid>
  <pubDate>Sat, 06 Jul 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Office Hours 4: Modal with Charles Frye</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/office-hours-004/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<section id="understanding-modal" class="level2">
<h2 class="anchored" data-anchor-id="understanding-modal">Understanding Modal</h2>
<ul>
<li><strong>ELI5:</strong> Modal allows users to run their Python code in the cloud effortlessly.</li>
<li><strong>In-depth:</strong> Modal is a remote procedure call (RPC) framework designed for Python, particularly excelling in data-intensive workloads like those involving large models or datasets.</li>
<li><strong>Advantages over Traditional Cloud Functions (AWS Lambda, Google Cloud Functions):</strong>
<ul>
<li><strong>Focus:</strong> Handles compute-heavy and data-intensive tasks more effectively.</li>
<li><strong>Simplicity:</strong> Removes the need for server management.</li>
<li><strong>Scalability:</strong> Scales resources dynamically based on demand.</li>
</ul></li>
<li><strong>Key Features:</strong>
<ul>
<li>Seamless local development with automatic code deployment to the cloud.</li>
<li>Simplified parallel processing and scaling.</li>
<li>Integration with popular frameworks like <a href="https://fastapi.tiangolo.com/">FastAPI</a>.</li>
</ul></li>
<li><strong>Founders’ Vision:</strong> Address common infrastructure challenges faced by data scientists and ML practitioners, emphasizing rapid development cycles and feedback loops.</li>
</ul>
</section>
<section id="startup-times-and-optimization" class="level2">
<h2 class="anchored" data-anchor-id="startup-times-and-optimization">Startup Times and Optimization</h2>
<ul>
<li><strong>Concern:</strong> Modal’s startup time compared to traditional server-based solutions.</li>
<li><strong>Modal’s Performance:</strong>
<ul>
<li>Container startup (Docker run): 1-2 seconds (50th percentile startup time).</li>
<li>Slowdown occurs when environment setup requires loading large elements into memory (e.g., language model weights).</li>
</ul></li>
<li><strong>Solutions for Faster Startup:</strong>
<ul>
<li><strong>Keep Warm:</strong> Leave applications running for minimal latency, especially crucial for GPU-bound tasks. (Trade-off: potentially higher cost for idle resources).
<ul>
<li><a href="https://modal.com/docs/guide/cold-start#keep-containers-warm-for-longer-with-container_idle_timeout">Keep containers warm for longer with <code>container_idle_timeout</code></a></li>
</ul></li>
<li><strong>CUDA Checkpointing:</strong> New feature under integration, expected to accelerate subsequent invocations.
<ul>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/NVIDIA/cuda-checkpoint">cuda-checkpoint</a></li>
</ul></li>
<li><strong>CPU Tasks:</strong> Easily sliced and diced, making them cost-effective in keep-warm mode due to minimal resource consumption during idle periods.</li>
<li><strong>Optimization Potential:</strong> The LLM fine-tuning repo hasn’t been fully optimized for boot times; improvements are possible.
<ul>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/modal-labs/llm-finetuning">llm-finetuning</a></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="local-development-and-modal-integration" class="level2">
<h2 class="anchored" data-anchor-id="local-development-and-modal-integration">Local Development and Modal Integration</h2>
<ul>
<li><strong>Challenge:</strong> Integrating a complex FastAPI application with local databases and debugging tools, then deploying it seamlessly to Modal.</li>
<li><strong>Thin Client Approach:</strong>
<ul>
<li>Modal examples typically employ a thin client architecture for simplicity in dependency management.</li>
<li>Local development within the thin client can be limited due to the absence of specific dependencies.</li>
</ul></li>
<li><strong>Solutions:</strong>
<ul>
<li><strong>Modal’s Remote Development Tools:</strong> Shell access, VS Code integration, and JupyterLab instances within Modal’s environment.
<ul>
<li><a href="https://modal.com/docs/reference/cli/launch#modal-launch"><code>modal launch</code></a>: Open a serverless app instance on Modal.
<ul>
<li><a href="https://modal.com/docs/reference/cli/launch#modal-launch-jupyter"><code>modal launch jupyter</code></a>: Start Jupyter Lab on Modal.</li>
<li><a href="https://modal.com/docs/reference/cli/launch#modal-launch-jupyter"><code>modal launch vscode</code></a>: Start Visual Studio Code on Modal.</li>
</ul></li>
<li><a href="https://modal.com/docs/reference/cli/shell#modal-shell"><code>modal shell</code></a>: Run an interactive shell inside a Modal image.</li>
</ul></li>
<li><strong>Thick Client Architecture:</strong>
<ul>
<li>Build a local environment mirroring the Modal environment.</li>
<li>Utilize tools like Dockerfiles, requirements.txt, poetry, or conda for consistent dependency management.</li>
</ul></li>
<li><strong>Resource:</strong> Explore the <code>awesome-modal</code> repository on GitHub for production-ready examples, some utilizing a thicker client approach.
<ul>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/modal-labs/awesome-modal">awesome-modal</a></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="iterative-development-workflow" class="level2">
<h2 class="anchored" data-anchor-id="iterative-development-workflow">Iterative Development Workflow</h2>
<ul>
<li><strong>Challenge:</strong> Fine-tuning models locally on a small scale with debugging and then scaling up on Modal with a full dataset and larger models.</li>
<li><strong>Recommendations:</strong>
<ul>
<li><strong><a href="https://modal.com/docs/reference/modal.Image"><code>modal.Image</code></a> Class:</strong>
<ul>
<li>Base class for container images to run functions in.</li>
<li>Utilize for environment definition, ensuring consistency between local and remote setups.</li>
<li><strong>Guide:</strong> <a href="https://modal.com/docs/guide/custom-container">Custom containers</a></li>
</ul></li>
<li><strong>Dependency Management:</strong> Leverage tools like <code>pip freeze</code> and poetry for tighter control over environments.</li>
<li><strong>Hardware Considerations:</strong> Be mindful of potential discrepancies between local and Modal GPUs.</li>
</ul></li>
</ul>
</section>
<section id="modal-for-cpu-intensive-workloads" class="level2">
<h2 class="anchored" data-anchor-id="modal-for-cpu-intensive-workloads">Modal for CPU-Intensive Workloads</h2>
<ul>
<li><strong>Question:</strong> Is Modal suitable for parallel CPU-bound tasks rather than just GPU acceleration?</li>
<li><strong>Answer:</strong> Yes, Modal is highly recommended for CPU-intensive and parallelizable tasks.</li>
<li><strong>Reasons:</strong>
<ul>
<li><strong>Cost-Effectiveness:</strong> CPUs are cheaper on Modal due to efficient time-slicing and readily available resources.</li>
<li><strong>Simplified Parallelization:</strong> Modal’s architecture and tools streamline the execution of parallel CPU workloads.</li>
</ul></li>
</ul>
</section>
<section id="cost-comparison-and-value-proposition" class="level2">
<h2 class="anchored" data-anchor-id="cost-comparison-and-value-proposition">Cost Comparison and Value Proposition</h2>
<ul>
<li><strong>Concern:</strong> Fine-tuning on Modal appears more expensive than platforms like Jarvis Labs.</li>
<li><strong>Modal’s Pricing:</strong>
<ul>
<li>Transparent, based on underlying cloud provider costs.</li>
<li>No hidden fees or inflated pricing strategies.</li>
</ul></li>
<li><strong>When Modal Wins:</strong>
<ul>
<li><strong>High Operational Overhead:</strong> Modal excels when the effort of managing servers (spinning up, down, utilization tracking) outweighs the raw compute cost.</li>
<li><strong>Unpredictable Workloads:</strong> Serverless nature shines when demand fluctuates, and predicting utilization is challenging.</li>
<li><strong>Scalability Needs:</strong> Modal simplifies scaling to thousands of GPUs, surpassing the limitations of individual users or smaller organizations.</li>
<li><strong>GPU Accessibility:</strong> Modal offers readily available GPUs, circumventing the challenges of procurement and allocation.</li>
<li><strong>Developer Experience:</strong> Streamlined workflow and reduced operational burden can justify a potential price premium for some users.</li>
</ul></li>
</ul>
</section>
<section id="understanding-modals-cost-structure" class="level2">
<h2 class="anchored" data-anchor-id="understanding-modals-cost-structure">Understanding Modal’s Cost Structure</h2>
<ul>
<li><strong>Question:</strong> How can a keep-warm FastAPI app on Modal cost only 30 cents per month when CPU core pricing suggests a much higher cost?</li>
<li><strong>Explanation:</strong>
<ul>
<li><strong>Time-Slicing:</strong> CPUs are shared efficiently, and Modal only charges for actual usage, not idle time.</li>
<li><strong>Low Utilization:</strong> Web apps typically have low average CPU utilization, further reducing costs.</li>
<li><strong>RAM-Based Pricing:</strong> During idle periods, charges are primarily determined by RAM usage, which is often minimal for lightweight apps.</li>
</ul></li>
</ul>
</section>
<section id="streaming-output-from-llms" class="level2">
<h2 class="anchored" data-anchor-id="streaming-output-from-llms">Streaming Output from LLMs</h2>
<ul>
<li><strong>Question:</strong> Availability of examples showcasing streamed output from LLMs in FastAPI apps.</li>
<li><strong>Answer:</strong>
<ul>
<li>Examples for streaming and FastAPI integration are available in the documentation:
<ul>
<li><a href="https://modal.com/docs/examples/vllm_mixtral">Fast inference with vLLM (Mixtral 8x7B)</a></li>
<li><a href="https://modal.com/docs/examples/llm-voice-chat">QuiLLMan: Voice Chat with LLMs</a></li>
</ul></li>
</ul></li>
<li><strong>Modal’s Async Support:</strong> Modal simplifies asynchronous programming, making streaming implementations easier.
<ul>
<li><strong>Guide:</strong> <a href="https://modal.com/docs/guide/async">Asynchronous API usage</a></li>
</ul></li>
</ul>
</section>
<section id="code-portability-and-modal-dependency" class="level2">
<h2 class="anchored" data-anchor-id="code-portability-and-modal-dependency">Code Portability and Modal Dependency</h2>
<ul>
<li><strong>Concern:</strong> Modal’s decorators might hinder code portability to other environments.</li>
<li><strong>Response:</strong>
<ul>
<li>While Modal promotes a specific architecture for performance and cost optimization, code can be written to minimize tight coupling.</li>
<li>Decorators can be removed or bypassed if needed to port code to different environments.</li>
<li>Achieving portability often involves trade-offs in performance and cost-effectiveness.</li>
</ul></li>
</ul>
</section>
<section id="data-privacy" class="level2">
<h2 class="anchored" data-anchor-id="data-privacy">Data Privacy</h2>
<ul>
<li><strong>Question:</strong> Modal’s policy on data privacy and potential use of user data for model training.</li>
<li><strong>Answer:</strong>
<ul>
<li><strong>Commitment to Security:</strong> Modal is <a href="https://modal.com/blog/soc2">SOC 2 compliant</a> and working towards SOC 2 Type 2 certification, demonstrating a high standard of data security.</li>
<li><strong>User Data Protection:</strong> Modal treats user application data as confidential. Permission is sought before reviewing data, even for support purposes.</li>
<li><strong>No User Data Training:</strong> Modal, as an infrastructure company, doesn’t use customer data for training internal models.</li>
</ul></li>
</ul>
</section>
<section id="running-databases-on-modal" class="level2">
<h2 class="anchored" data-anchor-id="running-databases-on-modal">Running Databases on Modal</h2>
<ul>
<li><strong>Question:</strong> Feasibility of running a key-value store (e.g., <a href="https://github.com/google/leveldb">LevelDB</a>) on Modal for a development web endpoint.</li>
<li><strong>Recommendations:</strong>
<ul>
<li><strong>Modal’s Built-in Solutions:</strong>
<ul>
<li><a href="https://modal.com/docs/reference/cli/dict"><code>modal.Dict</code></a>: Offers a persistent, distributed key-value store accessible to all Modal functions.</li>
<li><a href="https://modal.com/docs/reference/cli/queue"><code>modal.Queue</code></a>: Provides a distributed queue system similar to <a href="https://redis.io/">Redis</a>.</li>
</ul></li>
<li><strong>Alternative Approach for Analytic Databases:</strong>
<ul>
<li>Host databases externally (not ideal on Modal).</li>
<li>Mount cloud storage (e.g., S3) containing data in formats like Parquet or Arrow to Modal functions.</li>
<li>Utilize libraries like <a href="https://duckdb.org/">DuckDB</a> for efficient querying within the Modal environment.</li>
<li><strong>Example:</strong> <a href="https://modal.com/docs/examples/s3_bucket_mount#analyze-nyc-yellow-taxi-data-with-duckdb-on-parquet-files-from-s3">Analyze NYC yellow taxi data with DuckDB on Parquet files from S3</a></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="balancing-cost-and-uptime-for-gpu-inference" class="level2">
<h2 class="anchored" data-anchor-id="balancing-cost-and-uptime-for-gpu-inference">Balancing Cost and Uptime for GPU Inference</h2>
<ul>
<li><strong>Question:</strong> Finding the sweet spot between cost and uptime for GPU inference when needing varying levels of availability.</li>
<li><strong>Rule of Thumb:</strong>
<ul>
<li>Modal tends to be more cost-effective when utilization is 60% or lower.</li>
<li>Consider factors like acceptable latency and workload characteristics (batch jobs vs.&nbsp;real-time requests).</li>
</ul></li>
</ul>
</section>
<section id="local-vs.-cloud-workload-distribution" class="level2">
<h2 class="anchored" data-anchor-id="local-vs.-cloud-workload-distribution">Local vs.&nbsp;Cloud Workload Distribution</h2>
<ul>
<li><strong>Question:</strong> Deciding when to utilize a local GPU (e.g., RTX 4090) versus offloading to Modal, considering cost and time efficiency.</li>
<li><strong>Workload Breakdown:</strong>
<ul>
<li><strong>Inference:</strong> Local GPUs are well-suited due to typically small batch sizes, making VRAM less of a constraint.</li>
<li><strong>Evaluations:</strong> Larger eval sets might benefit from cloud GPUs for faster throughput, especially when running multiple evaluations concurrently.</li>
<li><strong>Fine-tuning:</strong> Often memory-intensive due to gradients and optimizer states. Cloud GPUs provide ample VRAM and simplify the use of techniques like sharding or larger batch sizes.</li>
</ul></li>
<li><strong>Don’t undervalue your time:</strong> Spending a little more on faster cloud compute can save a significant amount of time versus trying to run everything locally on a single GPU.</li>
</ul>
</section>
<section id="quick-qa" class="level2">
<h2 class="anchored" data-anchor-id="quick-qa">Quick Q&amp;A</h2>
<ul>
<li><strong>Autoscaling:</strong> Modal supports autoscaling with configurable parameters.
<ul>
<li><strong>Explanation:</strong> <a href="https://modal.com/docs/guide/concurrent-inputs#how-does-autoscaling-work-on-modal">How does autoscaling work on Modal?</a></li>
<li><strong>Auto-scaling LLM inference endpoints:</strong> <a href="https://modal.com/docs/examples/text_generation_inference">Hosting any LLaMA 3 model with Text Generation Inference (TGI)</a></li>
</ul></li>
<li><strong>Docker Image Access:</strong> Downloading built Docker images is not currently supported. Users can build and provide their own images.</li>
<li><strong>Inference Serving:</strong>
<ul>
<li><a href="https://github.com/vllm-project/vllm">vLLM</a> for its ease of use and rapid development</li>
<li><a href="https://github.com/NVIDIA/TensorRT-LLM">TensorRT-LLM</a> is a potentially faster but more involved alternative.</li>
</ul></li>
<li><strong>Demo Preparation:</strong> “Hello World” and “TRT LLM” examples are good starting points.
<ul>
<li><strong>Example:</strong> <a href="https://modal.com/docs/examples/hello_world">Hello, world!</a></li>
<li><strong>Example:</strong> <a href="https://modal.com/docs/examples/trtllm_llama">Serverless TensorRT-LLM (LLaMA 3 8B)</a></li>
</ul></li>
</ul>


</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/office-hours-004/</guid>
  <pubDate>Sat, 06 Jul 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Conference Talk 4: Inspect - An OSS Framework for LLM Evals</title>
  <dc:creator>Christian Mills</dc:creator>
  <link>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-004/</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This post is part of the following series:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="../../../series/notes/mastering-llms-course-notes.html"><strong>Mastering LLMs Course Notes</strong></a>: My notes from the course <strong>Mastering LLMs: A Conference For Developers &amp; Data Scientists</strong> by <strong>Hamel Husain</strong> and <strong>Dan Becker</strong>.</li>
</ul>
</div>
</div>
<ul>
<li>Inspect AI: A Framework for Evaluating LLMs</li>
<li>Hello World Example</li>
<li>Core Concepts</li>
<li>Honeycomb Dataset Example</li>
<li>Composition</li>
<li>Tool Use</li>
<li>Agents and Tools</li>
<li>Logging</li>
<li>Models</li>
<li>Workflow</li>
<li>Q&amp;A Session</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled" title="Presentation Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Presentation Resources
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/jjallaire/inspect-llm-workshop">inspect-llm-workshop</a></li>
<li><strong>Slides:</strong> <a href="https://raw.githubusercontent.com/jjallaire/inspect-llm-workshop/main/slides/intro-to-inspect.pdf">Intro to Inspect</a></li>
</ul>
</div>
</div>
<section id="inspect-ai-a-framework-for-evaluating-llms" class="level2">
<h2 class="anchored" data-anchor-id="inspect-ai-a-framework-for-evaluating-llms">Inspect AI: A Framework for Evaluating LLMs</h2>
<ul>
<li>Inspect AI is a Python package for creating LLM evaluations developed through a collaboration between J.J. Allaire and the <a href="https://www.aisi.gov.uk/">UK AI Safety Institute</a>.</li>
<li>Designed to address the limitations of existing evaluation tools for developing more complex evals.</li>
<li>Focuses on providing a great experience for developing evals that can be reproducibly run at scale.</li>
<li><strong>Github Repository:</strong> <a href="https://github.com/UKGovernmentBEIS/inspect_ai">UKGovernmentBEIS/inspect_ai</a></li>
<li><strong>Documentation:</strong> <a href="https://ukgovernmentbeis.github.io/inspect_ai">https://ukgovernmentbeis.github.io/inspect_ai</a></li>
<li><strong>Installation:</strong>
<ul>
<li><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install inspect-ai</span></code></pre></div></li>
</ul></li>
<li><strong>VS Code Extension:</strong>
<ul>
<li><strong>Marketplace:</strong> <a href="https://marketplace.visualstudio.com/items?itemName=ukaisi.inspect-ai">Inspect AI</a></li>
<li><strong>Source Code:</strong> <a href="https://github.com/UKGovernmentBEIS/inspect_ai/tree/main/tools/vscode">inspect-vscode</a></li>
</ul></li>
</ul>
</section>
<section id="hello-world-example" class="level2">
<h2 class="anchored" data-anchor-id="hello-world-example">Hello World Example</h2>
<ul>
<li><strong>Documentation:</strong> <a href="https://ukgovernmentbeis.github.io/inspect_ai/#sec-hello-inspect">Hello, Inspect</a></li>
</ul>
<div class="sourceCode" id="annotated-cell-1" style="background: #f1f3f5;"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><span id="annotated-cell-1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> inspect_ai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Task, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">eval</span>, task</span>
<span id="annotated-cell-1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> inspect_ai.dataset <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> example_dataset</span>
<span id="annotated-cell-1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> inspect_ai.scorer <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> model_graded_fact</span>
<span id="annotated-cell-1-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> inspect_ai.solver <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> (               </span>
<span id="annotated-cell-1-5">  chain_of_thought, generate, self_critique   </span>
<span id="annotated-cell-1-6">)                                             </span>
<span id="annotated-cell-1-7"></span>
<span id="annotated-cell-1-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@task</span></span>
<span id="annotated-cell-1-9"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> theory_of_mind():</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-1-10" class="code-annotation-target">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> Task(</span>
<span id="annotated-cell-1-11">        dataset<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>example_dataset(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"theory_of_mind"</span>), </span>
<span id="annotated-cell-1-12">        plan<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-1-13" class="code-annotation-target">          chain_of_thought(),</span>
<span id="annotated-cell-1-14">          generate(),</span>
<span id="annotated-cell-1-15">          self_critique()</span>
<span id="annotated-cell-1-16">        ],</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-1-17" class="code-annotation-target">        scorer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>model_graded_fact()</span>
<span id="annotated-cell-1-18">    )</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-1" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="10" data-code-annotation="1">The <code>Task</code> object brings together the dataset, solvers, and scorer, and is then evaluated using a model.</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="13,14,15" data-code-annotation="2">In this example we are chaining together three standard solver components. It’s also possible to create a more complex custom solver that manages state and interactions internally.</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="17" data-code-annotation="3">Since the output is likely to have pretty involved language, we use a model for scoring.</span>
</dd>
</dl>
</section>
<section id="core-concepts" class="level2">
<h2 class="anchored" data-anchor-id="core-concepts">Core Concepts</h2>
<ul>
<li><strong>Dataset:</strong> List of inputs for the LLM
<ul>
<li>Usually includes targets (e.g., correct answers)</li>
</ul></li>
<li><strong>Solvers:</strong> Pipelines that execute the evaluation
<ul>
<li>Includes functions that transform the dataset inputs, call the model, and act on the model output</li>
<li>Can include things like prompt engineering and multi-turn dialogue</li>
<li>Can be composed together as layers, or can be a single layer with higher internal complexity</li>
</ul></li>
<li><strong>Scores:</strong> Evaluates the output of solvers
<ul>
<li>Ranges from simple text comparisons to model-graded assessments using custom rubrics.</li>
</ul></li>
</ul>
</section>
<section id="honeycomb-dataset-example" class="level2">
<h2 class="anchored" data-anchor-id="honeycomb-dataset-example">Honeycomb Dataset Example</h2>
<ul>
<li><strong>Jupyter Notebook:</strong> <a href="https://github.com/jjallaire/inspect-llm-workshop/blob/main/honeycomb/queries.ipynb">honeycomb/queries.ipynb</a></li>
<li><strong>Dataset:</strong> <a href="https://github.com/jjallaire/inspect-llm-workshop/blob/main/honeycomb/queries.csv">queries.csv</a>
<ul>
<li>~2,300 example queries (along with per-query column schemas generated offline via RAG)</li>
</ul></li>
<li><strong>Scoring Methods:</strong>
<ul>
<li><strong>validate:</strong> score using the validity checker: <a href="https://github.com/jjallaire/inspect-llm-workshop/blob/main/honeycomb/utils.py">utils.py</a></li>
<li><strong>critique:</strong> score using the critique prompt: <a href="https://github.com/jjallaire/inspect-llm-workshop/blob/main/honeycomb/critique.txt">critique.txt</a></li>
</ul></li>
<li><strong>Process:</strong>
<ol type="1">
<li>Load the dataset.</li>
<li>Define a pipeline that includes prompt engineering, model calling, and evaluation.</li>
<li>Apply a scoring function.</li>
</ol></li>
</ul>
<section id="dataset" class="level3">
<h3 class="anchored" data-anchor-id="dataset">Dataset</h3>
<ul>
<li><strong>Documentation:</strong> <a href="https://ukgovernmentbeis.github.io/inspect_ai/datasets.html">Datasets</a></li>
<li>Inspect uses a standard schema for Datasets
<ul>
<li>We map the raw data into that schema when reading it</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>“columns” are saved as metadata so we can use them for prompt engineering</li>
</ul>
</div>
</div>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> inspect_ai.dataset <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> csv_dataset, FieldSpec</span>
<span id="cb2-2"></span>
<span id="cb2-3">dataset <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> csv_dataset(</span>
<span id="cb2-4">    csv_file<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"queries.csv"</span>,</span>
<span id="cb2-5">    sample_fields<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>FieldSpec(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user_input"</span>, metadata<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"columns"</span>]),</span>
<span id="cb2-6">    shuffle<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span></span>
<span id="cb2-7">)</span></code></pre></div>
</section>
<section id="solver" class="level3">
<h3 class="anchored" data-anchor-id="solver">Solver</h3>
<ul>
<li><p><strong>Documentation:</strong> <a href="https://ukgovernmentbeis.github.io/inspect_ai/solvers.html">Solver</a></p></li>
<li><p>Functions that manipulate the <a href="https://ukgovernmentbeis.github.io/inspect_ai/solvers.html#task-states"><code>TaskState</code></a> (message history and model output) to perform actions like:</p>
<ul>
<li>Calling the model to generate text.</li>
<li>Engineering prompts.</li>
<li>Applying critique mechanisms.</li>
</ul></li>
<li><p><a href="https://ukgovernmentbeis.github.io/inspect_ai/solvers.html#built-in-solvers"><strong>Built-In Solvers</strong></a><strong>:</strong></p>
<ul>
<li><code>generate()</code>: Calls the model, appends the assistant message, and updates the model output</li>
<li><code>chain_of_thought()</code>: Basic chain-of-thought implementation.</li>
<li><code>prompt_template()</code>: Modifies the existing prompt by passing it through a template</li>
<li><code>multiple_choice()</code>: Handles multiple-choice questions, including shuffling options, calling the model, and unshuffling to determine the chosen answer.</li>
<li><code>self_critique()</code>
<ul>
<li>Performs self-critique by:
<ol type="1">
<li>Running a critique model on the initial output.</li>
<li>Appending the critique to the message history.</li>
<li>Calling the model again to generate a revised answer.</li>
</ol></li>
</ul></li>
</ul></li>
</ul>
<section id="solver-prompt_with_schema" class="level4">
<h4 class="anchored" data-anchor-id="solver-prompt_with_schema">Solver: <code>prompt_with_schema()</code></h4>
<ul>
<li>Simple prompt template that substitutes the user query and the RAG-generated column schema.</li>
</ul>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> inspect_ai.solver <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> solver</span>
<span id="cb3-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> inspect_ai.util <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> resource</span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@solver</span></span>
<span id="cb3-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> prompt_with_schema():</span>
<span id="cb3-6"></span>
<span id="cb3-7">    prompt_template <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> resource(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"prompt.txt"</span>)</span>
<span id="cb3-8"></span>
<span id="cb3-9">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">async</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> solve(state, generate):</span>
<span id="cb3-10">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># build the prompt</span></span>
<span id="cb3-11">        state.user_prompt.text <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> prompt_template.replace(</span>
<span id="cb3-12">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">prompt</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, state.user_prompt.text</span>
<span id="cb3-13">        ).replace(</span>
<span id="cb3-14">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">columns</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, state.metadata[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"columns"</span>]</span>
<span id="cb3-15">        )</span>
<span id="cb3-16">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> state</span>
<span id="cb3-17"></span>
<span id="cb3-18">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> solve</span></code></pre></div>
</section>
</section>
<section id="scorer" class="level3">
<h3 class="anchored" data-anchor-id="scorer">Scorer</h3>
<ul>
<li><strong>Documentation:</strong> <a href="https://ukgovernmentbeis.github.io/inspect_ai/scorers.html">Scorer</a>
<ul>
<li>Evaluates whether solvers were successful in finding the right <code>output</code> for the <code>target</code> defined in the dataset, and in what measure</li>
<li>Pluggable (i.e.&nbsp;provided from other packages)</li>
</ul></li>
<li><strong><a href="https://ukgovernmentbeis.github.io/inspect_ai/scorers.html#built-in-scorers">Built-In Scorers</a>:</strong>
<ul>
<li>Pattern matching</li>
<li>Template matching</li>
<li>Model grading</li>
<li>Human scoring</li>
</ul></li>
<li><strong>Example: Math Benchmark with Expression Equivalence</strong>
<ul>
<li><strong>Source Code:</strong> <a href="https://github.com/jjallaire/inspect-llm-workshop/blob/main/benchmarks/mathematics.py">benchmarks/mathematics.py</a></li>
<li>Uses a custom scorer <code>expression_equivalance</code> to evaluate mathematical expressions for logical equivalence, accounting for variations in formatting or simplification.</li>
<li><strong>Scorer: <a href="https://github.com/jjallaire/inspect-llm-workshop/blob/86d00ca6d79b4754266ba36c10be6d5a108a1695/benchmarks/mathematics.py#L56C5-L56C27"><code>expression_equivalance()</code></a></strong>
<ul>
<li>Extracts the model’s answer using regular expressions.</li>
<li>Employs a few-shot prompting technique to train a model for assessing the equivalence of mathematical expressions.</li>
<li><div class="callout callout-style-default callout-note callout-titled" title="Code">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@scorer</span>(metrics<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[accuracy(), bootstrap_std()])</span>
<span id="cb4-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> expression_equivalance():</span>
<span id="cb4-3">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">async</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> score(state: TaskState, target: Target):</span>
<span id="cb4-4">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># extract answer</span></span>
<span id="cb4-5">        match <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> re.search(AnswerPattern.LINE, state.output.completion)</span>
<span id="cb4-6">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> match:</span>
<span id="cb4-7">            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ask the model to judge equivalance</span></span>
<span id="cb4-8">            answer <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> match.group(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb4-9">            prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> EQUIVALANCE_TEMPLATE <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span> (</span>
<span id="cb4-10">                {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"expression1"</span>: target.text, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"expression2"</span>: answer}</span>
<span id="cb4-11">            )</span>
<span id="cb4-12">            result <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">await</span> get_model().generate(prompt)</span>
<span id="cb4-13"></span>
<span id="cb4-14">            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># return the score</span></span>
<span id="cb4-15">            correct <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> result.completion.lower() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yes"</span></span>
<span id="cb4-16">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> Score(</span>
<span id="cb4-17">                value<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>CORRECT <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> correct <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> INCORRECT,</span>
<span id="cb4-18">                answer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>answer,</span>
<span id="cb4-19">                explanation<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>state.output.completion,</span>
<span id="cb4-20">            )</span>
<span id="cb4-21">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span>:</span>
<span id="cb4-22">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> Score(</span>
<span id="cb4-23">                value<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>INCORRECT,</span>
<span id="cb4-24">                explanation<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Answer not found in model output: "</span></span>
<span id="cb4-25">                <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>state<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>output<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>completion<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb4-26">            )</span>
<span id="cb4-27"></span>
<span id="cb4-28">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> score</span></code></pre></div>
</div>
</div>
</div></li>
</ul></li>
</ul></li>
</ul>
<section id="scorer-validate_scorer" class="level4">
<h4 class="anchored" data-anchor-id="scorer-validate_scorer">Scorer: <code>validate_scorer()</code></h4>
<ul>
<li>Extracts and cleans JSON output from the model.</li>
<li>Calls the <code>is_valid()</code> function with the column schema to determine if a valid query was generated.</li>
</ul>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> inspect_ai.scorer <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> accuracy, scorer, Score, CORRECT, INCORRECT</span>
<span id="cb5-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> utils <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> is_valid, json_completion</span>
<span id="cb5-3"></span>
<span id="cb5-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@scorer</span>(metrics<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[accuracy()])</span>
<span id="cb5-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> validate_scorer():</span>
<span id="cb5-6"></span>
<span id="cb5-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">async</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> score(state, target):</span>
<span id="cb5-8">       </span>
<span id="cb5-9">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># check for valid query</span></span>
<span id="cb5-10">        query <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> json_completion(state.output.completion)</span>
<span id="cb5-11">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> is_valid(query, state.metadata[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"columns"</span>]):</span>
<span id="cb5-12">            value<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>CORRECT</span>
<span id="cb5-13">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span>: </span>
<span id="cb5-14">            value<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>INCORRECT</span>
<span id="cb5-15">       </span>
<span id="cb5-16">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># return score w/ query that was extracted</span></span>
<span id="cb5-17">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> Score(value<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>value, answer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>query)</span>
<span id="cb5-18"></span>
<span id="cb5-19">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> score</span></code></pre></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>The <a href="https://github.com/jjallaire/inspect-llm-workshop/blob/86d00ca6d79b4754266ba36c10be6d5a108a1695/honeycomb/utils.py#L7"><code>json_completion()</code></a> function takes care of some details around extracting JSON from a model completion (e.g.&nbsp;removing sorrounding backtick code block emitted by some models)</li>
</ul>
</div>
</div>
</section>
</section>
<section id="validate-task" class="level3">
<h3 class="anchored" data-anchor-id="validate-task">Validate Task</h3>
<ul>
<li><a href="https://github.com/UKGovernmentBEIS/inspect_ai/blob/53fe15a44d83400ad2847cb2f917ac282cba126d/src/inspect_ai/_eval/task/task.py#L17"><code>Task</code></a>:
<ul>
<li>The basis for defining and running evaluations</li>
<li>Parameterized with a dataset, a scorer, and metrics.</li>
<li>May optionally provide a default plan for execution.</li>
</ul></li>
</ul>
<section id="honeycomb-eval-validate" class="level4">
<h4 class="anchored" data-anchor-id="honeycomb-eval-validate">Honeycomb Eval: <code>validate()</code></h4>
<ul>
<li>Combines the dataset, solver, and scorer defined above into a <code>Task</code>.</li>
<li>Uses a predefined system message and prompt template.</li>
</ul>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> inspect_ai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">eval</span>, task, Task</span>
<span id="cb6-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> inspect_ai.solver <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> system_message, generate</span>
<span id="cb6-3"></span>
<span id="cb6-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@task</span></span>
<span id="cb6-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> validate():</span>
<span id="cb6-6">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> Task(</span>
<span id="cb6-7">        dataset<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>dataset,</span>
<span id="cb6-8">        plan<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb6-9">            system_message(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Honeycomb AI suggests queries based on user input."</span>),</span>
<span id="cb6-10">            prompt_with_schema(),</span>
<span id="cb6-11">            generate()</span>
<span id="cb6-12">        ],</span>
<span id="cb6-13">        scorer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>validate_scorer()</span>
<span id="cb6-14">    )</span></code></pre></div>
<ul>
<li>Run the <code>Task</code> using Inspect’s <code>eval()</code> function (limiting to 100 samples):</li>
</ul>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">__name__</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'__main__'</span>:</span>
<span id="cb7-2">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">eval</span>(validate, model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-4-turbo"</span>, limit<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>)</span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-004/images/validate-task-1.png" class="img-fluid figure-img"></p>
<figcaption>validate-task-1</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>The <code>__name__ == '__main__'</code> conditional indicates that we only want to run this cell in interactive contexts.
<ul>
<li>Allows us to also use the notebook as a module callable from <code>inspect eval</code>:</li>
<li><div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> inspect eval queries.ipynb@validate</span></code></pre></div></li>
</ul></li>
</ul>
</div>
</div>
</section>
</section>
<section id="eval-view" class="level3">
<h3 class="anchored" data-anchor-id="eval-view">Eval View</h3>
<ul>
<li><div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb9-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">inspect</span> view</span></code></pre></div>
<ul>
<li><div class="callout callout-style-default callout-note callout-titled" title="Example">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example
</div>
</div>
<div class="callout-body-container callout-body">
<pre class="text"><code>$ inspect view
Inspect view running at http://localhost:7575/</code></pre>
</div>
</div></li>
</ul></li>
<li><p>Provides an overview of evaluation results.</p></li>
<li><p>Allows drilling down into individual samples to examine message history, inputs, and model outputs for debugging.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-004/images/inspect-view-validate-task.png" class="img-fluid figure-img"></p>
<figcaption>inspect-view-validate-task</figcaption>
</figure>
</div>
</section>
<section id="critique-task" class="level3">
<h3 class="anchored" data-anchor-id="critique-task">Critique Task</h3>
<ul>
<li><strong>Documentation:</strong> <a href="https://ukgovernmentbeis.github.io/inspect_ai/models.html">Models</a></li>
</ul>
<section id="scorer-critique_scorer" class="level4">
<h4 class="anchored" data-anchor-id="scorer-critique_scorer">Scorer: <code>critique_scorer()</code></h4>
<ul>
<li>Allows using different models (e.g., GPT-4 Turbo) to critique the generated queries.</li>
<li>Builds a critique prompt using a predefined template and the model’s output to have the critique model indicate whether the generated query is “good” or “bad”.</li>
<li>Returns a score based on the critique model’s assessment.</li>
</ul>
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> json</span>
<span id="cb11-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> inspect_ai.model <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> get_model</span>
<span id="cb11-3"></span>
<span id="cb11-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@scorer</span>(metrics<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[accuracy()])</span>
<span id="cb11-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> critique_scorer(model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"anthropic/claude-3-5-sonnet-20240620"</span>):</span>
<span id="cb11-6"></span>
<span id="cb11-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">async</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> score(state, target):</span>
<span id="cb11-8">       </span>
<span id="cb11-9">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># build the critic prompt</span></span>
<span id="cb11-10">        query <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> state.output.completion.strip()</span>
<span id="cb11-11">        critic_prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> resource(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"critique.txt"</span>).replace(</span>
<span id="cb11-12">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">prompt</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, state.user_prompt.text</span>
<span id="cb11-13">        ).replace(</span>
<span id="cb11-14">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">columns</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, state.metadata[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"columns"</span>]</span>
<span id="cb11-15">        ).replace(</span>
<span id="cb11-16">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">query</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, query</span>
<span id="cb11-17">        )</span>
<span id="cb11-18">       </span>
<span id="cb11-19">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># run the critique</span></span>
<span id="cb11-20">        result <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">await</span> get_model(model).generate(critic_prompt)</span>
<span id="cb11-21">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">try</span>:</span>
<span id="cb11-22">            parsed <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> json.loads(json_completion(result.completion))</span>
<span id="cb11-23">            value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> CORRECT <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> parsed[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"outcome"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"good"</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> INCORRECT</span>
<span id="cb11-24">            explanation <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> parsed[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"critique"</span>]</span>
<span id="cb11-25">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">except</span> (json.JSONDecodeError, <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">KeyError</span>):</span>
<span id="cb11-26">            value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> INCORRECT</span>
<span id="cb11-27">            explanation <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"JSON parsing error:</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>result<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>completion<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb11-28">        </span>
<span id="cb11-29">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># return value and explanation (critique text)</span></span>
<span id="cb11-30">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> Score(value<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>value, explanation<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>explanation)</span>
<span id="cb11-31"></span>
<span id="cb11-32">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> score</span></code></pre></div>
</section>
<section id="honeycomb-eval-critique" class="level4">
<h4 class="anchored" data-anchor-id="honeycomb-eval-critique">Honeycomb Eval: <code>critique()</code></h4>
<ul>
<li>Utilizes the same dataset and plan as <code>validate()</code> but employs a critique model for scoring.</li>
</ul>
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@task</span></span>
<span id="cb12-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> critique():</span>
<span id="cb12-3">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> Task(</span>
<span id="cb12-4">        dataset<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>dataset,</span>
<span id="cb12-5">        plan<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb12-6">            system_message(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Honeycomb AI suggests queries based on user input."</span>),</span>
<span id="cb12-7">            prompt_with_schema(),</span>
<span id="cb12-8">            generate()</span>
<span id="cb12-9">        ],</span>
<span id="cb12-10">        scorer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>critique_scorer()</span>
<span id="cb12-11">    )</span></code></pre></div>
<ul>
<li>Run the task using <code>eval()</code> (limiting to 25 samples):</li>
</ul>
<div class="sourceCode" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">__name__</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'__main__'</span>:</span>
<span id="cb13-2">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">eval</span>(critique, model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-4-turbo"</span>, limit<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>)</span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-004/images/critique-task-1.png" class="img-fluid figure-img"></p>
<figcaption>critique-task-1</figcaption>
</figure>
</div>
</section>
</section>
<section id="critique-eval-view" class="level3">
<h3 class="anchored" data-anchor-id="critique-eval-view">Critique Eval View</h3>
<ul>
<li><div class="sourceCode" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb14-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">inspect</span> view</span></code></pre></div></li>
<li>Displays critique-based evaluation results.</li>
<li>Provides insights into the critique model’s explanations for incorrect answers, aiding in prompt or model improvement.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-004/images/inspect-view-critique-task.png" class="img-fluid figure-img"></p>
<figcaption>inspect-view-critique-task</figcaption>
</figure>
</div>
</section>
</section>
<section id="composition" class="level2">
<h2 class="anchored" data-anchor-id="composition">Composition</h2>
<ul>
<li>Inspect AI encourages composing evaluations by combining solvers and scorers from different sources.</li>
<li>Custom solvers and scorers can be made available in a Python package to re-use across many evals.</li>
</ul>
<section id="example-jailbreaking-with-sheppard" class="level3">
<h3 class="anchored" data-anchor-id="example-jailbreaking-with-sheppard">Example: Jailbreaking with <code>sheppard</code></h3>
<ul>
<li><p><code>sheppard</code>: An internal package that integrates jailbreak solvers to elicit responses from models they might otherwise refuse to provide.</p></li>
<li><table class="caption-top table">
<thead>
<tr class="header">
<th>Solver</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>encode()</code></td>
<td><a href="https://arxiv.org/abs/2406.08754v1">Message obfuscation jailbreak</a></td>
</tr>
<tr class="even">
<td><code>pap_jailbreak()</code></td>
<td><a href="https://arxiv.org/abs/2401.06373">Persuasion Adversarial Prompt (PAP)</a></td>
</tr>
<tr class="odd">
<td><code>payload_splitting()</code></td>
<td><a href="https://arxiv.org/abs/2302.05733">Payload splitting jailbreak</a></td>
</tr>
<tr class="even">
<td><code>cr_jailbreak()</code></td>
<td>Content reinforcement</td>
</tr>
</tbody>
</table></li>
<li><div class="callout callout-style-default callout-note callout-titled" title="Example: Using sheppard to provide jailbreaks for a security eval:">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example: Using sheppard to provide jailbreaks for a security eval:
</div>
</div>
<div class="callout-body-container callout-body">
<pre class="text"><code></code></pre>
<div class="sourceCode" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> inspect_ai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Task, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">eval</span>, task</span>
<span id="cb16-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> inspect_ai.scorer <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> model_graded_fact</span>
<span id="cb16-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> inspect_ai.solver <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> generate, system_message</span>
<span id="cb16-4"></span>
<span id="cb16-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> sheppard <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pap_jailbreak</span>
<span id="cb16-6"></span>
<span id="cb16-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@task</span></span>
<span id="cb16-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> security_guide():</span>
<span id="cb16-9">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> Task(</span>
<span id="cb16-10">        dataset<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>example_dataset(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"security_guide"</span>),</span>
<span id="cb16-11">        plan<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb16-12">          system_message(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"system.txt"</span>), </span>
<span id="cb16-13">          pap_jailbreak(),</span>
<span id="cb16-14">          generate()</span>
<span id="cb16-15">        ],</span>
<span id="cb16-16">        scorer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>model_graded_fact(model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-4"</span>),</span>
<span id="cb16-17">    )</span></code></pre></div>
</div>
</div></li>
</ul>
</section>
</section>
<section id="tool-use" class="level2">
<h2 class="anchored" data-anchor-id="tool-use">Tool Use</h2>
<ul>
<li><strong>Documentation:</strong> <a href="https://ukgovernmentbeis.github.io/inspect_ai/tools.html">Tools</a>
<ul>
<li>Python functions that can be made accessible to the model during evaluation.</li>
<li>Allow for more complex interactions, like web search or database lookups.</li>
<li><div class="sourceCode" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">class</span> TaskState:</span>
<span id="cb17-2">      messages: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>[ChatMessage]</span>
<span id="cb17-3">      tools: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>[ToolDef]</span>
<span id="cb17-4">      tool_choice: ToolChoice</span>
<span id="cb17-5">      output: ModelOutput</span>
<span id="cb17-6">      ...</span></code></pre></div></li>
</ul></li>
</ul>
<section id="example-biology-qa-with-web-search" class="level3">
<h3 class="anchored" data-anchor-id="example-biology-qa-with-web-search">Example: Biology QA with Web Search</h3>
<ul>
<li>Provides a web search tool to the model, enabling it to answer obscure biology questions.</li>
<li><div class="sourceCode" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> Task(</span>
<span id="cb18-2">      dataset<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>example_dataset(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"biology_qa"</span>),</span>
<span id="cb18-3">      plan<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb18-4">          use_tools(web_search()), </span>
<span id="cb18-5">          generate()</span>
<span id="cb18-6">      ],</span>
<span id="cb18-7">      scorer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>model_graded_qa(template<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>GRADER_TEMPLATE),</span>
<span id="cb18-8">  )</span></code></pre></div></li>
</ul>
</section>
</section>
<section id="agents-and-tools" class="level2">
<h2 class="anchored" data-anchor-id="agents-and-tools">Agents and Tools</h2>
<ul>
<li><strong>Documentation:</strong> <a href="https://ukgovernmentbeis.github.io/inspect_ai/agents.html">Agents</a>
<ul>
<li>Solvers that use tools to perform tasks.</li>
<li>Can use bespoke agent logic inside a solver (swapping various tools in and out)</li>
<li>Can integrate existing agent libraries like Langchain as solvers.</li>
</ul></li>
</ul>
<section id="agent-capture-the-flag" class="level3">
<h3 class="anchored" data-anchor-id="agent-capture-the-flag">Agent: Capture the Flag</h3>
<ul>
<li>Example of a custom agent designed for cybersecurity evaluations, where the model interacts with tools to solve capture-the-flag challenges within a Docker environment.</li>
<li><div class="sourceCode" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1">  Plan(</span>
<span id="cb19-2">      steps<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb19-3">          init_challenge(),</span>
<span id="cb19-4">          use_tools([</span>
<span id="cb19-5">              command_exec(), create_file(),</span>
<span id="cb19-6">              decompile(), disassemble(),</span>
<span id="cb19-7">              check_flag(),</span>
<span id="cb19-8">          ]),</span>
<span id="cb19-9">          system_message(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"prompts/system.txt"</span>),</span>
<span id="cb19-10">          initial_user_message(),</span>
<span id="cb19-11">          generate(),</span>
<span id="cb19-12">          check_for_flag_or_continue()</span>
<span id="cb19-13">      ],</span>
<span id="cb19-14">      cleanup<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>exit_challenge()</span>
<span id="cb19-15">  )</span></code></pre></div></li>
</ul>
</section>
<section id="agent-langchain" class="level3">
<h3 class="anchored" data-anchor-id="agent-langchain">Agent: LangChain</h3>
<ul>
<li><strong>Project Folder:</strong> <a href="https://github.com/jjallaire/inspect-llm-workshop/tree/main/langchain">inspect-llm-workshop/langchain</a>
<ul>
<li>Uses <a href="https://tavily.com/">tavily</a>, a search engine optimized for LLMs and RAG</li>
</ul></li>
<li>Demonstrates integrating a Langchain agent into Inspect AI using a higher-order function.</li>
<li>Allows leveraging existing agent frameworks within Inspect AI’s evaluation pipeline.</li>
<li><div class="sourceCode" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@solver</span></span>
<span id="cb20-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> wikipedia_search() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> Solver:</span>
<span id="cb20-3"></span>
<span id="cb20-4">    tavily_api <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> TavilySearchAPIWrapper() </span>
<span id="cb20-5">    tools <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ([TavilySearchResults(api_wrapper<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>tavily_api)] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb20-6">        load_tools([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"wikipedia"</span>]))</span>
<span id="cb20-7"></span>
<span id="cb20-8">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">async</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> agent(llm: BaseChatModel, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span>: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">dict</span>[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>, Any]):</span>
<span id="cb20-9">        tools_agent <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> create_openai_tools_agent(llm, tools, prompt)</span>
<span id="cb20-10">        agent_executor <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> AgentExecutor.from_agent_and_tools(</span>
<span id="cb20-11">            agent<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>tools_agent,</span>
<span id="cb20-12">            tools<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>tools</span>
<span id="cb20-13">        )</span>
<span id="cb20-14">        result <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">await</span> agent_executor.ainvoke(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span>)</span>
<span id="cb20-15">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> result[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"output"</span>]</span>
<span id="cb20-16"></span>
<span id="cb20-17">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> langchain_solver(agent)</span></code></pre></div></li>
</ul>
</section>
</section>
<section id="logging" class="level2">
<h2 class="anchored" data-anchor-id="logging">Logging</h2>
<ul>
<li><strong>Documentation:</strong> <a href="https://ukgovernmentbeis.github.io/inspect_ai/eval-logs.html">Eval Logs</a></li>
<li>Logging is crucial for debugging, analysis, and reproducibility.</li>
<li>Capture all context required to debug, analyse, and reproduce evaluations</li>
<li><strong>Inspect AI Logging:</strong>
<ul>
<li>Provides a rich Python API and JSON representation of the evaluation process.</li>
<li>Offers a log viewer for interactive exploration.</li>
<li>Enables programmatic access to logs for analysis and comparison.</li>
</ul></li>
</ul>
<section id="evallog" class="level3">
<h3 class="anchored" data-anchor-id="evallog">EvalLog</h3>
<ul>
<li><p><strong>Documentation:</strong> <a href="https://ukgovernmentbeis.github.io/inspect_ai/eval-logs.html#evallog">EvalLog</a></p></li>
<li><p>Returned from <code>eval()</code></p></li>
<li><p>Provides programmatic interface to the contents of log files</p></li>
<li><table class="caption-top table">
<colgroup>
<col style="width: 9%">
<col style="width: 24%">
<col style="width: 65%">
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>status</code></td>
<td><code>str</code></td>
<td>Status of evaluation</td>
</tr>
<tr class="even">
<td><code>eval</code></td>
<td><code>EvalSpec</code></td>
<td>Top level eval details including task, model, creation time, etc.</td>
</tr>
<tr class="odd">
<td><code>plan</code></td>
<td><code>EvalPlan</code></td>
<td>List of solvers and model generation config used for the eval.</td>
</tr>
<tr class="even">
<td><code>samples</code></td>
<td><code>list[EvalSample]</code></td>
<td>Each sample evaluated, including its input, output, target, and score.</td>
</tr>
<tr class="odd">
<td><code>results</code></td>
<td><code>EvalResults</code></td>
<td>Aggregated scorer results</td>
</tr>
<tr class="even">
<td><code>stats</code></td>
<td><code>EvalStats</code></td>
<td>Model token usage stats</td>
</tr>
<tr class="odd">
<td><code>logging</code></td>
<td><code>list[LoggingMessage]</code></td>
<td>Logging messages (e.g.&nbsp;from <code>log.info()</code>, <code>log.debug()</code>, etc.</td>
</tr>
<tr class="even">
<td><code>error</code></td>
<td><code>EvalError</code></td>
<td>Error information</td>
</tr>
</tbody>
</table></li>
</ul>
</section>
</section>
<section id="models" class="level2">
<h2 class="anchored" data-anchor-id="models">Models</h2>
<ul>
<li><strong>Documentation:</strong> <a href="https://ukgovernmentbeis.github.io/inspect_ai/models.html">Models</a></li>
<li><table class="caption-top table">
<thead>
<tr class="header">
<th>Provider</th>
<th>Model Name</th>
<th>Docs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>OpenAI</td>
<td><code>openai/gpt-3.5-turbo</code></td>
<td><a href="https://platform.openai.com/docs/models/overview">OpenAI Models</a></td>
</tr>
<tr class="even">
<td>Anthropic</td>
<td><code>anthropic/claude-3-sonnet-20240229</code></td>
<td><a href="https://docs.anthropic.com/claude/docs/models-overview">Anthropic Models</a></td>
</tr>
<tr class="odd">
<td>Google</td>
<td><code>google/gemini-1.0-pro</code></td>
<td><a href="https://cloud.google.com/vertex-ai/generative-ai/docs/learn/models">Google Models</a></td>
</tr>
<tr class="even">
<td>Mistral</td>
<td><code>mistral/mistral-large-latest</code></td>
<td><a href="https://docs.mistral.ai/platform/endpoints/">Mistral Models</a></td>
</tr>
<tr class="odd">
<td>Hugging Face</td>
<td><code>hf/openai-community/gpt2</code></td>
<td><a href="https://huggingface.co/models?pipeline_tag=text-generation&amp;sort=trending">Hugging Face Models</a></td>
</tr>
<tr class="even">
<td>Ollama</td>
<td><code>ollama/llama3</code></td>
<td><a href="https://ollama.com/library">Ollama Models</a></td>
</tr>
<tr class="odd">
<td>TogetherAI</td>
<td><code>together/lmsys/vicuna-13b-v1.5</code></td>
<td><a href="https://docs.together.ai/docs/inference-models#chat-models">TogetherAI Models</a></td>
</tr>
<tr class="even">
<td>AWS Bedrock</td>
<td><code>bedrock/meta.llama2-70b-chat-v1</code></td>
<td><a href="https://aws.amazon.com/bedrock/">AWS Bedrock Models</a></td>
</tr>
<tr class="odd">
<td>Azure AI</td>
<td><code>azureai/azure-deployment-name</code></td>
<td><a href="https://ai.azure.com/explore/models">Azure AI Models</a></td>
</tr>
<tr class="even">
<td>Cloudflare</td>
<td><code>cf/meta/llama-2-7b-chat-fp16</code></td>
<td><a href="https://developers.cloudflare.com/workers-ai/models/#text-generation">Cloudflare Models</a></td>
</tr>
</tbody>
</table></li>
<li>Allows custom model providers.</li>
<li>Inspect AI remains agnostic to specific model implementations, allowing flexibility and future compatibility.</li>
</ul>
</section>
<section id="workflow" class="level2">
<h2 class="anchored" data-anchor-id="workflow">Workflow</h2>
<ul>
<li><strong>Documentation:</strong> <a href="https://ukgovernmentbeis.github.io/inspect_ai/workflow.html">Workflow</a></li>
</ul>
<section id="interactive-development" class="level3">
<h3 class="anchored" data-anchor-id="interactive-development">Interactive Development:</h3>
<ul>
<li>Designed for iterative development within notebooks.</li>
<li>Provides tools for exploration, such as grid search over parameters.</li>
<li><div class="callout callout-style-default callout-note callout-titled" title="Ad-hoc exploration of an eval in a Notebook/REPL">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Ad-hoc exploration of an eval in a Notebook/REPL
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1">params <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb21-2">   <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"system"</span>: [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"devops.txt"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"researcher.txt"</span>],</span>
<span id="cb21-3">   <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"grader"</span>: [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hacker.txt"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"expert.txt"</span>],</span>
<span id="cb21-4">   <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"grader_model"</span>: [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-4"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"google/gemini-1.0-pro"</span>]</span>
<span id="cb21-5">}</span>
<span id="cb21-6">params <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>(product(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>(params[name] <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> name <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> params)))</span>
<span id="cb21-7"></span>
<span id="cb21-8">tasks <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [Task(</span>
<span id="cb21-9">    dataset<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>json_dataset(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"security_guide.jsonl"</span>),</span>
<span id="cb21-10">    plan<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[system_message(system), generate()],</span>
<span id="cb21-11">    scorer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>model_graded_fact(template<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>grader, model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>grader_model)</span>
<span id="cb21-12">) <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> system, grader, grader_model <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> params]</span>
<span id="cb21-13"></span>
<span id="cb21-14">logs <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">eval</span>(tasks, model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mistral/mistral-large-latest"</span>)</span>
<span id="cb21-15">plot_results(logs)</span></code></pre></div>
</div>
</div></li>
</ul>
</section>
<section id="task-parameters" class="level3">
<h3 class="anchored" data-anchor-id="task-parameters">Task Parameters:</h3>
<ul>
<li>Allows defining tasks with configurable parameters.</li>
<li>Enables running evaluations with varying settings from external scripts or notebooks.</li>
<li><div class="callout callout-style-default callout-note callout-titled" title="Formalise variation with a parameterised @task function:">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Formalise variation with a parameterised <span class="citation" data-cites="task">@task</span> function:
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@task</span></span>
<span id="cb22-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> security_guide(system<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"devops.txt"</span>, grader<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"expert.txt"</span>):</span>
<span id="cb22-3">   <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> Task(</span>
<span id="cb22-4">      dataset <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> json_dataset(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"security_guide.jsonl"</span>),</span>
<span id="cb22-5">      plan<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[system_message(system), generate()],</span>
<span id="cb22-6">      scorer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>model_graded_fact(template<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>grader, model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-4"</span>)</span>
<span id="cb22-7">   )</span>
<span id="cb22-8"></span>
<span id="cb22-9">params <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb22-10">   <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"system"</span>: [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"devops.txt"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"researcher.txt"</span>],</span>
<span id="cb22-11">   <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"grader"</span>: [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hacker.txt"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"expert.txt"</span>]</span>
<span id="cb22-12">}</span>
<span id="cb22-13">params <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>(product(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>(params[name] <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> name <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> params)))</span>
<span id="cb22-14"></span>
<span id="cb22-15"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">eval</span>([security_guide(system,grader) <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> system, grader <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> params],</span>
<span id="cb22-16">     model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mistral/mistral-large-latest"</span>)</span></code></pre></div>
</div>
</div></li>
<li><code>@task</code> functions are registered and addressable by external driver programs (step one in development =&gt; production)
<ul>
<li><div class="callout callout-style-default callout-note callout-titled" title="Example">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@task</span></span>
<span id="cb23-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> security_guide(system<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"devops.txt"</span>, grader<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"expert.txt"</span>):</span>
<span id="cb23-3">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> Task(</span>
<span id="cb23-4">        dataset <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> json_dataset(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"security_guide.jsonl"</span>),</span>
<span id="cb23-5">        plan<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[system_message(system), generate()],</span>
<span id="cb23-6">        scorer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>model_graded_fact(</span>
<span id="cb23-7">            template<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>grader, </span>
<span id="cb23-8">            model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-4"</span></span>
<span id="cb23-9">        )</span>
<span id="cb23-10">    )</span></code></pre></div>
<div class="sourceCode" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> inspect eval security_guide.py <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-T</span> system=devops.txt </span>
<span id="cb24-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> inspect eval security_guide.py <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-T</span> grader=hacker.txt </span></code></pre></div>
<div class="sourceCode" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> inspect eval security_guide.ipynb <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-T</span> system=devops.txt </span>
<span id="cb25-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> inspect eval security_guide.ipynb <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-T</span> grader=hacker.txt </span></code></pre></div>
</div>
</div></li>
<li><div class="callout callout-style-default callout-note callout-titled" title="Example">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> security_guide(system, grader<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"expert.txt"</span>):</span>
<span id="cb26-2">   <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> Task(</span>
<span id="cb26-3">      dataset <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> json_dataset(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"security_guide.jsonl"</span>),</span>
<span id="cb26-4">      plan<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[system_message(system), generate()],</span>
<span id="cb26-5">      scorer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>model_graded_fact(template<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>grader, model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-4"</span>)</span>
<span id="cb26-6">   )</span>
<span id="cb26-7"></span>
<span id="cb26-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@task</span></span>
<span id="cb26-9"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> devops()</span>
<span id="cb26-10">   <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> security_guide(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"devops.txt"</span>)</span>
<span id="cb26-11"></span>
<span id="cb26-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@task</span></span>
<span id="cb26-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> researcher()</span>
<span id="cb26-14">   <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> security_guide(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"researcher.txt"</span>)</span></code></pre></div>
<div class="sourceCode" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> inspect eval security_guide.py@devops</span>
<span id="cb27-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> inspect eval security_guide.py@researcher</span></code></pre></div>
</div>
</div></li>
</ul></li>
</ul>
</section>
<section id="eval-suites" class="level3">
<h3 class="anchored" data-anchor-id="eval-suites">Eval Suites:</h3>
<ul>
<li><strong>Documentation:</strong> <a href="https://ukgovernmentbeis.github.io/inspect_ai/eval-suites.html">Eval Suites</a></li>
<li>Supports organizing and running multiple evaluations as suites.</li>
</ul>
</section>
<section id="resiliency" class="level3">
<h3 class="anchored" data-anchor-id="resiliency">Resiliency:</h3>
<ul>
<li>Encourages running evaluations in production environments (e.g., CI) with features like log storage and retry mechanisms.</li>
<li><div class="callout callout-style-default callout-note callout-titled" title="Simplified Example">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Simplified Example
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># setup log context</span></span>
<span id="cb28-2">os.environ[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"INSPECT_LOG_DIR"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"./security-suite_04-07-2024"</span></span>
<span id="cb28-3"></span>
<span id="cb28-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># run the eval suite</span></span>
<span id="cb28-5">tasks <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> list_tasks(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"security"</span>)</span>
<span id="cb28-6"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">eval</span>(tasks, model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mistral/mistral-large-latest"</span>)</span>
<span id="cb28-7"></span>
<span id="cb28-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ...later, in another process that also has INSPECT_LOG_DIR</span></span>
<span id="cb28-9">error_logs <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> list_eval_logs(status <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"error"</span>)</span>
<span id="cb28-10">eval_retry(error_logs)</span></code></pre></div>
</div>
</div></li>
</ul>
</section>
<section id="provenance" class="level3">
<h3 class="anchored" data-anchor-id="provenance">Provenance:</h3>
<ul>
<li>Ensures reproducibility by storing Git repository information within the log file.</li>
<li>Allows recreating the evaluation environment and parameters from the log.</li>
<li><div class="callout callout-style-default callout-note callout-titled" title="Example">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># read the log and extract the origin and commit</span></span>
<span id="cb29-2">log <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> read_eval_log(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"security-log.json"</span>)</span>
<span id="cb29-3">origin <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> log.spec.revision.origin</span>
<span id="cb29-4">commit <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> log.spec.revision.commit</span>
<span id="cb29-5"></span>
<span id="cb29-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># clone the repo, checkout the commit, install deps, and run</span></span>
<span id="cb29-7">run([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"git"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"clone"</span>, revision.origin, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"eval-dir"</span>])</span>
<span id="cb29-8"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> chdir(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"eval-dir"</span>):</span>
<span id="cb29-9">   run([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"git"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"checkout"</span>, revision.commit])</span>
<span id="cb29-10">   run([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pip"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"install"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-r"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"requirements.txt"</span>])</span>
<span id="cb29-11">   <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">eval</span>(log) </span></code></pre></div>
</div>
</div></li>
</ul>
</section>
</section>
<section id="qa-session" class="level2">
<h2 class="anchored" data-anchor-id="qa-session">Q&amp;A Session</h2>
<ul>
<li><strong>Integration with Posit Products:</strong> Inspect AI is not a Posit project and currently has no plans for integration.</li>
<li><strong>Evaluating Past LLM Interactions:</strong> Inspect AI can evaluate past interactions by using message history as input.</li>
<li><strong>Expanding Evaluation Metrics:</strong> The Inspect AI team plans to expand the list of built-in metrics based on community needs.</li>
<li><strong>Future Development and Direction:</strong> Long-term development is prioritized, with a focus on community collaboration and supporting a wide range of evaluation scenarios.</li>
<li><strong>Log Sources Beyond Files:</strong> Currently, logs are primarily file-based, but future development may include database logging capabilities.</li>
<li><strong>Shareable Security Tests:</strong> The Inspect AI team anticipates the creation and sharing of security test suites within the community.</li>
<li><strong>Integration with Weights &amp; Biases:</strong> Integration with Weights &amp; Biases is planned to streamline metric tracking and visualization.</li>
<li><strong>Design Philosophy:</strong> Inspired by principles of cleanliness, simplicity, and composability.</li>
</ul>


</section>

 ]]></description>
  <category>notes</category>
  <category>llms</category>
  <guid>https://christianjmills.com/posts/mastering-llms-course-notes/conference-talk-004/</guid>
  <pubDate>Sat, 06 Jul 2024 07:00:00 GMT</pubDate>
  <media:content url="https://christianjmills.com/images/empty.gif" medium="image" type="image/gif"/>
</item>
</channel>
</rss>
